var Wa=Object.defineProperty;var bo=e=>{throw TypeError(e)};var Ka=(e,t,n)=>t in e?Wa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _o=(e,t,n)=>Ka(e,typeof t!="symbol"?t+"":t,n),qi=(e,t,n)=>t.has(e)||bo("Cannot "+n);var Et=(e,t,n)=>(qi(e,t,"read from private field"),n?n.call(e):t.get(e)),En=(e,t,n)=>t.has(e)?bo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Gi=(e,t,n,i)=>(qi(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),ko=(e,t,n)=>(qi(e,t,"access private method"),n);import{a as U,t as ge,b as Mn,n as Ye,c as st}from"../chunks/disclose-version.CqnJ6Kcu.js";import"../chunks/legacy.Cil2XBy3.js";import{h as tt,A as ji,v as Ua,a as Za,a8 as qa,O as zs,Y as Ds,ac as Ga,ad as Eo,U as $i,z as Sn,av as ri,a9 as Ls,_ as Hs,aa as ja,I as Rs,x as ui,aw as Fr,ax as So,ay as Yr,az as $a,H as Ja,aA as Qa,aB as ec,aC as Fs,w as tc,V as nc,M as Ys,aD as ic,E as rc,a2 as Co,aE as oc,R as sc,ae as ht,d as Br,af as Bs,f as Y,s as lc,aF as ac,a7 as Ao,aG as cc,ab as uc,aH as dc,aI as fc,as as hc,n as Cn,aJ as gc,J as No,K as Mo,aK as pc,p as ue,aL as In,aM as q,g as f,aN as Ke,m as ae,o as se,t as xe,l as de,aO as V,B as F,ar as ne,k as Ne,q as ie,aP as Ut,aQ as di,i as To,aR as ct,aS as mc}from"../chunks/runtime.BzI6qX-b.js";import{p,l as De,i as Se,o as Yt,d as Di,b as Vr,e as Vs,c as Xs,s as on,_ as vc}from"../chunks/preload-helper.DSz75XK5.js";import{s as je,a as yc}from"../chunks/slot.DATaRYPb.js";import{i as xc,d as wc,e as bc,f as _c,n as kc,g as Ec,j as Sc,l as Cc,s as Be,k as he,b as X,a as xt,o as fi,p as Ac,r as Ws}from"../chunks/store.BCVciLXF.js";import{i as fe}from"../chunks/lifecycle.DvD_zyYs.js";import{g as R,w as Q,r as dt,d as cn}from"../chunks/index.D6ECNynF.js";const Nc=!0;function Po(e,t){return t}function Mc(e,t,n,i){for(var r=[],s=t.length,o=0;o<s;o++)$a(t[o].e,r,!0);var l=s>0&&r.length===0&&n!==null;if(l){var a=n.parentNode;Ja(a),a.append(n),i.clear(),It(e,t[0].prev,t[s-1].next)}Qa(r,()=>{for(var u=0;u<s;u++){var c=t[u];l||(i.delete(c.k),It(e,c.prev,c.next)),ec(c.e,!l)}})}function gn(e,t,n,i,r,s=null){var o=e,l={flags:t,items:new Map,first:null},a=(t&Fs)!==0;if(a){var u=e;o=tt?ji(tc(u)):u.appendChild(Ua())}tt&&Za();var c=null,h=!1;qa(()=>{var d=n(),g=zs(d)?d:d==null?[]:Ds(d),m=g.length;if(h&&m===0)return;h=m===0;let w=!1;if(tt){var y=o.data===Ga;y!==(m===0)&&(o=Eo(),ji(o),$i(!1),w=!0)}if(tt){for(var k=null,v,S=0;S<m;S++){if(Sn.nodeType===8&&Sn.data===nc){o=Sn,w=!0,$i(!1);break}var b=g[S],E=i(b,S);v=Ks(Sn,l,k,null,b,E,S,r,t),l.items.set(E,v),k=v}m>0&&ji(Eo())}if(!tt){var C=Ys;Tc(g,l,o,r,t,(C.f&ri)!==0,i)}s!==null&&(m===0?c?Ls(c):c=Hs(()=>s(o)):c!==null&&ja(c,()=>{c=null})),w&&$i(!0),n()}),tt&&(o=Sn)}function Tc(e,t,n,i,r,s,o){var x,O,_,A;var l=(r&ic)!==0,a=(r&(Fr|Yr))!==0,u=e.length,c=t.items,h=t.first,d=h,g,m=null,w,y=[],k=[],v,S,b,E;if(l)for(E=0;E<u;E+=1)v=e[E],S=o(v,E),b=c.get(S),b!==void 0&&((x=b.a)==null||x.measure(),(w??(w=new Set)).add(b));for(E=0;E<u;E+=1){if(v=e[E],S=o(v,E),b=c.get(S),b===void 0){var C=d?d.e.nodes_start:n;m=Ks(C,t,m,m===null?t.first:m.next,v,S,E,i,r),c.set(S,m),y=[],k=[],d=m.next;continue}if(a&&Pc(b,v,E,r),b.e.f&ri&&(Ls(b.e),l&&((O=b.a)==null||O.unfix(),(w??(w=new Set)).delete(b))),b!==d){if(g!==void 0&&g.has(b)){if(y.length<k.length){var N=k[0],D;m=N.prev;var H=y[0],M=y[y.length-1];for(D=0;D<y.length;D+=1)Io(y[D],N,n);for(D=0;D<k.length;D+=1)g.delete(k[D]);It(t,H.prev,M.next),It(t,m,H),It(t,M,N),d=N,m=M,E-=1,y=[],k=[]}else g.delete(b),Io(b,d,n),It(t,b.prev,b.next),It(t,b,m===null?t.first:m.next),It(t,m,b),m=b;continue}for(y=[],k=[];d!==null&&d.k!==S;)(s||!(d.e.f&ri))&&(g??(g=new Set)).add(d),k.push(d),d=d.next;if(d===null)continue;b=d}y.push(b),m=b,d=b.next}if(d!==null||g!==void 0){for(var T=g===void 0?[]:Ds(g);d!==null;)(s||!(d.e.f&ri))&&T.push(d),d=d.next;var I=T.length;if(I>0){var P=r&Fs&&u===0?n:null;if(l){for(E=0;E<I;E+=1)(_=T[E].a)==null||_.measure();for(E=0;E<I;E+=1)(A=T[E].a)==null||A.fix()}Mc(t,T,P,c)}}l&&Rs(()=>{var z;if(w!==void 0)for(b of w)(z=b.a)==null||z.apply()}),ui.first=t.first&&t.first.e,ui.last=m&&m.e}function Pc(e,t,n,i){i&Fr&&So(e.v,t),i&Yr?So(e.i,n):e.i=n}function Ks(e,t,n,i,r,s,o,l,a){var u=(a&Fr)!==0,c=(a&oc)===0,h=u?c?rc(r):Co(r):r,d=a&Yr?Co(o):o,g={i:d,v:h,k:s,a:null,e:null,prev:n,next:i};try{return g.e=Hs(()=>l(e,h,d),tt),g.e.prev=n&&n.e,g.e.next=i&&i.e,n===null?t.first=g:(n.next=g,n.e.next=g.e),i!==null&&(i.prev=g,i.e.prev=g.e),g}finally{}}function Io(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==i;){var o=sc(s);r.before(s),s=o}}function It(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ge(e,t,n){ht(()=>{var i=Br(()=>t(e,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var r=!1,s={};Bs(()=>{var o=n();Y(o),r&&lc(s,o)&&(s=o,i.update(o))}),r=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function J(e,t,n,i){var r=e.__attributes??(e.__attributes={});tt&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||r[t]!==(r[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[ac]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Us(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Xr(e,t,n,i,r=!1,s=!1,o=!1){var l=t||{},a=e.tagName==="OPTION";for(var u in t)u in n||(n[u]=null);i!==void 0&&(n.class=n.class?n.class+" "+i:i);var c=Us(e),h=e.__attributes??(e.__attributes={});for(const y in n){let k=n[y];if(a&&y==="value"&&k==null){e.value=e.__value="",l[y]=k;continue}var d=l[y];if(k!==d){l[y]=k;var g=y[0]+y[1];if(g!=="$$"){if(g==="on"){const v={},S="$$"+y;let b=y.slice(2);var m=Ec(b);if(xc(b)&&(b=b.slice(0,-7),v.capture=!0),!m&&d){if(k!=null)continue;e.removeEventListener(b,l[S],v),l[S]=null}if(k!=null)if(m)e[`__${b}`]=k,bc([b]);else{let E=function(C){l[y].call(this,C)};l[S]=wc(b,e,E,v)}}else if(y==="style"&&k!=null)e.style.cssText=k+"";else if(y==="autofocus")_c(e,!!k);else if(y==="__value"||y==="value"&&k!=null)e.value=e[y]=e.__value=k;else{var w=y;r||(w=kc(w)),k==null&&!s?(h[y]=null,e.removeAttribute(y)):c.includes(w)&&(s||typeof k!="string")?e[w]=k:typeof k!="function"&&(tt&&(w==="src"||w==="href"||w==="srcset")||J(e,w,k))}y==="style"&&"__styles"in e&&(e.__styles={})}}}return l}var Oo=new Map;function Us(e){var t=Oo.get(e.nodeName);if(t)return t;Oo.set(e.nodeName,t=[]);for(var n,i=Ao(e),r=Element.prototype;r!==i;){n=cc(i);for(var s in n)n[s].set&&t.push(s);i=Ao(i)}return t}function Qt(e,t){var n=e.__className,i=qs(t);tt&&e.getAttribute("class")===i?e.__className=i:(n!==i||tt&&e.getAttribute("class")!==i)&&(i===""?e.removeAttribute("class"):e.setAttribute("class",i),e.__className=i)}function Zs(e,t){var n=e.__className,i=qs(t);tt&&e.className===i?e.__className=i:(n!==i||tt&&e.className!==i)&&(t==null?e.removeAttribute("class"):e.className=i,e.__className=i)}function qs(e){return e??""}function Oe(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function ze(e,t,n,i){var r=e.__styles??(e.__styles={});r[t]!==n&&(r[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}const Ic=()=>performance.now(),Dt={tick:e=>requestAnimationFrame(e),now:()=>Ic(),tasks:new Set};function Gs(e){Dt.tasks.forEach(t=>{t.c(e)||(Dt.tasks.delete(t),t.f())}),Dt.tasks.size!==0&&Dt.tick(Gs)}function Oc(e){let t;return Dt.tasks.size===0&&Dt.tick(Gs),{promise:new Promise(n=>{Dt.tasks.add(t={c:e,f:n})}),abort(){Dt.tasks.delete(t)}}}function qn(e,t){e.dispatchEvent(new CustomEvent(t))}function zc(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function zo(e){const t={},n=e.split(";");for(const i of n){const[r,s]=i.split(":");if(!r||s===void 0)break;const o=zc(r.trim());t[o]=s.trim()}return t}const Dc=e=>e;function js(e,t,n,i){var r=(e&gc)!==0,s="both",o,l=t.inert,a,u;function c(){var w=Ys,y=ui;No(null),Mo(null);try{return o??(o=n()(t,(i==null?void 0:i())??{},{direction:s}))}finally{No(w),Mo(y)}}var h={is_global:r,in(){t.inert=l,qn(t,"introstart"),a=pr(t,c(),u,1,()=>{qn(t,"introend"),a==null||a.abort(),a=o=void 0})},out(w){t.inert=!0,qn(t,"outrostart"),u=pr(t,c(),a,0,()=>{qn(t,"outroend"),w==null||w()})},stop:()=>{a==null||a.abort(),u==null||u.abort()}},d=ui;if((d.transitions??(d.transitions=[])).push(h),Sc){var g=r;if(!g){for(var m=d.parent;m&&m.f&uc;)for(;(m=m.parent)&&!(m.f&dc););g=!m||(m.f&fc)!==0}g&&ht(()=>{Br(()=>h.in())})}}function pr(e,t,n,i,r){var s=i===1;if(hc(t)){var o,l=!1;return Rs(()=>{if(!l){var y=t({direction:s?"in":"out"});o=pr(e,y,n,i,r)}}),{abort:()=>{l=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return r(),{abort:Cn,deactivate:Cn,reset:Cn,t:()=>i};const{delay:a=0,css:u,tick:c,easing:h=Dc}=t;var d=[];if(s&&n===void 0&&(c&&c(0,1),u)){var g=zo(u(0,1));d.push(g,g)}var m=()=>1-i,w=e.animate(d,{duration:a});return w.onfinish=()=>{var y=(n==null?void 0:n.t())??1-i;n==null||n.abort();var k=i-y,v=t.duration*Math.abs(k),S=[];if(v>0){if(u)for(var b=Math.ceil(v/16.666666666666668),E=0;E<=b;E+=1){var C=y+k*h(E/b),N=u(C,1-C);S.push(zo(N))}m=()=>{var D=w.currentTime;return y+k*h(D/v)},c&&Oc(()=>{if(w.playState!=="running")return!1;var D=m();return c(D,1-D),!0})}w=e.animate(S,{duration:v,fill:"forwards"}),w.onfinish=()=>{m=()=>i,c==null||c(i,1-i),r()}},{abort:()=>{w&&(w.cancel(),w.effect=null,w.onfinish=Cn)},deactivate:()=>{r=Cn},reset:()=>{i===0&&(c==null||c(1,0))},t:()=>m()}}function $s(e,t,n=t){var i=pc();Cc(e,"input",()=>{var r=Ji(e)?Qi(e.value):e.value;n(r),i&&r!==(r=t())&&(e.value=r??"")}),Bs(()=>{var r=t();if(tt&&e.defaultValue!==e.value){n(Ji(e)?Qi(e.value):e.value);return}Ji(e)&&r===Qi(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function Ji(e){var t=e.type;return t==="number"||t==="range"}function Qi(e){return e===""?null:+e}var zt,hn,Bn,Oi,Js;const zi=class zi{constructor(t){En(this,Oi);En(this,zt,new WeakMap);En(this,hn);En(this,Bn);Gi(this,Bn,t)}observe(t,n){var i=Et(this,zt).get(t)||new Set;return i.add(n),Et(this,zt).set(t,i),ko(this,Oi,Js).call(this).observe(t,Et(this,Bn)),()=>{var r=Et(this,zt).get(t);r.delete(n),r.size===0&&(Et(this,zt).delete(t),Et(this,hn).unobserve(t))}}};zt=new WeakMap,hn=new WeakMap,Bn=new WeakMap,Oi=new WeakSet,Js=function(){return Et(this,hn)??Gi(this,hn,new ResizeObserver(t=>{for(var n of t){zi.entries.set(n.target,n);for(var i of Et(this,zt).get(n.target)||[])i(n)}}))},_o(zi,"entries",new WeakMap);let mr=zi;var Lc=new mr({box:"border-box"});function Do(e,t,n){var i=Lc.observe(e,()=>n(e[t]));ht(()=>(Br(()=>n(e[t])),i))}function we(e,t){var s;var n=(s=e.$$events)==null?void 0:s[t.type],i=zs(n)?n.slice():n==null?[]:[n];for(var r of i)r.call(this,t)}const Qs=Nc;function Hc(e){const t=e-1;return t*t*t+1}function Lo(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function el(e,{delay:t=0,duration:n=400,easing:i=Hc,x:r=0,y:s=0,opacity:o=0}={}){const l=getComputedStyle(e),a=+l.opacity,u=l.transform==="none"?"":l.transform,c=a*(1-o),[h,d]=Lo(r),[g,m]=Lo(s);return{delay:t,duration:n,easing:i,css:(w,y)=>`
			transform: ${u} translate(${(1-w)*h}${d}, ${(1-w)*g}${m});
			opacity: ${a-c*y}`}}function Qe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Qe(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Rc={value:()=>{}};function Li(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new oi(n)}function oi(e){this._=e}function Fc(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}oi.prototype=Li.prototype={constructor:oi,on:function(e,t){var n=this._,i=Fc(e+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(e=i[s]).type)&&(r=Yc(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=i[s]).type)n[r]=Ho(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Ho(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new oi(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function Yc(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Ho(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Rc,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var vr="http://www.w3.org/1999/xhtml";const Ro={svg:"http://www.w3.org/2000/svg",xhtml:vr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Hi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ro.hasOwnProperty(t)?{space:Ro[t],local:e}:e}function Bc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===vr&&t.documentElement.namespaceURI===vr?t.createElement(e):t.createElementNS(n,e)}}function Vc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function tl(e){var t=Hi(e);return(t.local?Vc:Bc)(t)}function Xc(){}function Wr(e){return e==null?Xc:function(){return this.querySelector(e)}}function Wc(e){typeof e!="function"&&(e=Wr(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,l=i[r]=new Array(o),a,u,c=0;c<o;++c)(a=s[c])&&(u=e.call(a,a.__data__,c,s))&&("__data__"in a&&(u.__data__=a.__data__),l[c]=u);return new lt(i,this._parents)}function Kc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Uc(){return[]}function nl(e){return e==null?Uc:function(){return this.querySelectorAll(e)}}function Zc(e){return function(){return Kc(e.apply(this,arguments))}}function qc(e){typeof e=="function"?e=Zc(e):e=nl(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o=t[s],l=o.length,a,u=0;u<l;++u)(a=o[u])&&(i.push(e.call(a,a.__data__,u,o)),r.push(a));return new lt(i,r)}function il(e){return function(){return this.matches(e)}}function rl(e){return function(t){return t.matches(e)}}var Gc=Array.prototype.find;function jc(e){return function(){return Gc.call(this.children,e)}}function $c(){return this.firstElementChild}function Jc(e){return this.select(e==null?$c:jc(typeof e=="function"?e:rl(e)))}var Qc=Array.prototype.filter;function eu(){return Array.from(this.children)}function tu(e){return function(){return Qc.call(this.children,e)}}function nu(e){return this.selectAll(e==null?eu:tu(typeof e=="function"?e:rl(e)))}function iu(e){typeof e!="function"&&(e=il(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,l=i[r]=[],a,u=0;u<o;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&l.push(a);return new lt(i,this._parents)}function ol(e){return new Array(e.length)}function ru(){return new lt(this._enter||this._groups.map(ol),this._parents)}function hi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}hi.prototype={constructor:hi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ou(e){return function(){return e}}function su(e,t,n,i,r,s){for(var o=0,l,a=t.length,u=s.length;o<u;++o)(l=t[o])?(l.__data__=s[o],i[o]=l):n[o]=new hi(e,s[o]);for(;o<a;++o)(l=t[o])&&(r[o]=l)}function lu(e,t,n,i,r,s,o){var l,a,u=new Map,c=t.length,h=s.length,d=new Array(c),g;for(l=0;l<c;++l)(a=t[l])&&(d[l]=g=o.call(a,a.__data__,l,t)+"",u.has(g)?r[l]=a:u.set(g,a));for(l=0;l<h;++l)g=o.call(e,s[l],l,s)+"",(a=u.get(g))?(i[l]=a,a.__data__=s[l],u.delete(g)):n[l]=new hi(e,s[l]);for(l=0;l<c;++l)(a=t[l])&&u.get(d[l])===a&&(r[l]=a)}function au(e){return e.__data__}function cu(e,t){if(!arguments.length)return Array.from(this,au);var n=t?lu:su,i=this._parents,r=this._groups;typeof e!="function"&&(e=ou(e));for(var s=r.length,o=new Array(s),l=new Array(s),a=new Array(s),u=0;u<s;++u){var c=i[u],h=r[u],d=h.length,g=uu(e.call(c,c&&c.__data__,u,i)),m=g.length,w=l[u]=new Array(m),y=o[u]=new Array(m),k=a[u]=new Array(d);n(c,h,w,y,k,g,t);for(var v=0,S=0,b,E;v<m;++v)if(b=w[v]){for(v>=S&&(S=v+1);!(E=y[S])&&++S<m;);b._next=E||null}}return o=new lt(o,i),o._enter=l,o._exit=a,o}function uu(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function du(){return new lt(this._exit||this._groups.map(ol),this._parents)}function fu(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function hu(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,o=Math.min(r,s),l=new Array(r),a=0;a<o;++a)for(var u=n[a],c=i[a],h=u.length,d=l[a]=new Array(h),g,m=0;m<h;++m)(g=u[m]||c[m])&&(d[m]=g);for(;a<r;++a)l[a]=n[a];return new lt(l,this._parents)}function gu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function pu(e){e||(e=mu);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],l=o.length,a=r[s]=new Array(l),u,c=0;c<l;++c)(u=o[c])&&(a[c]=u);a.sort(t)}return new lt(r,this._parents).order()}function mu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function yu(){return Array.from(this)}function xu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function wu(){let e=0;for(const t of this)++e;return e}function bu(){return!this.node()}function _u(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,o=r.length,l;s<o;++s)(l=r[s])&&e.call(l,l.__data__,s,r);return this}function ku(e){return function(){this.removeAttribute(e)}}function Eu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Su(e,t){return function(){this.setAttribute(e,t)}}function Cu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Au(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Nu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Mu(e,t){var n=Hi(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?Eu:ku:typeof t=="function"?n.local?Nu:Au:n.local?Cu:Su)(n,t))}function sl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Tu(e){return function(){this.style.removeProperty(e)}}function Pu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Iu(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Ou(e,t,n){return arguments.length>1?this.each((t==null?Tu:typeof t=="function"?Iu:Pu)(e,t,n??"")):pn(this.node(),e)}function pn(e,t){return e.style.getPropertyValue(t)||sl(e).getComputedStyle(e,null).getPropertyValue(t)}function zu(e){return function(){delete this[e]}}function Du(e,t){return function(){this[e]=t}}function Lu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Hu(e,t){return arguments.length>1?this.each((t==null?zu:typeof t=="function"?Lu:Du)(e,t)):this.node()[e]}function ll(e){return e.trim().split(/^|\s+/)}function Kr(e){return e.classList||new al(e)}function al(e){this._node=e,this._names=ll(e.getAttribute("class")||"")}al.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function cl(e,t){for(var n=Kr(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function ul(e,t){for(var n=Kr(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Ru(e){return function(){cl(this,e)}}function Fu(e){return function(){ul(this,e)}}function Yu(e,t){return function(){(t.apply(this,arguments)?cl:ul)(this,e)}}function Bu(e,t){var n=ll(e+"");if(arguments.length<2){for(var i=Kr(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Yu:t?Ru:Fu)(n,t))}function Vu(){this.textContent=""}function Xu(e){return function(){this.textContent=e}}function Wu(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ku(e){return arguments.length?this.each(e==null?Vu:(typeof e=="function"?Wu:Xu)(e)):this.node().textContent}function Uu(){this.innerHTML=""}function Zu(e){return function(){this.innerHTML=e}}function qu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Gu(e){return arguments.length?this.each(e==null?Uu:(typeof e=="function"?qu:Zu)(e)):this.node().innerHTML}function ju(){this.nextSibling&&this.parentNode.appendChild(this)}function $u(){return this.each(ju)}function Ju(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qu(){return this.each(Ju)}function ed(e){var t=typeof e=="function"?e:tl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function td(){return null}function nd(e,t){var n=typeof e=="function"?e:tl(e),i=t==null?td:typeof t=="function"?t:Wr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function id(){var e=this.parentNode;e&&e.removeChild(this)}function rd(){return this.each(id)}function od(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ld(e){return this.select(e?sd:od)}function ad(e){return arguments.length?this.property("__data__",e):this.node().__data__}function cd(e){return function(t){e.call(this,t,this.__data__)}}function ud(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function dd(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function fd(e,t,n){return function(){var i=this.__on,r,s=cd(t);if(i){for(var o=0,l=i.length;o<l;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function hd(e,t,n){var i=ud(e+""),r,s=i.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,u=l.length,c;a<u;++a)for(r=0,c=l[a];r<s;++r)if((o=i[r]).type===c.type&&o.name===c.name)return c.value}return}for(l=t?fd:dd,r=0;r<s;++r)this.each(l(i[r],t,n));return this}function dl(e,t,n){var i=sl(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function gd(e,t){return function(){return dl(this,e,t)}}function pd(e,t){return function(){return dl(this,e,t.apply(this,arguments))}}function md(e,t){return this.each((typeof t=="function"?pd:gd)(e,t))}function*vd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var fl=[null];function lt(e,t){this._groups=e,this._parents=t}function Vn(){return new lt([[document.documentElement]],fl)}function yd(){return this}lt.prototype=Vn.prototype={constructor:lt,select:Wc,selectAll:qc,selectChild:Jc,selectChildren:nu,filter:iu,data:cu,enter:ru,exit:du,join:fu,merge:hu,selection:yd,order:gu,sort:pu,call:vu,nodes:yu,node:xu,size:wu,empty:bu,each:_u,attr:Mu,style:Ou,property:Hu,classed:Bu,text:Ku,html:Gu,raise:$u,lower:Qu,append:ed,insert:nd,remove:rd,clone:ld,datum:ad,on:hd,dispatch:md,[Symbol.iterator]:vd};function ut(e){return typeof e=="string"?new lt([[document.querySelector(e)]],[document.documentElement]):new lt([[e]],fl)}function xd(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ft(e,t){if(e=xd(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const wd={passive:!1},On={capture:!0,passive:!1};function er(e){e.stopImmediatePropagation()}function un(e){e.preventDefault(),e.stopImmediatePropagation()}function hl(e){var t=e.document.documentElement,n=ut(e).on("dragstart.drag",un,On);"onselectstart"in t?n.on("selectstart.drag",un,On):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function gl(e,t){var n=e.document.documentElement,i=ut(e).on("dragstart.drag",null);t&&(i.on("click.drag",un,On),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Gn=e=>()=>e;function yr(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:s,x:o,y:l,dx:a,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}yr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function bd(e){return!e.ctrlKey&&!e.button}function _d(){return this.parentNode}function kd(e,t){return t??{x:e.x,y:e.y}}function Ed(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sd(){var e=bd,t=_d,n=kd,i=Ed,r={},s=Li("start","drag","end"),o=0,l,a,u,c,h=0;function d(b){b.on("mousedown.drag",g).filter(i).on("touchstart.drag",y).on("touchmove.drag",k,wd).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(b,E){if(!(c||!e.call(this,b,E))){var C=S(this,t.call(this,b,E),b,E,"mouse");C&&(ut(b.view).on("mousemove.drag",m,On).on("mouseup.drag",w,On),hl(b.view),er(b),u=!1,l=b.clientX,a=b.clientY,C("start",b))}}function m(b){if(un(b),!u){var E=b.clientX-l,C=b.clientY-a;u=E*E+C*C>h}r.mouse("drag",b)}function w(b){ut(b.view).on("mousemove.drag mouseup.drag",null),gl(b.view,u),un(b),r.mouse("end",b)}function y(b,E){if(e.call(this,b,E)){var C=b.changedTouches,N=t.call(this,b,E),D=C.length,H,M;for(H=0;H<D;++H)(M=S(this,N,b,E,C[H].identifier,C[H]))&&(er(b),M("start",b,C[H]))}}function k(b){var E=b.changedTouches,C=E.length,N,D;for(N=0;N<C;++N)(D=r[E[N].identifier])&&(un(b),D("drag",b,E[N]))}function v(b){var E=b.changedTouches,C=E.length,N,D;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),N=0;N<C;++N)(D=r[E[N].identifier])&&(er(b),D("end",b,E[N]))}function S(b,E,C,N,D,H){var M=s.copy(),T=ft(H||C,E),I,P,x;if((x=n.call(b,new yr("beforestart",{sourceEvent:C,target:d,identifier:D,active:o,x:T[0],y:T[1],dx:0,dy:0,dispatch:M}),N))!=null)return I=x.x-T[0]||0,P=x.y-T[1]||0,function O(_,A,z){var L=T,B;switch(_){case"start":r[D]=O,B=o++;break;case"end":delete r[D],--o;case"drag":T=ft(z||A,E),B=o;break}M.call(_,b,new yr(_,{sourceEvent:A,subject:x,target:d,identifier:D,active:B,x:T[0]+I,y:T[1]+P,dx:T[0]-L[0],dy:T[1]-L[1],dispatch:M}),N)}}return d.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Gn(!!b),d):e},d.container=function(b){return arguments.length?(t=typeof b=="function"?b:Gn(b),d):t},d.subject=function(b){return arguments.length?(n=typeof b=="function"?b:Gn(b),d):n},d.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:Gn(!!b),d):i},d.on=function(){var b=s.on.apply(s,arguments);return b===s?d:b},d.clickDistance=function(b){return arguments.length?(h=(b=+b)*b,d):Math.sqrt(h)},d}function Ur(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pl(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Xn(){}var zn=.7,gi=1/zn,dn="\\s*([+-]?\\d+)\\s*",Dn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cd=/^#([0-9a-f]{3,8})$/,Ad=new RegExp(`^rgb\\(${dn},${dn},${dn}\\)$`),Nd=new RegExp(`^rgb\\(${wt},${wt},${wt}\\)$`),Md=new RegExp(`^rgba\\(${dn},${dn},${dn},${Dn}\\)$`),Td=new RegExp(`^rgba\\(${wt},${wt},${wt},${Dn}\\)$`),Pd=new RegExp(`^hsl\\(${Dn},${wt},${wt}\\)$`),Id=new RegExp(`^hsla\\(${Dn},${wt},${wt},${Dn}\\)$`),Fo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ur(Xn,Ln,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yo,formatHex:Yo,formatHex8:Od,formatHsl:zd,formatRgb:Bo,toString:Bo});function Yo(){return this.rgb().formatHex()}function Od(){return this.rgb().formatHex8()}function zd(){return ml(this).formatHsl()}function Bo(){return this.rgb().formatRgb()}function Ln(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Cd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Vo(t):n===3?new nt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ad.exec(e))?new nt(t[1],t[2],t[3],1):(t=Nd.exec(e))?new nt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Md.exec(e))?jn(t[1],t[2],t[3],t[4]):(t=Td.exec(e))?jn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Pd.exec(e))?Ko(t[1],t[2]/100,t[3]/100,1):(t=Id.exec(e))?Ko(t[1],t[2]/100,t[3]/100,t[4]):Fo.hasOwnProperty(e)?Vo(Fo[e]):e==="transparent"?new nt(NaN,NaN,NaN,0):null}function Vo(e){return new nt(e>>16&255,e>>8&255,e&255,1)}function jn(e,t,n,i){return i<=0&&(e=t=n=NaN),new nt(e,t,n,i)}function Dd(e){return e instanceof Xn||(e=Ln(e)),e?(e=e.rgb(),new nt(e.r,e.g,e.b,e.opacity)):new nt}function xr(e,t,n,i){return arguments.length===1?Dd(e):new nt(e,t,n,i??1)}function nt(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Ur(nt,xr,pl(Xn,{brighter(e){return e=e==null?gi:Math.pow(gi,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?zn:Math.pow(zn,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nt(qt(this.r),qt(this.g),qt(this.b),pi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xo,formatHex:Xo,formatHex8:Ld,formatRgb:Wo,toString:Wo}));function Xo(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}`}function Ld(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}${Zt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wo(){const e=pi(this.opacity);return`${e===1?"rgb(":"rgba("}${qt(this.r)}, ${qt(this.g)}, ${qt(this.b)}${e===1?")":`, ${e})`}`}function pi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zt(e){return e=qt(e),(e<16?"0":"")+e.toString(16)}function Ko(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gt(e,t,n,i)}function ml(e){if(e instanceof gt)return new gt(e.h,e.s,e.l,e.opacity);if(e instanceof Xn||(e=Ln(e)),!e)return new gt;if(e instanceof gt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,l=s-r,a=(s+r)/2;return l?(t===s?o=(n-i)/l+(n<i)*6:n===s?o=(i-t)/l+2:o=(t-n)/l+4,l/=a<.5?s+r:2-s-r,o*=60):l=a>0&&a<1?0:o,new gt(o,l,a,e.opacity)}function Hd(e,t,n,i){return arguments.length===1?ml(e):new gt(e,t,n,i??1)}function gt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Ur(gt,Hd,pl(Xn,{brighter(e){return e=e==null?gi:Math.pow(gi,e),new gt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zn:Math.pow(zn,e),new gt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new nt(tr(e>=240?e-240:e+120,r,i),tr(e,r,i),tr(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new gt(Uo(this.h),$n(this.s),$n(this.l),pi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pi(this.opacity);return`${e===1?"hsl(":"hsla("}${Uo(this.h)}, ${$n(this.s)*100}%, ${$n(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Uo(e){return e=(e||0)%360,e<0?e+360:e}function $n(e){return Math.max(0,Math.min(1,e||0))}function tr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const vl=e=>()=>e;function Rd(e,t){return function(n){return e+n*t}}function Fd(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Yd(e){return(e=+e)==1?yl:function(t,n){return n-t?Fd(t,n,e):vl(isNaN(t)?n:t)}}function yl(e,t){var n=t-e;return n?Rd(e,n):vl(isNaN(e)?t:e)}const Zo=function e(t){var n=Yd(t);function i(r,s){var o=n((r=xr(r)).r,(s=xr(s)).r),l=n(r.g,s.g),a=n(r.b,s.b),u=yl(r.opacity,s.opacity);return function(c){return r.r=o(c),r.g=l(c),r.b=a(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function Ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var wr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nr=new RegExp(wr.source,"g");function Bd(e){return function(){return e}}function Vd(e){return function(t){return e(t)+""}}function Xd(e,t){var n=wr.lastIndex=nr.lastIndex=0,i,r,s,o=-1,l=[],a=[];for(e=e+"",t=t+"";(i=wr.exec(e))&&(r=nr.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,a.push({i:o,x:Ot(i,r)})),n=nr.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?a[0]?Vd(a[0].x):Bd(t):(t=a.length,function(u){for(var c=0,h;c<t;++c)l[(h=a[c]).i]=h.x(u);return l.join("")})}var qo=180/Math.PI,br={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xl(e,t,n,i,r,s){var o,l,a;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(a=e*n+t*i)&&(n-=e*a,i-=t*a),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,a/=l),e*i<t*n&&(e=-e,t=-t,a=-a,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*qo,skewX:Math.atan(a)*qo,scaleX:o,scaleY:l}}var Jn;function Wd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?br:xl(t.a,t.b,t.c,t.d,t.e,t.f)}function Kd(e){return e==null||(Jn||(Jn=document.createElementNS("http://www.w3.org/2000/svg","g")),Jn.setAttribute("transform",e),!(e=Jn.transform.baseVal.consolidate()))?br:(e=e.matrix,xl(e.a,e.b,e.c,e.d,e.e,e.f))}function wl(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,c,h,d,g,m){if(u!==h||c!==d){var w=g.push("translate(",null,t,null,n);m.push({i:w-4,x:Ot(u,h)},{i:w-2,x:Ot(c,d)})}else(h||d)&&g.push("translate("+h+t+d+n)}function o(u,c,h,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Ot(u,c)})):c&&h.push(r(h)+"rotate("+c+i)}function l(u,c,h,d){u!==c?d.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Ot(u,c)}):c&&h.push(r(h)+"skewX("+c+i)}function a(u,c,h,d,g,m){if(u!==h||c!==d){var w=g.push(r(g)+"scale(",null,",",null,")");m.push({i:w-4,x:Ot(u,h)},{i:w-2,x:Ot(c,d)})}else(h!==1||d!==1)&&g.push(r(g)+"scale("+h+","+d+")")}return function(u,c){var h=[],d=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,h,d),o(u.rotate,c.rotate,h,d),l(u.skewX,c.skewX,h,d),a(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,d),u=c=null,function(g){for(var m=-1,w=d.length,y;++m<w;)h[(y=d[m]).i]=y.x(g);return h.join("")}}}var Ud=wl(Wd,"px, ","px)","deg)"),Zd=wl(Kd,", ",")",")"),qd=1e-12;function Go(e){return((e=Math.exp(e))+1/e)/2}function Gd(e){return((e=Math.exp(e))-1/e)/2}function jd(e){return((e=Math.exp(2*e))-1)/(e+1)}const $d=function e(t,n,i){function r(s,o){var l=s[0],a=s[1],u=s[2],c=o[0],h=o[1],d=o[2],g=c-l,m=h-a,w=g*g+m*m,y,k;if(w<qd)k=Math.log(d/u)/t,y=function(N){return[l+N*g,a+N*m,u*Math.exp(t*N*k)]};else{var v=Math.sqrt(w),S=(d*d-u*u+i*w)/(2*u*n*v),b=(d*d-u*u-i*w)/(2*d*n*v),E=Math.log(Math.sqrt(S*S+1)-S),C=Math.log(Math.sqrt(b*b+1)-b);k=(C-E)/t,y=function(N){var D=N*k,H=Go(E),M=u/(n*v)*(H*jd(t*D+E)-Gd(E));return[l+M*g,a+M*m,u*H/Go(t*D+E)]}}return y.duration=k*1e3*t/Math.SQRT2,y}return r.rho=function(s){var o=Math.max(.001,+s),l=o*o,a=l*l;return e(o,l,a)},r}(Math.SQRT2,2,4);var mn=0,Tn=0,An=0,bl=1e3,mi,Pn,vi=0,jt=0,Ri=0,Hn=typeof performance=="object"&&performance.now?performance:Date,_l=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zr(){return jt||(_l(Jd),jt=Hn.now()+Ri)}function Jd(){jt=0}function yi(){this._call=this._time=this._next=null}yi.prototype=kl.prototype={constructor:yi,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Zr():+n)+(t==null?0:+t),!this._next&&Pn!==this&&(Pn?Pn._next=this:mi=this,Pn=this),this._call=e,this._time=n,_r()},stop:function(){this._call&&(this._call=null,this._time=1/0,_r())}};function kl(e,t,n){var i=new yi;return i.restart(e,t,n),i}function Qd(){Zr(),++mn;for(var e=mi,t;e;)(t=jt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mn}function jo(){jt=(vi=Hn.now())+Ri,mn=Tn=0;try{Qd()}finally{mn=0,tf(),jt=0}}function ef(){var e=Hn.now(),t=e-vi;t>bl&&(Ri-=t,vi=e)}function tf(){for(var e,t=mi,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:mi=n);Pn=e,_r(i)}function _r(e){if(!mn){Tn&&(Tn=clearTimeout(Tn));var t=e-jt;t>24?(e<1/0&&(Tn=setTimeout(jo,e-Hn.now()-Ri)),An&&(An=clearInterval(An))):(An||(vi=Hn.now(),An=setInterval(ef,bl)),mn=1,_l(jo))}}function $o(e,t,n){var i=new yi;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var nf=Li("start","end","cancel","interrupt"),rf=[],El=0,Jo=1,kr=2,si=3,Qo=4,Er=5,li=6;function Fi(e,t,n,i,r,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;of(e,n,{name:t,index:i,group:r,on:nf,tween:rf,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:El})}function qr(e,t){var n=pt(e,t);if(n.state>El)throw new Error("too late; already scheduled");return n}function _t(e,t){var n=pt(e,t);if(n.state>si)throw new Error("too late; already running");return n}function pt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function of(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=kl(s,0,n.time);function s(u){n.state=Jo,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,h,d,g;if(n.state!==Jo)return a();for(c in i)if(g=i[c],g.name===n.name){if(g.state===si)return $o(o);g.state===Qo?(g.state=li,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[c]):+c<t&&(g.state=li,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[c])}if($o(function(){n.state===si&&(n.state=Qo,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=kr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===kr){for(n.state=si,r=new Array(d=n.tween.length),c=0,h=-1;c<d;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=g);r.length=h+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Er,1),h=-1,d=r.length;++h<d;)r[h].call(e,c);n.state===Er&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=li,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function ai(e,t){var n=e.__transition,i,r,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){s=!1;continue}r=i.state>kr&&i.state<Er,i.state=li,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}s&&delete e.__transition}}function sf(e){return this.each(function(){ai(this,e)})}function lf(e,t){var n,i;return function(){var r=_t(this,e),s=r.tween;if(s!==n){i=n=s;for(var o=0,l=i.length;o<l;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function af(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=_t(this,e),o=s.tween;if(o!==i){r=(i=o).slice();for(var l={name:t,value:n},a=0,u=r.length;a<u;++a)if(r[a].name===t){r[a]=l;break}a===u&&r.push(l)}s.tween=r}}function cf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=pt(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?lf:af)(n,e,t))}function Gr(e,t,n){var i=e._id;return e.each(function(){var r=_t(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return pt(r,i).value[t]}}function Sl(e,t){var n;return(typeof t=="number"?Ot:t instanceof Ln?Zo:(n=Ln(t))?(t=n,Zo):Xd)(e,t)}function uf(e){return function(){this.removeAttribute(e)}}function df(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ff(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttribute(e);return o===r?null:o===i?s:s=t(i=o,n)}}function hf(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?s:s=t(i=o,n)}}function gf(e,t,n){var i,r,s;return function(){var o,l=n(this),a;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),a=l+"",o===a?null:o===i&&a===r?s:(r=a,s=t(i=o,l)))}}function pf(e,t,n){var i,r,s;return function(){var o,l=n(this),a;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),a=l+"",o===a?null:o===i&&a===r?s:(r=a,s=t(i=o,l)))}}function mf(e,t){var n=Hi(e),i=n==="transform"?Zd:Sl;return this.attrTween(e,typeof t=="function"?(n.local?pf:gf)(n,i,Gr(this,"attr."+e,t)):t==null?(n.local?df:uf)(n):(n.local?hf:ff)(n,i,t))}function vf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function yf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function xf(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&yf(e,s)),n}return r._value=t,r}function wf(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&vf(e,s)),n}return r._value=t,r}function bf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Hi(e);return this.tween(n,(i.local?xf:wf)(i,t))}function _f(e,t){return function(){qr(this,e).delay=+t.apply(this,arguments)}}function kf(e,t){return t=+t,function(){qr(this,e).delay=t}}function Ef(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_f:kf)(t,e)):pt(this.node(),t).delay}function Sf(e,t){return function(){_t(this,e).duration=+t.apply(this,arguments)}}function Cf(e,t){return t=+t,function(){_t(this,e).duration=t}}function Af(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sf:Cf)(t,e)):pt(this.node(),t).duration}function Nf(e,t){if(typeof t!="function")throw new Error;return function(){_t(this,e).ease=t}}function Mf(e){var t=this._id;return arguments.length?this.each(Nf(t,e)):pt(this.node(),t).ease}function Tf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_t(this,e).ease=n}}function Pf(e){if(typeof e!="function")throw new Error;return this.each(Tf(this._id,e))}function If(e){typeof e!="function"&&(e=il(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,l=i[r]=[],a,u=0;u<o;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&l.push(a);return new Pt(i,this._parents,this._name,this._id)}function Of(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),o=new Array(i),l=0;l<s;++l)for(var a=t[l],u=n[l],c=a.length,h=o[l]=new Array(c),d,g=0;g<c;++g)(d=a[g]||u[g])&&(h[g]=d);for(;l<i;++l)o[l]=t[l];return new Pt(o,this._parents,this._name,this._id)}function zf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Df(e,t,n){var i,r,s=zf(t)?qr:_t;return function(){var o=s(this,e),l=o.on;l!==i&&(r=(i=l).copy()).on(t,n),o.on=r}}function Lf(e,t){var n=this._id;return arguments.length<2?pt(this.node(),n).on.on(e):this.each(Df(n,e,t))}function Hf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Rf(){return this.on("end.remove",Hf(this._id))}function Ff(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wr(e));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var l=i[o],a=l.length,u=s[o]=new Array(a),c,h,d=0;d<a;++d)(c=l[d])&&(h=e.call(c,c.__data__,d,l))&&("__data__"in c&&(h.__data__=c.__data__),u[d]=h,Fi(u[d],t,n,d,u,pt(c,n)));return new Pt(s,this._parents,t,n)}function Yf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nl(e));for(var i=this._groups,r=i.length,s=[],o=[],l=0;l<r;++l)for(var a=i[l],u=a.length,c,h=0;h<u;++h)if(c=a[h]){for(var d=e.call(c,c.__data__,h,a),g,m=pt(c,n),w=0,y=d.length;w<y;++w)(g=d[w])&&Fi(g,t,n,w,d,m);s.push(d),o.push(c)}return new Pt(s,o,t,n)}var Bf=Vn.prototype.constructor;function Vf(){return new Bf(this._groups,this._parents)}function Xf(e,t){var n,i,r;return function(){var s=pn(this,e),o=(this.style.removeProperty(e),pn(this,e));return s===o?null:s===n&&o===i?r:r=t(n=s,i=o)}}function Cl(e){return function(){this.style.removeProperty(e)}}function Wf(e,t,n){var i,r=n+"",s;return function(){var o=pn(this,e);return o===r?null:o===i?s:s=t(i=o,n)}}function Kf(e,t,n){var i,r,s;return function(){var o=pn(this,e),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(e),pn(this,e))),o===a?null:o===i&&a===r?s:(r=a,s=t(i=o,l))}}function Uf(e,t){var n,i,r,s="style."+t,o="end."+s,l;return function(){var a=_t(this,e),u=a.on,c=a.value[s]==null?l||(l=Cl(t)):void 0;(u!==n||r!==c)&&(i=(n=u).copy()).on(o,r=c),a.on=i}}function Zf(e,t,n){var i=(e+="")=="transform"?Ud:Sl;return t==null?this.styleTween(e,Xf(e,i)).on("end.style."+e,Cl(e)):typeof t=="function"?this.styleTween(e,Kf(e,i,Gr(this,"style."+e,t))).each(Uf(this._id,e)):this.styleTween(e,Wf(e,i,t),n).on("end.style."+e,null)}function qf(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Gf(e,t,n){var i,r;function s(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&qf(e,o,n)),i}return s._value=t,s}function jf(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Gf(e,t,n??""))}function $f(e){return function(){this.textContent=e}}function Jf(e){return function(){var t=e(this);this.textContent=t??""}}function Qf(e){return this.tween("text",typeof e=="function"?Jf(Gr(this,"text",e)):$f(e==null?"":e+""))}function eh(e){return function(t){this.textContent=e.call(this,t)}}function th(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&eh(r)),t}return i._value=e,i}function nh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,th(e))}function ih(){for(var e=this._name,t=this._id,n=Al(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],l=o.length,a,u=0;u<l;++u)if(a=o[u]){var c=pt(a,t);Fi(a,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Pt(i,this._parents,e,n)}function rh(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var l={value:o},a={value:function(){--r===0&&s()}};n.each(function(){var u=_t(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(a)),u.on=t}),r===0&&s()})}var oh=0;function Pt(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Al(){return++oh}var St=Vn.prototype;Pt.prototype={constructor:Pt,select:Ff,selectAll:Yf,selectChild:St.selectChild,selectChildren:St.selectChildren,filter:If,merge:Of,selection:Vf,transition:ih,call:St.call,nodes:St.nodes,node:St.node,size:St.size,empty:St.empty,each:St.each,on:Lf,attr:mf,attrTween:bf,style:Zf,styleTween:jf,text:Qf,textTween:nh,remove:Rf,tween:cf,delay:Ef,duration:Af,ease:Mf,easeVarying:Pf,end:rh,[Symbol.iterator]:St[Symbol.iterator]};function sh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var lh={time:null,delay:0,duration:250,ease:sh};function ah(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ch(e){var t,n;e instanceof Pt?(t=e._id,e=e._name):(t=Al(),(n=lh).time=Zr(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],l=o.length,a,u=0;u<l;++u)(a=o[u])&&Fi(a,e,t,u,o,n||ah(a,t));return new Pt(i,this._parents,e,t)}Vn.prototype.interrupt=sf;Vn.prototype.transition=ch;const Qn=e=>()=>e;function uh(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function At(e,t,n){this.k=e,this.x=t,this.y=n}At.prototype={constructor:At,scale:function(e){return e===1?this:new At(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new At(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Yi=new At(1,0,0);Nl.prototype=At.prototype;function Nl(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Yi;return e.__zoom}function ir(e){e.stopImmediatePropagation()}function Nn(e){e.preventDefault(),e.stopImmediatePropagation()}function dh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function fh(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function es(){return this.__zoom||Yi}function hh(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function gh(){return navigator.maxTouchPoints||"ontouchstart"in this}function ph(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Ml(){var e=dh,t=fh,n=ph,i=hh,r=gh,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,a=$d,u=Li("start","zoom","end"),c,h,d,g=500,m=150,w=0,y=10;function k(x){x.property("__zoom",es).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",M).filter(r).on("touchstart.zoom",T).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(x,O,_,A){var z=x.selection?x.selection():x;z.property("__zoom",es),x!==z?E(x,O,_,A):z.interrupt().each(function(){C(this,arguments).event(A).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},k.scaleBy=function(x,O,_,A){k.scaleTo(x,function(){var z=this.__zoom.k,L=typeof O=="function"?O.apply(this,arguments):O;return z*L},_,A)},k.scaleTo=function(x,O,_,A){k.transform(x,function(){var z=t.apply(this,arguments),L=this.__zoom,B=_==null?b(z):typeof _=="function"?_.apply(this,arguments):_,K=L.invert(B),j=typeof O=="function"?O.apply(this,arguments):O;return n(S(v(L,j),B,K),z,o)},_,A)},k.translateBy=function(x,O,_,A){k.transform(x,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),o)},null,A)},k.translateTo=function(x,O,_,A,z){k.transform(x,function(){var L=t.apply(this,arguments),B=this.__zoom,K=A==null?b(L):typeof A=="function"?A.apply(this,arguments):A;return n(Yi.translate(K[0],K[1]).scale(B.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof _=="function"?-_.apply(this,arguments):-_),L,o)},A,z)};function v(x,O){return O=Math.max(s[0],Math.min(s[1],O)),O===x.k?x:new At(O,x.x,x.y)}function S(x,O,_){var A=O[0]-_[0]*x.k,z=O[1]-_[1]*x.k;return A===x.x&&z===x.y?x:new At(x.k,A,z)}function b(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function E(x,O,_,A){x.on("start.zoom",function(){C(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(A).end()}).tween("zoom",function(){var z=this,L=arguments,B=C(z,L).event(A),K=t.apply(z,L),j=_==null?b(K):typeof _=="function"?_.apply(z,L):_,te=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),W=z.__zoom,$=typeof O=="function"?O.apply(z,L):O,re=a(W.invert(j).concat(te/W.k),$.invert(j).concat(te/$.k));return function(me){if(me===1)me=$;else{var ve=re(me),Z=te/ve[2];me=new At(Z,j[0]-ve[0]*Z,j[1]-ve[1]*Z)}B.zoom(null,me)}})}function C(x,O,_){return!_&&x.__zooming||new N(x,O)}function N(x,O){this.that=x,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(x,O),this.taps=0}N.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,O){return this.mouse&&x!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var O=ut(this.that).datum();u.call(x,this.that,new uh(x,{sourceEvent:this.sourceEvent,target:k,type:x,transform:this.that.__zoom,dispatch:u}),O)}};function D(x,...O){if(!e.apply(this,arguments))return;var _=C(this,O).event(x),A=this.__zoom,z=Math.max(s[0],Math.min(s[1],A.k*Math.pow(2,i.apply(this,arguments)))),L=ft(x);if(_.wheel)(_.mouse[0][0]!==L[0]||_.mouse[0][1]!==L[1])&&(_.mouse[1]=A.invert(_.mouse[0]=L)),clearTimeout(_.wheel);else{if(A.k===z)return;_.mouse=[L,A.invert(L)],ai(this),_.start()}Nn(x),_.wheel=setTimeout(B,m),_.zoom("mouse",n(S(v(A,z),_.mouse[0],_.mouse[1]),_.extent,o));function B(){_.wheel=null,_.end()}}function H(x,...O){if(d||!e.apply(this,arguments))return;var _=x.currentTarget,A=C(this,O,!0).event(x),z=ut(x.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",te,!0),L=ft(x,_),B=x.clientX,K=x.clientY;hl(x.view),ir(x),A.mouse=[L,this.__zoom.invert(L)],ai(this),A.start();function j(W){if(Nn(W),!A.moved){var $=W.clientX-B,re=W.clientY-K;A.moved=$*$+re*re>w}A.event(W).zoom("mouse",n(S(A.that.__zoom,A.mouse[0]=ft(W,_),A.mouse[1]),A.extent,o))}function te(W){z.on("mousemove.zoom mouseup.zoom",null),gl(W.view,A.moved),Nn(W),A.event(W).end()}}function M(x,...O){if(e.apply(this,arguments)){var _=this.__zoom,A=ft(x.changedTouches?x.changedTouches[0]:x,this),z=_.invert(A),L=_.k*(x.shiftKey?.5:2),B=n(S(v(_,L),A,z),t.apply(this,O),o);Nn(x),l>0?ut(this).transition().duration(l).call(E,B,A,x):ut(this).call(k.transform,B,A,x)}}function T(x,...O){if(e.apply(this,arguments)){var _=x.touches,A=_.length,z=C(this,O,x.changedTouches.length===A).event(x),L,B,K,j;for(ir(x),B=0;B<A;++B)K=_[B],j=ft(K,this),j=[j,this.__zoom.invert(j),K.identifier],z.touch0?!z.touch1&&z.touch0[2]!==j[2]&&(z.touch1=j,z.taps=0):(z.touch0=j,L=!0,z.taps=1+!!c);c&&(c=clearTimeout(c)),L&&(z.taps<2&&(h=j[0],c=setTimeout(function(){c=null},g)),ai(this),z.start())}}function I(x,...O){if(this.__zooming){var _=C(this,O).event(x),A=x.changedTouches,z=A.length,L,B,K,j;for(Nn(x),L=0;L<z;++L)B=A[L],K=ft(B,this),_.touch0&&_.touch0[2]===B.identifier?_.touch0[0]=K:_.touch1&&_.touch1[2]===B.identifier&&(_.touch1[0]=K);if(B=_.that.__zoom,_.touch1){var te=_.touch0[0],W=_.touch0[1],$=_.touch1[0],re=_.touch1[1],me=(me=$[0]-te[0])*me+(me=$[1]-te[1])*me,ve=(ve=re[0]-W[0])*ve+(ve=re[1]-W[1])*ve;B=v(B,Math.sqrt(me/ve)),K=[(te[0]+$[0])/2,(te[1]+$[1])/2],j=[(W[0]+re[0])/2,(W[1]+re[1])/2]}else if(_.touch0)K=_.touch0[0],j=_.touch0[1];else return;_.zoom("touch",n(S(B,K,j),_.extent,o))}}function P(x,...O){if(this.__zooming){var _=C(this,O).event(x),A=x.changedTouches,z=A.length,L,B;for(ir(x),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),L=0;L<z;++L)B=A[L],_.touch0&&_.touch0[2]===B.identifier?delete _.touch0:_.touch1&&_.touch1[2]===B.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(B=ft(B,this),Math.hypot(h[0]-B[0],h[1]-B[1])<y)){var K=ut(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return k.wheelDelta=function(x){return arguments.length?(i=typeof x=="function"?x:Qn(+x),k):i},k.filter=function(x){return arguments.length?(e=typeof x=="function"?x:Qn(!!x),k):e},k.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:Qn(!!x),k):r},k.extent=function(x){return arguments.length?(t=typeof x=="function"?x:Qn([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),k):t},k.scaleExtent=function(x){return arguments.length?(s[0]=+x[0],s[1]=+x[1],k):[s[0],s[1]]},k.translateExtent=function(x){return arguments.length?(o[0][0]=+x[0][0],o[1][0]=+x[1][0],o[0][1]=+x[0][1],o[1][1]=+x[1][1],k):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},k.constrain=function(x){return arguments.length?(n=x,k):n},k.duration=function(x){return arguments.length?(l=+x,k):l},k.interpolate=function(x){return arguments.length?(a=x,k):a},k.on=function(){var x=u.on.apply(u,arguments);return x===u?k:x},k.clickDistance=function(x){return arguments.length?(w=(x=+x)*x,k):Math.sqrt(w)},k.tapDistance=function(x){return arguments.length?(y=+x,k):y},k}const Wn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},xi=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var $t;(function(e){e.Strict="strict",e.Loose="loose"})($t||($t={}));var Ht;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ht||(Ht={}));var wi;(function(e){e.Partial="partial",e.Full="full"})(wi||(wi={}));const Sr={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var fn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(fn||(fn={}));var bi;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(bi||(bi={}));var le;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(le||(le={}));const ts={[le.Left]:le.Right,[le.Right]:le.Left,[le.Top]:le.Bottom,[le.Bottom]:le.Top};function mh(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function ns(e,t,n){if(!n)return;const i=[];e.forEach((r,s)=>{t!=null&&t.has(s)||i.push(r)}),i.length&&n(i)}function vh(e){return e===null?null:e?"valid":"invalid"}const yh=e=>"id"in e&&"source"in e&&"target"in e,xh=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),jr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Kn=(e,t=[0,0])=>{const{width:n,height:i}=Bt(e),r=e.origin??t,s=n*r[0],o=i*r[1];return{x:e.position.x-s,y:e.position.y-o}},wh=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,r)=>{const s=typeof r=="string";let o=!t.nodeLookup&&!s?r:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(r):jr(r)?r:t.nodeLookup.get(r.id));const l=o?_i(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Bi(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Vi(n)},Un=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const r=_i(i);n=Bi(n,r)}}),Vi(n)},Tl=(e,t,[n,i,r]=[0,0,1],s=!1,o=!1)=>{const l={...Zn(t,[n,i,r]),width:t.width/r,height:t.height/r},a=[];for(const u of e.values()){const{measured:c,selectable:h=!0,hidden:d=!1}=u;if(o&&!h||d)continue;const g=c.width??u.width??u.initialWidth??null,m=c.height??u.height??u.initialHeight??null,w=Rn(l,yn(u)),y=(g??0)*(m??0),k=s&&w>0;(!u.internals.handleBounds||k||w>=y||u.dragging)&&a.push(u)}return a},Cr=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function is(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function rs({nodes:e,width:t,height:n,panZoom:i,minZoom:r,maxZoom:s},o){if(e.size===0)return Promise.resolve(!1);const l=Un(e),a=Jr(l,t,n,(o==null?void 0:o.minZoom)??r,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await i.setViewport(a,{duration:o==null?void 0:o.duration}),Promise.resolve(!0)}function bh({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:s}){const o=n.get(e),l=o.parentId?n.get(o.parentId):void 0,{x:a,y:u}=l?l.internals.positionAbsolute:{x:0,y:0},c=o.origin??i;let h=r;if(o.extent==="parent"&&!o.expandParent)if(!l)s==null||s("005",Wn.error005());else{const g=l.measured.width,m=l.measured.height;g&&m&&(h=[[a,u],[a+g,u+m]])}else l&&xn(o.extent)&&(h=[[o.extent[0][0]+a,o.extent[0][1]+u],[o.extent[1][0]+a,o.extent[1][1]+u]]);const d=xn(h)?Jt(t,h,o.measured):t;return{position:{x:d.x-a+o.measured.width*c[0],y:d.y-u+o.measured.height*c[1]},positionAbsolute:d}}async function Pl({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:r}){const s=new Set(e.map(d=>d.id)),o=[];for(const d of n){if(d.deletable===!1)continue;const g=s.has(d.id),m=!g&&d.parentId&&o.find(w=>w.id===d.parentId);(g||m)&&o.push(d)}const l=new Set(t.map(d=>d.id)),a=i.filter(d=>d.deletable!==!1),c=Cr(o,a);for(const d of a)l.has(d.id)&&!c.find(m=>m.id===d.id)&&c.push(d);if(!r)return{edges:c,nodes:o};const h=await r({nodes:o,edges:c});return typeof h=="boolean"?h?{edges:c,nodes:o}:{edges:[],nodes:[]}:h}const vn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Jt=(e={x:0,y:0},t,n)=>({x:vn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:vn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Il(e,t,n){const{width:i,height:r}=Bt(n),{x:s,y:o}=n.internals.positionAbsolute;return Jt(e,[[s,o],[s+i,o+r]],t)}const os=(e,t,n)=>e<t?vn(Math.abs(e-t),1,t)/t:e>n?-vn(Math.abs(e-n),1,t)/t:0,Ol=(e,t,n=15,i=40)=>{const r=os(e.x,i,t.width-i)*n,s=os(e.y,i,t.height-i)*n;return[r,s]},Bi=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ar=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),Vi=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),yn=(e,t=[0,0])=>{var r,s;const{x:n,y:i}=jr(e)?e.internals.positionAbsolute:Kn(e,t);return{x:n,y:i,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},_i=(e,t=[0,0])=>{var r,s;const{x:n,y:i}=jr(e)?e.internals.positionAbsolute:Kn(e,t);return{x:n,y:i,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:i+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},zl=(e,t)=>Vi(Bi(Ar(e),Ar(t))),Rn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},ss=e=>Nt(e.width)&&Nt(e.height)&&Nt(e.x)&&Nt(e.y),Nt=e=>!isNaN(e)&&isFinite(e),_h=(e,t)=>{},$r=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Zn=({x:e,y:t},[n,i,r],s=!1,o=[1,1])=>{const l={x:(e-n)/r,y:(t-i)/r};return s?$r(l,o):l},Dl=({x:e,y:t},[n,i,r])=>({x:e*r+n,y:t*r+i}),Jr=(e,t,n,i,r,s)=>{const o=t/(e.width*(1+s)),l=n/(e.height*(1+s)),a=Math.min(o,l),u=vn(a,i,r),c=e.x+e.width/2,h=e.y+e.height/2,d=t/2-c*u,g=n/2-h*u;return{x:d,y:g,zoom:u}},ki=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function xn(e){return e!==void 0&&e!=="parent"}function Bt(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Ll(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function kh(e,t={width:0,height:0},n,i,r){const s={...e},o=i.get(n);if(o){const l=o.origin||r;s.x+=o.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function rr(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:s,y:o}=Mt(e),l=Zn({x:s-((r==null?void 0:r.left)??0),y:o-((r==null?void 0:r.top)??0)},i),{x:a,y:u}=n?$r(l,t):l;return{xSnapped:a,ySnapped:u,...l}}const Qr=e=>({width:e.offsetWidth,height:e.offsetHeight}),Eh=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Sh=["INPUT","SELECT","TEXTAREA"];function Ch(e){var i,r;const t=((r=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:r[0])||e.target;return Sh.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const Hl=e=>"clientX"in e,Mt=(e,t)=>{var s,o;const n=Hl(e),i=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,r=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},ls=(e,t,n,i,r)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:r,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...Qr(o)}})};function Ah({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:s,targetControlX:o,targetControlY:l}){const a=e*.125+r*.375+o*.375+n*.125,u=t*.125+s*.375+l*.375+i*.125,c=Math.abs(a-e),h=Math.abs(u-t);return[a,u,c,h]}function ei(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function as({pos:e,x1:t,y1:n,x2:i,y2:r,c:s}){switch(e){case le.Left:return[t-ei(t-i,s),n];case le.Right:return[t+ei(i-t,s),n];case le.Top:return[t,n-ei(n-r,s)];case le.Bottom:return[t,n+ei(r-n,s)]}}function Rl({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:i,targetY:r,targetPosition:s=le.Top,curvature:o=.25}){const[l,a]=as({pos:n,x1:e,y1:t,x2:i,y2:r,c:o}),[u,c]=as({pos:s,x1:i,y1:r,x2:e,y2:t,c:o}),[h,d,g,m]=Ah({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:l,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${e},${t} C${l},${a} ${u},${c} ${i},${r}`,h,d,g,m]}function Fl({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,o=Math.abs(i-t)/2,l=i<t?i+o:i-o;return[s,l,r,o]}function Nh({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const s=n||t.selected||e.selected,o=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(s?o:0)}function Mh({sourceNode:e,targetNode:t,width:n,height:i,transform:r}){const s=Bi(_i(e),_i(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return Rn(o,Vi(s))>0}const Th=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,Ph=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Ih=(e,t)=>{if(!e.source||!e.target)return t;let n;return yh(e)?n={...e}:n={...e,id:Th(e)},Ph(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Nr({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[r,s,o,l]=Fl({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,r,s,o,l]}const cs={[le.Left]:{x:-1,y:0},[le.Right]:{x:1,y:0},[le.Top]:{x:0,y:-1},[le.Bottom]:{x:0,y:1}},Oh=({source:e,sourcePosition:t=le.Bottom,target:n})=>t===le.Left||t===le.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},us=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function zh({source:e,sourcePosition:t=le.Bottom,target:n,targetPosition:i=le.Top,center:r,offset:s}){const o=cs[t],l=cs[i],a={x:e.x+o.x*s,y:e.y+o.y*s},u={x:n.x+l.x*s,y:n.y+l.y*s},c=Oh({source:a,sourcePosition:t,target:u}),h=c.x!==0?"x":"y",d=c[h];let g=[],m,w;const y={x:0,y:0},k={x:0,y:0},[v,S,b,E]=Fl({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[h]*l[h]===-1){m=r.x??v,w=r.y??S;const N=[{x:m,y:a.y},{x:m,y:u.y}],D=[{x:a.x,y:w},{x:u.x,y:w}];o[h]===d?g=h==="x"?N:D:g=h==="x"?D:N}else{const N=[{x:a.x,y:u.y}],D=[{x:u.x,y:a.y}];if(h==="x"?g=o.x===d?D:N:g=o.y===d?N:D,t===i){const P=Math.abs(e[h]-n[h]);if(P<=s){const x=Math.min(s-1,s-P);o[h]===d?y[h]=(a[h]>e[h]?-1:1)*x:k[h]=(u[h]>n[h]?-1:1)*x}}if(t!==i){const P=h==="x"?"y":"x",x=o[h]===l[P],O=a[P]>u[P],_=a[P]<u[P];(o[h]===1&&(!x&&O||x&&_)||o[h]!==1&&(!x&&_||x&&O))&&(g=h==="x"?N:D)}const H={x:a.x+y.x,y:a.y+y.y},M={x:u.x+k.x,y:u.y+k.y},T=Math.max(Math.abs(H.x-g[0].x),Math.abs(M.x-g[0].x)),I=Math.max(Math.abs(H.y-g[0].y),Math.abs(M.y-g[0].y));T>=I?(m=(H.x+M.x)/2,w=g[0].y):(m=g[0].x,w=(H.y+M.y)/2)}return[[e,{x:a.x+y.x,y:a.y+y.y},...g,{x:u.x+k.x,y:u.y+k.y},n],m,w,b,E]}function Dh(e,t,n,i){const r=Math.min(us(e,t)/2,us(t,n)/2,i),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+r*u},${o}Q ${s},${o} ${s},${o+r*c}`}const l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${s},${o+r*a}Q ${s},${o} ${s+r*l},${o}`}function Ei({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:i,targetY:r,targetPosition:s=le.Top,borderRadius:o=5,centerX:l,centerY:a,offset:u=20}){const[c,h,d,g,m]=zh({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:r},targetPosition:s,center:{x:l,y:a},offset:u});return[c.reduce((y,k,v)=>{let S="";return v>0&&v<c.length-1?S=Dh(c[v-1],k,c[v+1],o):S=`${v===0?"M":"L"}${k.x} ${k.y}`,y+=S,y},""),h,d,g,m]}function ds(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Lh(e){var h;const{sourceNode:t,targetNode:n}=e;if(!ds(t)||!ds(n))return null;const i=t.internals.handleBounds||fs(t.handles),r=n.internals.handleBounds||fs(n.handles),s=hs((i==null?void 0:i.source)??[],e.sourceHandle),o=hs(e.connectionMode===$t.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!s||!o)return(h=e.onError)==null||h.call(e,"008",Wn.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(s==null?void 0:s.position)||le.Bottom,a=(o==null?void 0:o.position)||le.Top,u=Fn(t,s,l),c=Fn(n,o,a);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:l,targetPosition:a}}function fs(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Fn(e,t,n=le.Left,i=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:l}=t??Bt(e);if(i)return{x:r+o/2,y:s+l/2};switch((t==null?void 0:t.position)??n){case le.Top:return{x:r+o/2,y:s};case le.Right:return{x:r+o,y:s+l/2};case le.Bottom:return{x:r+o/2,y:s+l};case le.Left:return{x:r,y:s+l/2}}}function hs(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Mr(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function Hh(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const s=new Set;return e.reduce((o,l)=>([l.markerStart||i,l.markerEnd||r].forEach(a=>{if(a&&typeof a=="object"){const u=Mr(a,t);s.has(u)||(o.push({id:u,color:a.color||n,...a}),s.add(u))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}function Rh(e,t,n,i,r){let s=.5;r==="start"?s=0:r==="end"&&(s=1);let o=[(e.x+e.width*s)*t.zoom+t.x,e.y*t.zoom+t.y-i],l=[-100*s,-100];switch(n){case le.Right:o=[(e.x+e.width)*t.zoom+t.x+i,(e.y+e.height*s)*t.zoom+t.y],l=[0,-100*s];break;case le.Bottom:o[1]=(e.y+e.height)*t.zoom+t.y+i,l[1]=0;break;case le.Left:o=[e.x*t.zoom+t.x-i,(e.y+e.height*s)*t.zoom+t.y],l=[-100,-100*s];break}return`translate(${o[0]}px, ${o[1]}px) translate(${l[0]}%, ${l[1]}%)`}const eo={nodeOrigin:[0,0],nodeExtent:xi,elevateNodesOnSelect:!0,defaults:{}},Fh={...eo,checkEquality:!0};function to(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function Yh(e,t,n){const i=to(eo,n);for(const r of e.values())if(r.parentId)no(r,e,t,i);else{const s=Kn(r,i.nodeOrigin),o=xn(r.extent)?r.extent:i.nodeExtent,l=Jt(s,o,Bt(r));r.internals.positionAbsolute=l}}function Yl(e,t,n,i){var l,a;const r=to(Fh,i),s=new Map(t),o=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let c=s.get(u.id);if(r.checkEquality&&u===(c==null?void 0:c.internals.userNode))t.set(u.id,c);else{const h=Kn(u,r.nodeOrigin),d=xn(u.extent)?u.extent:r.nodeExtent,g=Jt(h,d,Bt(u));c={...r.defaults,...u,measured:{width:(l=u.measured)==null?void 0:l.width,height:(a=u.measured)==null?void 0:a.height},internals:{positionAbsolute:g,handleBounds:u.measured?c==null?void 0:c.internals.handleBounds:void 0,z:Bl(u,o),userNode:u}},t.set(u.id,c)}u.parentId&&no(c,t,n,i)}}function Bh(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function no(e,t,n,i){const{elevateNodesOnSelect:r,nodeOrigin:s,nodeExtent:o}=to(eo,i),l=e.parentId,a=t.get(l);if(!a){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Bh(e,n);const u=r?1e3:0,{x:c,y:h,z:d}=Vh(e,a,s,o,u),{positionAbsolute:g}=e.internals,m=c!==g.x||h!==g.y;(m||d!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:m?{x:c,y:h}:g,z:d})}function Bl(e,t){return(Nt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Vh(e,t,n,i,r){const{x:s,y:o}=t.internals.positionAbsolute,l=Bt(e),a=Kn(e,n),u=xn(e.extent)?Jt(a,e.extent,l):a;let c=Jt({x:s+u.x,y:o+u.y},i,l);e.extent==="parent"&&(c=Il(c,l,t));const h=Bl(e,r),d=t.internals.z??0;return{x:c.x,y:c.y,z:d>h?d:h}}function Xh(e,t,n,i=[0,0]){var o;const r=[],s=new Map;for(const l of e){const a=t.get(l.parentId);if(!a)continue;const u=((o=s.get(l.parentId))==null?void 0:o.expandedRect)??yn(a),c=zl(u,l.rect);s.set(l.parentId,{expandedRect:c,parent:a})}return s.size>0&&s.forEach(({expandedRect:l,parent:a},u)=>{var S;const c=a.internals.positionAbsolute,h=Bt(a),d=a.origin??i,g=l.x<c.x?Math.round(Math.abs(c.x-l.x)):0,m=l.y<c.y?Math.round(Math.abs(c.y-l.y)):0,w=Math.max(h.width,Math.round(l.width)),y=Math.max(h.height,Math.round(l.height)),k=(w-h.width)*d[0],v=(y-h.height)*d[1];(g>0||m>0||k||v)&&(r.push({id:u,type:"position",position:{x:a.position.x-g+k,y:a.position.y-m+v}}),(S=n.get(u))==null||S.forEach(b=>{e.some(E=>E.id===b.id)||r.push({id:b.id,type:"position",position:{x:b.position.x+g,y:b.position.y+m}})})),(h.width<l.width||h.height<l.height||g||m)&&r.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:w+(g?d[0]*g-k:0),height:y+(m?d[1]*m-v:0)}})}),r}function Wh(e,t,n,i,r,s){const o=i==null?void 0:i.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const a=[],u=window.getComputedStyle(o),{m22:c}=new window.DOMMatrixReadOnly(u.transform),h=[];for(const d of e.values()){const g=t.get(d.id);if(g)if(g.hidden)g.internals={...g.internals,handleBounds:void 0},l=!0;else{const m=Qr(d.nodeElement),w=g.measured.width!==m.width||g.measured.height!==m.height;if(!!(m.width&&m.height&&(w||!g.internals.handleBounds||d.force))){const k=d.nodeElement.getBoundingClientRect(),v=xn(g.extent)?g.extent:s;let{positionAbsolute:S}=g.internals;g.parentId&&g.extent==="parent"?S=Il(S,m,t.get(g.parentId)):v&&(S=Jt(S,v,m)),g.measured=m,g.internals={...g.internals,positionAbsolute:S,handleBounds:{source:ls("source",d.nodeElement,k,c,g.id),target:ls("target",d.nodeElement,k,c,g.id)}},g.parentId&&no(g,t,n,{nodeOrigin:r}),l=!0,w&&(a.push({id:g.id,type:"dimensions",dimensions:m}),g.expandParent&&g.parentId&&h.push({id:g.id,parentId:g.parentId,rect:yn(g,r)}))}}}if(h.length>0){const d=Xh(h,t,n,r);a.push(...d)}return{changes:a,updatedInternals:l}}async function Kh({delta:e,panZoom:t,transform:n,translateExtent:i,width:r,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,s]],i),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function Vl(e,t,n){e.clear(),t.clear();for(const i of n){const{source:r,target:s,sourceHandle:o=null,targetHandle:l=null}=i,a=`${r}-source-${o}`,u=`${s}-target-${l}`,c=e.get(a)||new Map,h=e.get(u)||new Map,d={edgeId:i.id,source:r,target:s,sourceHandle:o,targetHandle:l};t.set(i.id,i),e.set(a,c.set(`${s}-${l}`,d)),e.set(u,h.set(`${r}-${o}`,d))}}function Xl(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Xl(n,t):!1}function gs(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Uh(e,t,n,i){const r=new Map;for(const[s,o]of e)if((o.selected||o.id===i)&&(!o.parentId||!Xl(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const l=e.get(s);l&&r.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return r}function or({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var o,l,a;const r=[];for(const[u,c]of t){const h=(o=n.get(u))==null?void 0:o.internals.userNode;h&&r.push({...h,position:c.position,dragging:i})}if(!e)return[r[0],r];const s=(l=n.get(e))==null?void 0:l.internals.userNode;return[s?{...s,position:((a=t.get(e))==null?void 0:a.position)||s.position,dragging:i}:r[0],r]}function Zh({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:r}){let s={x:null,y:null},o=0,l=new Map,a=!1,u={x:0,y:0},c=null,h=!1,d=null,g=!1;function m({noDragClassName:y,handleSelector:k,domNode:v,isSelectable:S,nodeId:b,nodeClickDistance:E=0}){d=ut(v);function C({x:M,y:T},I){const{nodeLookup:P,nodeExtent:x,snapGrid:O,snapToGrid:_,nodeOrigin:A,onNodeDrag:z,onSelectionDrag:L,onError:B,updateNodePositions:K}=t();s={x:M,y:T};let j=!1,te={x:0,y:0,x2:0,y2:0};if(l.size>1&&x){const W=Un(l);te=Ar(W)}for(const[W,$]of l){if(!P.has(W))continue;let re={x:M-$.distance.x,y:T-$.distance.y};_&&(re=$r(re,O));let me=[[x[0][0],x[0][1]],[x[1][0],x[1][1]]];if(l.size>1&&x&&!$.extent){const{positionAbsolute:G}=$.internals,oe=G.x-te.x+x[0][0],ce=G.x+$.measured.width-te.x2+x[1][0],Ee=G.y-te.y+x[0][1],be=G.y+$.measured.height-te.y2+x[1][1];me=[[oe,Ee],[ce,be]]}const{position:ve,positionAbsolute:Z}=bh({nodeId:W,nextPosition:re,nodeLookup:P,nodeExtent:me,nodeOrigin:A,onError:B});j=j||$.position.x!==ve.x||$.position.y!==ve.y,$.position=ve,$.internals.positionAbsolute=Z}if(j&&(K(l,!0),I&&(i||z||!b&&L))){const[W,$]=or({nodeId:b,dragItems:l,nodeLookup:P});i==null||i(I,l,W,$),z==null||z(I,W,$),b||L==null||L(I,$)}}async function N(){if(!c)return;const{transform:M,panBy:T,autoPanSpeed:I}=t(),[P,x]=Ol(u,c,I);(P!==0||x!==0)&&(s.x=(s.x??0)-P/M[2],s.y=(s.y??0)-x/M[2],await T({x:P,y:x})&&C(s,null)),o=requestAnimationFrame(N)}function D(M){var j;const{nodeLookup:T,multiSelectionActive:I,nodesDraggable:P,transform:x,snapGrid:O,snapToGrid:_,selectNodesOnDrag:A,onNodeDragStart:z,onSelectionDragStart:L,unselectNodesAndEdges:B}=t();h=!0,(!A||!S)&&!I&&b&&((j=T.get(b))!=null&&j.selected||B()),S&&A&&b&&(e==null||e(b));const K=rr(M.sourceEvent,{transform:x,snapGrid:O,snapToGrid:_,containerBounds:c});if(s=K,l=Uh(T,P,K,b),l.size>0&&(n||z||!b&&L)){const[te,W]=or({nodeId:b,dragItems:l,nodeLookup:T});n==null||n(M.sourceEvent,l,te,W),z==null||z(M.sourceEvent,te,W),b||L==null||L(M.sourceEvent,W)}}const H=Sd().clickDistance(E).on("start",M=>{const{domNode:T,nodeDragThreshold:I,transform:P,snapGrid:x,snapToGrid:O}=t();c=(T==null?void 0:T.getBoundingClientRect())||null,g=!1,I===0&&D(M),s=rr(M.sourceEvent,{transform:P,snapGrid:x,snapToGrid:O,containerBounds:c}),u=Mt(M.sourceEvent,c)}).on("drag",M=>{const{autoPanOnNodeDrag:T,transform:I,snapGrid:P,snapToGrid:x,nodeDragThreshold:O,nodeLookup:_}=t(),A=rr(M.sourceEvent,{transform:I,snapGrid:P,snapToGrid:x,containerBounds:c});if((M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1||b&&!_.has(b))&&(g=!0),!g){if(!a&&T&&h&&(a=!0,N()),!h){const z=A.xSnapped-(s.x??0),L=A.ySnapped-(s.y??0);Math.sqrt(z*z+L*L)>O&&D(M)}(s.x!==A.xSnapped||s.y!==A.ySnapped)&&l&&h&&(u=Mt(M.sourceEvent,c),C(A,M.sourceEvent))}}).on("end",M=>{if(!(!h||g)&&(a=!1,h=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:T,updateNodePositions:I,onNodeDragStop:P,onSelectionDragStop:x}=t();if(I(l,!1),r||P||!b&&x){const[O,_]=or({nodeId:b,dragItems:l,nodeLookup:T,dragging:!1});r==null||r(M.sourceEvent,l,O,_),P==null||P(M.sourceEvent,O,_),b||x==null||x(M.sourceEvent,_)}}}).filter(M=>{const T=M.target;return!M.button&&(!y||!gs(T,`.${y}`,v))&&(!k||gs(T,k,v))});d.call(H)}function w(){d==null||d.on(".drag",null)}return{update:m,destroy:w}}function qh(e,t,n){const i=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Rn(r,yn(s))>0&&i.push(s);return i}const Gh=250;function jh(e,t,n,i){var l,a;let r=[],s=1/0;const o=qh(e,n,t+Gh);for(const u of o){const c=[...((l=u.internals.handleBounds)==null?void 0:l.source)??[],...((a=u.internals.handleBounds)==null?void 0:a.target)??[]];for(const h of c){if(i.nodeId===h.nodeId&&i.type===h.type&&i.id===h.id)continue;const{x:d,y:g}=Fn(u,h,h.position,!0),m=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(g-e.y,2));m>t||(m<s?(r=[{...h,x:d,y:g}],s=m):m===s&&r.push({...h,x:d,y:g}))}}if(!r.length)return null;if(r.length>1){const u=i.type==="source"?"target":"source";return r.find(c=>c.type===u)??r[0]}return r[0]}function Wl(e,t,n,i,r,s=!1){var u,c,h;const o=i.get(e);if(!o)return null;const l=r==="strict"?(u=o.internals.handleBounds)==null?void 0:u[t]:[...((c=o.internals.handleBounds)==null?void 0:c.source)??[],...((h=o.internals.handleBounds)==null?void 0:h.target)??[]],a=(n?l==null?void 0:l.find(d=>d.id===n):l==null?void 0:l[0])??null;return a&&s?{...a,...Fn(o,a,a.position,!0)}:a}function Kl(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function $h(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Ul=()=>!0;function Jh(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:a,lib:u,autoPanOnConnect:c,flowId:h,panBy:d,cancelConnection:g,onConnectStart:m,onConnect:w,onConnectEnd:y,isValidConnection:k=Ul,onReconnectEnd:v,updateConnection:S,getTransform:b,getFromHandle:E,autoPanSpeed:C}){const N=Eh(e.target);let D=0,H;const{x:M,y:T}=Mt(e),I=N==null?void 0:N.elementFromPoint(M,T),P=Kl(s,I),x=l==null?void 0:l.getBoundingClientRect();if(!x||!P)return;const O=Wl(r,P,i,a,t);if(!O)return;let _=Mt(e,x),A=!1,z=null,L=!1,B=null;function K(){if(!c||!x)return;const[Z,G]=Ol(_,x,C);d({x:Z,y:G}),D=requestAnimationFrame(K)}const j={...O,nodeId:r,type:P,position:O.position},te=a.get(r),$={inProgress:!0,isValid:null,from:Fn(te,j,le.Left,!0),fromHandle:j,fromPosition:j.position,fromNode:te,to:_,toHandle:null,toPosition:ts[j.position],toNode:null};S($);let re=$;m==null||m(e,{nodeId:r,handleId:i,handleType:P});function me(Z){if(!E()||!j){ve(Z);return}const G=b();_=Mt(Z,x),H=jh(Zn(_,G,!1,[1,1]),n,a,j),A||(K(),A=!0);const oe=Zl(Z,{handle:H,connectionMode:t,fromNodeId:r,fromHandleId:i,fromType:o?"target":"source",isValidConnection:k,doc:N,lib:u,flowId:h,nodeLookup:a});B=oe.handleDomNode,z=oe.connection,L=$h(!!H,oe.isValid);const ce={...re,isValid:L,to:H&&L?Dl({x:H.x,y:H.y},G):_,toHandle:oe.toHandle,toPosition:L&&oe.toHandle?oe.toHandle.position:ts[j.position],toNode:oe.toHandle?a.get(oe.toHandle.nodeId):null};L&&H&&re.toHandle&&ce.toHandle&&re.toHandle.type===ce.toHandle.type&&re.toHandle.nodeId===ce.toHandle.nodeId&&re.toHandle.id===ce.toHandle.id&&re.to.x===ce.to.x&&re.to.y===ce.to.y||(S(ce),re=ce)}function ve(Z){(H||B)&&z&&L&&(w==null||w(z));const{inProgress:G,...oe}=re,ce={...oe,toPosition:re.toHandle?re.toPosition:null};y==null||y(Z,ce),s&&(v==null||v(Z,ce)),g(),cancelAnimationFrame(D),A=!1,L=!1,z=null,B=null,N.removeEventListener("mousemove",me),N.removeEventListener("mouseup",ve),N.removeEventListener("touchmove",me),N.removeEventListener("touchend",ve)}N.addEventListener("mousemove",me),N.addEventListener("mouseup",ve),N.addEventListener("touchmove",me),N.addEventListener("touchend",ve)}function Zl(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:s,doc:o,lib:l,flowId:a,isValidConnection:u=Ul,nodeLookup:c}){const h=s==="target",d=t?o.querySelector(`.${l}-flow__handle[data-id="${a}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:m}=Mt(e),w=o.elementFromPoint(g,m),y=w!=null&&w.classList.contains(`${l}-flow__handle`)?w:d,k={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const v=Kl(void 0,y),S=y.getAttribute("data-nodeid"),b=y.getAttribute("data-handleid"),E=y.classList.contains("connectable"),C=y.classList.contains("connectableend");if(!S||!v)return k;const N={source:h?S:i,sourceHandle:h?b:r,target:h?i:S,targetHandle:h?r:b};k.connection=N;const H=E&&C&&(n===$t.Strict?h&&v==="source"||!h&&v==="target":S!==i||b!==r);k.isValid=H&&u(N),k.toHandle=Wl(S,v,b,c,n,!1)}return k}const Qh={onPointerDown:Jh,isValid:Zl};function eg({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const r=ut(e);function s({translateExtent:l,width:a,height:u,zoomStep:c=10,pannable:h=!0,zoomable:d=!0,inversePan:g=!1}){const m=S=>{const b=n();if(S.sourceEvent.type!=="wheel"||!t)return;const E=-S.sourceEvent.deltaY*(S.sourceEvent.deltaMode===1?.05:S.sourceEvent.deltaMode?1:.002)*c,C=b[2]*Math.pow(2,E);t.scaleTo(C)};let w=[0,0];const y=S=>{(S.sourceEvent.type==="mousedown"||S.sourceEvent.type==="touchstart")&&(w=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY])},k=S=>{const b=n();if(S.sourceEvent.type!=="mousemove"&&S.sourceEvent.type!=="touchmove"||!t)return;const E=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY],C=[E[0]-w[0],E[1]-w[1]];w=E;const N=i()*Math.max(b[2],Math.log(b[2]))*(g?-1:1),D={x:b[0]-C[0]*N,y:b[1]-C[1]*N},H=[[0,0],[a,u]];t.setViewportConstrained({x:D.x,y:D.y,zoom:b[2]},H,l)},v=Ml().on("start",y).on("zoom",h?k:null).on("zoom.wheel",d?m:null);r.call(v,{})}function o(){r.on("zoom",null)}return{update:s,destroy:o,pointer:ft}}const tg=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Xi=e=>({x:e.x,y:e.y,zoom:e.k}),sr=({x:e,y:t,zoom:n})=>Yi.translate(e,t).scale(n),sn=(e,t)=>e.target.closest(`.${t}`),ql=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),lr=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},Gl=e=>{const t=e.ctrlKey&&ki()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function ng({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:u}){return c=>{if(sn(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(c.ctrlKey&&o){const y=ft(c),k=Gl(c),v=h*Math.pow(2,k);i.scaleTo(n,v,y,c);return}const d=c.deltaMode===1?20:1;let g=r===Ht.Vertical?0:c.deltaX*d,m=r===Ht.Horizontal?0:c.deltaY*d;!ki()&&c.shiftKey&&r!==Ht.Vertical&&(g=c.deltaY*d,m=0),i.translateBy(n,-(g/h)*s,-(m/h)*s,{internal:!0});const w=Xi(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l==null||l(c,w)),e.isPanScrolling&&(a==null||a(c,w),e.panScrollTimeout=setTimeout(()=>{u==null||u(c,w),e.isPanScrolling=!1},150))}}function ig({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,r){if(!t&&i.type==="wheel"&&!i.ctrlKey||sn(i,e))return null;i.preventDefault(),n.call(this,i,r)}}function rg({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var s,o,l;if((s=i.sourceEvent)!=null&&s.internal)return;const r=Xi(i.transform);e.mouseButton=((o=i.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((l=i.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,r))}}function og({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return s=>{var o,l;e.usedRightMouseButton=!!(n&&ql(t,e.mouseButton??0)),(o=s.sourceEvent)!=null&&o.sync||i([s.transform.x,s.transform.y,s.transform.k]),r&&!((l=s.sourceEvent)!=null&&l.internal)&&(r==null||r(s.sourceEvent,Xi(s.transform)))}}function sg({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:s}){return o=>{var l;if(!((l=o.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,s&&ql(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,i(!1),r&&tg(e.prevViewport,o.transform))){const a=Xi(o.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(o.sourceEvent,a)},n?150:0)}}}function lg({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:a,lib:u}){return c=>{var m;const h=e||t,d=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(sn(c,`${u}-flow__node`)||sn(c,`${u}-flow__edge`)))return!0;if(!i&&!h&&!r&&!s&&!n||o||sn(c,l)&&c.type==="wheel"||sn(c,a)&&(c.type!=="wheel"||r&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((m=c.touches)==null?void 0:m.length)>1)return c.preventDefault(),!1;if(!h&&!r&&!d&&c.type==="wheel"||!i&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(i)&&!i.includes(c.button)&&c.type==="mousedown")return!1;const g=Array.isArray(i)&&i.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&g}}function ag({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:r,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:a,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),d=Ml().clickDistance(!Nt(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(r),g=ut(e).call(d);S({x:s.x,y:s.y,zoom:vn(s.zoom,t,n)},[[0,0],[h.width,h.height]],r);const m=g.on("wheel.zoom"),w=g.on("dblclick.zoom");d.wheelDelta(Gl);function y(I,P){return g?new Promise(x=>{d==null||d.transform(lr(g,P==null?void 0:P.duration,()=>x(!0)),I)}):Promise.resolve(!1)}function k({noWheelClassName:I,noPanClassName:P,onPaneContextMenu:x,userSelectionActive:O,panOnScroll:_,panOnDrag:A,panOnScrollMode:z,panOnScrollSpeed:L,preventScrolling:B,zoomOnPinch:K,zoomOnScroll:j,zoomOnDoubleClick:te,zoomActivationKeyPressed:W,lib:$,onTransformChange:re}){O&&!c.isZoomingOrPanning&&v();const ve=_&&!W&&!O?ng({zoomPanValues:c,noWheelClassName:I,d3Selection:g,d3Zoom:d,panOnScrollMode:z,panOnScrollSpeed:L,zoomOnPinch:K,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:a}):ig({noWheelClassName:I,preventScrolling:B,d3ZoomHandler:m});if(g.on("wheel.zoom",ve,{passive:!1}),!O){const G=rg({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:l});d.on("start",G);const oe=og({zoomPanValues:c,panOnDrag:A,onPaneContextMenu:!!x,onPanZoom:o,onTransformChange:re});d.on("zoom",oe);const ce=sg({zoomPanValues:c,panOnDrag:A,panOnScroll:_,onPaneContextMenu:x,onPanZoomEnd:a,onDraggingChange:u});d.on("end",ce)}const Z=lg({zoomActivationKeyPressed:W,panOnDrag:A,zoomOnScroll:j,panOnScroll:_,zoomOnDoubleClick:te,zoomOnPinch:K,userSelectionActive:O,noPanClassName:P,noWheelClassName:I,lib:$});d.filter(Z),te?g.on("dblclick.zoom",w):g.on("dblclick.zoom",null)}function v(){d.on("zoom",null)}async function S(I,P,x){const O=sr(I),_=d==null?void 0:d.constrain()(O,P,x);return _&&await y(_),new Promise(A=>A(_))}async function b(I,P){const x=sr(I);return await y(x,P),new Promise(O=>O(x))}function E(I){if(g){const P=sr(I),x=g.property("__zoom");(x.k!==I.zoom||x.x!==I.x||x.y!==I.y)&&(d==null||d.transform(g,P,null,{sync:!0}))}}function C(){const I=g?Nl(g.node()):{x:0,y:0,k:1};return{x:I.x,y:I.y,zoom:I.k}}function N(I,P){return g?new Promise(x=>{d==null||d.scaleTo(lr(g,P==null?void 0:P.duration,()=>x(!0)),I)}):Promise.resolve(!1)}function D(I,P){return g?new Promise(x=>{d==null||d.scaleBy(lr(g,P==null?void 0:P.duration,()=>x(!0)),I)}):Promise.resolve(!1)}function H(I){d==null||d.scaleExtent(I)}function M(I){d==null||d.translateExtent(I)}function T(I){const P=!Nt(I)||I<0?0:I;d==null||d.clickDistance(P)}return{update:k,destroy:v,setViewport:b,setViewportConstrained:S,getViewport:C,scaleTo:N,scaleBy:D,setScaleExtent:H,setTranslateExtent:M,syncViewport:E,setClickDistance:T}}var ps;(function(e){e.Line="line",e.Handle="handle"})(ps||(ps={}));var cg=ge('<div role="button" tabindex="-1"><!></div>');function wn(e,t){ue(t,!1);const n=Be(),i=()=>X(j,"$connectable",n),r=()=>X(me,"$connectionRadius",n),s=()=>X($,"$domNode",n),o=()=>X(re,"$nodeLookup",n),l=()=>X(W,"$connectionMode",n),a=()=>X(G,"$lib",n),u=()=>X(He,"$autoPanOnConnect",n),c=()=>X(Ve,"$flowId",n),h=()=>X(Z,"$isValidConnectionStore",n),d=()=>X(ce,"$onedgecreate",n),g=()=>X(Ce,"$onConnectAction",n),m=()=>X(pe,"$onConnectStartAction",n),w=()=>X(et,"$onConnectEndAction",n),y=()=>X(ve,"$viewport",n),k=()=>X(Me,"$connection",n),v=()=>X(Te,"$edges",n),S=()=>X(ke,"$connectionLookup",n),b=V(),E=V(),C=V(),N=V(),D=V(),H=V(),M=V(),T=V();let I=p(t,"id",8,void 0),P=p(t,"type",8,"source"),x=p(t,"position",24,()=>le.Top),O=p(t,"style",8,void 0),_=p(t,"isValidConnection",8,void 0),A=p(t,"onconnect",8,void 0),z=p(t,"ondisconnect",8,void 0),L=p(t,"isConnectable",8,void 0),B=p(t,"class",8,void 0);const K=In("svelteflow__node_id"),j=In("svelteflow__node_connectable"),te=Le(),{connectionMode:W,domNode:$,nodeLookup:re,connectionRadius:me,viewport:ve,isValidConnection:Z,lib:G,addEdge:oe,onedgecreate:ce,panBy:Ee,cancelConnection:be,updateConnection:_e,autoPanOnConnect:He,edges:Te,connectionLookup:ke,onconnect:Ce,onconnectstart:pe,onconnectend:et,flowId:Ve,connection:Me}=te;function rt(Re){const Ae=Hl(Re);(Ae&&Re.button===0||!Ae)&&Qh.onPointerDown(Re,{handleId:f(C),nodeId:K,isTarget:f(b),connectionRadius:r(),domNode:s(),nodeLookup:o(),connectionMode:l(),lib:a(),autoPanOnConnect:u(),flowId:c(),isValidConnection:_()??h(),updateConnection:_e,cancelConnection:be,panBy:Ee,onConnect:Ie=>{var at;const Xe=d()?d()(Ie):Ie;Xe&&(oe(Xe),(at=g())==null||at(Ie))},onConnectStart:(Ie,Xe)=>{var at;(at=m())==null||at(Ie,{nodeId:Xe.nodeId,handleId:Xe.handleId,handleType:Xe.handleType})},onConnectEnd:(Ie,Xe)=>{var at;(at=w())==null||at(Ie,Xe)},getTransform:()=>[y().x,y().y,y().zoom],getFromHandle:()=>k().fromHandle})}let Ue=V(null),Ze=V();q(()=>Y(P()),()=>{F(b,P()==="target")}),q(()=>(Y(L()),i()),()=>{F(E,L()!==void 0?L():i())}),q(()=>Y(I()),()=>{F(C,I()||null)}),q(()=>(Y(A()),Y(z()),v(),S(),Y(P()),Y(I())),()=>{(A()||z())&&(v(),F(Ze,S().get(`${K}-${P()}-${I()||null}`)))}),q(()=>(f(Ue),f(Ze),Y(z()),Y(A())),()=>{if(f(Ue)&&!mh(f(Ze),f(Ue))){const Re=f(Ze)??new Map;ns(f(Ue),Re,z()),ns(Re,f(Ue),A())}F(Ue,f(Ze)??new Map)}),q(()=>k(),()=>{F(N,!!k().fromHandle)}),q(()=>(k(),Y(P()),f(C)),()=>{var Re,Ae,Ie;F(D,((Re=k().fromHandle)==null?void 0:Re.nodeId)===K&&((Ae=k().fromHandle)==null?void 0:Ae.type)===P()&&((Ie=k().fromHandle)==null?void 0:Ie.id)===f(C))}),q(()=>(k(),Y(P()),f(C)),()=>{var Re,Ae,Ie;F(H,((Re=k().toHandle)==null?void 0:Re.nodeId)===K&&((Ae=k().toHandle)==null?void 0:Ae.type)===P()&&((Ie=k().toHandle)==null?void 0:Ie.id)===f(C))}),q(()=>(l(),k(),Y(P()),f(C)),()=>{var Re,Ae,Ie;F(M,l()===$t.Strict?((Re=k().fromHandle)==null?void 0:Re.type)!==P():K!==((Ae=k().fromHandle)==null?void 0:Ae.nodeId)||f(C)!==((Ie=k().fromHandle)==null?void 0:Ie.id))}),q(()=>(f(H),k()),()=>{F(T,f(H)&&k().isValid)}),Ke(),fe();var Pe=cg();J(Pe,"data-nodeid",K);const Vt=ne(()=>Qe(["svelte-flow__handle",`svelte-flow__handle-${x()}`,"nodrag","nopan",x(),B()]));var en=ae(Pe);je(en,t,"default",{}),se(Pe),xe(()=>{J(Pe,"data-handleid",f(C)),J(Pe,"data-handlepos",x()),J(Pe,"data-id",`${c()??""}-${K??""}-${(I()||null)??""}-${P()??""}`),Zs(Pe,f(Vt)),J(Pe,"style",O()),Oe(Pe,"valid",f(T)),Oe(Pe,"connectingto",f(H)),Oe(Pe,"connectingfrom",f(D)),Oe(Pe,"source",!f(b)),Oe(Pe,"target",f(b)),Oe(Pe,"connectablestart",f(E)),Oe(Pe,"connectableend",f(E)),Oe(Pe,"connectable",f(E)),Oe(Pe,"connectionindicator",f(E)&&(!f(N)||f(M)))}),he("mousedown",Pe,rt),he("touchstart",Pe,rt),U(e,Pe),de()}var ug=ge("<!> <!>",1);function Tr(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["data","targetPosition","sourcePosition"]),ue(t,!1);let i=p(t,"data",24,()=>({label:"Node"})),r=p(t,"targetPosition",8,void 0),s=p(t,"sourcePosition",8,void 0);fe();var o=ug(),l=Ne(o),a=ne(()=>r()??le.Top);wn(l,{type:"target",get position(){return f(a)}});var u=ie(l),c=ie(u),h=ne(()=>s()??le.Bottom);wn(c,{type:"source",get position(){return f(h)}}),xe(()=>{var d;return xt(u,` ${((d=i())==null?void 0:d.label)??""} `)}),U(e,o),de()}var dg=ge(" <!>",1);function fg(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["data","sourcePosition"]),ue(t,!1);let i=p(t,"data",24,()=>({label:"Node"})),r=p(t,"sourcePosition",8,void 0);fe(),Ut();var s=dg(),o=Ne(s),l=ie(o),a=ne(()=>r()??le.Bottom);wn(l,{type:"source",get position(){return f(a)}}),xe(()=>{var u;return xt(o,`${((u=i())==null?void 0:u.label)??""} `)}),U(e,s),de()}var hg=ge(" <!>",1);function gg(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["data","targetPosition"]),ue(t,!1);let i=p(t,"data",24,()=>({label:"Node"})),r=p(t,"targetPosition",8,void 0);fe(),Ut();var s=hg(),o=Ne(s),l=ie(o),a=ne(()=>r()??le.Top);wn(l,{type:"target",get position(){return f(a)}}),xe(()=>{var u;return xt(o,`${((u=i())==null?void 0:u.label)??""} `)}),U(e,s),de()}function pg(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,[])}function ms(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function jl(e,{target:t,domNode:n}){return ms(e,n,t),{async update({target:i,domNode:r}){ms(e,r,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}var mg=ge("<div><!></div>");function vg(e,t){ue(t,!1);const n=Be(),i=()=>X(r,"$domNode",n),{domNode:r}=Le();fe();var s=mg(),o=ae(s);je(o,t,"default",{}),se(s),Ge(s,(l,a)=>jl(l,a),()=>({target:".svelte-flow__edgelabel-renderer",domNode:i()})),U(e,s),de()}function $l(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:r,unselectNodesAndEdges:s,elementsSelectable:o}=Le();return l=>{const a=R(e).get(l);if(!a){console.warn("012",Wn.error012(l));return}(a.selectable||R(o)&&typeof a.selectable>"u")&&(t.set(null),n.set(null),a.selected?a.selected&&R(i)&&s({nodes:[],edges:[a]}):r([l]))}}var yg=ge('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function xg(e,t){ue(t,!1);let n=p(t,"style",8,void 0),i=p(t,"x",8,void 0),r=p(t,"y",8,void 0);const s=$l(),o=In("svelteflow__edge_id");fe(),vg(e,{children:(l,a)=>{var u=yg(),c=ae(u);je(c,t,"default",{}),se(u),xe(()=>{J(u,"style","pointer-events: all;"+n()),ze(u,"transform",`translate(-50%, -50%) translate(${i()??""}px,${r()??""}px)`)}),he("keyup",u,()=>{}),he("click",u,()=>{o&&s(o)}),U(l,u)},$$slots:{default:!0}}),de()}var wg=Ye('<path fill="none" class="svelte-flow__edge-interaction"></path>'),bg=Ye('<path fill="none"></path><!><!>',1);function Wi(e,t){ue(t,!1);let n=p(t,"id",8,void 0),i=p(t,"path",8),r=p(t,"label",8,void 0),s=p(t,"labelX",8,void 0),o=p(t,"labelY",8,void 0),l=p(t,"labelStyle",8,void 0),a=p(t,"markerStart",8,void 0),u=p(t,"markerEnd",8,void 0),c=p(t,"style",8,void 0),h=p(t,"interactionWidth",8,20),d=p(t,"class",8,void 0),g=h()===void 0?20:h();fe();var m=bg(),w=Ne(m);const y=ne(()=>Qe(["svelte-flow__edge-path",d()]));var k=ie(w);Se(k,()=>g,S=>{var b=wg();J(b,"stroke-opacity",0),J(b,"stroke-width",g),xe(()=>J(b,"d",i())),U(S,b)});var v=ie(k);Se(v,r,S=>{xg(S,{get x(){return s()},get y(){return o()},get style(){return l()},children:(b,E)=>{Ut();var C=Mn();xe(()=>xt(C,r())),U(b,C)},$$slots:{default:!0}})}),xe(()=>{J(w,"id",n()),J(w,"d",i()),Qt(w,f(y)),J(w,"marker-start",a()),J(w,"marker-end",u()),J(w,"style",c())}),U(e,m),de()}function Pr(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ue(t,!1);const i=V(),r=V(),s=V();let o=p(t,"label",8,void 0),l=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),h=p(t,"interactionWidth",8,void 0),d=p(t,"sourceX",8),g=p(t,"sourceY",8),m=p(t,"sourcePosition",8),w=p(t,"targetX",8),y=p(t,"targetY",8),k=p(t,"targetPosition",8);q(()=>(f(i),f(r),f(s),Y(d()),Y(g()),Y(w()),Y(y()),Y(m()),Y(k())),()=>{(v=>(F(i,v[0]),F(r,v[1]),F(s,v[2])))(Rl({sourceX:d(),sourceY:g(),targetX:w(),targetY:y(),sourcePosition:m(),targetPosition:k()}))}),Ke(),fe(),Wi(e,{get path(){return f(i)},get labelX(){return f(r)},get labelY(){return f(s)},get label(){return o()},get labelStyle(){return l()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return h()},get style(){return a()}}),de()}function _g(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ue(t,!1);const i=V(),r=V(),s=V();let o=p(t,"label",8,void 0),l=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),h=p(t,"interactionWidth",8,void 0),d=p(t,"sourceX",8),g=p(t,"sourceY",8),m=p(t,"sourcePosition",8),w=p(t,"targetX",8),y=p(t,"targetY",8),k=p(t,"targetPosition",8);q(()=>(f(i),f(r),f(s),Y(d()),Y(g()),Y(w()),Y(y()),Y(m()),Y(k())),()=>{(v=>(F(i,v[0]),F(r,v[1]),F(s,v[2])))(Ei({sourceX:d(),sourceY:g(),targetX:w(),targetY:y(),sourcePosition:m(),targetPosition:k()}))}),Ke(),fe(),Wi(e,{get path(){return f(i)},get labelX(){return f(r)},get labelY(){return f(s)},get label(){return o()},get labelStyle(){return l()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return h()},get style(){return a()}}),de()}function kg(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),ue(t,!1);const i=V(),r=V(),s=V();let o=p(t,"label",8,void 0),l=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),h=p(t,"interactionWidth",8,void 0),d=p(t,"sourceX",8),g=p(t,"sourceY",8),m=p(t,"targetX",8),w=p(t,"targetY",8);q(()=>(f(i),f(r),f(s),Y(d()),Y(g()),Y(m()),Y(w())),()=>{(y=>(F(i,y[0]),F(r,y[1]),F(s,y[2])))(Nr({sourceX:d(),sourceY:g(),targetX:m(),targetY:w()}))}),Ke(),fe(),Wi(e,{get path(){return f(i)},get labelX(){return f(r)},get labelY(){return f(s)},get label(){return o()},get labelStyle(){return l()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return h()},get style(){return a()}}),de()}function Eg(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ue(t,!1);const i=V(),r=V(),s=V();let o=p(t,"label",8,void 0),l=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),h=p(t,"interactionWidth",8,void 0),d=p(t,"sourceX",8),g=p(t,"sourceY",8),m=p(t,"sourcePosition",8),w=p(t,"targetX",8),y=p(t,"targetY",8),k=p(t,"targetPosition",8);q(()=>(f(i),f(r),f(s),Y(d()),Y(g()),Y(w()),Y(y()),Y(m()),Y(k())),()=>{(v=>(F(i,v[0]),F(r,v[1]),F(s,v[2])))(Ei({sourceX:d(),sourceY:g(),targetX:w(),targetY:y(),sourcePosition:m(),targetPosition:k(),borderRadius:0}))}),Ke(),fe(),Wi(e,{get path(){return f(i)},get labelX(){return f(r)},get labelY(){return f(s)},get label(){return o()},get labelStyle(){return l()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return h()},get style(){return a()}}),de()}function Sg(e,t){const n=e.set,i=t.set,r=R(e),s=R(t);let l=r.length===0&&s.length>0?s:r;e.set(l);const a=u=>{const c=n(u);return l=c,i(l),c};e.set=t.set=a,e.update=t.update=u=>a(u(l))}function Cg(e,t){const n=e.set,i=t.set;let r=R(t);e.set(r);const s=o=>{n(o),i(o),r=o};e.set=t.set=s,e.update=t.update=o=>s(o(r))}const Ag=(e,t,n)=>{if(!n)return;const i=R(e),r=t.set,s=n.set;let o=n?R(n):{x:0,y:0,zoom:1};t.set(o),t.set=l=>(r(l),s(l),o=l,l),n.set=l=>(i==null||i.syncViewport(l),r(l),s(l),o=l,l),t.update=l=>{t.set(l(o))},n.update=l=>{n.set(l(o))}},Ng=(e,t,n,i=[0,0],r=xi)=>{const{subscribe:s,set:o,update:l}=Q([]);let a=e,u={},c=!0;const h=w=>(Yl(w,t,n,{elevateNodesOnSelect:c,nodeOrigin:i,nodeExtent:r,defaults:u,checkEquality:!1}),a=w,o(a),a),d=w=>h(w(a)),g=w=>{u=w},m=w=>{c=w.elevateNodesOnSelect??c};return h(a),{subscribe:s,set:h,update:d,setDefaultOptions:g,setOptions:m}},Mg=(e,t,n,i)=>{const{subscribe:r,set:s,update:o}=Q([]);let l=e,a={};const u=d=>{const g=a?d.map(m=>({...a,...m})):d;Vl(t,n,g),l=g,s(l)},c=d=>u(d(l)),h=d=>{a=d};return u(l),{subscribe:r,set:u,update:c,setDefaultOptions:h}},Jl={input:fg,output:gg,default:Tr,group:pg},Ql={straight:kg,smoothstep:_g,default:Pr,step:Eg},Tg=({nodes:e=[],edges:t=[],width:n,height:i,fitView:r,nodeOrigin:s,nodeExtent:o})=>{const l=new Map,a=new Map,u=new Map,c=new Map,h=s??[0,0],d=o??xi;Yl(e,l,a,{nodeExtent:d,nodeOrigin:h,elevateNodesOnSelect:!1,checkEquality:!1}),Vl(u,c,t);let g={x:0,y:0,zoom:1};if(r&&n&&i){const m=Un(l,{filter:w=>!!((w.width||w.initialWidth)&&(w.height||w.initialHeight))});g=Jr(m,n,i,.5,2,.1)}return{flowId:Q(null),nodes:Ng(e,l,a,h,d),nodeLookup:dt(l),parentLookup:dt(a),edgeLookup:dt(c),visibleNodes:dt([]),edges:Mg(t,u,c),visibleEdges:dt([]),connectionLookup:dt(u),height:Q(500),width:Q(500),minZoom:Q(.5),maxZoom:Q(2),nodeOrigin:Q(h),nodeDragThreshold:Q(1),nodeExtent:Q(d),translateExtent:Q(xi),autoPanOnNodeDrag:Q(!0),autoPanOnConnect:Q(!0),fitViewOnInit:Q(!1),fitViewOnInitDone:Q(!1),fitViewOptions:Q(void 0),panZoom:Q(null),snapGrid:Q(null),dragging:Q(!1),selectionRect:Q(null),selectionKeyPressed:Q(!1),multiselectionKeyPressed:Q(!1),deleteKeyPressed:Q(!1),panActivationKeyPressed:Q(!1),zoomActivationKeyPressed:Q(!1),selectionRectMode:Q(null),selectionMode:Q(wi.Partial),nodeTypes:Q(Jl),edgeTypes:Q(Ql),viewport:Q(g),connectionMode:Q($t.Strict),domNode:Q(null),connection:dt(Sr),connectionLineType:Q(fn.Bezier),connectionRadius:Q(20),isValidConnection:Q(()=>!0),nodesDraggable:Q(!0),nodesConnectable:Q(!0),elementsSelectable:Q(!0),selectNodesOnDrag:Q(!0),markers:dt([]),defaultMarkerColor:Q("#b1b1b7"),lib:dt("svelte"),onlyRenderVisibleElements:Q(!1),onerror:Q(_h),ondelete:Q(void 0),onedgecreate:Q(void 0),onconnect:Q(void 0),onconnectstart:Q(void 0),onconnectend:Q(void 0),onbeforedelete:Q(void 0),nodesInitialized:Q(!1),edgesInitialized:Q(!1),viewportInitialized:Q(!1),initialized:dt(!1)}};function Pg(e){const t=cn([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,r,s,o,l])=>r&&o&&l?n.filter(u=>{const c=i.get(u.source),h=i.get(u.target);return c&&h&&Mh({sourceNode:c,targetNode:h,width:o,height:l,transform:[s.x,s.y,s.zoom]})}):n);return cn([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,r,s])=>n.reduce((l,a)=>{const u=i.get(a.source),c=i.get(a.target);if(!u||!c)return l;const h=Lh({id:a.id,sourceNode:u,targetNode:c,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:r,onError:s});return h&&l.push({...a,zIndex:Nh({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:c,elevateOnSelect:!1}),...h}),l},[]))}function Ig(e){return cn([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,r,s])=>{const o=[s.x,s.y,s.zoom];return n?Tl(t,{x:0,y:0,width:i,height:r},o,!0):Array.from(t.values())})}const io=Symbol();function Og({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:s,nodeExtent:o}){const l=Tg({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:s,nodeExtent:o});function a(_){l.nodeTypes.set({...Jl,..._})}function u(_){l.edgeTypes.set({...Ql,..._})}function c(_){const A=R(l.edges);l.edges.set(Ih(_,A))}const h=(_,A=!1)=>{var L;const z=R(l.nodeLookup);for(const[B,K]of _){const j=(L=z.get(B))==null?void 0:L.internals.userNode;j&&(j.position=K.position,j.dragging=A)}l.nodes.update(B=>B)};function d(_){var K,j,te;const A=R(l.nodeLookup),z=R(l.parentLookup),{changes:L,updatedInternals:B}=Wh(_,A,R(l.parentLookup),R(l.domNode),R(l.nodeOrigin));if(B){if(Yh(A,z,{nodeOrigin:s,nodeExtent:o}),!R(l.fitViewOnInitDone)&&R(l.fitViewOnInit)){const W=R(l.fitViewOptions),$=m({...W,nodes:W==null?void 0:W.nodes});l.fitViewOnInitDone.set($)}for(const W of L){const $=(K=A.get(W.id))==null?void 0:K.internals.userNode;if($)switch(W.type){case"dimensions":{const re={...$.measured,...W.dimensions};W.setAttributes&&($.width=((j=W.dimensions)==null?void 0:j.width)??$.width,$.height=((te=W.dimensions)==null?void 0:te.height)??$.height),$.measured=re;break}case"position":$.position=W.position??$.position;break}}l.nodes.update(W=>W),R(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function g(_){const A=R(l.panZoom),z=R(l.domNode);if(!A||!z)return Promise.resolve(!1);const{width:L,height:B}=Qr(z),K=is(R(l.nodeLookup),_);return rs({nodes:K,width:L,height:B,minZoom:R(l.minZoom),maxZoom:R(l.maxZoom),panZoom:A},_)}function m(_){const A=R(l.panZoom);if(!A)return!1;const z=is(R(l.nodeLookup),_);return rs({nodes:z,width:R(l.width),height:R(l.height),minZoom:R(l.minZoom),maxZoom:R(l.maxZoom),panZoom:A},_),z.size>0}function w(_,A){const z=R(l.panZoom);return z?z.scaleBy(_,A):Promise.resolve(!1)}function y(_){return w(1.2,_)}function k(_){return w(1/1.2,_)}function v(_){const A=R(l.panZoom);A&&(A.setScaleExtent([_,R(l.maxZoom)]),l.minZoom.set(_))}function S(_){const A=R(l.panZoom);A&&(A.setScaleExtent([R(l.minZoom),_]),l.maxZoom.set(_))}function b(_){const A=R(l.panZoom);A&&(A.setTranslateExtent(_),l.translateExtent.set(_))}function E(_){let A=!1;return _.forEach(z=>{z.selected&&(z.selected=!1,A=!0)}),A}function C(_){var A;(A=R(l.panZoom))==null||A.setClickDistance(_)}function N(_){E((_==null?void 0:_.nodes)||R(l.nodes))&&l.nodes.set(R(l.nodes)),E((_==null?void 0:_.edges)||R(l.edges))&&l.edges.set(R(l.edges))}l.deleteKeyPressed.subscribe(async _=>{var A;if(_){const z=R(l.nodes),L=R(l.edges),B=z.filter(W=>W.selected),K=L.filter(W=>W.selected),{nodes:j,edges:te}=await Pl({nodesToRemove:B,edgesToRemove:K,nodes:z,edges:L,onBeforeDelete:R(l.onbeforedelete)});(j.length||te.length)&&(l.nodes.update(W=>W.filter($=>!j.some(re=>re.id===$.id))),l.edges.update(W=>W.filter($=>!te.some(re=>re.id===$.id))),(A=R(l.ondelete))==null||A({nodes:j,edges:te}))}});function D(_){const A=R(l.multiselectionKeyPressed);l.nodes.update(z=>z.map(L=>{const B=_.includes(L.id),K=A&&L.selected||B;return L.selected=K,L})),A||l.edges.update(z=>z.map(L=>(L.selected=!1,L)))}function H(_){const A=R(l.multiselectionKeyPressed);l.edges.update(z=>z.map(L=>{const B=_.includes(L.id),K=A&&L.selected||B;return L.selected=K,L})),A||l.nodes.update(z=>z.map(L=>(L.selected=!1,L)))}function M(_){var z;const A=(z=R(l.nodes))==null?void 0:z.find(L=>L.id===_);if(!A){console.warn("012",Wn.error012(_));return}l.selectionRect.set(null),l.selectionRectMode.set(null),A.selected?A.selected&&R(l.multiselectionKeyPressed)&&N({nodes:[A],edges:[]}):D([_])}function T(_){const A=R(l.viewport);return Kh({delta:_,panZoom:R(l.panZoom),transform:[A.x,A.y,A.zoom],translateExtent:R(l.translateExtent),width:R(l.width),height:R(l.height)})}const I=Q(Sr),P=_=>{I.set({..._})};function x(){I.set(Sr)}function O(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),N(),x()}return{...l,visibleEdges:Pg(l),visibleNodes:Ig(l),connection:cn([I,l.viewport],([_,A])=>_.inProgress?{..._,to:Zn(_.to,[A.x,A.y,A.zoom])}:{..._}),markers:cn([l.edges,l.defaultMarkerColor,l.flowId],([_,A,z])=>Hh(_,{defaultColor:A,id:z})),initialized:(()=>{let _=!1;const A=R(l.nodes).length,z=R(l.edges).length;return cn([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([L,B,K])=>_||(A===0?_=K:z===0?_=K&&L:_=K&&L&&B,_))})(),syncNodeStores:_=>Sg(l.nodes,_),syncEdgeStores:_=>Cg(l.edges,_),syncViewport:_=>Ag(l.panZoom,l.viewport,_),setNodeTypes:a,setEdgeTypes:u,addEdge:c,updateNodePositions:h,updateNodeInternals:d,zoomIn:y,zoomOut:k,fitView:_=>g(_),setMinZoom:v,setMaxZoom:S,setTranslateExtent:b,setPaneClickDistance:C,unselectNodesAndEdges:N,addSelectedNodes:D,addSelectedEdges:H,handleNodeSelection:M,panBy:T,updateConnection:P,cancelConnection:x,reset:O}}function Le(){const e=In(io);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function zg({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:s,nodeExtent:o}){const l=Og({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:s,nodeExtent:o});return di(io,{getStore:()=>l}),l}function Dg(e,t){const{panZoom:n,minZoom:i,maxZoom:r,initialViewport:s,viewport:o,dragging:l,translateExtent:a,paneClickDistance:u}=t,c=ag({domNode:e,minZoom:i,maxZoom:r,translateExtent:a,viewport:s,paneClickDistance:u,onDraggingChange:l.set}),h=c.getViewport();return o.set(h),n.set(c),c.update(t),{update(d){c.update(d)}}}var Lg=ge('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function Hg(e,t){ue(t,!1);const n=Be(),i=()=>X(A,"$panActivationKeyPressed",n),r=()=>X(I,"$minZoom",n),s=()=>X(P,"$maxZoom",n),o=()=>X(z,"$zoomActivationKeyPressed",n),l=()=>X(T,"$selectionRect",n),a=()=>X(O,"$translateExtent",n),u=()=>X(_,"$lib",n),c=V(),h=V(),d=V();let g=p(t,"initialViewport",8,void 0),m=p(t,"onMoveStart",8,void 0),w=p(t,"onMove",8,void 0),y=p(t,"onMoveEnd",8,void 0),k=p(t,"panOnScrollMode",8),v=p(t,"preventScrolling",8),S=p(t,"zoomOnScroll",8),b=p(t,"zoomOnDoubleClick",8),E=p(t,"zoomOnPinch",8),C=p(t,"panOnDrag",8),N=p(t,"panOnScroll",8),D=p(t,"paneClickDistance",8);const{viewport:H,panZoom:M,selectionRect:T,minZoom:I,maxZoom:P,dragging:x,translateExtent:O,lib:_,panActivationKeyPressed:A,zoomActivationKeyPressed:z,viewportInitialized:L}=Le(),B=te=>H.set({x:te[0],y:te[1],zoom:te[2]});Yt(()=>{fi(L,!0)}),q(()=>Y(g()),()=>{F(c,g()||{x:0,y:0,zoom:1})}),q(()=>(i(),Y(C())),()=>{F(h,i()||C())}),q(()=>(i(),Y(N())),()=>{F(d,i()||N())}),Ke(),fe();var K=Lg(),j=ae(K);je(j,t,"default",{}),se(K),Ge(K,(te,W)=>Dg(te,W),()=>({viewport:H,minZoom:r(),maxZoom:s(),initialViewport:f(c),dragging:x,panZoom:M,onPanZoomStart:m(),onPanZoom:w(),onPanZoomEnd:y(),zoomOnScroll:S(),zoomOnDoubleClick:b(),zoomOnPinch:E(),panOnScroll:f(d),panOnDrag:f(h),panOnScrollSpeed:.5,panOnScrollMode:k()||Ht.Free,zoomActivationKeyPressed:o(),preventScrolling:typeof v()=="boolean"?v():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!l(),translateExtent:a(),lib:u(),paneClickDistance:D(),onTransformChange:B})),U(e,K),de()}function vs(e,t){return n=>{n.target===t&&(e==null||e(n))}}function ys(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}var Rg=ge('<div class="svelte-flow__pane svelte-1esy7hx"><!></div>');function Fg(e,t){ue(t,!1);const n=Be(),i=()=>X(P,"$panActivationKeyPressed",n),r=()=>X(T,"$selectionKeyPressed",n),s=()=>X(H,"$selectionRect",n),o=()=>X(D,"$elementsSelectable",n),l=()=>X(M,"$selectionRectMode",n),a=()=>X(E,"$edges",n),u=()=>X(b,"$nodeLookup",n),c=()=>X(C,"$viewport",n),h=()=>X(I,"$selectionMode",n),d=()=>X(N,"$dragging",n),g=V(),m=V(),w=V();let y=p(t,"panOnDrag",8,void 0),k=p(t,"selectionOnDrag",8,void 0);const v=Di(),{nodes:S,nodeLookup:b,edges:E,viewport:C,dragging:N,elementsSelectable:D,selectionRect:H,selectionRectMode:M,selectionKeyPressed:T,selectionMode:I,panActivationKeyPressed:P,unselectNodesAndEdges:x}=Le();let O=V(),_=null,A=[],z=!1;function L(Z){if(z){z=!1;return}v("paneclick",{event:Z}),x(),M.set(null)}function B(Z){var ce,Ee;if(_=f(O).getBoundingClientRect(),!D||!f(m)||Z.button!==0||Z.target!==f(O)||!_)return;(Ee=(ce=Z.target)==null?void 0:ce.setPointerCapture)==null||Ee.call(ce,Z.pointerId);const{x:G,y:oe}=Mt(Z,_);x(),H.set({width:0,height:0,startX:G,startY:oe,x:G,y:oe})}function K(Z){if(!f(m)||!_||!s())return;z=!0;const G=Mt(Z,_),oe=s().startX??0,ce=s().startY??0,Ee={...s(),x:G.x<oe?G.x:oe,y:G.y<ce?G.y:ce,width:Math.abs(G.x-oe),height:Math.abs(G.y-ce)},be=A.map(ke=>ke.id),_e=Cr(A,a()).map(ke=>ke.id);A=Tl(u(),Ee,[c().x,c().y,c().zoom],h()===wi.Partial,!0);const He=Cr(A,a()).map(ke=>ke.id),Te=A.map(ke=>ke.id);(be.length!==Te.length||Te.some(ke=>!be.includes(ke)))&&S.update(ke=>ke.map(ys(Te))),(_e.length!==He.length||He.some(ke=>!_e.includes(ke)))&&E.update(ke=>ke.map(ys(He))),M.set("user"),H.set(Ee)}function j(Z){var G,oe;Z.button===0&&((oe=(G=Z.target)==null?void 0:G.releasePointerCapture)==null||oe.call(G,Z.pointerId),!f(m)&&l()==="user"&&Z.target===f(O)&&(L==null||L(Z)),H.set(null),A.length>0&&fi(M,"nodes"),r()&&(z=!1))}const te=Z=>{var G;if(Array.isArray(f(g))&&((G=f(g))!=null&&G.includes(2))){Z.preventDefault();return}v("panecontextmenu",{event:Z})};q(()=>(i(),Y(y())),()=>{F(g,i()||y())}),q(()=>(r(),s(),Y(k()),f(g)),()=>{F(m,r()||s()||k()&&f(g)!==!0)}),q(()=>(o(),f(m),l()),()=>{F(w,o()&&(f(m)||l()==="user"))}),Ke(),fe();var W=Rg(),$=To(()=>f(w)?void 0:vs(L,f(O))),re=To(()=>vs(te,f(O)));const me=ne(()=>y()===!0||Array.isArray(y())&&y().includes(0));xe(()=>Oe(W,"draggable",f(me)));var ve=ae(W);je(ve,t,"default",{}),se(W),Vr(W,Z=>F(O,Z),()=>f(O)),xe(()=>{Oe(W,"dragging",d()),Oe(W,"selection",f(m))}),he("click",W,function(...Z){var G;(G=f($))==null||G.apply(this,Z)}),he("pointerdown",W,function(...Z){var G;(G=f(w)?B:void 0)==null||G.apply(this,Z)}),he("pointermove",W,function(...Z){var G;(G=f(w)?K:void 0)==null||G.apply(this,Z)}),he("pointerup",W,function(...Z){var G;(G=f(w)?j:void 0)==null||G.apply(this,Z)}),he("contextmenu",W,function(...Z){var G;(G=f(re))==null||G.apply(this,Z)}),U(e,W),de()}var Yg=ge('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function Bg(e,t){ue(t,!1);const n=Be(),i=()=>X(r,"$viewport",n),{viewport:r}=Le();fe();var s=Yg(),o=ae(s);je(o,t,"default",{}),se(s),xe(()=>J(s,"style",`transform: translate(${i().x??""}px, ${i().y??""}px) scale(${i().zoom??""})`)),U(e,s),de()}function ea(e,t){const{store:n,onDrag:i,onDragStart:r,onDragStop:s,onNodeMouseDown:o}=t,l=Zh({onDrag:i,onDragStart:r,onDragStop:s,onNodeMouseDown:o,getStoreItems:()=>{const u=R(n.snapGrid),c=R(n.viewport);return{nodes:R(n.nodes),nodeLookup:R(n.nodeLookup),edges:R(n.edges),nodeExtent:R(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:R(n.nodeOrigin),multiSelectionActive:R(n.multiselectionKeyPressed),domNode:R(n.domNode),transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:R(n.autoPanOnNodeDrag),nodesDraggable:R(n.nodesDraggable),selectNodesOnDrag:R(n.selectNodesOnDrag),nodeDragThreshold:R(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,c){if(c.disabled){l.destroy();return}l.update({domNode:u,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return a(e,t),{update(u){a(e,u)},destroy(){l.destroy()}}}function Vg({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:r,measuredHeight:s}){if(r===void 0&&s===void 0){const o=e??n,l=t??i;return{width:o?`width:${o}px;`:"",height:l?`height:${l}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}var Xg=ge("<div><!></div>");function Wg(e,t){ue(t,!1);const n=Be(),i=()=>X(W,"$nodeTypes",n),r=()=>X(ce,"$connectableStore",n),s=V(void 0,!0),o=V(void 0,!0),l=V(void 0,!0),a=V(void 0,!0);let u=p(t,"node",9),c=p(t,"id",9),h=p(t,"data",25,()=>({})),d=p(t,"selected",9,!1),g=p(t,"draggable",9,void 0),m=p(t,"selectable",9,void 0),w=p(t,"connectable",9,!0),y=p(t,"deletable",9,!0),k=p(t,"hidden",9,!1),v=p(t,"dragging",9,!1),S=p(t,"resizeObserver",9,null),b=p(t,"style",9,void 0),E=p(t,"type",9,"default"),C=p(t,"isParent",9,!1),N=p(t,"positionX",9),D=p(t,"positionY",9),H=p(t,"sourcePosition",9,void 0),M=p(t,"targetPosition",9,void 0),T=p(t,"zIndex",9),I=p(t,"measuredWidth",9,void 0),P=p(t,"measuredHeight",9,void 0),x=p(t,"initialWidth",9,void 0),O=p(t,"initialHeight",9,void 0),_=p(t,"width",9,void 0),A=p(t,"height",9,void 0),z=p(t,"dragHandle",9,void 0),L=p(t,"initialized",9,!1),B=p(t,"parentId",9,void 0),K=p(t,"nodeClickDistance",9,void 0),j=p(t,"class",9,"");const te=Le(),{nodeTypes:W,nodeDragThreshold:$,selectNodesOnDrag:re,handleNodeSelection:me,updateNodeInternals:ve}=te;let Z=V(void 0,!0),G=V(null,!0);const oe=Di(),ce=Q(w());let Ee=V(void 0,!0),be=V(void 0,!0),_e=V(void 0,!0);di("svelteflow__node_id",c()),di("svelteflow__node_connectable",ce),Vs(()=>{var Ce;f(G)&&((Ce=S())==null||Ce.unobserve(f(G)))});function He(Ce){m()&&(!R(re)||!g()||R($)>0)&&me(c()),oe("nodeclick",{node:u().internals.userNode,event:Ce})}q(()=>Y(E()),()=>{F(s,E()||"default")}),q(()=>(i(),f(s)),()=>{F(o,!!i()[f(s)])}),q(()=>(i(),f(s),Tr),()=>{F(l,i()[f(s)]||Tr)}),q(()=>(f(o),Y(E())),()=>{f(o)||console.warn("003",Wn.error003(E()))}),q(()=>(Y(_()),Y(A()),Y(x()),Y(O()),Y(I()),Y(P())),()=>{F(a,Vg({width:_(),height:A(),initialWidth:x(),initialHeight:O(),measuredWidth:I(),measuredHeight:P()}))}),q(()=>Y(w()),()=>{ce.set(!!w())}),q(()=>(f(Ee),f(s),f(be),Y(H()),f(_e),Y(M()),Y(c()),f(Z)),()=>{(f(Ee)&&f(s)!==f(Ee)||f(be)&&H()!==f(be)||f(_e)&&M()!==f(_e))&&requestAnimationFrame(()=>ve(new Map([[c(),{id:c(),nodeElement:f(Z),force:!0}]]))),F(Ee,f(s)),F(be,H()),F(_e,M())}),q(()=>(Y(S()),f(Z),f(G),Y(L())),()=>{S()&&(f(Z)!==f(G)||!L())&&(f(G)&&S().unobserve(f(G)),f(Z)&&S().observe(f(Z)),F(G,f(Z)))}),Ke(),fe(!0);var Te=st(),ke=Ne(Te);Se(ke,()=>!k(),Ce=>{var pe=Xg();const et=ne(()=>Qe(["svelte-flow__node",`svelte-flow__node-${f(s)}`,j()]));var Ve=ae(pe);Xs(Ve,()=>f(l),(Me,rt)=>{rt(Me,{get data(){return h()},get id(){return c()},get selected(){return d()},get selectable(){return m()},get deletable(){return y()},get sourcePosition(){return H()},get targetPosition(){return M()},get zIndex(){return T()},get dragging(){return v()},get draggable(){return g()},get dragHandle(){return z()},get parentId(){return B()},get type(){return f(s)},get isConnectable(){return r()},get positionAbsoluteX(){return N()},get positionAbsoluteY(){return D()},get width(){return _()},get height(){return A()}})}),se(pe),Ge(pe,(Me,rt)=>ea(Me,rt),()=>({nodeId:c(),isSelectable:m(),disabled:!1,handleSelector:z(),noDragClass:"nodrag",nodeClickDistance:K(),onNodeMouseDown:me,onDrag:(Me,rt,Ue,Ze)=>{oe("nodedrag",{event:Me,targetNode:Ue,nodes:Ze})},onDragStart:(Me,rt,Ue,Ze)=>{oe("nodedragstart",{event:Me,targetNode:Ue,nodes:Ze})},onDragStop:(Me,rt,Ue,Ze)=>{oe("nodedragstop",{event:Me,targetNode:Ue,nodes:Ze})},store:te})),Vr(pe,Me=>F(Z,Me),()=>f(Z)),ht(()=>he("click",pe,He)),ht(()=>he("mouseenter",pe,Me=>oe("nodemouseenter",{node:u(),event:Me}))),ht(()=>he("mouseleave",pe,Me=>oe("nodemouseleave",{node:u(),event:Me}))),ht(()=>he("mousemove",pe,Me=>oe("nodemousemove",{node:u(),event:Me}))),ht(()=>he("contextmenu",pe,Me=>oe("nodecontextmenu",{node:u(),event:Me}))),xe(()=>{J(pe,"data-id",c()),Zs(pe,f(et)),J(pe,"style",`${b()??""??""};${f(a).width??""}${f(a).height??""}`),Oe(pe,"dragging",v()),Oe(pe,"selected",d()),Oe(pe,"draggable",g()),Oe(pe,"connectable",w()),Oe(pe,"selectable",m()),Oe(pe,"nopan",g()),Oe(pe,"parent",C()),ze(pe,"z-index",T()),ze(pe,"transform",`translate(${N()??""}px, ${D()??""}px)`),ze(pe,"visibility",L()?"visible":"hidden")}),U(Ce,pe)}),U(e,Te),de()}var Kg=ge('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function Ug(e,t){ue(t,!1);const n=Be(),i=()=>X(u,"$visibleNodes",n),r=()=>X(c,"$nodesDraggable",n),s=()=>X(d,"$elementsSelectable",n),o=()=>X(h,"$nodesConnectable",n),l=()=>X(m,"$parentLookup",n);let a=p(t,"nodeClickDistance",8,0);const{visibleNodes:u,nodesDraggable:c,nodesConnectable:h,elementsSelectable:d,updateNodeInternals:g,parentLookup:m}=Le(),w=typeof ResizeObserver>"u"?null:new ResizeObserver(k=>{const v=new Map;k.forEach(S=>{const b=S.target.getAttribute("data-id");v.set(b,{id:b,nodeElement:S.target,force:!0})}),g(v)});Vs(()=>{w==null||w.disconnect()}),fe();var y=Kg();gn(y,5,i,k=>k.id,(k,v)=>{var S=ne(()=>!!f(v).selected),b=ne(()=>!!f(v).hidden),E=ne(()=>!!(f(v).draggable||r()&&typeof f(v).draggable>"u")),C=ne(()=>!!(f(v).selectable||s()&&typeof f(v).selectable>"u")),N=ne(()=>!!(f(v).connectable||o()&&typeof f(v).connectable>"u")),D=ne(()=>f(v).deletable??!0),H=ne(()=>l().has(f(v).id)),M=ne(()=>f(v).type??"default"),T=ne(()=>f(v).internals.z??0),I=ne(()=>Ll(f(v)));Wg(k,{get node(){return f(v)},get id(){return f(v).id},get data(){return f(v).data},get selected(){return f(S)},get hidden(){return f(b)},get draggable(){return f(E)},get selectable(){return f(C)},get connectable(){return f(N)},get deletable(){return f(D)},get positionX(){return f(v).internals.positionAbsolute.x},get positionY(){return f(v).internals.positionAbsolute.y},get isParent(){return f(H)},get style(){return f(v).style},get class(){return f(v).class},get type(){return f(M)},get sourcePosition(){return f(v).sourcePosition},get targetPosition(){return f(v).targetPosition},get dragging(){return f(v).dragging},get zIndex(){return f(T)},get dragHandle(){return f(v).dragHandle},get initialized(){return f(I)},get width(){return f(v).width},get height(){return f(v).height},get initialWidth(){return f(v).initialWidth},get initialHeight(){return f(v).initialHeight},get measuredWidth(){return f(v).measured.width},get measuredHeight(){return f(v).measured.height},get parentId(){return f(v).parentId},resizeObserver:w,get nodeClickDistance(){return a()},$$events:{nodeclick(P){we.call(this,t,P)},nodemouseenter(P){we.call(this,t,P)},nodemousemove(P){we.call(this,t,P)},nodemouseleave(P){we.call(this,t,P)},nodedrag(P){we.call(this,t,P)},nodedragstart(P){we.call(this,t,P)},nodedragstop(P){we.call(this,t,P)},nodecontextmenu(P){we.call(this,t,P)}}})}),se(y),U(e,y),de()}var Zg=Ye('<svg><g role="img"><!></g></svg>');function qg(e,t){ue(t,!1);const n=Be(),i=()=>X(W,"$edgeTypes",n),r=()=>X($,"$flowId",n),s=()=>X(re,"$elementsSelectable",n),o=()=>X(te,"$edgeLookup",n),l=V(void 0,!0),a=V(void 0,!0),u=V(void 0,!0),c=V(void 0,!0),h=V(void 0,!0);let d=p(t,"id",9),g=p(t,"type",9,"default"),m=p(t,"source",9,""),w=p(t,"target",9,""),y=p(t,"data",25,()=>({})),k=p(t,"style",9,void 0),v=p(t,"zIndex",9,void 0),S=p(t,"animated",9,!1),b=p(t,"selected",9,!1),E=p(t,"selectable",9,void 0),C=p(t,"deletable",9,void 0),N=p(t,"hidden",9,!1),D=p(t,"label",9,void 0),H=p(t,"labelStyle",9,void 0),M=p(t,"markerStart",9,void 0),T=p(t,"markerEnd",9,void 0),I=p(t,"sourceHandle",9,void 0),P=p(t,"targetHandle",9,void 0),x=p(t,"sourceX",9),O=p(t,"sourceY",9),_=p(t,"targetX",9),A=p(t,"targetY",9),z=p(t,"sourcePosition",9),L=p(t,"targetPosition",9),B=p(t,"ariaLabel",9,void 0),K=p(t,"interactionWidth",9,void 0),j=p(t,"class",9,"");di("svelteflow__edge_id",d());const{edgeLookup:te,edgeTypes:W,flowId:$,elementsSelectable:re}=Le(),me=Di(),ve=$l();function Z(Ee){const be=o().get(d());be&&(ve(d()),me("edgeclick",{event:Ee,edge:be}))}function G(Ee,be){const _e=o().get(d());_e&&me(be,{event:Ee,edge:_e})}q(()=>Y(g()),()=>{F(l,g()||"default")}),q(()=>(i(),f(l),Pr),()=>{F(a,i()[f(l)]||Pr)}),q(()=>(Y(M()),r()),()=>{F(u,M()?`url('#${Mr(M(),r())}')`:void 0)}),q(()=>(Y(T()),r()),()=>{F(c,T()?`url('#${Mr(T(),r())}')`:void 0)}),q(()=>(Y(E()),s()),()=>{F(h,E()??s())}),Ke(),fe(!0);var oe=st(),ce=Ne(oe);Se(ce,()=>!N(),Ee=>{var be=Zg(),_e=ae(be);const He=ne(()=>Qe(["svelte-flow__edge",j()]));var Te=ae(_e),ke=ne(()=>C()??!0);Xs(Te,()=>f(a),(Ce,pe)=>{pe(Ce,{get id(){return d()},get source(){return m()},get target(){return w()},get sourceX(){return x()},get sourceY(){return O()},get targetX(){return _()},get targetY(){return A()},get sourcePosition(){return z()},get targetPosition(){return L()},get animated(){return S()},get selected(){return b()},get label(){return D()},get labelStyle(){return H()},get data(){return y()},get style(){return k()},get interactionWidth(){return K()},get selectable(){return f(h)},get deletable(){return f(ke)},get type(){return f(l)},get sourceHandleId(){return I()},get targetHandleId(){return P()},get markerStart(){return f(u)},get markerEnd(){return f(c)}})}),se(_e),se(be),xe(()=>{ze(be,"z-index",v()),Qt(_e,f(He)),J(_e,"data-id",d()),J(_e,"aria-label",B()===null?void 0:B()?B():`Edge from ${m()} to ${w()}`),Oe(_e,"animated",S()),Oe(_e,"selected",b()),Oe(_e,"selectable",f(h))}),he("click",_e,Z),he("contextmenu",_e,Ce=>{G(Ce,"edgecontextmenu")}),he("mouseenter",_e,Ce=>{G(Ce,"edgemouseenter")}),he("mouseleave",_e,Ce=>{G(Ce,"edgemouseleave")}),U(Ee,be)}),U(e,oe),de()}function Gg(e,t){ue(t,!1);let n=p(t,"onMount",8,void 0),i=p(t,"onDestroy",8,void 0);Yt(()=>{var r;return(r=n())==null||r(),i()}),fe(),de()}var jg=Ye("<defs></defs>");function $g(e,t){ue(t,!1);const n=Be(),i=()=>X(r,"$markers",n),{markers:r}=Le();fe();var s=jg();gn(s,5,i,o=>o.id,(o,l)=>{t0(o,on(()=>f(l)))}),se(s),U(e,s),de()}var Jg=Ye('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),Qg=Ye('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),e0=Ye('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function t0(e,t){ue(t,!1);let n=p(t,"id",8),i=p(t,"type",8),r=p(t,"width",8,12.5),s=p(t,"height",8,12.5),o=p(t,"markerUnits",8,"strokeWidth"),l=p(t,"orient",8,"auto-start-reverse"),a=p(t,"color",8,void 0),u=p(t,"strokeWidth",8,void 0);fe();var c=e0(),h=ae(c);Se(h,()=>i()===bi.Arrow,d=>{var g=Jg();xe(()=>{J(g,"stroke",a()),J(g,"stroke-width",u())}),U(d,g)},d=>{var g=st(),m=Ne(g);Se(m,()=>i()===bi.ArrowClosed,w=>{var y=Qg();xe(()=>{J(y,"stroke",a()),J(y,"stroke-width",u()),J(y,"fill",a())}),U(w,y)},null,!0),U(d,g)}),se(c),xe(()=>{J(c,"id",n()),J(c,"markerWidth",`${r()}`),J(c,"markerHeight",`${s()}`),J(c,"markerUnits",o()),J(c,"orient",l())}),U(e,c),de()}var n0=ge('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function i0(e,t){ue(t,!1);const n=Be(),i=()=>X(o,"$visibleEdges",n),r=()=>X(u,"$elementsSelectable",n);let s=p(t,"defaultEdgeOptions",8);const{visibleEdges:o,edgesInitialized:l,edges:{setDefaultOptions:a},elementsSelectable:u}=Le();Yt(()=>{s()&&a(s())}),fe();var c=n0(),h=ae(c),d=ae(h);$g(d,{}),se(h);var g=ie(h,2);gn(g,1,i,w=>w.id,(w,y)=>{var k=ne(()=>f(y).selectable??r()),v=ne(()=>f(y).type||"default");qg(w,{get id(){return f(y).id},get source(){return f(y).source},get target(){return f(y).target},get data(){return f(y).data},get style(){return f(y).style},get animated(){return f(y).animated},get selected(){return f(y).selected},get selectable(){return f(k)},get deletable(){return f(y).deletable},get hidden(){return f(y).hidden},get label(){return f(y).label},get labelStyle(){return f(y).labelStyle},get markerStart(){return f(y).markerStart},get markerEnd(){return f(y).markerEnd},get sourceHandle(){return f(y).sourceHandle},get targetHandle(){return f(y).targetHandle},get sourceX(){return f(y).sourceX},get sourceY(){return f(y).sourceY},get targetX(){return f(y).targetX},get targetY(){return f(y).targetY},get sourcePosition(){return f(y).sourcePosition},get targetPosition(){return f(y).targetPosition},get ariaLabel(){return f(y).ariaLabel},get interactionWidth(){return f(y).interactionWidth},get class(){return f(y).class},get type(){return f(v)},get zIndex(){return f(y).zIndex},$$events:{edgeclick(S){we.call(this,t,S)},edgecontextmenu(S){we.call(this,t,S)},edgemouseenter(S){we.call(this,t,S)},edgemouseleave(S){we.call(this,t,S)}}})});var m=ie(g,2);Se(m,()=>i().length>0,w=>{Gg(w,{onMount:()=>{fi(l,!0)},onDestroy:()=>{fi(l,!1)}})}),se(c),U(e,c),de()}var r0=ge('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function ta(e,t){let n=p(t,"x",8,0),i=p(t,"y",8,0),r=p(t,"width",8,0),s=p(t,"height",8,0),o=p(t,"isVisible",8,!0);var l=st(),a=Ne(l);Se(a,o,u=>{var c=r0();xe(()=>{ze(c,"width",typeof r()=="string"?r():`${r()}px`),ze(c,"height",typeof s()=="string"?s():`${s()}px`),ze(c,"transform",`translate(${n()}px, ${i()}px)`)}),U(u,c)}),U(e,l)}function o0(e,t){ue(t,!1);const n=Be(),i=()=>X(s,"$selectionRect",n),r=()=>X(o,"$selectionRectMode",n),{selectionRect:s,selectionRectMode:o}=Le();fe();var l=ne(()=>!!(i()&&r()==="user")),a=ne(()=>{var d;return(d=i())==null?void 0:d.width}),u=ne(()=>{var d;return(d=i())==null?void 0:d.height}),c=ne(()=>{var d;return(d=i())==null?void 0:d.x}),h=ne(()=>{var d;return(d=i())==null?void 0:d.y});ta(e,{get isVisible(){return f(l)},get width(){return f(a)},get height(){return f(u)},get x(){return f(c)},get y(){return f(h)}}),de()}var s0=ge('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function l0(e,t){ue(t,!1);const n=Be(),i=()=>X(l,"$selectionRectMode",n),r=()=>X(u,"$nodeLookup",n),s=()=>X(a,"$nodes",n),o=Le(),{selectionRectMode:l,nodes:a,nodeLookup:u}=o,c=Di();let h=V(null);function d(y){const k=s().filter(v=>v.selected);c("selectioncontextmenu",{nodes:k,event:y})}function g(y){const k=s().filter(v=>v.selected);c("selectionclick",{nodes:k,event:y})}q(()=>(i(),r(),s()),()=>{i()==="nodes"&&(F(h,Un(r(),{filter:y=>!!y.selected})),s())}),Ke(),fe();var m=st(),w=Ne(m);Se(w,()=>i()==="nodes"&&f(h)&&Nt(f(h).x)&&Nt(f(h).y),y=>{var k=s0(),v=ae(k);ta(v,{width:"100%",height:"100%",x:0,y:0}),se(k),Ge(k,(S,b)=>ea(S,b),()=>({disabled:!1,store:o,onDrag:(S,b,E,C)=>{c("nodedrag",{event:S,targetNode:null,nodes:C})},onDragStart:(S,b,E,C)=>{c("nodedragstart",{event:S,targetNode:null,nodes:C})},onDragStop:(S,b,E,C)=>{c("nodedragstop",{event:S,targetNode:null,nodes:C})}})),ht(()=>he("contextmenu",k,d)),ht(()=>he("click",k,g)),ht(()=>he("keyup",k,()=>{})),xe(()=>J(k,"style",`width: ${f(h).width??""}px; height: ${f(h).height??""}px; transform: translate(${f(h).x??""}px, ${f(h).y??""}px)`)),U(y,k)}),U(e,m),de()}function yt(e,t){let{enabled:n=!0,trigger:i,type:r="keydown"}=t;function s(o){const l=Array.isArray(i)?i:[i],a={alt:o.altKey,ctrl:o.ctrlKey,shift:o.shiftKey,meta:o.metaKey};for(const u of l){const c={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:h,key:d,callback:g,preventDefault:m,enabled:w}=c;if(w){if(h.length&&!(Array.isArray(h)?h:[h]).map(v=>typeof v=="string"?[v]:v).some(v=>v.every(S=>a[S])))continue;if(o.key===d){m&&o.preventDefault();const y={node:e,trigger:c,originalEvent:o};e.dispatchEvent(new CustomEvent("shortcut",{detail:y})),g==null||g(y)}}}}return n&&e.addEventListener(r,s),{update:o=>{const{enabled:l=!0,type:a="keydown"}=o;n&&(!l||r!==a)?e.removeEventListener(r,s):!n&&l&&e.addEventListener(a,s),n=l,r=a,i=o.trigger},destroy:()=>{e.removeEventListener(r,s)}}}function a0(e,t){ue(t,!1);let n=p(t,"selectionKey",8,"Shift"),i=p(t,"multiSelectionKey",24,()=>ki()?"Meta":"Control"),r=p(t,"deleteKey",8,"Backspace"),s=p(t,"panActivationKey",8," "),o=p(t,"zoomActivationKey",24,()=>ki()?"Meta":"Control");const{selectionKeyPressed:l,multiselectionKeyPressed:a,deleteKeyPressed:u,panActivationKeyPressed:c,zoomActivationKeyPressed:h,selectionRect:d}=Le();function g(v){return v!==null&&typeof v=="object"}function m(v){return g(v)?v.modifier||[]:[]}function w(v){return v==null?"":g(v)?v.key:v}function y(v,S){return(Array.isArray(v)?v:[v]).map(E=>{const C=w(E);return{key:C,modifier:m(E),enabled:C!==null,callback:S}})}function k(){d.set(null),l.set(!1),a.set(!1),u.set(!1),c.set(!1),h.set(!1)}fe(),he("blur",ct,k),he("contextmenu",ct,k),Ge(ct,(v,S)=>yt(v,S),()=>({trigger:y(n(),()=>l.set(!0)),type:"keydown"})),Ge(ct,(v,S)=>yt(v,S),()=>({trigger:y(n(),()=>l.set(!1)),type:"keyup"})),Ge(ct,(v,S)=>yt(v,S),()=>({trigger:y(i(),()=>a.set(!0)),type:"keydown"})),Ge(ct,(v,S)=>yt(v,S),()=>({trigger:y(i(),()=>a.set(!1)),type:"keyup"})),Ge(ct,(v,S)=>yt(v,S),()=>({trigger:y(r(),v=>{!(v.originalEvent.ctrlKey||v.originalEvent.metaKey||v.originalEvent.shiftKey)&&!Ch(v.originalEvent)&&u.set(!0)}),type:"keydown"})),Ge(ct,(v,S)=>yt(v,S),()=>({trigger:y(r(),()=>u.set(!1)),type:"keyup"})),Ge(ct,(v,S)=>yt(v,S),()=>({trigger:y(s(),()=>c.set(!0)),type:"keydown"})),Ge(ct,(v,S)=>yt(v,S),()=>({trigger:y(s(),()=>c.set(!1)),type:"keyup"})),Ge(ct,(v,S)=>yt(v,S),()=>({trigger:y(o(),()=>h.set(!0)),type:"keydown"})),Ge(ct,(v,S)=>yt(v,S),()=>({trigger:y(o(),()=>h.set(!1)),type:"keyup"})),de()}var c0=Ye('<path fill="none" class="svelte-flow__connection-path"></path>'),u0=Ye('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function d0(e,t){ue(t,!1);const n=Be(),i=()=>X(d,"$connection",n),r=()=>X(g,"$connectionLineType",n),s=()=>X(c,"$width",n),o=()=>X(h,"$height",n);let l=p(t,"containerStyle",8,""),a=p(t,"style",8,""),u=p(t,"isCustomComponent",8,!1);const{width:c,height:h,connection:d,connectionLineType:g}=Le();let m=V(null);q(()=>(i(),Y(u()),r(),f(m),Nr),()=>{if(i().inProgress&&!u()){const{from:k,to:v,fromPosition:S,toPosition:b}=i(),E={sourceX:k.x,sourceY:k.y,sourcePosition:S,targetX:v.x,targetY:v.y,targetPosition:b};switch(r()){case fn.Bezier:(C=>F(m,C[0]))(Rl(E));break;case fn.Step:(C=>F(m,C[0]))(Ei({...E,borderRadius:0}));break;case fn.SmoothStep:(C=>F(m,C[0]))(Ei(E));break;default:(C=>F(m,C[0]))(Nr(E))}}}),Ke(),fe();var w=st(),y=Ne(w);Se(y,()=>i().inProgress,k=>{var v=u0(),S=ae(v);const b=ne(()=>Qe(["svelte-flow__connection",vh(i().isValid)]));var E=ae(S);je(E,t,"connectionLine",{});var C=ie(E);Se(C,()=>!u(),N=>{var D=c0();xe(()=>{J(D,"d",f(m)),J(D,"style",a())}),U(N,D)}),se(S),se(v),xe(()=>{J(v,"width",s()),J(v,"height",o()),J(v,"style",l()),Qt(S,f(b))}),U(k,v)}),U(e,w),de()}var f0=ge("<div><!></div>");function ro(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]),i=De(n,["position","style","class"]);ue(t,!1);const r=Be(),s=()=>X(c,"$selectionRectMode",r),o=V();let l=p(t,"position",8,"top-right"),a=p(t,"style",8,void 0),u=p(t,"class",8,void 0);const{selectionRectMode:c}=Le();q(()=>Y(l()),()=>{F(o,`${l()}`.split("-"))}),Ke(),fe();var h=f0();let d;var g=ae(h);je(g,t,"default",{}),se(h),xe(()=>{d=Xr(h,d,{class:Qe(["svelte-flow__panel",u(),...f(o)]),style:a(),...i}),ze(h,"pointer-events",s()?"none":"")}),U(e,h),de()}var h0=ge('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function g0(e,t){ue(t,!1);let n=p(t,"proOptions",8,void 0),i=p(t,"position",8,"bottom-right");fe();var r=st(),s=Ne(r);Se(s,()=>{var o;return!((o=n())!=null&&o.hideAttribution)},o=>{ro(o,{get position(){return i()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(l,a)=>{var u=h0();U(l,u)},$$slots:{default:!0}})}),U(e,r),de()}function xs(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:r,translateExtent:s,paneClickDistance:o}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),r!==void 0&&e.setMaxZoom(r),s!==void 0&&e.setTranslateExtent(s),o!==void 0&&e.setPaneClickDistance(o)}const p0=e=>Object.keys(e);function ws(e,t){p0(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function m0(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function v0(e="light"){return dt("light",n=>{if(e!=="system"){n(e);return}const i=m0(),r=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",r),()=>{i==null||i.removeEventListener("change",r)}})}var y0=ge('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),x0=ge("<!> <!>",1),w0=ge("<div><!> <!> <!> <!></div>");function b0(e,t){const n=yc(t),i=De(t,["children","$$slots","$$events","$$legacy"]),r=De(i,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);ue(t,!1);const s=Be(),o=()=>X(v(),"$viewport",s),l=()=>X(Zi,"$initialized",s),a=()=>X(f(u),"$colorModeClass",s),u=V();let c=p(t,"id",8,"1"),h=p(t,"nodes",8),d=p(t,"edges",8),g=p(t,"fitView",8,void 0),m=p(t,"fitViewOptions",8,void 0),w=p(t,"minZoom",8,void 0),y=p(t,"maxZoom",8,void 0),k=p(t,"initialViewport",8,void 0),v=p(t,"viewport",8,void 0),S=p(t,"nodeTypes",8,void 0),b=p(t,"edgeTypes",8,void 0),E=p(t,"selectionKey",8,void 0),C=p(t,"selectionMode",8,void 0),N=p(t,"panActivationKey",8,void 0),D=p(t,"multiSelectionKey",8,void 0),H=p(t,"zoomActivationKey",8,void 0),M=p(t,"nodesDraggable",8,void 0),T=p(t,"nodesConnectable",8,void 0),I=p(t,"nodeDragThreshold",8,void 0),P=p(t,"elementsSelectable",8,void 0),x=p(t,"snapGrid",8,void 0),O=p(t,"deleteKey",8,void 0),_=p(t,"connectionRadius",8,void 0),A=p(t,"connectionLineType",8,void 0),z=p(t,"connectionMode",24,()=>$t.Strict),L=p(t,"connectionLineStyle",8,""),B=p(t,"connectionLineContainerStyle",8,""),K=p(t,"onMoveStart",8,void 0),j=p(t,"onMove",8,void 0),te=p(t,"onMoveEnd",8,void 0),W=p(t,"isValidConnection",8,void 0),$=p(t,"translateExtent",8,void 0),re=p(t,"nodeExtent",8,void 0),me=p(t,"onlyRenderVisibleElements",8,void 0),ve=p(t,"panOnScrollMode",24,()=>Ht.Free),Z=p(t,"preventScrolling",8,!0),G=p(t,"zoomOnScroll",8,!0),oe=p(t,"zoomOnDoubleClick",8,!0),ce=p(t,"zoomOnPinch",8,!0),Ee=p(t,"panOnScroll",8,!1),be=p(t,"panOnDrag",8,!0),_e=p(t,"selectionOnDrag",8,void 0),He=p(t,"autoPanOnConnect",8,!0),Te=p(t,"autoPanOnNodeDrag",8,!0),ke=p(t,"onerror",8,void 0),Ce=p(t,"ondelete",8,void 0),pe=p(t,"onedgecreate",8,void 0),et=p(t,"attributionPosition",8,void 0),Ve=p(t,"proOptions",8,void 0),Me=p(t,"defaultEdgeOptions",8,void 0),rt=p(t,"width",8,void 0),Ue=p(t,"height",8,void 0),Ze=p(t,"colorMode",8,"light"),Pe=p(t,"onconnect",8,void 0),Vt=p(t,"onconnectstart",8,void 0),en=p(t,"onconnectend",8,void 0),Re=p(t,"onbeforedelete",8,void 0),Ae=p(t,"oninit",8,void 0),Ie=p(t,"nodeOrigin",8,void 0),Xe=p(t,"paneClickDistance",8,0),at=p(t,"nodeClickDistance",8,0),mt=p(t,"defaultMarkerColor",8,"#b1b1b7"),vt=p(t,"style",8,void 0),tn=p(t,"class",8,void 0),ot=V(),Xt=V(),Wt=V();const Ui=o()||k(),We=mc(io)?Le():zg({nodes:R(h()),edges:R(d()),width:rt(),height:Ue(),fitView:g(),nodeOrigin:Ie(),nodeExtent:re()});Yt(()=>(We.width.set(f(Xt)),We.height.set(f(Wt)),We.domNode.set(f(ot)),We.syncNodeStores(h()),We.syncEdgeStores(d()),We.syncViewport(v()),g()!==void 0&&We.fitViewOnInit.set(g()),m()&&We.fitViewOptions.set(m()),xs(We,{nodeTypes:S(),edgeTypes:b(),minZoom:w(),maxZoom:y(),translateExtent:$(),paneClickDistance:Xe()}),()=>{We.reset()}));const{initialized:Zi}=We;let _n=V(!1);q(()=>(f(Xt),f(Wt)),()=>{f(Xt)!==void 0&&f(Wt)!==void 0&&(We.width.set(f(Xt)),We.height.set(f(Wt)))}),q(()=>(f(_n),l(),Y(Ae())),()=>{var qe;!f(_n)&&l()&&((qe=Ae())==null||qe(),F(_n,!0))}),q(()=>(Y(c()),Y(A()),Y(_()),Y(C()),Y(x()),Y(mt()),Y(M()),Y(T()),Y(P()),Y(me()),Y(W()),Y(He()),Y(Te()),Y(ke()),Y(Ce()),Y(pe()),Y(z()),Y(I()),Y(Pe()),Y(Vt()),Y(en()),Y(Re()),Y(Ie()),ws),()=>{const qe={flowId:c(),connectionLineType:A(),connectionRadius:_(),selectionMode:C(),snapGrid:x(),defaultMarkerColor:mt(),nodesDraggable:M(),nodesConnectable:T(),elementsSelectable:P(),onlyRenderVisibleElements:me(),isValidConnection:W(),autoPanOnConnect:He(),autoPanOnNodeDrag:Te(),onerror:ke(),ondelete:Ce(),onedgecreate:pe(),connectionMode:z(),nodeDragThreshold:I(),onconnect:Pe(),onconnectstart:Vt(),onconnectend:en(),onbeforedelete:Re(),nodeOrigin:Ie()};ws(We,qe)}),q(()=>(Y(S()),Y(b()),Y(w()),Y(y()),Y($()),Y(Xe())),()=>{xs(We,{nodeTypes:S(),edgeTypes:b(),minZoom:w(),maxZoom:y(),translateExtent:$(),paneClickDistance:Xe()})}),q(()=>Y(Ze()),()=>{Ac(F(u,v0(Ze())),"$colorModeClass",s)}),Ke(),fe();var kt=w0();let co;var uo=ae(kt);a0(uo,{get selectionKey(){return E()},get deleteKey(){return O()},get panActivationKey(){return N()},get multiSelectionKey(){return D()},get zoomActivationKey(){return H()}});var fo=ie(uo,2),Ta=ne(()=>ve()===void 0?Ht.Free:ve()),Pa=ne(()=>Z()===void 0?!0:Z()),Ia=ne(()=>G()===void 0?!0:G()),Oa=ne(()=>oe()===void 0?!0:oe()),za=ne(()=>ce()===void 0?!0:ce()),Da=ne(()=>Ee()===void 0?!1:Ee()),La=ne(()=>be()===void 0?!0:be()),Ha=ne(()=>Xe()===void 0?0:Xe());Hg(fo,{initialViewport:Ui,get onMoveStart(){return K()},get onMove(){return j()},get onMoveEnd(){return te()},get panOnScrollMode(){return f(Ta)},get preventScrolling(){return f(Pa)},get zoomOnScroll(){return f(Ia)},get zoomOnDoubleClick(){return f(Oa)},get zoomOnPinch(){return f(za)},get panOnScroll(){return f(Da)},get panOnDrag(){return f(La)},get paneClickDistance(){return f(Ha)},children:(qe,Nv)=>{var Fa=ne(()=>be()===void 0?!0:be());Fg(qe,{get panOnDrag(){return f(Fa)},get selectionOnDrag(){return _e()},$$events:{paneclick(kn){we.call(this,t,kn)},panecontextmenu(kn){we.call(this,t,kn)}},children:(kn,Mv)=>{var go=x0(),po=Ne(go);Bg(po,{children:(Ba,Tv)=>{var mo=y0(),vo=Ne(mo);i0(vo,{get defaultEdgeOptions(){return Me()},$$events:{edgeclick(ye){we.call(this,t,ye)},edgecontextmenu(ye){we.call(this,t,ye)},edgemouseenter(ye){we.call(this,t,ye)},edgemouseleave(ye){we.call(this,t,ye)}}});var yo=ie(vo,2);d0(yo,{get containerStyle(){return B()},get style(){return L()},isCustomComponent:n.connectionLine,$$slots:{connectionLine:(ye,Pv)=>{var wo=st(),Xa=Ne(wo);je(Xa,t,"connectionLine",{}),U(ye,wo)}}});var xo=ie(yo,6);Ug(xo,{get nodeClickDistance(){return at()},$$events:{nodeclick(ye){we.call(this,t,ye)},nodemouseenter(ye){we.call(this,t,ye)},nodemousemove(ye){we.call(this,t,ye)},nodemouseleave(ye){we.call(this,t,ye)},nodedragstart(ye){we.call(this,t,ye)},nodedrag(ye){we.call(this,t,ye)},nodedragstop(ye){we.call(this,t,ye)},nodecontextmenu(ye){we.call(this,t,ye)}}});var Va=ie(xo,2);l0(Va,{$$events:{selectionclick(ye){we.call(this,t,ye)},selectioncontextmenu(ye){we.call(this,t,ye)},nodedragstart(ye){we.call(this,t,ye)},nodedrag(ye){we.call(this,t,ye)},nodedragstop(ye){we.call(this,t,ye)}}}),U(Ba,mo)},$$slots:{default:!0}});var Ya=ie(po,2);o0(Ya,{}),U(kn,go)},$$slots:{default:!0}})},$$slots:{default:!0}});var ho=ie(fo,2);g0(ho,{get proOptions(){return Ve()},get position(){return et()}});var Ra=ie(ho,2);je(Ra,t,"default",{}),se(kt),Vr(kt,qe=>F(ot,qe),()=>f(ot)),xe(()=>co=Xr(kt,co,{style:vt(),class:Qe(["svelte-flow",tn(),a()]),"data-testid":"svelte-flow__wrapper",...r,role:"application"},"svelte-12wlba6")),Do(kt,"clientWidth",qe=>F(Xt,qe)),Do(kt,"clientHeight",qe=>F(Wt,qe)),he("dragover",kt,function(qe){we.call(this,t,qe)}),he("drop",kt,function(qe){we.call(this,t,qe)}),U(e,kt),de()}var _0=ge("<button><!></button>");function Lt(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]),i=De(n,["class"]);ue(t,!1);let r=p(t,"class",8,void 0),s,o,l,a,u;fe();var c=_0();let h;var d=ae(c);je(d,t,"default",{class:"button-svg"}),se(c),xe(()=>{h=Xr(c,h,{type:"button",class:Qe(["svelte-flow__controls-button",r()]),...i}),ze(c,"--xy-controls-button-background-color-props",s),ze(c,"--xy-controls-button-background-color-hover-props",o),ze(c,"--xy-controls-button-color-props",l),ze(c,"--xy-controls-button-color-hover-props",a),ze(c,"--xy-controls-button-border-color-props",u)}),he("click",c,function(g){we.call(this,t,g)}),U(e,c),de()}var k0=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function E0(e){var t=k0();U(e,t)}var S0=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function C0(e){var t=S0();U(e,t)}var A0=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function N0(e){var t=A0();U(e,t)}var M0=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function T0(e){var t=M0();U(e,t)}var P0=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function I0(e){var t=P0();U(e,t)}var O0=ge("<!> <!>",1),z0=ge("<!> <!> <!> <!> <!> <!>",1);function D0(e,t){ue(t,!1);const n=Be(),i=()=>X(A,"$nodesDraggable",n),r=()=>X(z,"$nodesConnectable",n),s=()=>X(L,"$elementsSelectable",n),o=()=>X(x,"$viewport",n),l=()=>X(O,"$minZoom",n),a=()=>X(_,"$maxZoom",n),u=V(),c=V(),h=V(),d=V();let g=p(t,"position",8,"bottom-left"),m=p(t,"showZoom",8,!0),w=p(t,"showFitView",8,!0),y=p(t,"showLock",8,!0),k=p(t,"buttonBgColor",8,void 0),v=p(t,"buttonBgColorHover",8,void 0),S=p(t,"buttonColor",8,void 0),b=p(t,"buttonColorHover",8,void 0),E=p(t,"buttonBorderColor",8,void 0),C=p(t,"ariaLabel",8,void 0),N=p(t,"style",8,void 0),D=p(t,"orientation",8,"vertical"),H=p(t,"fitViewOptions",8,void 0),M=p(t,"class",8,"");const{zoomIn:T,zoomOut:I,fitView:P,viewport:x,minZoom:O,maxZoom:_,nodesDraggable:A,nodesConnectable:z,elementsSelectable:L}=Le(),B={bgColor:k(),bgColorHover:v(),color:S(),colorHover:b(),borderColor:E()},K=()=>{T()},j=()=>{I()},te=()=>{P(H())},W=()=>{F(u,!f(u)),A.set(f(u)),z.set(f(u)),L.set(f(u))};q(()=>(i(),r(),s()),()=>{F(u,i()||r()||s())}),q(()=>(o(),l()),()=>{F(c,o().zoom<=l())}),q(()=>(o(),a()),()=>{F(h,o().zoom>=a())}),q(()=>Y(D()),()=>{F(d,D()==="horizontal"?"horizontal":"vertical")}),Ke(),fe();var $=ne(()=>Qe(["svelte-flow__controls",f(d),M()])),re=ne(()=>C()??"Svelte Flow controls");ro(e,{get class(){return f($)},get position(){return g()},"data-testid":"svelte-flow__controls",get"aria-label"(){return f(re)},get style(){return N()},children:(me,ve)=>{var Z=z0(),G=Ne(Z);je(G,t,"before",{});var oe=ie(G,2);Se(oe,m,He=>{var Te=O0(),ke=Ne(Te);Lt(ke,on({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return f(h)}},B,{$$events:{click:K},children:(pe,et)=>{E0(pe)},$$slots:{default:!0}}));var Ce=ie(ke,2);Lt(Ce,on({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return f(c)}},B,{$$events:{click:j},children:(pe,et)=>{C0(pe)},$$slots:{default:!0}})),U(He,Te)});var ce=ie(oe,2);Se(ce,w,He=>{Lt(He,on({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},B,{$$events:{click:te},children:(Te,ke)=>{N0(Te)},$$slots:{default:!0}}))});var Ee=ie(ce,2);Se(Ee,y,He=>{Lt(He,on({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},B,{$$events:{click:W},children:(Te,ke)=>{var Ce=st(),pe=Ne(Ce);Se(pe,()=>f(u),et=>{I0(et)},et=>{T0(et)}),U(Te,Ce)},$$slots:{default:!0}}))});var be=ie(Ee,2);je(be,t,"default",{});var _e=ie(be,2);je(_e,t,"after",{}),U(me,Z)},$$slots:{default:!0}}),de()}var Tt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Tt||(Tt={}));var L0=Ye("<circle></circle>");function H0(e,t){ue(t,!1);let n=p(t,"radius",8,5),i=p(t,"class",8,"");fe();var r=L0();const s=ne(()=>Qe(["svelte-flow__background-pattern","dots",i()]));xe(()=>{J(r,"cx",n()),J(r,"cy",n()),J(r,"r",n()),Qt(r,f(s))}),U(e,r),de()}var R0=Ye("<path></path>");function F0(e,t){ue(t,!1);let n=p(t,"lineWidth",8,1),i=p(t,"dimensions",8),r=p(t,"variant",8,void 0),s=p(t,"class",8,"");fe();var o=R0();const l=ne(()=>Qe(["svelte-flow__background-pattern",r(),s()]));xe(()=>{J(o,"stroke-width",n()),J(o,"d",`M${i()[0]/2} 0 V${i()[1]} M0 ${i()[1]/2} H${i()[0]}`),Qt(o,f(l))}),U(e,o),de()}const Y0={[Tt.Dots]:1,[Tt.Lines]:1,[Tt.Cross]:6};var B0=Ye('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function V0(e,t){ue(t,!1);const n=Be(),i=()=>X(b,"$flowId",n),r=()=>X(S,"$viewport",n),s=V(),o=V(),l=V(),a=V(),u=V();let c=p(t,"id",8,void 0),h=p(t,"variant",24,()=>Tt.Dots),d=p(t,"gap",8,20),g=p(t,"size",8,1),m=p(t,"lineWidth",8,1),w=p(t,"bgColor",8,void 0),y=p(t,"patternColor",8,void 0),k=p(t,"patternClass",8,void 0),v=p(t,"class",8,"");const{viewport:S,flowId:b}=Le(),E=g()||Y0[h()],C=h()===Tt.Dots,N=h()===Tt.Cross,D=Array.isArray(d())?d():[d(),d()];q(()=>(i(),Y(c())),()=>{F(s,`background-pattern-${i()}-${c()?c():""}`)}),q(()=>r(),()=>{F(o,[D[0]*r().zoom||1,D[1]*r().zoom||1])}),q(()=>r(),()=>{F(l,E*r().zoom)}),q(()=>(f(l),f(o)),()=>{F(a,N?[f(l),f(l)]:f(o))}),q(()=>(f(l),f(a)),()=>{F(u,C?[f(l)/2,f(l)/2]:[f(a)[0]/2,f(a)[1]/2])}),Ke(),fe();var H=B0();const M=ne(()=>`${Qe(["svelte-flow__background",v()])??""} svelte-1r7pe8d`);var T=ae(H),I=ae(T);Se(I,()=>C,x=>{var O=ne(()=>f(l)/2);H0(x,{get radius(){return f(O)},get class(){return k()}})},x=>{F0(x,{get dimensions(){return f(a)},get variant(){return h()},get lineWidth(){return m()},get class(){return k()}})}),se(T);var P=ie(T);se(H),xe(()=>{Qt(H,f(M)),ze(H,"--xy-background-color-props",w()),ze(H,"--xy-background-pattern-color-props",y()),J(T,"id",f(s)),J(T,"x",r().x%f(o)[0]),J(T,"y",r().y%f(o)[1]),J(T,"width",f(o)[0]),J(T,"height",f(o)[1]),J(T,"patternTransform",`translate(-${f(u)[0]},-${f(u)[1]})`),J(P,"fill",`url(#${f(s)})`)}),U(e,H),de()}var X0=Ye("<rect></rect>");function W0(e,t){ue(t,!1);let n=p(t,"x",8),i=p(t,"y",8),r=p(t,"width",8,0),s=p(t,"height",8,0),o=p(t,"borderRadius",8,5),l=p(t,"color",8,void 0),a=p(t,"shapeRendering",8),u=p(t,"strokeColor",8,void 0),c=p(t,"strokeWidth",8,2),h=p(t,"selected",8,!1),d=p(t,"class",8,"");fe();var g=X0();const m=ne(()=>Qe(["svelte-flow__minimap-node",d()]));xe(()=>{Qt(g,f(m)),J(g,"x",n()),J(g,"y",i()),J(g,"rx",o()),J(g,"ry",o()),J(g,"width",r()),J(g,"height",s()),J(g,"style",`${l()?`fill: ${l()};`:""}${u()?`stroke: ${u()};`:""}${c()?`stroke-width: ${c()};`:""}`),J(g,"shape-rendering",a()),Oe(g,"selected",h())}),U(e,g),de()}function K0(e,t){const n=eg({domNode:e,panZoom:t.panZoom,getTransform:()=>{const r=R(t.viewport);return[r.x,r.y,r.zoom]},getViewScale:t.getViewScale});function i(r){n.update({translateExtent:r.translateExtent,width:r.width,height:r.height,inversePan:r.inversePan,zoomStep:r.zoomStep,pannable:r.pannable,zoomable:r.zoomable})}return{update:i,destroy(){n.destroy()}}}const ar=e=>e instanceof Function?e:()=>e;var U0=Ye("<title> </title>"),Z0=Ye('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>');function q0(e,t){ue(t,!1);const n=Be(),i=()=>X(be,"$flowId",n),r=()=>X(oe,"$viewport",n),s=()=>X(ce,"$containerWidth",n),o=()=>X(Ee,"$containerHeight",n),l=()=>X(G,"$nodeLookup",n),a=()=>X(Z,"$nodes",n),u=()=>X(_e,"$panZoom",n),c=()=>X(He,"$translateExtent",n),h=V(),d=V(),g=V(),m=V(),w=V(),y=V(),k=V(),v=V(),S=V(),b=V(),E=V(),C=V(),N=V();let D=p(t,"position",8,"bottom-right"),H=p(t,"ariaLabel",8,"Mini map"),M=p(t,"nodeStrokeColor",8,"transparent"),T=p(t,"nodeColor",8,void 0),I=p(t,"nodeClass",8,""),P=p(t,"nodeBorderRadius",8,5),x=p(t,"nodeStrokeWidth",8,2),O=p(t,"bgColor",8,void 0),_=p(t,"maskColor",8,void 0),A=p(t,"maskStrokeColor",8,void 0),z=p(t,"maskStrokeWidth",8,void 0),L=p(t,"width",8,void 0),B=p(t,"height",8,void 0),K=p(t,"pannable",8,!0),j=p(t,"zoomable",8,!0),te=p(t,"inversePan",8,void 0),W=p(t,"zoomStep",8,void 0),$=p(t,"style",8,""),re=p(t,"class",8,"");const me=200,ve=150,{nodes:Z,nodeLookup:G,viewport:oe,width:ce,height:Ee,flowId:be,panZoom:_e,translateExtent:He}=Le(),Te=T()===void 0?void 0:ar(T()),ke=ar(M()),Ce=ar(I()),pe=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",et=`svelte-flow__minimap-desc-${i()}`;let Ve=V(f(h));const Me=()=>f(y);q(()=>(r(),s(),o()),()=>{F(h,{x:-r().x/r().zoom,y:-r().y/r().zoom,width:s()/r().zoom,height:o()/r().zoom})}),q(()=>(l(),f(h),a()),()=>{F(Ve,l().size>0?zl(Un(l()),f(h)):f(h)),a()}),q(()=>Y(L()),()=>{F(d,L()??me)}),q(()=>Y(B()),()=>{F(g,B()??ve)}),q(()=>(f(Ve),f(d)),()=>{F(m,f(Ve).width/f(d))}),q(()=>(f(Ve),f(g)),()=>{F(w,f(Ve).height/f(g))}),q(()=>(f(m),f(w)),()=>{F(y,Math.max(f(m),f(w)))}),q(()=>(f(y),f(d)),()=>{F(k,f(y)*f(d))}),q(()=>(f(y),f(g)),()=>{F(v,f(y)*f(g))}),q(()=>f(y),()=>{F(S,5*f(y))}),q(()=>(f(Ve),f(k),f(S)),()=>{F(b,f(Ve).x-(f(k)-f(Ve).width)/2-f(S))}),q(()=>(f(Ve),f(v),f(S)),()=>{F(E,f(Ve).y-(f(v)-f(Ve).height)/2-f(S))}),q(()=>(f(k),f(S)),()=>{F(C,f(k)+f(S)*2)}),q(()=>(f(v),f(S)),()=>{F(N,f(v)+f(S)*2)}),Ke(),fe();var rt=ne(()=>$()+(O()?`;--xy-minimap-background-color-props:${O()}`:"")),Ue=ne(()=>Qe(["svelte-flow__minimap",re()]));ro(e,{get position(){return D()},get style(){return f(rt)},get class(){return f(Ue)},"data-testid":"svelte-flow__minimap",children:(Ze,Pe)=>{var Vt=st(),en=Ne(Vt);Se(en,u,Re=>{var Ae=Z0();J(Ae,"aria-labelledby",et);var Ie=ae(Ae);Se(Ie,H,mt=>{var vt=U0();J(vt,"id",et);var tn=ae(vt,!0);se(vt),xe(()=>xt(tn,H())),U(mt,vt)});var Xe=ie(Ie);gn(Xe,1,a,mt=>mt.id,(mt,vt)=>{var tn=st();const ot=ne(()=>l().get(f(vt).id));var Xt=Ne(tn);Se(Xt,()=>f(ot)&&Ll(f(ot)),Wt=>{const Ui=ne(()=>Bt(f(ot)));var We=ne(()=>Te==null?void 0:Te(f(ot))),Zi=ne(()=>ke(f(ot))),_n=ne(()=>Ce(f(ot)));W0(Wt,on({get x(){return f(ot).internals.positionAbsolute.x},get y(){return f(ot).internals.positionAbsolute.y}},()=>f(Ui),{get selected(){return f(ot).selected},get color(){return f(We)},get borderRadius(){return P()},get strokeColor(){return f(Zi)},get strokeWidth(){return x()},shapeRendering:pe,get class(){return f(_n)}}))}),U(mt,tn)});var at=ie(Xe);se(Ae),Ge(Ae,(mt,vt)=>K0(mt,vt),()=>({panZoom:u(),viewport:oe,getViewScale:Me,translateExtent:c(),width:s(),height:o(),inversePan:te(),zoomStep:W(),pannable:K(),zoomable:j()})),xe(()=>{J(Ae,"width",f(d)),J(Ae,"height",f(g)),J(Ae,"viewBox",`${f(b)??""} ${f(E)??""} ${f(C)??""} ${f(N)??""}`),ze(Ae,"--xy-minimap-mask-background-color-props",_()),ze(Ae,"--xy-minimap-mask-stroke-color-props",A()),ze(Ae,"--xy-minimap-mask-stroke-width-props",z()?z()*f(y):void 0),J(at,"d",`M${f(b)-f(S)},${f(E)-f(S)}h${f(C)+f(S)*2}v${f(N)+f(S)*2}h${-f(C)-f(S)*2}z
      M${f(h).x??""},${f(h).y??""}h${f(h).width??""}v${f(h).height??""}h${-f(h).width}z`)}),U(Re,Ae)}),U(Ze,Vt)},$$slots:{default:!0}}),de()}const bs=e=>xh(e);function G0(){const{zoomIn:e,zoomOut:t,fitView:n,onbeforedelete:i,snapGrid:r,viewport:s,width:o,height:l,minZoom:a,maxZoom:u,panZoom:c,nodes:h,edges:d,domNode:g,nodeLookup:m,nodeOrigin:w,edgeLookup:y,connectionLookup:k}=Le(),v=E=>{var M,T;const C=R(m),N=bs(E)?E:C.get(E.id),D=N.parentId?kh(N.position,N.measured,N.parentId,C,R(w)):N.position,H={id:N.id,position:D,width:((M=N.measured)==null?void 0:M.width)??N.width,height:((T=N.measured)==null?void 0:T.height)??N.height,data:N.data};return yn(H)},S=(E,C,N={replace:!1})=>{var M;const D=(M=R(m).get(E))==null?void 0:M.internals.userNode;if(!D)return;const H=typeof C=="function"?C(D):C;N.replace?h.update(T=>T.map(I=>I.id===E?bs(H)?H:{...I,...H}:I)):(Object.assign(D,H),h.update(T=>T))},b=E=>R(m).get(E);return{zoomIn:e,zoomOut:t,getInternalNode:b,getNode:E=>{var C;return(C=b(E))==null?void 0:C.internals.userNode},getNodes:E=>E===void 0?R(h):_s(R(m),E),getEdge:E=>R(y).get(E),getEdges:E=>E===void 0?R(d):_s(R(y),E),setZoom:(E,C)=>{const N=R(c);return N?N.scaleTo(E,{duration:C==null?void 0:C.duration}):Promise.resolve(!1)},getZoom:()=>R(s).zoom,setViewport:async(E,C)=>{const N=R(s),D=R(c);return D?(await D.setViewport({x:E.x??N.x,y:E.y??N.y,zoom:E.zoom??N.zoom},{duration:C==null?void 0:C.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>R(s),setCenter:async(E,C,N)=>{const D=typeof(N==null?void 0:N.zoom)<"u"?N.zoom:R(u),H=R(c);return H?(await H.setViewport({x:R(o)/2-E*D,y:R(l)/2-C*D,zoom:D},{duration:N==null?void 0:N.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(E,C)=>{const N=R(c);if(!N)return Promise.resolve(!1);const D=Jr(E,R(o),R(l),R(a),R(u),(C==null?void 0:C.padding)??.1);return await N.setViewport(D,{duration:C==null?void 0:C.duration}),Promise.resolve(!0)},getIntersectingNodes:(E,C=!0,N)=>{const D=ss(E),H=D?E:v(E);return H?(N||R(h)).filter(M=>{const T=R(m).get(M.id);if(!T||!D&&M.id===E.id)return!1;const I=yn(T),P=Rn(I,H);return C&&P>0||P>=H.width*H.height}):[]},isNodeIntersecting:(E,C,N=!0)=>{const H=ss(E)?E:v(E);if(!H)return!1;const M=Rn(H,C);return N&&M>0||M>=H.width*H.height},deleteElements:async({nodes:E=[],edges:C=[]})=>{const{nodes:N,edges:D}=await Pl({nodesToRemove:E,edgesToRemove:C,nodes:R(h),edges:R(d),onBeforeDelete:R(i)});return N&&h.update(H=>H.filter(M=>!N.some(({id:T})=>T===M.id))),D&&d.update(H=>H.filter(M=>!D.some(({id:T})=>T===M.id))),{deletedNodes:N,deletedEdges:D}},screenToFlowPosition:(E,C={snapToGrid:!0})=>{const N=R(g);if(!N)return E;const D=C.snapToGrid?R(r):!1,{x:H,y:M,zoom:T}=R(s),{x:I,y:P}=N.getBoundingClientRect(),x={x:E.x-I,y:E.y-P};return Zn(x,[H,M,T],D!==null,D||[1,1])},flowToScreenPosition:E=>{const C=R(g);if(!C)return E;const{x:N,y:D,zoom:H}=R(s),{x:M,y:T}=C.getBoundingClientRect(),I=Dl(E,[N,D,H]);return{x:I.x+M,y:I.y+T}},toObject:()=>({nodes:R(h).map(E=>({...E,position:{...E.position},data:{...E.data}})),edges:R(d).map(E=>({...E})),viewport:{...R(s)}}),updateNode:S,updateNodeData:(E,C,N)=>{var M;const D=(M=R(m).get(E))==null?void 0:M.internals.userNode;if(!D)return;const H=typeof C=="function"?C(D):C;D.data=N!=null&&N.replace?H:{...D.data,...H},h.update(T=>T)},getNodesBounds:E=>{const C=R(m),N=R(w);return wh(E,{nodeLookup:C,nodeOrigin:N})},getHandleConnections:({type:E,id:C,nodeId:N})=>{var D;return Array.from(((D=R(k).get(`${N}-${E}-${C??null}`))==null?void 0:D.values())??[])},viewport:s}}function _s(e,t){var i;const n=[];for(const r of t){const s=e.get(r);if(s){const o="internals"in s?(i=s.internals)==null?void 0:i.userNode:s;n.push(o)}}return n}var j0=ge('<div class="svelte-flow__node-toolbar"><!></div>');function $0(e,t){ue(t,!1);const n=Be(),i=()=>X(v,"$nodes",n),r=()=>X(k,"$nodeLookup",n),s=()=>X(y,"$viewport",n),o=()=>X(w,"$domNode",n),l=V(),a=V(),u=V();let c=p(t,"nodeId",8,void 0),h=p(t,"position",8,void 0),d=p(t,"align",8,void 0),g=p(t,"offset",8,void 0),m=p(t,"isVisible",8,void 0);const{domNode:w,viewport:y,nodeLookup:k,nodes:v}=Le(),{getNodesBounds:S}=G0(),b=In("svelteflow__node_id");let E=V(),C=V([]),N=g()!==void 0?g():10,D=h()!==void 0?h():le.Top,H=d()!==void 0?d():"center";q(()=>(i(),Y(c()),r()),()=>{i();const I=Array.isArray(c())?c():[c()||b];F(C,I.reduce((P,x)=>{const O=r().get(x);return O&&P.push(O),P},[]))}),q(()=>(f(C),s()),()=>{const I=S(f(C));I&&F(E,Rh(I,s(),D,N,H))}),q(()=>f(C),()=>{F(l,f(C).length===0?1:Math.max(...f(C).map(I=>(I.internals.z||5)+1)))}),q(()=>i(),()=>{F(a,i().filter(I=>I.selected).length)}),q(()=>(Y(m()),f(C),f(a)),()=>{F(u,typeof m()=="boolean"?m():f(C).length===1&&f(C)[0].selected&&f(a)===1)}),Ke(),fe();var M=st(),T=Ne(M);Se(T,()=>o()&&f(u)&&f(C),I=>{var P=j0();xe(()=>J(P,"data-id",f(C).reduce((O,_)=>`${O}${_.id} `,"").trim()));var x=ae(P);je(x,t,"default",{}),se(P),Ge(P,(O,_)=>jl(O,_),()=>({domNode:o()})),xe(()=>{ze(P,"position","absolute"),ze(P,"transform",f(E)),ze(P,"z-index",f(l))}),U(I,P)}),U(e,M),de()}const na=Q(""),oo=Q({}),Ir=Q(!1),Or=Q(!1),Si=Q(!1);console.log("browser",Qs,window.location.href),na.set(window.location.href),oo.set({width:window.innerWidth,height:window.innerHeight}),console.log("screenSize",window.innerWidth,window.innerHeight);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function ia(e){return typeof e>"u"||e===null}function J0(e){return typeof e=="object"&&e!==null}function Q0(e){return Array.isArray(e)?e:ia(e)?[]:[e]}function ep(e,t){var n,i,r,s;if(t)for(s=Object.keys(t),n=0,i=s.length;n<i;n+=1)r=s[n],e[r]=t[r];return e}function tp(e,t){var n="",i;for(i=0;i<t;i+=1)n+=e;return n}function np(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var ip=ia,rp=J0,op=Q0,sp=tp,lp=np,ap=ep,Je={isNothing:ip,isObject:rp,toArray:op,repeat:sp,isNegativeZero:lp,extend:ap};function ra(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),i+" "+n):i}function Yn(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=ra(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Yn.prototype=Object.create(Error.prototype);Yn.prototype.constructor=Yn;Yn.prototype.toString=function(t){return this.name+": "+ra(this,t)};var Ct=Yn;function cr(e,t,n,i,r){var s="",o="",l=Math.floor(r/2)-1;return i-t>l&&(s=" ... ",t=i-l+s.length),n-i>l&&(o=" ...",n=i+l-o.length),{str:s+e.slice(t,n).replace(/\t/g,"→")+o,pos:i-t+s.length}}function ur(e,t){return Je.repeat(" ",t-e.length)+e}function cp(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],r=[],s,o=-1;s=n.exec(e.buffer);)r.push(s.index),i.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var l="",a,u,c=Math.min(e.line+t.linesAfter,r.length).toString().length,h=t.maxLength-(t.indent+c+3);for(a=1;a<=t.linesBefore&&!(o-a<0);a++)u=cr(e.buffer,i[o-a],r[o-a],e.position-(i[o]-i[o-a]),h),l=Je.repeat(" ",t.indent)+ur((e.line-a+1).toString(),c)+" | "+u.str+`
`+l;for(u=cr(e.buffer,i[o],r[o],e.position,h),l+=Je.repeat(" ",t.indent)+ur((e.line+1).toString(),c)+" | "+u.str+`
`,l+=Je.repeat("-",t.indent+c+3+u.pos)+`^
`,a=1;a<=t.linesAfter&&!(o+a>=r.length);a++)u=cr(e.buffer,i[o+a],r[o+a],e.position-(i[o]-i[o+a]),h),l+=Je.repeat(" ",t.indent)+ur((e.line+a+1).toString(),c)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var up=cp,dp=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],fp=["scalar","sequence","mapping"];function hp(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(i){t[String(i)]=n})}),t}function gp(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(dp.indexOf(n)===-1)throw new Ct('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=hp(t.styleAliases||null),fp.indexOf(this.kind)===-1)throw new Ct('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var $e=gp;function ks(e,t){var n=[];return e[t].forEach(function(i){var r=n.length;n.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(r=o)}),n[r]=i}),n}function pp(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function i(r){r.multi?(e.multi[r.kind].push(r),e.multi.fallback.push(r)):e[r.kind][r.tag]=e.fallback[r.tag]=r}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(i);return e}function zr(e){return this.extend(e)}zr.prototype.extend=function(t){var n=[],i=[];if(t instanceof $e)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new Ct("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof $e))throw new Ct("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Ct("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Ct("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof $e))throw new Ct("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(zr.prototype);return r.implicit=(this.implicit||[]).concat(n),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=ks(r,"implicit"),r.compiledExplicit=ks(r,"explicit"),r.compiledTypeMap=pp(r.compiledImplicit,r.compiledExplicit),r};var mp=zr,vp=new $e("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),yp=new $e("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),xp=new $e("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),wp=new mp({explicit:[vp,yp,xp]});function bp(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function _p(){return null}function kp(e){return e===null}var Ep=new $e("tag:yaml.org,2002:null",{kind:"scalar",resolve:bp,construct:_p,predicate:kp,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Sp(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Cp(e){return e==="true"||e==="True"||e==="TRUE"}function Ap(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Np=new $e("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Sp,construct:Cp,predicate:Ap,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Mp(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Tp(e){return 48<=e&&e<=55}function Pp(e){return 48<=e&&e<=57}function Ip(e){if(e===null)return!1;var t=e.length,n=0,i=!1,r;if(!t)return!1;if(r=e[n],(r==="-"||r==="+")&&(r=e[++n]),r==="0"){if(n+1===t)return!0;if(r=e[++n],r==="b"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(r!=="0"&&r!=="1")return!1;i=!0}return i&&r!=="_"}if(r==="x"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(!Mp(e.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}if(r==="o"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(!Tp(e.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}}if(r==="_")return!1;for(;n<t;n++)if(r=e[n],r!=="_"){if(!Pp(e.charCodeAt(n)))return!1;i=!0}return!(!i||r==="_")}function Op(e){var t=e,n=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function zp(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Je.isNegativeZero(e)}var Dp=new $e("tag:yaml.org,2002:int",{kind:"scalar",resolve:Ip,construct:Op,predicate:zp,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Lp=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Hp(e){return!(e===null||!Lp.test(e)||e[e.length-1]==="_")}function Rp(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var Fp=/^[-+]?[0-9]+e/;function Yp(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Je.isNegativeZero(e))return"-0.0";return n=e.toString(10),Fp.test(n)?n.replace("e",".e"):n}function Bp(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Je.isNegativeZero(e))}var Vp=new $e("tag:yaml.org,2002:float",{kind:"scalar",resolve:Hp,construct:Rp,predicate:Bp,represent:Yp,defaultStyle:"lowercase"}),Xp=wp.extend({implicit:[Ep,Np,Dp,Vp]}),Wp=Xp,oa=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),sa=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Kp(e){return e===null?!1:oa.exec(e)!==null||sa.exec(e)!==null}function Up(e){var t,n,i,r,s,o,l,a=0,u=null,c,h,d;if(t=oa.exec(e),t===null&&(t=sa.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(n,i,r));if(s=+t[4],o=+t[5],l=+t[6],t[7]){for(a=t[7].slice(0,3);a.length<3;)a+="0";a=+a}return t[9]&&(c=+t[10],h=+(t[11]||0),u=(c*60+h)*6e4,t[9]==="-"&&(u=-u)),d=new Date(Date.UTC(n,i,r,s,o,l,a)),u&&d.setTime(d.getTime()-u),d}function Zp(e){return e.toISOString()}var qp=new $e("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Kp,construct:Up,instanceOf:Date,represent:Zp});function Gp(e){return e==="<<"||e===null}var jp=new $e("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Gp}),so=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function $p(e){if(e===null)return!1;var t,n,i=0,r=e.length,s=so;for(n=0;n<r;n++)if(t=s.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function Jp(e){var t,n,i=e.replace(/[\r\n=]/g,""),r=i.length,s=so,o=0,l=[];for(t=0;t<r;t++)t%4===0&&t&&(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)),o=o<<6|s.indexOf(i.charAt(t));return n=r%4*6,n===0?(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)):n===18?(l.push(o>>10&255),l.push(o>>2&255)):n===12&&l.push(o>>4&255),new Uint8Array(l)}function Qp(e){var t="",n=0,i,r,s=e.length,o=so;for(i=0;i<s;i++)i%3===0&&i&&(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]),n=(n<<8)+e[i];return r=s%3,r===0?(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]):r===2?(t+=o[n>>10&63],t+=o[n>>4&63],t+=o[n<<2&63],t+=o[64]):r===1&&(t+=o[n>>2&63],t+=o[n<<4&63],t+=o[64],t+=o[64]),t}function em(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var tm=new $e("tag:yaml.org,2002:binary",{kind:"scalar",resolve:$p,construct:Jp,predicate:em,represent:Qp}),nm=Object.prototype.hasOwnProperty,im=Object.prototype.toString;function rm(e){if(e===null)return!0;var t=[],n,i,r,s,o,l=e;for(n=0,i=l.length;n<i;n+=1){if(r=l[n],o=!1,im.call(r)!=="[object Object]")return!1;for(s in r)if(nm.call(r,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function om(e){return e!==null?e:[]}var sm=new $e("tag:yaml.org,2002:omap",{kind:"sequence",resolve:rm,construct:om}),lm=Object.prototype.toString;function am(e){if(e===null)return!0;var t,n,i,r,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(i=o[t],lm.call(i)!=="[object Object]"||(r=Object.keys(i),r.length!==1))return!1;s[t]=[r[0],i[r[0]]]}return!0}function cm(e){if(e===null)return[];var t,n,i,r,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1)i=o[t],r=Object.keys(i),s[t]=[r[0],i[r[0]]];return s}var um=new $e("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:am,construct:cm}),dm=Object.prototype.hasOwnProperty;function fm(e){if(e===null)return!0;var t,n=e;for(t in n)if(dm.call(n,t)&&n[t]!==null)return!1;return!0}function hm(e){return e!==null?e:{}}var gm=new $e("tag:yaml.org,2002:set",{kind:"mapping",resolve:fm,construct:hm}),pm=Wp.extend({implicit:[qp,jp],explicit:[tm,sm,um,gm]}),Ft=Object.prototype.hasOwnProperty,Ci=1,la=2,aa=3,Ai=4,dr=1,mm=2,Es=3,vm=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ym=/[\x85\u2028\u2029]/,xm=/[,\[\]\{\}]/,ca=/^(?:!|!!|![a-z\-]+!)$/i,ua=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ss(e){return Object.prototype.toString.call(e)}function bt(e){return e===10||e===13}function Gt(e){return e===9||e===32}function it(e){return e===9||e===32||e===10||e===13}function ln(e){return e===44||e===91||e===93||e===123||e===125}function wm(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function bm(e){return e===120?2:e===117?4:e===85?8:0}function _m(e){return 48<=e&&e<=57?e-48:-1}function Cs(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function km(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var da=new Array(256),fa=new Array(256);for(var nn=0;nn<256;nn++)da[nn]=Cs(nn)?1:0,fa[nn]=Cs(nn);function Em(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||pm,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ha(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=up(n),new Ct(t,n)}function ee(e,t){throw ha(e,t)}function Ni(e,t){e.onWarning&&e.onWarning.call(null,ha(e,t))}var As={YAML:function(t,n,i){var r,s,o;t.version!==null&&ee(t,"duplication of %YAML directive"),i.length!==1&&ee(t,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),r===null&&ee(t,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),o=parseInt(r[2],10),s!==1&&ee(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Ni(t,"unsupported YAML version of the document")},TAG:function(t,n,i){var r,s;i.length!==2&&ee(t,"TAG directive accepts exactly two arguments"),r=i[0],s=i[1],ca.test(r)||ee(t,"ill-formed tag handle (first argument) of the TAG directive"),Ft.call(t.tagMap,r)&&ee(t,'there is a previously declared suffix for "'+r+'" tag handle'),ua.test(s)||ee(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{ee(t,"tag prefix is malformed: "+s)}t.tagMap[r]=s}};function Rt(e,t,n,i){var r,s,o,l;if(t<n){if(l=e.input.slice(t,n),i)for(r=0,s=l.length;r<s;r+=1)o=l.charCodeAt(r),o===9||32<=o&&o<=1114111||ee(e,"expected valid JSON character");else vm.test(l)&&ee(e,"the stream contains non-printable characters");e.result+=l}}function Ns(e,t,n,i){var r,s,o,l;for(Je.isObject(n)||ee(e,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(n),o=0,l=r.length;o<l;o+=1)s=r[o],Ft.call(t,s)||(t[s]=n[s],i[s]=!0)}function an(e,t,n,i,r,s,o,l,a){var u,c;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),u=0,c=r.length;u<c;u+=1)Array.isArray(r[u])&&ee(e,"nested arrays are not supported inside keys"),typeof r=="object"&&Ss(r[u])==="[object Object]"&&(r[u]="[object Object]");if(typeof r=="object"&&Ss(r)==="[object Object]"&&(r="[object Object]"),r=String(r),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,c=s.length;u<c;u+=1)Ns(e,t,s[u],n);else Ns(e,t,s,n);else!e.json&&!Ft.call(n,r)&&Ft.call(t,r)&&(e.line=o||e.line,e.lineStart=l||e.lineStart,e.position=a||e.position,ee(e,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(t,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[r]=s,delete n[r];return t}function lo(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):ee(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Fe(e,t,n){for(var i=0,r=e.input.charCodeAt(e.position);r!==0;){for(;Gt(r);)r===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(t&&r===35)do r=e.input.charCodeAt(++e.position);while(r!==10&&r!==13&&r!==0);if(bt(r))for(lo(e),r=e.input.charCodeAt(e.position),i++,e.lineIndent=0;r===32;)e.lineIndent++,r=e.input.charCodeAt(++e.position);else break}return n!==-1&&i!==0&&e.lineIndent<n&&Ni(e,"deficient indentation"),i}function Ki(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||it(n)))}function ao(e,t){t===1?e.result+=" ":t>1&&(e.result+=Je.repeat(`
`,t-1))}function Sm(e,t,n){var i,r,s,o,l,a,u,c,h=e.kind,d=e.result,g;if(g=e.input.charCodeAt(e.position),it(g)||ln(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(r=e.input.charCodeAt(e.position+1),it(r)||n&&ln(r)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,l=!1;g!==0;){if(g===58){if(r=e.input.charCodeAt(e.position+1),it(r)||n&&ln(r))break}else if(g===35){if(i=e.input.charCodeAt(e.position-1),it(i))break}else{if(e.position===e.lineStart&&Ki(e)||n&&ln(g))break;if(bt(g))if(a=e.line,u=e.lineStart,c=e.lineIndent,Fe(e,!1,-1),e.lineIndent>=t){l=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=a,e.lineStart=u,e.lineIndent=c;break}}l&&(Rt(e,s,o,!1),ao(e,e.line-a),s=o=e.position,l=!1),Gt(g)||(o=e.position+1),g=e.input.charCodeAt(++e.position)}return Rt(e,s,o,!1),e.result?!0:(e.kind=h,e.result=d,!1)}function Cm(e,t){var n,i,r;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=r=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Rt(e,i,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)i=e.position,e.position++,r=e.position;else return!0;else bt(n)?(Rt(e,i,r,!0),ao(e,Fe(e,!1,t)),i=r=e.position):e.position===e.lineStart&&Ki(e)?ee(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);ee(e,"unexpected end of the stream within a single quoted scalar")}function Am(e,t){var n,i,r,s,o,l;if(l=e.input.charCodeAt(e.position),l!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(l=e.input.charCodeAt(e.position))!==0;){if(l===34)return Rt(e,n,e.position,!0),e.position++,!0;if(l===92){if(Rt(e,n,e.position,!0),l=e.input.charCodeAt(++e.position),bt(l))Fe(e,!1,t);else if(l<256&&da[l])e.result+=fa[l],e.position++;else if((o=bm(l))>0){for(r=o,s=0;r>0;r--)l=e.input.charCodeAt(++e.position),(o=wm(l))>=0?s=(s<<4)+o:ee(e,"expected hexadecimal character");e.result+=km(s),e.position++}else ee(e,"unknown escape sequence");n=i=e.position}else bt(l)?(Rt(e,n,i,!0),ao(e,Fe(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Ki(e)?ee(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}ee(e,"unexpected end of the stream within a double quoted scalar")}function Nm(e,t){var n=!0,i,r,s,o=e.tag,l,a=e.anchor,u,c,h,d,g,m=Object.create(null),w,y,k,v;if(v=e.input.charCodeAt(e.position),v===91)c=93,g=!1,l=[];else if(v===123)c=125,g=!0,l={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),v=e.input.charCodeAt(++e.position);v!==0;){if(Fe(e,!0,t),v=e.input.charCodeAt(e.position),v===c)return e.position++,e.tag=o,e.anchor=a,e.kind=g?"mapping":"sequence",e.result=l,!0;n?v===44&&ee(e,"expected the node content, but found ','"):ee(e,"missed comma between flow collection entries"),y=w=k=null,h=d=!1,v===63&&(u=e.input.charCodeAt(e.position+1),it(u)&&(h=d=!0,e.position++,Fe(e,!0,t))),i=e.line,r=e.lineStart,s=e.position,bn(e,t,Ci,!1,!0),y=e.tag,w=e.result,Fe(e,!0,t),v=e.input.charCodeAt(e.position),(d||e.line===i)&&v===58&&(h=!0,v=e.input.charCodeAt(++e.position),Fe(e,!0,t),bn(e,t,Ci,!1,!0),k=e.result),g?an(e,l,m,y,w,k,i,r,s):h?l.push(an(e,null,m,y,w,k,i,r,s)):l.push(w),Fe(e,!0,t),v=e.input.charCodeAt(e.position),v===44?(n=!0,v=e.input.charCodeAt(++e.position)):n=!1}ee(e,"unexpected end of the stream within a flow collection")}function Mm(e,t){var n,i,r=dr,s=!1,o=!1,l=t,a=0,u=!1,c,h;if(h=e.input.charCodeAt(e.position),h===124)i=!1;else if(h===62)i=!0;else return!1;for(e.kind="scalar",e.result="";h!==0;)if(h=e.input.charCodeAt(++e.position),h===43||h===45)dr===r?r=h===43?Es:mm:ee(e,"repeat of a chomping mode identifier");else if((c=_m(h))>=0)c===0?ee(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ee(e,"repeat of an indentation width identifier"):(l=t+c-1,o=!0);else break;if(Gt(h)){do h=e.input.charCodeAt(++e.position);while(Gt(h));if(h===35)do h=e.input.charCodeAt(++e.position);while(!bt(h)&&h!==0)}for(;h!==0;){for(lo(e),e.lineIndent=0,h=e.input.charCodeAt(e.position);(!o||e.lineIndent<l)&&h===32;)e.lineIndent++,h=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>l&&(l=e.lineIndent),bt(h)){a++;continue}if(e.lineIndent<l){r===Es?e.result+=Je.repeat(`
`,s?1+a:a):r===dr&&s&&(e.result+=`
`);break}for(i?Gt(h)?(u=!0,e.result+=Je.repeat(`
`,s?1+a:a)):u?(u=!1,e.result+=Je.repeat(`
`,a+1)):a===0?s&&(e.result+=" "):e.result+=Je.repeat(`
`,a):e.result+=Je.repeat(`
`,s?1+a:a),s=!0,o=!0,a=0,n=e.position;!bt(h)&&h!==0;)h=e.input.charCodeAt(++e.position);Rt(e,n,e.position,!1)}return!0}function Ms(e,t){var n,i=e.tag,r=e.anchor,s=[],o,l=!1,a;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),a=e.input.charCodeAt(e.position);a!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ee(e,"tab characters must not be used in indentation")),!(a!==45||(o=e.input.charCodeAt(e.position+1),!it(o))));){if(l=!0,e.position++,Fe(e,!0,-1)&&e.lineIndent<=t){s.push(null),a=e.input.charCodeAt(e.position);continue}if(n=e.line,bn(e,t,aa,!1,!0),s.push(e.result),Fe(e,!0,-1),a=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&a!==0)ee(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return l?(e.tag=i,e.anchor=r,e.kind="sequence",e.result=s,!0):!1}function Tm(e,t,n){var i,r,s,o,l,a,u=e.tag,c=e.anchor,h={},d=Object.create(null),g=null,m=null,w=null,y=!1,k=!1,v;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=h),v=e.input.charCodeAt(e.position);v!==0;){if(!y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ee(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),s=e.line,(v===63||v===58)&&it(i))v===63?(y&&(an(e,h,d,g,m,null,o,l,a),g=m=w=null),k=!0,y=!0,r=!0):y?(y=!1,r=!0):ee(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,v=i;else{if(o=e.line,l=e.lineStart,a=e.position,!bn(e,n,la,!1,!0))break;if(e.line===s){for(v=e.input.charCodeAt(e.position);Gt(v);)v=e.input.charCodeAt(++e.position);if(v===58)v=e.input.charCodeAt(++e.position),it(v)||ee(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(an(e,h,d,g,m,null,o,l,a),g=m=w=null),k=!0,y=!1,r=!1,g=e.tag,m=e.result;else if(k)ee(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=c,!0}else if(k)ee(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=c,!0}if((e.line===s||e.lineIndent>t)&&(y&&(o=e.line,l=e.lineStart,a=e.position),bn(e,t,Ai,!0,r)&&(y?m=e.result:w=e.result),y||(an(e,h,d,g,m,w,o,l,a),g=m=w=null),Fe(e,!0,-1),v=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&v!==0)ee(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&an(e,h,d,g,m,null,o,l,a),k&&(e.tag=u,e.anchor=c,e.kind="mapping",e.result=h),k}function Pm(e){var t,n=!1,i=!1,r,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&ee(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(n=!0,o=e.input.charCodeAt(++e.position)):o===33?(i=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",t=e.position,n){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):ee(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!it(o);)o===33&&(i?ee(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),ca.test(r)||ee(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),xm.test(s)&&ee(e,"tag suffix cannot contain flow indicator characters")}s&&!ua.test(s)&&ee(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{ee(e,"tag name is malformed: "+s)}return n?e.tag=s:Ft.call(e.tagMap,r)?e.tag=e.tagMap[r]+s:r==="!"?e.tag="!"+s:r==="!!"?e.tag="tag:yaml.org,2002:"+s:ee(e,'undeclared tag handle "'+r+'"'),!0}function Im(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&ee(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!it(n)&&!ln(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&ee(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Om(e){var t,n,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!it(i)&&!ln(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&ee(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Ft.call(e.anchorMap,n)||ee(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Fe(e,!0,-1),!0}function bn(e,t,n,i,r){var s,o,l,a=1,u=!1,c=!1,h,d,g,m,w,y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=l=Ai===n||aa===n,i&&Fe(e,!0,-1)&&(u=!0,e.lineIndent>t?a=1:e.lineIndent===t?a=0:e.lineIndent<t&&(a=-1)),a===1)for(;Pm(e)||Im(e);)Fe(e,!0,-1)?(u=!0,l=s,e.lineIndent>t?a=1:e.lineIndent===t?a=0:e.lineIndent<t&&(a=-1)):l=!1;if(l&&(l=u||r),(a===1||Ai===n)&&(Ci===n||la===n?w=t:w=t+1,y=e.position-e.lineStart,a===1?l&&(Ms(e,y)||Tm(e,y,w))||Nm(e,w)?c=!0:(o&&Mm(e,w)||Cm(e,w)||Am(e,w)?c=!0:Om(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&ee(e,"alias node should not have any properties")):Sm(e,w,Ci===n)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):a===0&&(c=l&&Ms(e,y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&ee(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),h=0,d=e.implicitTypes.length;h<d;h+=1)if(m=e.implicitTypes[h],m.resolve(e.result)){e.result=m.construct(e.result),e.tag=m.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Ft.call(e.typeMap[e.kind||"fallback"],e.tag))m=e.typeMap[e.kind||"fallback"][e.tag];else for(m=null,g=e.typeMap.multi[e.kind||"fallback"],h=0,d=g.length;h<d;h+=1)if(e.tag.slice(0,g[h].tag.length)===g[h].tag){m=g[h];break}m||ee(e,"unknown tag !<"+e.tag+">"),e.result!==null&&m.kind!==e.kind&&ee(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+m.kind+'", not "'+e.kind+'"'),m.resolve(e.result,e.tag)?(e.result=m.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ee(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function zm(e){var t=e.position,n,i,r,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Fe(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!it(o);)o=e.input.charCodeAt(++e.position);for(i=e.input.slice(n,e.position),r=[],i.length<1&&ee(e,"directive name must not be less than one character in length");o!==0;){for(;Gt(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!bt(o));break}if(bt(o))break;for(n=e.position;o!==0&&!it(o);)o=e.input.charCodeAt(++e.position);r.push(e.input.slice(n,e.position))}o!==0&&lo(e),Ft.call(As,i)?As[i](e,i,r):Ni(e,'unknown document directive "'+i+'"')}if(Fe(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Fe(e,!0,-1)):s&&ee(e,"directives end mark is expected"),bn(e,e.lineIndent-1,Ai,!1,!0),Fe(e,!0,-1),e.checkLineBreaks&&ym.test(e.input.slice(t,e.position))&&Ni(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Ki(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Fe(e,!0,-1));return}if(e.position<e.length-1)ee(e,"end of the stream or a document separator is expected");else return}function ga(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new Em(e,t),i=e.indexOf("\0");for(i!==-1&&(n.position=i,ee(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)zm(n);return n.documents}function Dm(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var i=ga(e,n);if(typeof t!="function")return i;for(var r=0,s=i.length;r<s;r+=1)t(i[r])}function Lm(e,t){var n=ga(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new Ct("expected a single document in the stream, but found more")}}var Hm=Dm,Rm=Lm,Fm={loadAll:Hm,load:Rm},Ym=Fm.load;let Dr="";na.subscribe(e=>Dr=e);async function Ts(e){console.log("base",Dr,e);const t=new URL(e,Dr).toString();try{const n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch YAML from ${t}`);const i=await n.text();return Ym(i)}catch(n){throw console.error(`Error fetching or parsing YAML from ${t}:`,n),n}}function Bm(e,t={}){if(!e)return;const n=window.innerWidth,i=window.innerHeight,r=t.centerX??n/2,s=t.centerY??i/2,o=t.scale??2;return{x:r+e.x*o,y:s-e.y*o}}let Lr=!0,pa=!0,ma=!0,va={width:900,height:600};oo.subscribe(e=>va=e);Ir.subscribe(e=>{Lr=e});Or.subscribe(e=>{pa=e});Si.subscribe(e=>{ma=e});function Vm(e){const n=Math.max(900,e.width)-50,i=Math.max(600,e.height)-50;return`width: ${n}px; height: ${i}px;`}function Xm(e,t,n,i,r,s,o,l){var g,m;if(!i)throw new Error("no concept component",i);const{name:a,icon:u,description:c,...h}=t,d=s&&Object.keys(h).length>0;return{id:e,type:d?"group":ma&&(((g=i[e])==null?void 0:g.type)||e),position:Bm((m=i[e])==null?void 0:m.position)||{x:0,y:0},data:{label:u?`${u} ${a}`:a,description:c||"",icon:u},...d?{style:Vm(o),extent:"parent"}:{},...l?{parentId:n,extent:"parent"}:{},level:r}}const Wm=(e,t)=>{const n=[],i=[],{concept_component:r}=t,s=(a,u,c,h=0,d=!1)=>{if(typeof u!="object"||u===null)return;const g=Xm(a,u,c,r,h,Lr,va,d);n.push(g);const m=g.type==="group";if(pa&&!Lr){const w={id:`${c}-${a}`,type:"default",source:c,target:a,label:u.description,animated:!1};i.push(w)}for(const w in u)w!=="relationships"&&s(w,u[w],a,h+1,m)},o=(a,u)=>{if(!(typeof u!="object"||u===null)){u.relationships&&u.relationships.forEach(c=>{i.push({id:`${a}-${c.end}`,type:"default",source:a,target:c.end,label:c.description,animated:!0})});for(const c in u)o(c,u[c])}},l=()=>{const a={},u=(d,g)=>{a[d]===void 0&&(a[d]=g,i.filter(m=>m.source===d).forEach(m=>u(m.target,g+1)))};n.filter(d=>!i.some(g=>g.target===d.id)).forEach(d=>u(d.id,0));const h={};n.forEach((d,g)=>{if(!d.position){const m=a[d.id]||d.level,w=(h[m]||d.level)*300,y=m*100+g*50;d.position={x:w,y},h[m]=(h[m]||0)+1}})};return s("root",e,void 0),o("root",e),l(),{nodes:n,edges:i}};oo.subscribe(e=>e);const ya=Q([]),xa=Q([]);async function ti(e,t){const n=Wm(e,t);ya.set(n.nodes),xa.set(n.edges)}const Mi=Q([{sender:"Agent1",content:"Hello, how are you?"}]);function ni(e,t,n){for(let i=0;i<n.length;i++)e.setUint8(t+i,n.charCodeAt(i))}function Hr(e,t){const r=t*1*4,s=1*(32/8),o=new ArrayBuffer(44+e.byteLength),l=new DataView(o);return ni(l,0,"RIFF"),l.setUint32(4,36+e.byteLength,!0),ni(l,8,"WAVE"),ni(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,3,!0),l.setUint16(22,1,!0),l.setUint32(24,t,!0),l.setUint32(28,r,!0),l.setUint16(32,s,!0),l.setUint16(34,32,!0),ni(l,36,"data"),l.setUint32(40,e.byteLength,!0),new Float32Array(o,44).set(e),new Blob([o],{type:"audio/wav"})}var Km=ge('<button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Play</button> <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Download</button>',1);function Um(e,t){ue(t,!1);let n=p(t,"audioData",8),i=p(t,"samplingRate",8),r;Yt(()=>{r=new(window.AudioContext||window.webkitAudioContext)});function s(){const c=r.createBuffer(1,n().length,i());c.getChannelData(0).set(n());const d=r.createBufferSource();d.buffer=c,d.connect(r.destination),d.start()}function o(){if(!n()||!i())return;const c=Hr(n(),i()),h=URL.createObjectURL(c),d=document.createElement("a");d.href=h,d.download="audio.wav",d.click(),URL.revokeObjectURL(h)}fe();var l=Km(),a=Ne(l),u=ie(a,2);he("click",a,s),he("click",u,o),U(e,l),de()}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wa=Symbol("Comlink.proxy"),Zm=Symbol("Comlink.endpoint"),qm=Symbol("Comlink.releaseProxy"),fr=Symbol("Comlink.finalizer"),ci=Symbol("Comlink.thrown"),ba=e=>typeof e=="object"&&e!==null||typeof e=="function",Gm={canHandle:e=>ba(e)&&e[wa],serialize(e){const{port1:t,port2:n}=new MessageChannel;return ka(e,t),[n,[n]]},deserialize(e){return e.start(),Sa(e)}},jm={canHandle:e=>ba(e)&&ci in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},_a=new Map([["proxy",Gm],["throw",jm]]);function $m(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function ka(e,t=globalThis,n=["*"]){t.addEventListener("message",function i(r){if(!r||!r.data)return;if(!$m(n,r.origin)){console.warn(`Invalid origin '${r.origin}' for comlink proxy`);return}const{id:s,type:o,path:l}=Object.assign({path:[]},r.data),a=(r.data.argumentList||[]).map(Kt);let u;try{const c=l.slice(0,-1).reduce((d,g)=>d[g],e),h=l.reduce((d,g)=>d[g],e);switch(o){case"GET":u=h;break;case"SET":c[l.slice(-1)[0]]=Kt(r.data.value),u=!0;break;case"APPLY":u=h.apply(c,a);break;case"CONSTRUCT":{const d=new h(...a);u=iv(d)}break;case"ENDPOINT":{const{port1:d,port2:g}=new MessageChannel;ka(e,g),u=nv(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[ci]:0}}Promise.resolve(u).catch(c=>({value:c,[ci]:0})).then(c=>{const[h,d]=Ii(c);t.postMessage(Object.assign(Object.assign({},h),{id:s}),d),o==="RELEASE"&&(t.removeEventListener("message",i),Ea(t),fr in e&&typeof e[fr]=="function"&&e[fr]())}).catch(c=>{const[h,d]=Ii({value:new TypeError("Unserializable return value"),[ci]:0});t.postMessage(Object.assign(Object.assign({},h),{id:s}),d)})}),t.start&&t.start()}function Jm(e){return e.constructor.name==="MessagePort"}function Ea(e){Jm(e)&&e.close()}function Sa(e,t){const n=new Map;return e.addEventListener("message",function(r){const{data:s}=r;if(!s||!s.id)return;const o=n.get(s.id);if(o)try{o(s)}finally{n.delete(s.id)}}),Rr(e,n,[],t)}function ii(e){if(e)throw new Error("Proxy has been released and is not useable")}function Ca(e){return rn(e,new Map,{type:"RELEASE"}).then(()=>{Ea(e)})}const Ti=new WeakMap,Pi="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(Ti.get(e)||0)-1;Ti.set(e,t),t===0&&Ca(e)});function Qm(e,t){const n=(Ti.get(t)||0)+1;Ti.set(t,n),Pi&&Pi.register(e,t,e)}function ev(e){Pi&&Pi.unregister(e)}function Rr(e,t,n=[],i=function(){}){let r=!1;const s=new Proxy(i,{get(o,l){if(ii(r),l===qm)return()=>{ev(s),Ca(e),t.clear(),r=!0};if(l==="then"){if(n.length===0)return{then:()=>s};const a=rn(e,t,{type:"GET",path:n.map(u=>u.toString())}).then(Kt);return a.then.bind(a)}return Rr(e,t,[...n,l])},set(o,l,a){ii(r);const[u,c]=Ii(a);return rn(e,t,{type:"SET",path:[...n,l].map(h=>h.toString()),value:u},c).then(Kt)},apply(o,l,a){ii(r);const u=n[n.length-1];if(u===Zm)return rn(e,t,{type:"ENDPOINT"}).then(Kt);if(u==="bind")return Rr(e,t,n.slice(0,-1));const[c,h]=Ps(a);return rn(e,t,{type:"APPLY",path:n.map(d=>d.toString()),argumentList:c},h).then(Kt)},construct(o,l){ii(r);const[a,u]=Ps(l);return rn(e,t,{type:"CONSTRUCT",path:n.map(c=>c.toString()),argumentList:a},u).then(Kt)}});return Qm(s,e),s}function tv(e){return Array.prototype.concat.apply([],e)}function Ps(e){const t=e.map(Ii);return[t.map(n=>n[0]),tv(t.map(n=>n[1]))]}const Aa=new WeakMap;function nv(e,t){return Aa.set(e,t),e}function iv(e){return Object.assign(e,{[wa]:!0})}function Ii(e){for(const[t,n]of _a)if(n.canHandle(e)){const[i,r]=n.serialize(e);return[{type:"HANDLER",name:t,value:i},r]}return[{type:"RAW",value:e},Aa.get(e)||[]]}function Kt(e){switch(e.type){case"HANDLER":return _a.get(e.name).deserialize(e.value);case"RAW":return e.value}}function rn(e,t,n,i){return new Promise(r=>{const s=rv();t.set(s,r),e.start&&e.start(),e.postMessage(Object.assign({id:s},n),i)})}function rv(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let hr=null,Is=null;function Na(){return hr||(hr=new Worker(new URL(""+new URL("../workers/hfworker-Bh7VPUfc.js",import.meta.url).href,import.meta.url),{type:"module"}),Is=Sa(hr)),Is}var ov=ge('<div class="flex items-center space-x-4 p-4 bg-gray-100 rounded-lg shadow-md"><textarea placeholder="Enter your prompt here" class="px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" rows="1" style="resize: none; overflow: hidden;"></textarea> <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">chat</button></div>'),sv=ge('<div class="mt-6 p-4 bg-white border border-gray-200 rounded-lg shadow-md"><h3 class="text-lg font-semibold text-gray-800">Message:</h3> <p class="mt-2 text-gray-700"> </p> <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">hf-to-audio</button></div>'),lv=ge('<div class="mt-6 p-4 bg-white border border-gray-200 rounded-lg shadow-md"><!></div>'),av=ge("<!> <!> <!>",1),cv=ge('<div><div class="node bg-slate-300 p-4 rounded-md text-gray-800"><div> </div> <!> <!></div> <div><!></div></div>');function Os(e,t){ue(t,!1);const n=Na();let i=p(t,"data",8),r=V(""),s=V(""),o=V(!0),l=V();async function a(b){const E={role:i().label,goal:i().description,prompt:b.prompt},C=await n.ask(E);return console.log("response",C),C}async function u(){console.log("handleInvoke",i()),F(o,!1),Mi.update(E=>[...E,{sender:"user👽",content:`@${i().label} ${f(r)}`}]);const b=await a({prompt:f(r)});Mi.update(E=>[...E,{sender:i().label,content:b}]),F(s,b)}async function c(){F(l,await n.speech(f(s)))}Yt(()=>{if(f(o)){const b=document.querySelector("input");b&&b.focus()}});function h(b){b.key==="Enter"&&!b.ctrlKey&&(b.preventDefault(),F(r,f(r)+`
`)),b.key==="Enter"&&b.ctrlKey&&(b.preventDefault(),u())}fe();var d=cv(),g=ae(d),m=ae(g),w=ae(m,!0);se(m);var y=ie(m,2);wn(y,{type:"target",get position(){return le.Left}});var k=ie(y,2);wn(k,{type:"source",get position(){return le.Right}}),se(g);var v=ie(g,2),S=ae(v);$0(S,{children:(b,E)=>{var C=av(),N=Ne(C);Se(N,()=>f(o),M=>{var T=ov(),I=ae(T);Ws(I);var P=ie(I,2);se(T),$s(I,()=>f(r),x=>F(r,x)),he("keydown",I,h),he("click",P,u),U(M,T)});var D=ie(N,2);Se(D,()=>f(s),M=>{var T=sv(),I=ie(ae(T),2),P=ae(I,!0);se(I);var x=ie(I,2);se(T),xe(()=>xt(P,f(s))),he("click",x,c),U(M,T)});var H=ie(D,2);Se(H,()=>f(l),M=>{var T=lv(),I=ae(T);Um(I,{get audioData(){return f(l).audio},get samplingRate(){return f(l).sampling_rate}}),se(T),U(M,T)}),U(b,C)},$$slots:{default:!0}}),se(v),se(d),xe(()=>xt(w,i().label)),U(e,d),de()}let Ma=!0;Si.subscribe(e=>Ma=e);async function uv(e){const t={};for(const[n,i]of Object.entries(e.concept_component))try{i.component&&Ma?(t[n]=(await vc(async()=>{const{default:r}=await import(`../components/brain/${i.component}`);return{default:r}},[],import.meta.url)).default,console.log("found component",n,i.component)):t[n]=Os}catch(r){console.log("error",r),t[n]=Os}return t}async function dv(e){try{return await uv(e)}catch(t){throw console.error("Error loading node types:",t),t}}function fv(e,t){const n=[];let i=0;const r=e.length;if(r<t)return[e];for(;i<r;){let s=i+t;s>r&&(s=r);let o=e.lastIndexOf(" ",s-1);o<=i&&(o=s);const l=e.substring(i,o);n.push(l),i=o+1}return n}const hv=10;function gv(e,t){return e.length*(1/t)/hv}const gr=[];async function pv(e,t,n={}){if(!("speechSynthesis"in window))return Promise.reject(new Error("Speech Synthesis not supported in this browser."));if(typeof e!="string"||e.trim().length===0)return Promise.reject(new Error("Invalid message."));let{rate:i=.8,chunkSize:r=180,maxRetries:s=3}=n;const o=fv(e,r);return gr.push(...o),s=o.length,new Promise((l,a)=>{let u=0;function c(){if(gr.length===0){l();return}const h=gr.shift(),d=new SpeechSynthesisUtterance(h);d.rate=i;const g=setTimeout(()=>{console.warn("Fallback Timeout triggered for:",h),w(new Error("Timeout fallback"))},Math.max(5e3,gv(h,i)*1e3)),m=setInterval(()=>{speechSynthesis.speaking||(clearInterval(m),speechSynthesis.speak(d))},500);d.onend=()=>{console.log("Finished chunk:",h),clearTimeout(g),clearInterval(m),c()},d.onerror=y=>{console.error("Error speaking chunk:",h,y),clearTimeout(g),clearInterval(m),w(new Error(y.error||"Unknown SpeechSynthesis error"))};function w(y){u<s?(console.warn(`Retrying chunk (${u+1}/${s}), state.speaking:`,speechSynthesis.speaking),u++,speechSynthesis.pause(),speechSynthesis.cancel(),speechSynthesis.resume(),c()):(console.error("Max retries reached. Rejecting."),a(y))}try{speechSynthesis.speak(d)}catch(y){console.error("Speech synthesis failed:",y),w(y)}}speechSynthesis.cancel(),c()})}var mv=ge('<li class="flex p-2 bg-gray-100 rounded message-container svelte-jmerrv"><div><strong class="font-semibold"> </strong> </div> <div class="flex space-x-1 action-btn svelte-jmerrv"><button title="Speak">🔊</button> <button title="Download">⬇️</button></div></li>'),vv=ge('<div class="px-4 py-2 hover:bg-gray-100 cursor-pointer mention-highlight svelte-jmerrv"> </div>'),yv=ge('<div class="absolute z-10 w-full bg-white border border-gray-200 rounded shadow"></div>'),xv=ge('<div class="fixed top-16 right-0 w-96 bg-white p-4 border-l border-gray-200 z-50"><h2 class="text-lg font-bold mb-2">Chat Messages</h2> <div id="chat-messages" class="max-h-96 overflow-y-auto mb-4"><ul class="space-y-2"></ul></div> <div class="relative"><!> <textarea rows="3" class="textarea svelte-jmerrv" placeholder="Type a message... (Ctrl+Enter to send)"></textarea></div> <button class="mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Send</button> <button class="mt-4 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">Download All Messages as Audio</button> <button class="mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Close</button></div>');function wv(e,t){ue(t,!1);const n=Na();let i=V([]),r=p(t,"showPanel",12),s=new Set,o=V([]),l=V(""),a=V(!1);async function u(M){M.content.trim()!==""?await pv(`${M.sender}: ${M.content}`):console.warn("No message to speak.")}async function c(M){try{const T=window.URL.createObjectURL(M),I=document.createElement("a");I.href=T,I.download="titlex-message.mp3",document.body.appendChild(I),I.click(),document.body.removeChild(I)}catch(T){console.error("Failed to download audio:",T)}}async function h(M){try{const T=await n.speech(M.content),I=Hr(T.audio,T.sampling_rate);await c(I)}catch(T){console.error("Failed to download audio:",T)}}async function d(){try{const M=f(i).map(P=>`${P.sender}: ${P.content}`).join(`
`);console.log("text.length",M.length);const T=await n.speech(M),I=Hr(T.audio,T.sampling_rate);await c(I)}catch(M){console.error("Failed to download conversation audio:",M)}}function g(M){F(l,f(l).replace(/@\w*$/,`@${M} `)),F(a,!1)}function m(){f(l).trim()!==""&&(Mi.update(M=>[...M,{sender:"User",content:f(l)}]),F(l,""),setTimeout(()=>{const M=document.getElementById("chat-messages");M==null||M.scrollTo(0,M.scrollHeight)},0))}function w(M){const T=M.target.value;if(F(l,T),T.includes("@")){const I=T.match(/@(\w*)$/);if(I){const P=I[1];F(a,f(o).some(x=>x.startsWith(P)))}else F(a,!1)}else F(a,!1)}function y(M){M.key==="Enter"&&M.ctrlKey&&(M.preventDefault(),m())}Yt(()=>{Mi.subscribe(M=>{F(i,M),s=new Set(M.map(T=>T.sender)),F(o,Array.from(s))})}),fe();var k=xv(),v=ie(ae(k),2),S=ae(v);gn(S,5,()=>f(i),Po,(M,T)=>{var I=mv(),P=ae(I),x=ae(P),O=ae(x);se(x);var _=ie(x);se(P);var A=ie(P,2),z=ae(A),L=ie(z,2);se(A),se(I),xe(()=>{xt(O,`${f(T).sender??""}:`),xt(_,` ${f(T).content??""}`)}),he("click",z,()=>u(f(T))),he("click",L,()=>h(f(T))),U(M,I)}),se(S),se(v);var b=ie(v,2),E=ae(b);Se(E,()=>f(a),M=>{var T=yv();gn(T,5,()=>f(o),Po,(I,P)=>{var x=vv(),O=ae(x);se(x),xe(()=>xt(O,`@${f(P)??""}`)),he("click",x,()=>g(f(P))),U(I,x)}),se(T),U(M,T)});var C=ie(E,2);Ws(C),se(b);var N=ie(b,2),D=ie(N,2),H=ie(D,2);se(k),$s(C,()=>f(l),M=>F(l,M)),he("input",C,w),he("keydown",C,y),he("click",N,m),he("click",D,d),he("click",H,()=>r(!1)),js(3,k,()=>el),U(e,k),de()}var bv=ge("<!> <!> <!> <!>",1),_v=ge("<!> <!> <!>",1),kv=ge("<p>Loading node types...</p>"),Ev=ge('<div class="panel svelte-69d2lt"><!></div>'),Sv=ge('<div class="w-full h-screen" style="height:100vh;"><!> <!></div>');function Cv(e,t){ue(t,!1);const n=Be(),i=()=>X(Ir,"$groups",n),r=()=>X(Or,"$showRelationships",n),s=()=>X(Si,"$customNodes",n);let o,l,a=V(!1),u=V({});function c(k){console.log(`Node description: ${k.detail.node.data.description}`)}Yt(async()=>{o=await Ts("brain.yaml"),l=await Ts("nodeTypes.yaml");try{await ti(o,l),F(u,await dv(l))}catch(k){console.error("Initialization error:",k)}});function h(){Ir.set(!i()),console.log("Groups state:",i()),ti(o,l,{groups:i(),showRelationships:r()})}function d(){Or.set(!r()),console.log("Show Relationships state:",r()),ti(o,l,{groups:i(),showRelationships:r()})}function g(){Si.set(!s()),console.log("Show customNodes:",s()),ti(o,l)}fe();var m=Sv(),w=ae(m);Se(w,()=>Object.keys(f(u)).length>0,k=>{b0(k,{nodes:ya,edges:xa,get nodeTypes(){return f(u)},fitView:!0,autoPanOnNodeDrag:!1,attributionPosition:"top-right",$$events:{nodeclick:c},children:(v,S)=>{var b=_v(),E=Ne(b);V0(E,{bgColor:"rgba(255, 240, 137, 0.25)",get variant(){return Tt.Dots}});var C=ie(E,2);D0(C,{children:(D,H)=>{var M=bv(),T=Ne(M);Lt(T,{$$events:{click:()=>F(a,!f(a))},children:(O,_)=>{Ut();var A=Mn("⚡️");U(O,A)},$$slots:{default:!0}});var I=ie(T,2);Lt(I,{$$events:{click:h},children:(O,_)=>{Ut();var A=Mn("🔳");U(O,A)},$$slots:{default:!0}});var P=ie(I,2);Lt(P,{$$events:{click:d},children:(O,_)=>{Ut();var A=Mn("👶");U(O,A)},$$slots:{default:!0}});var x=ie(P,2);Lt(x,{$$events:{click:g},children:(O,_)=>{Ut();var A=Mn("🫂");U(O,A)},$$slots:{default:!0}}),U(D,M)},$$slots:{default:!0}});var N=ie(C,2);q0(N,{nodeStrokeWidth:3}),U(v,b)},$$slots:{default:!0}})},k=>{var v=kv();U(k,v)});var y=ie(w,2);Se(y,()=>f(a),k=>{var v=Ev(),S=ae(v);wv(S,{get showPanel(){return f(a)},set showPanel(b){F(a,b)},$$legacy:!0}),se(v),js(3,v,()=>el),U(k,v)}),se(m),U(e,m),de()}var Av=ge('<!> <div class="bg-slate-100"><!></div>',1);function Bv(e,t){var n=Av(),i=Ne(n);Se(i,()=>Qs,o=>{var l=st(),a=Ne(l);je(a,t,"default",{}),U(o,l)});var r=ie(i,2),s=ae(r);Cv(s,{}),se(r),U(e,n)}export{Bv as component};
