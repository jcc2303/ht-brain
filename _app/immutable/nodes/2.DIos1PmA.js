var Fa=Object.defineProperty;var xo=e=>{throw TypeError(e)};var Ya=(e,t,n)=>t in e?Fa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var wo=(e,t,n)=>Ya(e,typeof t!="symbol"?t+"":t,n),Ui=(e,t,n)=>t.has(e)||xo("Cannot "+n);var Et=(e,t,n)=>(Ui(e,t,"read from private field"),n?n.call(e):t.get(e)),En=(e,t,n)=>t.has(e)?xo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Zi=(e,t,n,i)=>(Ui(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),bo=(e,t,n)=>(Ui(e,t,"access private method"),n);import{a as U,t as ge,b as ni,n as Ye,c as st}from"../chunks/disclose-version.CqnJ6Kcu.js";import"../chunks/legacy.Cil2XBy3.js";import{h as tt,A as qi,v as Ba,a as Va,a8 as Xa,O as Is,Y as Os,ac as Wa,ad as _o,U as Gi,z as Sn,av as ii,a9 as zs,_ as Ds,aa as Ka,I as Ls,x as ci,aw as Hr,ax as ko,ay as Rr,az as Ua,H as Za,aA as qa,aB as Ga,aC as Hs,w as ja,V as $a,M as Rs,aD as Ja,E as Qa,a2 as Eo,aE as ec,R as tc,ae as ht,d as Fr,af as Fs,f as Y,s as nc,aF as ic,a7 as So,aG as rc,ab as oc,aH as sc,aI as lc,as as ac,n as Cn,aJ as cc,J as Co,K as Ao,aK as uc,p as ue,aL as Pn,aM as q,g as h,aN as Ke,m as ae,o as se,t as xe,l as de,aO as V,B as F,ar as ne,k as Ne,q as ie,aP as an,aQ as ui,i as No,aR as ct,aS as dc}from"../chunks/runtime.BzI6qX-b.js";import{p,l as De,i as Se,o as Ft,d as Oi,b as Yr,e as Ys,c as Bs,s as rn,_ as fc}from"../chunks/preload-helper.DSz75XK5.js";import{s as je,a as hc}from"../chunks/slot.DATaRYPb.js";import{i as gc,d as pc,e as mc,f as yc,n as vc,g as xc,j as wc,l as bc,s as Be,k as he,b as X,a as xt,o as di,p as _c,r as Vs}from"../chunks/store.BCVciLXF.js";import{i as fe}from"../chunks/lifecycle.DvD_zyYs.js";import{g as R,w as Q,r as dt,d as cn}from"../chunks/index.D6ECNynF.js";const kc=!0;function Mo(e,t){return t}function Ec(e,t,n,i){for(var r=[],s=t.length,o=0;o<s;o++)Ua(t[o].e,r,!0);var l=s>0&&r.length===0&&n!==null;if(l){var a=n.parentNode;Za(a),a.append(n),i.clear(),It(e,t[0].prev,t[s-1].next)}qa(r,()=>{for(var u=0;u<s;u++){var c=t[u];l||(i.delete(c.k),It(e,c.prev,c.next)),Ga(c.e,!l)}})}function gn(e,t,n,i,r,s=null){var o=e,l={flags:t,items:new Map,first:null},a=(t&Hs)!==0;if(a){var u=e;o=tt?qi(ja(u)):u.appendChild(Ba())}tt&&Va();var c=null,f=!1;Xa(()=>{var d=n(),g=Is(d)?d:d==null?[]:Os(d),v=g.length;if(f&&v===0)return;f=v===0;let x=!1;if(tt){var y=o.data===Wa;y!==(v===0)&&(o=_o(),qi(o),Gi(!1),x=!0)}if(tt){for(var b=null,m,S=0;S<v;S++){if(Sn.nodeType===8&&Sn.data===$a){o=Sn,x=!0,Gi(!1);break}var _=g[S],E=i(_,S);m=Xs(Sn,l,b,null,_,E,S,r,t),l.items.set(E,m),b=m}v>0&&qi(_o())}if(!tt){var C=Rs;Sc(g,l,o,r,t,(C.f&ii)!==0,i)}s!==null&&(v===0?c?zs(c):c=Ds(()=>s(o)):c!==null&&Ka(c,()=>{c=null})),x&&Gi(!0),n()}),tt&&(o=Sn)}function Sc(e,t,n,i,r,s,o){var w,D,k,A;var l=(r&Ja)!==0,a=(r&(Hr|Rr))!==0,u=e.length,c=t.items,f=t.first,d=f,g,v=null,x,y=[],b=[],m,S,_,E;if(l)for(E=0;E<u;E+=1)m=e[E],S=o(m,E),_=c.get(S),_!==void 0&&((w=_.a)==null||w.measure(),(x??(x=new Set)).add(_));for(E=0;E<u;E+=1){if(m=e[E],S=o(m,E),_=c.get(S),_===void 0){var C=d?d.e.nodes_start:n;v=Xs(C,t,v,v===null?t.first:v.next,m,S,E,i,r),c.set(S,v),y=[],b=[],d=v.next;continue}if(a&&Cc(_,m,E,r),_.e.f&ii&&(zs(_.e),l&&((D=_.a)==null||D.unfix(),(x??(x=new Set)).delete(_))),_!==d){if(g!==void 0&&g.has(_)){if(y.length<b.length){var M=b[0],O;v=M.prev;var H=y[0],N=y[y.length-1];for(O=0;O<y.length;O+=1)To(y[O],M,n);for(O=0;O<b.length;O+=1)g.delete(b[O]);It(t,H.prev,N.next),It(t,v,H),It(t,N,M),d=M,v=N,E-=1,y=[],b=[]}else g.delete(_),To(_,d,n),It(t,_.prev,_.next),It(t,_,v===null?t.first:v.next),It(t,v,_),v=_;continue}for(y=[],b=[];d!==null&&d.k!==S;)(s||!(d.e.f&ii))&&(g??(g=new Set)).add(d),b.push(d),d=d.next;if(d===null)continue;_=d}y.push(_),v=_,d=_.next}if(d!==null||g!==void 0){for(var I=g===void 0?[]:Os(g);d!==null;)(s||!(d.e.f&ii))&&I.push(d),d=d.next;var T=I.length;if(T>0){var P=r&Hs&&u===0?n:null;if(l){for(E=0;E<T;E+=1)(k=I[E].a)==null||k.measure();for(E=0;E<T;E+=1)(A=I[E].a)==null||A.fix()}Ec(t,I,P,c)}}l&&Ls(()=>{var z;if(x!==void 0)for(_ of x)(z=_.a)==null||z.apply()}),ci.first=t.first&&t.first.e,ci.last=v&&v.e}function Cc(e,t,n,i){i&Hr&&ko(e.v,t),i&Rr?ko(e.i,n):e.i=n}function Xs(e,t,n,i,r,s,o,l,a){var u=(a&Hr)!==0,c=(a&ec)===0,f=u?c?Qa(r):Eo(r):r,d=a&Rr?Eo(o):o,g={i:d,v:f,k:s,a:null,e:null,prev:n,next:i};try{return g.e=Ds(()=>l(e,f,d),tt),g.e.prev=n&&n.e,g.e.next=i&&i.e,n===null?t.first=g:(n.next=g,n.e.next=g.e),i!==null&&(i.prev=g,i.e.prev=g.e),g}finally{}}function To(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==i;){var o=tc(s);r.before(s),s=o}}function It(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ge(e,t,n){ht(()=>{var i=Fr(()=>t(e,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var r=!1,s={};Fs(()=>{var o=n();Y(o),r&&nc(s,o)&&(s=o,i.update(o))}),r=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function J(e,t,n,i){var r=e.__attributes??(e.__attributes={});tt&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||r[t]!==(r[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[ic]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Ws(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Br(e,t,n,i,r=!1,s=!1,o=!1){var l=t||{},a=e.tagName==="OPTION";for(var u in t)u in n||(n[u]=null);i!==void 0&&(n.class=n.class?n.class+" "+i:i);var c=Ws(e),f=e.__attributes??(e.__attributes={});for(const y in n){let b=n[y];if(a&&y==="value"&&b==null){e.value=e.__value="",l[y]=b;continue}var d=l[y];if(b!==d){l[y]=b;var g=y[0]+y[1];if(g!=="$$"){if(g==="on"){const m={},S="$$"+y;let _=y.slice(2);var v=xc(_);if(gc(_)&&(_=_.slice(0,-7),m.capture=!0),!v&&d){if(b!=null)continue;e.removeEventListener(_,l[S],m),l[S]=null}if(b!=null)if(v)e[`__${_}`]=b,mc([_]);else{let E=function(C){l[y].call(this,C)};l[S]=pc(_,e,E,m)}}else if(y==="style"&&b!=null)e.style.cssText=b+"";else if(y==="autofocus")yc(e,!!b);else if(y==="__value"||y==="value"&&b!=null)e.value=e[y]=e.__value=b;else{var x=y;r||(x=vc(x)),b==null&&!s?(f[y]=null,e.removeAttribute(y)):c.includes(x)&&(s||typeof b!="string")?e[x]=b:typeof b!="function"&&(tt&&(x==="src"||x==="href"||x==="srcset")||J(e,x,b))}y==="style"&&"__styles"in e&&(e.__styles={})}}}return l}var Po=new Map;function Ws(e){var t=Po.get(e.nodeName);if(t)return t;Po.set(e.nodeName,t=[]);for(var n,i=So(e),r=Element.prototype;r!==i;){n=rc(i);for(var s in n)n[s].set&&t.push(s);i=So(i)}return t}function Jt(e,t){var n=e.__className,i=Us(t);tt&&e.getAttribute("class")===i?e.__className=i:(n!==i||tt&&e.getAttribute("class")!==i)&&(i===""?e.removeAttribute("class"):e.setAttribute("class",i),e.__className=i)}function Ks(e,t){var n=e.__className,i=Us(t);tt&&e.className===i?e.__className=i:(n!==i||tt&&e.className!==i)&&(t==null?e.removeAttribute("class"):e.className=i,e.__className=i)}function Us(e){return e??""}function Oe(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function ze(e,t,n,i){var r=e.__styles??(e.__styles={});r[t]!==n&&(r[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}const Ac=()=>performance.now(),Dt={tick:e=>requestAnimationFrame(e),now:()=>Ac(),tasks:new Set};function Zs(e){Dt.tasks.forEach(t=>{t.c(e)||(Dt.tasks.delete(t),t.f())}),Dt.tasks.size!==0&&Dt.tick(Zs)}function Nc(e){let t;return Dt.tasks.size===0&&Dt.tick(Zs),{promise:new Promise(n=>{Dt.tasks.add(t={c:e,f:n})}),abort(){Dt.tasks.delete(t)}}}function Zn(e,t){e.dispatchEvent(new CustomEvent(t))}function Mc(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Io(e){const t={},n=e.split(";");for(const i of n){const[r,s]=i.split(":");if(!r||s===void 0)break;const o=Mc(r.trim());t[o]=s.trim()}return t}const Tc=e=>e;function qs(e,t,n,i){var r=(e&cc)!==0,s="both",o,l=t.inert,a,u;function c(){var x=Rs,y=ci;Co(null),Ao(null);try{return o??(o=n()(t,(i==null?void 0:i())??{},{direction:s}))}finally{Co(x),Ao(y)}}var f={is_global:r,in(){t.inert=l,Zn(t,"introstart"),a=gr(t,c(),u,1,()=>{Zn(t,"introend"),a==null||a.abort(),a=o=void 0})},out(x){t.inert=!0,Zn(t,"outrostart"),u=gr(t,c(),a,0,()=>{Zn(t,"outroend"),x==null||x()})},stop:()=>{a==null||a.abort(),u==null||u.abort()}},d=ci;if((d.transitions??(d.transitions=[])).push(f),wc){var g=r;if(!g){for(var v=d.parent;v&&v.f&oc;)for(;(v=v.parent)&&!(v.f&sc););g=!v||(v.f&lc)!==0}g&&ht(()=>{Fr(()=>f.in())})}}function gr(e,t,n,i,r){var s=i===1;if(ac(t)){var o,l=!1;return Ls(()=>{if(!l){var y=t({direction:s?"in":"out"});o=gr(e,y,n,i,r)}}),{abort:()=>{l=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return r(),{abort:Cn,deactivate:Cn,reset:Cn,t:()=>i};const{delay:a=0,css:u,tick:c,easing:f=Tc}=t;var d=[];if(s&&n===void 0&&(c&&c(0,1),u)){var g=Io(u(0,1));d.push(g,g)}var v=()=>1-i,x=e.animate(d,{duration:a});return x.onfinish=()=>{var y=(n==null?void 0:n.t())??1-i;n==null||n.abort();var b=i-y,m=t.duration*Math.abs(b),S=[];if(m>0){if(u)for(var _=Math.ceil(m/16.666666666666668),E=0;E<=_;E+=1){var C=y+b*f(E/_),M=u(C,1-C);S.push(Io(M))}v=()=>{var O=x.currentTime;return y+b*f(O/m)},c&&Nc(()=>{if(x.playState!=="running")return!1;var O=v();return c(O,1-O),!0})}x=e.animate(S,{duration:m,fill:"forwards"}),x.onfinish=()=>{v=()=>i,c==null||c(i,1-i),r()}},{abort:()=>{x&&(x.cancel(),x.effect=null,x.onfinish=Cn)},deactivate:()=>{r=Cn},reset:()=>{i===0&&(c==null||c(1,0))},t:()=>v()}}function Gs(e,t,n=t){var i=uc();bc(e,"input",()=>{var r=ji(e)?$i(e.value):e.value;n(r),i&&r!==(r=t())&&(e.value=r??"")}),Fs(()=>{var r=t();if(tt&&e.defaultValue!==e.value){n(ji(e)?$i(e.value):e.value);return}ji(e)&&r===$i(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function ji(e){var t=e.type;return t==="number"||t==="range"}function $i(e){return e===""?null:+e}var zt,hn,Yn,Pi,js;const Ii=class Ii{constructor(t){En(this,Pi);En(this,zt,new WeakMap);En(this,hn);En(this,Yn);Zi(this,Yn,t)}observe(t,n){var i=Et(this,zt).get(t)||new Set;return i.add(n),Et(this,zt).set(t,i),bo(this,Pi,js).call(this).observe(t,Et(this,Yn)),()=>{var r=Et(this,zt).get(t);r.delete(n),r.size===0&&(Et(this,zt).delete(t),Et(this,hn).unobserve(t))}}};zt=new WeakMap,hn=new WeakMap,Yn=new WeakMap,Pi=new WeakSet,js=function(){return Et(this,hn)??Zi(this,hn,new ResizeObserver(t=>{for(var n of t){Ii.entries.set(n.target,n);for(var i of Et(this,zt).get(n.target)||[])i(n)}}))},wo(Ii,"entries",new WeakMap);let pr=Ii;var Pc=new pr({box:"border-box"});function Oo(e,t,n){var i=Pc.observe(e,()=>n(e[t]));ht(()=>(Fr(()=>n(e[t])),i))}function we(e,t){var s;var n=(s=e.$$events)==null?void 0:s[t.type],i=Is(n)?n.slice():n==null?[]:[n];for(var r of i)r.call(this,t)}const $s=kc;function Ic(e){const t=e-1;return t*t*t+1}function zo(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Js(e,{delay:t=0,duration:n=400,easing:i=Ic,x:r=0,y:s=0,opacity:o=0}={}){const l=getComputedStyle(e),a=+l.opacity,u=l.transform==="none"?"":l.transform,c=a*(1-o),[f,d]=zo(r),[g,v]=zo(s);return{delay:t,duration:n,easing:i,css:(x,y)=>`
			transform: ${u} translate(${(1-x)*f}${d}, ${(1-x)*g}${v});
			opacity: ${a-c*y}`}}function Qe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Qe(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Oc={value:()=>{}};function zi(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ri(n)}function ri(e){this._=e}function zc(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ri.prototype=zi.prototype={constructor:ri,on:function(e,t){var n=this._,i=zc(e+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(e=i[s]).type)&&(r=Dc(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=i[s]).type)n[r]=Do(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Do(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ri(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function Dc(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Do(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Oc,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var mr="http://www.w3.org/1999/xhtml";const Lo={svg:"http://www.w3.org/2000/svg",xhtml:mr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Di(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Lo.hasOwnProperty(t)?{space:Lo[t],local:e}:e}function Lc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===mr&&t.documentElement.namespaceURI===mr?t.createElement(e):t.createElementNS(n,e)}}function Hc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Qs(e){var t=Di(e);return(t.local?Hc:Lc)(t)}function Rc(){}function Vr(e){return e==null?Rc:function(){return this.querySelector(e)}}function Fc(e){typeof e!="function"&&(e=Vr(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,l=i[r]=new Array(o),a,u,c=0;c<o;++c)(a=s[c])&&(u=e.call(a,a.__data__,c,s))&&("__data__"in a&&(u.__data__=a.__data__),l[c]=u);return new lt(i,this._parents)}function Yc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Bc(){return[]}function el(e){return e==null?Bc:function(){return this.querySelectorAll(e)}}function Vc(e){return function(){return Yc(e.apply(this,arguments))}}function Xc(e){typeof e=="function"?e=Vc(e):e=el(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o=t[s],l=o.length,a,u=0;u<l;++u)(a=o[u])&&(i.push(e.call(a,a.__data__,u,o)),r.push(a));return new lt(i,r)}function tl(e){return function(){return this.matches(e)}}function nl(e){return function(t){return t.matches(e)}}var Wc=Array.prototype.find;function Kc(e){return function(){return Wc.call(this.children,e)}}function Uc(){return this.firstElementChild}function Zc(e){return this.select(e==null?Uc:Kc(typeof e=="function"?e:nl(e)))}var qc=Array.prototype.filter;function Gc(){return Array.from(this.children)}function jc(e){return function(){return qc.call(this.children,e)}}function $c(e){return this.selectAll(e==null?Gc:jc(typeof e=="function"?e:nl(e)))}function Jc(e){typeof e!="function"&&(e=tl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,l=i[r]=[],a,u=0;u<o;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&l.push(a);return new lt(i,this._parents)}function il(e){return new Array(e.length)}function Qc(){return new lt(this._enter||this._groups.map(il),this._parents)}function fi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fi.prototype={constructor:fi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function eu(e){return function(){return e}}function tu(e,t,n,i,r,s){for(var o=0,l,a=t.length,u=s.length;o<u;++o)(l=t[o])?(l.__data__=s[o],i[o]=l):n[o]=new fi(e,s[o]);for(;o<a;++o)(l=t[o])&&(r[o]=l)}function nu(e,t,n,i,r,s,o){var l,a,u=new Map,c=t.length,f=s.length,d=new Array(c),g;for(l=0;l<c;++l)(a=t[l])&&(d[l]=g=o.call(a,a.__data__,l,t)+"",u.has(g)?r[l]=a:u.set(g,a));for(l=0;l<f;++l)g=o.call(e,s[l],l,s)+"",(a=u.get(g))?(i[l]=a,a.__data__=s[l],u.delete(g)):n[l]=new fi(e,s[l]);for(l=0;l<c;++l)(a=t[l])&&u.get(d[l])===a&&(r[l]=a)}function iu(e){return e.__data__}function ru(e,t){if(!arguments.length)return Array.from(this,iu);var n=t?nu:tu,i=this._parents,r=this._groups;typeof e!="function"&&(e=eu(e));for(var s=r.length,o=new Array(s),l=new Array(s),a=new Array(s),u=0;u<s;++u){var c=i[u],f=r[u],d=f.length,g=ou(e.call(c,c&&c.__data__,u,i)),v=g.length,x=l[u]=new Array(v),y=o[u]=new Array(v),b=a[u]=new Array(d);n(c,f,x,y,b,g,t);for(var m=0,S=0,_,E;m<v;++m)if(_=x[m]){for(m>=S&&(S=m+1);!(E=y[S])&&++S<v;);_._next=E||null}}return o=new lt(o,i),o._enter=l,o._exit=a,o}function ou(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function su(){return new lt(this._exit||this._groups.map(il),this._parents)}function lu(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function au(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,o=Math.min(r,s),l=new Array(r),a=0;a<o;++a)for(var u=n[a],c=i[a],f=u.length,d=l[a]=new Array(f),g,v=0;v<f;++v)(g=u[v]||c[v])&&(d[v]=g);for(;a<r;++a)l[a]=n[a];return new lt(l,this._parents)}function cu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function uu(e){e||(e=du);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],l=o.length,a=r[s]=new Array(l),u,c=0;c<l;++c)(u=o[c])&&(a[c]=u);a.sort(t)}return new lt(r,this._parents).order()}function du(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function fu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function hu(){return Array.from(this)}function gu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function pu(){let e=0;for(const t of this)++e;return e}function mu(){return!this.node()}function yu(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,o=r.length,l;s<o;++s)(l=r[s])&&e.call(l,l.__data__,s,r);return this}function vu(e){return function(){this.removeAttribute(e)}}function xu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wu(e,t){return function(){this.setAttribute(e,t)}}function bu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _u(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ku(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Eu(e,t){var n=Di(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?xu:vu:typeof t=="function"?n.local?ku:_u:n.local?bu:wu)(n,t))}function rl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Su(e){return function(){this.style.removeProperty(e)}}function Cu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Au(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Nu(e,t,n){return arguments.length>1?this.each((t==null?Su:typeof t=="function"?Au:Cu)(e,t,n??"")):pn(this.node(),e)}function pn(e,t){return e.style.getPropertyValue(t)||rl(e).getComputedStyle(e,null).getPropertyValue(t)}function Mu(e){return function(){delete this[e]}}function Tu(e,t){return function(){this[e]=t}}function Pu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Iu(e,t){return arguments.length>1?this.each((t==null?Mu:typeof t=="function"?Pu:Tu)(e,t)):this.node()[e]}function ol(e){return e.trim().split(/^|\s+/)}function Xr(e){return e.classList||new sl(e)}function sl(e){this._node=e,this._names=ol(e.getAttribute("class")||"")}sl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ll(e,t){for(var n=Xr(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function al(e,t){for(var n=Xr(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Ou(e){return function(){ll(this,e)}}function zu(e){return function(){al(this,e)}}function Du(e,t){return function(){(t.apply(this,arguments)?ll:al)(this,e)}}function Lu(e,t){var n=ol(e+"");if(arguments.length<2){for(var i=Xr(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Du:t?Ou:zu)(n,t))}function Hu(){this.textContent=""}function Ru(e){return function(){this.textContent=e}}function Fu(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Yu(e){return arguments.length?this.each(e==null?Hu:(typeof e=="function"?Fu:Ru)(e)):this.node().textContent}function Bu(){this.innerHTML=""}function Vu(e){return function(){this.innerHTML=e}}function Xu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Wu(e){return arguments.length?this.each(e==null?Bu:(typeof e=="function"?Xu:Vu)(e)):this.node().innerHTML}function Ku(){this.nextSibling&&this.parentNode.appendChild(this)}function Uu(){return this.each(Ku)}function Zu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qu(){return this.each(Zu)}function Gu(e){var t=typeof e=="function"?e:Qs(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ju(){return null}function $u(e,t){var n=typeof e=="function"?e:Qs(e),i=t==null?ju:typeof t=="function"?t:Vr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Ju(){var e=this.parentNode;e&&e.removeChild(this)}function Qu(){return this.each(Ju)}function ed(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function td(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function nd(e){return this.select(e?td:ed)}function id(e){return arguments.length?this.property("__data__",e):this.node().__data__}function rd(e){return function(t){e.call(this,t,this.__data__)}}function od(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function sd(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function ld(e,t,n){return function(){var i=this.__on,r,s=rd(t);if(i){for(var o=0,l=i.length;o<l;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function ad(e,t,n){var i=od(e+""),r,s=i.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,u=l.length,c;a<u;++a)for(r=0,c=l[a];r<s;++r)if((o=i[r]).type===c.type&&o.name===c.name)return c.value}return}for(l=t?ld:sd,r=0;r<s;++r)this.each(l(i[r],t,n));return this}function cl(e,t,n){var i=rl(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function cd(e,t){return function(){return cl(this,e,t)}}function ud(e,t){return function(){return cl(this,e,t.apply(this,arguments))}}function dd(e,t){return this.each((typeof t=="function"?ud:cd)(e,t))}function*fd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var ul=[null];function lt(e,t){this._groups=e,this._parents=t}function Bn(){return new lt([[document.documentElement]],ul)}function hd(){return this}lt.prototype=Bn.prototype={constructor:lt,select:Fc,selectAll:Xc,selectChild:Zc,selectChildren:$c,filter:Jc,data:ru,enter:Qc,exit:su,join:lu,merge:au,selection:hd,order:cu,sort:uu,call:fu,nodes:hu,node:gu,size:pu,empty:mu,each:yu,attr:Eu,style:Nu,property:Iu,classed:Lu,text:Yu,html:Wu,raise:Uu,lower:qu,append:Gu,insert:$u,remove:Qu,clone:nd,datum:id,on:ad,dispatch:dd,[Symbol.iterator]:fd};function ut(e){return typeof e=="string"?new lt([[document.querySelector(e)]],[document.documentElement]):new lt([[e]],ul)}function gd(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ft(e,t){if(e=gd(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const pd={passive:!1},In={capture:!0,passive:!1};function Ji(e){e.stopImmediatePropagation()}function un(e){e.preventDefault(),e.stopImmediatePropagation()}function dl(e){var t=e.document.documentElement,n=ut(e).on("dragstart.drag",un,In);"onselectstart"in t?n.on("selectstart.drag",un,In):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function fl(e,t){var n=e.document.documentElement,i=ut(e).on("dragstart.drag",null);t&&(i.on("click.drag",un,In),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const qn=e=>()=>e;function yr(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:s,x:o,y:l,dx:a,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}yr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function md(e){return!e.ctrlKey&&!e.button}function yd(){return this.parentNode}function vd(e,t){return t??{x:e.x,y:e.y}}function xd(){return navigator.maxTouchPoints||"ontouchstart"in this}function wd(){var e=md,t=yd,n=vd,i=xd,r={},s=zi("start","drag","end"),o=0,l,a,u,c,f=0;function d(_){_.on("mousedown.drag",g).filter(i).on("touchstart.drag",y).on("touchmove.drag",b,pd).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(_,E){if(!(c||!e.call(this,_,E))){var C=S(this,t.call(this,_,E),_,E,"mouse");C&&(ut(_.view).on("mousemove.drag",v,In).on("mouseup.drag",x,In),dl(_.view),Ji(_),u=!1,l=_.clientX,a=_.clientY,C("start",_))}}function v(_){if(un(_),!u){var E=_.clientX-l,C=_.clientY-a;u=E*E+C*C>f}r.mouse("drag",_)}function x(_){ut(_.view).on("mousemove.drag mouseup.drag",null),fl(_.view,u),un(_),r.mouse("end",_)}function y(_,E){if(e.call(this,_,E)){var C=_.changedTouches,M=t.call(this,_,E),O=C.length,H,N;for(H=0;H<O;++H)(N=S(this,M,_,E,C[H].identifier,C[H]))&&(Ji(_),N("start",_,C[H]))}}function b(_){var E=_.changedTouches,C=E.length,M,O;for(M=0;M<C;++M)(O=r[E[M].identifier])&&(un(_),O("drag",_,E[M]))}function m(_){var E=_.changedTouches,C=E.length,M,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),M=0;M<C;++M)(O=r[E[M].identifier])&&(Ji(_),O("end",_,E[M]))}function S(_,E,C,M,O,H){var N=s.copy(),I=ft(H||C,E),T,P,w;if((w=n.call(_,new yr("beforestart",{sourceEvent:C,target:d,identifier:O,active:o,x:I[0],y:I[1],dx:0,dy:0,dispatch:N}),M))!=null)return T=w.x-I[0]||0,P=w.y-I[1]||0,function D(k,A,z){var L=I,B;switch(k){case"start":r[O]=D,B=o++;break;case"end":delete r[O],--o;case"drag":I=ft(z||A,E),B=o;break}N.call(k,_,new yr(k,{sourceEvent:A,subject:w,target:d,identifier:O,active:B,x:I[0]+T,y:I[1]+P,dx:I[0]-L[0],dy:I[1]-L[1],dispatch:N}),M)}}return d.filter=function(_){return arguments.length?(e=typeof _=="function"?_:qn(!!_),d):e},d.container=function(_){return arguments.length?(t=typeof _=="function"?_:qn(_),d):t},d.subject=function(_){return arguments.length?(n=typeof _=="function"?_:qn(_),d):n},d.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:qn(!!_),d):i},d.on=function(){var _=s.on.apply(s,arguments);return _===s?d:_},d.clickDistance=function(_){return arguments.length?(f=(_=+_)*_,d):Math.sqrt(f)},d}function Wr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function hl(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Vn(){}var On=.7,hi=1/On,dn="\\s*([+-]?\\d+)\\s*",zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bd=/^#([0-9a-f]{3,8})$/,_d=new RegExp(`^rgb\\(${dn},${dn},${dn}\\)$`),kd=new RegExp(`^rgb\\(${wt},${wt},${wt}\\)$`),Ed=new RegExp(`^rgba\\(${dn},${dn},${dn},${zn}\\)$`),Sd=new RegExp(`^rgba\\(${wt},${wt},${wt},${zn}\\)$`),Cd=new RegExp(`^hsl\\(${zn},${wt},${wt}\\)$`),Ad=new RegExp(`^hsla\\(${zn},${wt},${wt},${zn}\\)$`),Ho={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wr(Vn,Dn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ro,formatHex:Ro,formatHex8:Nd,formatHsl:Md,formatRgb:Fo,toString:Fo});function Ro(){return this.rgb().formatHex()}function Nd(){return this.rgb().formatHex8()}function Md(){return gl(this).formatHsl()}function Fo(){return this.rgb().formatRgb()}function Dn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Yo(t):n===3?new nt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_d.exec(e))?new nt(t[1],t[2],t[3],1):(t=kd.exec(e))?new nt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ed.exec(e))?Gn(t[1],t[2],t[3],t[4]):(t=Sd.exec(e))?Gn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Cd.exec(e))?Xo(t[1],t[2]/100,t[3]/100,1):(t=Ad.exec(e))?Xo(t[1],t[2]/100,t[3]/100,t[4]):Ho.hasOwnProperty(e)?Yo(Ho[e]):e==="transparent"?new nt(NaN,NaN,NaN,0):null}function Yo(e){return new nt(e>>16&255,e>>8&255,e&255,1)}function Gn(e,t,n,i){return i<=0&&(e=t=n=NaN),new nt(e,t,n,i)}function Td(e){return e instanceof Vn||(e=Dn(e)),e?(e=e.rgb(),new nt(e.r,e.g,e.b,e.opacity)):new nt}function vr(e,t,n,i){return arguments.length===1?Td(e):new nt(e,t,n,i??1)}function nt(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Wr(nt,vr,hl(Vn,{brighter(e){return e=e==null?hi:Math.pow(hi,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?On:Math.pow(On,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nt(Zt(this.r),Zt(this.g),Zt(this.b),gi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bo,formatHex:Bo,formatHex8:Pd,formatRgb:Vo,toString:Vo}));function Bo(){return`#${Kt(this.r)}${Kt(this.g)}${Kt(this.b)}`}function Pd(){return`#${Kt(this.r)}${Kt(this.g)}${Kt(this.b)}${Kt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vo(){const e=gi(this.opacity);return`${e===1?"rgb(":"rgba("}${Zt(this.r)}, ${Zt(this.g)}, ${Zt(this.b)}${e===1?")":`, ${e})`}`}function gi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Kt(e){return e=Zt(e),(e<16?"0":"")+e.toString(16)}function Xo(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gt(e,t,n,i)}function gl(e){if(e instanceof gt)return new gt(e.h,e.s,e.l,e.opacity);if(e instanceof Vn||(e=Dn(e)),!e)return new gt;if(e instanceof gt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,l=s-r,a=(s+r)/2;return l?(t===s?o=(n-i)/l+(n<i)*6:n===s?o=(i-t)/l+2:o=(t-n)/l+4,l/=a<.5?s+r:2-s-r,o*=60):l=a>0&&a<1?0:o,new gt(o,l,a,e.opacity)}function Id(e,t,n,i){return arguments.length===1?gl(e):new gt(e,t,n,i??1)}function gt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Wr(gt,Id,hl(Vn,{brighter(e){return e=e==null?hi:Math.pow(hi,e),new gt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?On:Math.pow(On,e),new gt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new nt(Qi(e>=240?e-240:e+120,r,i),Qi(e,r,i),Qi(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new gt(Wo(this.h),jn(this.s),jn(this.l),gi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gi(this.opacity);return`${e===1?"hsl(":"hsla("}${Wo(this.h)}, ${jn(this.s)*100}%, ${jn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Wo(e){return e=(e||0)%360,e<0?e+360:e}function jn(e){return Math.max(0,Math.min(1,e||0))}function Qi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const pl=e=>()=>e;function Od(e,t){return function(n){return e+n*t}}function zd(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Dd(e){return(e=+e)==1?ml:function(t,n){return n-t?zd(t,n,e):pl(isNaN(t)?n:t)}}function ml(e,t){var n=t-e;return n?Od(e,n):pl(isNaN(e)?t:e)}const Ko=function e(t){var n=Dd(t);function i(r,s){var o=n((r=vr(r)).r,(s=vr(s)).r),l=n(r.g,s.g),a=n(r.b,s.b),u=ml(r.opacity,s.opacity);return function(c){return r.r=o(c),r.g=l(c),r.b=a(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function Ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var xr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,er=new RegExp(xr.source,"g");function Ld(e){return function(){return e}}function Hd(e){return function(t){return e(t)+""}}function Rd(e,t){var n=xr.lastIndex=er.lastIndex=0,i,r,s,o=-1,l=[],a=[];for(e=e+"",t=t+"";(i=xr.exec(e))&&(r=er.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,a.push({i:o,x:Ot(i,r)})),n=er.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?a[0]?Hd(a[0].x):Ld(t):(t=a.length,function(u){for(var c=0,f;c<t;++c)l[(f=a[c]).i]=f.x(u);return l.join("")})}var Uo=180/Math.PI,wr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yl(e,t,n,i,r,s){var o,l,a;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(a=e*n+t*i)&&(n-=e*a,i-=t*a),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,a/=l),e*i<t*n&&(e=-e,t=-t,a=-a,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Uo,skewX:Math.atan(a)*Uo,scaleX:o,scaleY:l}}var $n;function Fd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?wr:yl(t.a,t.b,t.c,t.d,t.e,t.f)}function Yd(e){return e==null||($n||($n=document.createElementNS("http://www.w3.org/2000/svg","g")),$n.setAttribute("transform",e),!(e=$n.transform.baseVal.consolidate()))?wr:(e=e.matrix,yl(e.a,e.b,e.c,e.d,e.e,e.f))}function vl(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,c,f,d,g,v){if(u!==f||c!==d){var x=g.push("translate(",null,t,null,n);v.push({i:x-4,x:Ot(u,f)},{i:x-2,x:Ot(c,d)})}else(f||d)&&g.push("translate("+f+t+d+n)}function o(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(r(f)+"rotate(",null,i)-2,x:Ot(u,c)})):c&&f.push(r(f)+"rotate("+c+i)}function l(u,c,f,d){u!==c?d.push({i:f.push(r(f)+"skewX(",null,i)-2,x:Ot(u,c)}):c&&f.push(r(f)+"skewX("+c+i)}function a(u,c,f,d,g,v){if(u!==f||c!==d){var x=g.push(r(g)+"scale(",null,",",null,")");v.push({i:x-4,x:Ot(u,f)},{i:x-2,x:Ot(c,d)})}else(f!==1||d!==1)&&g.push(r(g)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,d),o(u.rotate,c.rotate,f,d),l(u.skewX,c.skewX,f,d),a(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(g){for(var v=-1,x=d.length,y;++v<x;)f[(y=d[v]).i]=y.x(g);return f.join("")}}}var Bd=vl(Fd,"px, ","px)","deg)"),Vd=vl(Yd,", ",")",")"),Xd=1e-12;function Zo(e){return((e=Math.exp(e))+1/e)/2}function Wd(e){return((e=Math.exp(e))-1/e)/2}function Kd(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ud=function e(t,n,i){function r(s,o){var l=s[0],a=s[1],u=s[2],c=o[0],f=o[1],d=o[2],g=c-l,v=f-a,x=g*g+v*v,y,b;if(x<Xd)b=Math.log(d/u)/t,y=function(M){return[l+M*g,a+M*v,u*Math.exp(t*M*b)]};else{var m=Math.sqrt(x),S=(d*d-u*u+i*x)/(2*u*n*m),_=(d*d-u*u-i*x)/(2*d*n*m),E=Math.log(Math.sqrt(S*S+1)-S),C=Math.log(Math.sqrt(_*_+1)-_);b=(C-E)/t,y=function(M){var O=M*b,H=Zo(E),N=u/(n*m)*(H*Kd(t*O+E)-Wd(E));return[l+N*g,a+N*v,u*H/Zo(t*O+E)]}}return y.duration=b*1e3*t/Math.SQRT2,y}return r.rho=function(s){var o=Math.max(.001,+s),l=o*o,a=l*l;return e(o,l,a)},r}(Math.SQRT2,2,4);var mn=0,Mn=0,An=0,xl=1e3,pi,Tn,mi=0,Gt=0,Li=0,Ln=typeof performance=="object"&&performance.now?performance:Date,wl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Kr(){return Gt||(wl(Zd),Gt=Ln.now()+Li)}function Zd(){Gt=0}function yi(){this._call=this._time=this._next=null}yi.prototype=bl.prototype={constructor:yi,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Kr():+n)+(t==null?0:+t),!this._next&&Tn!==this&&(Tn?Tn._next=this:pi=this,Tn=this),this._call=e,this._time=n,br()},stop:function(){this._call&&(this._call=null,this._time=1/0,br())}};function bl(e,t,n){var i=new yi;return i.restart(e,t,n),i}function qd(){Kr(),++mn;for(var e=pi,t;e;)(t=Gt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mn}function qo(){Gt=(mi=Ln.now())+Li,mn=Mn=0;try{qd()}finally{mn=0,jd(),Gt=0}}function Gd(){var e=Ln.now(),t=e-mi;t>xl&&(Li-=t,mi=e)}function jd(){for(var e,t=pi,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:pi=n);Tn=e,br(i)}function br(e){if(!mn){Mn&&(Mn=clearTimeout(Mn));var t=e-Gt;t>24?(e<1/0&&(Mn=setTimeout(qo,e-Ln.now()-Li)),An&&(An=clearInterval(An))):(An||(mi=Ln.now(),An=setInterval(Gd,xl)),mn=1,wl(qo))}}function Go(e,t,n){var i=new yi;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var $d=zi("start","end","cancel","interrupt"),Jd=[],_l=0,jo=1,_r=2,oi=3,$o=4,kr=5,si=6;function Hi(e,t,n,i,r,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Qd(e,n,{name:t,index:i,group:r,on:$d,tween:Jd,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:_l})}function Ur(e,t){var n=pt(e,t);if(n.state>_l)throw new Error("too late; already scheduled");return n}function _t(e,t){var n=pt(e,t);if(n.state>oi)throw new Error("too late; already running");return n}function pt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Qd(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=bl(s,0,n.time);function s(u){n.state=jo,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,f,d,g;if(n.state!==jo)return a();for(c in i)if(g=i[c],g.name===n.name){if(g.state===oi)return Go(o);g.state===$o?(g.state=si,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[c]):+c<t&&(g.state=si,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[c])}if(Go(function(){n.state===oi&&(n.state=$o,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=_r,n.on.call("start",e,e.__data__,n.index,n.group),n.state===_r){for(n.state=oi,r=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=g);r.length=f+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=kr,1),f=-1,d=r.length;++f<d;)r[f].call(e,c);n.state===kr&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=si,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function li(e,t){var n=e.__transition,i,r,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){s=!1;continue}r=i.state>_r&&i.state<kr,i.state=si,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}s&&delete e.__transition}}function ef(e){return this.each(function(){li(this,e)})}function tf(e,t){var n,i;return function(){var r=_t(this,e),s=r.tween;if(s!==n){i=n=s;for(var o=0,l=i.length;o<l;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function nf(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=_t(this,e),o=s.tween;if(o!==i){r=(i=o).slice();for(var l={name:t,value:n},a=0,u=r.length;a<u;++a)if(r[a].name===t){r[a]=l;break}a===u&&r.push(l)}s.tween=r}}function rf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=pt(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?tf:nf)(n,e,t))}function Zr(e,t,n){var i=e._id;return e.each(function(){var r=_t(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return pt(r,i).value[t]}}function kl(e,t){var n;return(typeof t=="number"?Ot:t instanceof Dn?Ko:(n=Dn(t))?(t=n,Ko):Rd)(e,t)}function of(e){return function(){this.removeAttribute(e)}}function sf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lf(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttribute(e);return o===r?null:o===i?s:s=t(i=o,n)}}function af(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?s:s=t(i=o,n)}}function cf(e,t,n){var i,r,s;return function(){var o,l=n(this),a;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),a=l+"",o===a?null:o===i&&a===r?s:(r=a,s=t(i=o,l)))}}function uf(e,t,n){var i,r,s;return function(){var o,l=n(this),a;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),a=l+"",o===a?null:o===i&&a===r?s:(r=a,s=t(i=o,l)))}}function df(e,t){var n=Di(e),i=n==="transform"?Vd:kl;return this.attrTween(e,typeof t=="function"?(n.local?uf:cf)(n,i,Zr(this,"attr."+e,t)):t==null?(n.local?sf:of)(n):(n.local?af:lf)(n,i,t))}function ff(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function hf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gf(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&hf(e,s)),n}return r._value=t,r}function pf(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&ff(e,s)),n}return r._value=t,r}function mf(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Di(e);return this.tween(n,(i.local?gf:pf)(i,t))}function yf(e,t){return function(){Ur(this,e).delay=+t.apply(this,arguments)}}function vf(e,t){return t=+t,function(){Ur(this,e).delay=t}}function xf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yf:vf)(t,e)):pt(this.node(),t).delay}function wf(e,t){return function(){_t(this,e).duration=+t.apply(this,arguments)}}function bf(e,t){return t=+t,function(){_t(this,e).duration=t}}function _f(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wf:bf)(t,e)):pt(this.node(),t).duration}function kf(e,t){if(typeof t!="function")throw new Error;return function(){_t(this,e).ease=t}}function Ef(e){var t=this._id;return arguments.length?this.each(kf(t,e)):pt(this.node(),t).ease}function Sf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_t(this,e).ease=n}}function Cf(e){if(typeof e!="function")throw new Error;return this.each(Sf(this._id,e))}function Af(e){typeof e!="function"&&(e=tl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,l=i[r]=[],a,u=0;u<o;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&l.push(a);return new Pt(i,this._parents,this._name,this._id)}function Nf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),o=new Array(i),l=0;l<s;++l)for(var a=t[l],u=n[l],c=a.length,f=o[l]=new Array(c),d,g=0;g<c;++g)(d=a[g]||u[g])&&(f[g]=d);for(;l<i;++l)o[l]=t[l];return new Pt(o,this._parents,this._name,this._id)}function Mf(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Tf(e,t,n){var i,r,s=Mf(t)?Ur:_t;return function(){var o=s(this,e),l=o.on;l!==i&&(r=(i=l).copy()).on(t,n),o.on=r}}function Pf(e,t){var n=this._id;return arguments.length<2?pt(this.node(),n).on.on(e):this.each(Tf(n,e,t))}function If(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Of(){return this.on("end.remove",If(this._id))}function zf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Vr(e));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var l=i[o],a=l.length,u=s[o]=new Array(a),c,f,d=0;d<a;++d)(c=l[d])&&(f=e.call(c,c.__data__,d,l))&&("__data__"in c&&(f.__data__=c.__data__),u[d]=f,Hi(u[d],t,n,d,u,pt(c,n)));return new Pt(s,this._parents,t,n)}function Df(e){var t=this._name,n=this._id;typeof e!="function"&&(e=el(e));for(var i=this._groups,r=i.length,s=[],o=[],l=0;l<r;++l)for(var a=i[l],u=a.length,c,f=0;f<u;++f)if(c=a[f]){for(var d=e.call(c,c.__data__,f,a),g,v=pt(c,n),x=0,y=d.length;x<y;++x)(g=d[x])&&Hi(g,t,n,x,d,v);s.push(d),o.push(c)}return new Pt(s,o,t,n)}var Lf=Bn.prototype.constructor;function Hf(){return new Lf(this._groups,this._parents)}function Rf(e,t){var n,i,r;return function(){var s=pn(this,e),o=(this.style.removeProperty(e),pn(this,e));return s===o?null:s===n&&o===i?r:r=t(n=s,i=o)}}function El(e){return function(){this.style.removeProperty(e)}}function Ff(e,t,n){var i,r=n+"",s;return function(){var o=pn(this,e);return o===r?null:o===i?s:s=t(i=o,n)}}function Yf(e,t,n){var i,r,s;return function(){var o=pn(this,e),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(e),pn(this,e))),o===a?null:o===i&&a===r?s:(r=a,s=t(i=o,l))}}function Bf(e,t){var n,i,r,s="style."+t,o="end."+s,l;return function(){var a=_t(this,e),u=a.on,c=a.value[s]==null?l||(l=El(t)):void 0;(u!==n||r!==c)&&(i=(n=u).copy()).on(o,r=c),a.on=i}}function Vf(e,t,n){var i=(e+="")=="transform"?Bd:kl;return t==null?this.styleTween(e,Rf(e,i)).on("end.style."+e,El(e)):typeof t=="function"?this.styleTween(e,Yf(e,i,Zr(this,"style."+e,t))).each(Bf(this._id,e)):this.styleTween(e,Ff(e,i,t),n).on("end.style."+e,null)}function Xf(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Wf(e,t,n){var i,r;function s(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&Xf(e,o,n)),i}return s._value=t,s}function Kf(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Wf(e,t,n??""))}function Uf(e){return function(){this.textContent=e}}function Zf(e){return function(){var t=e(this);this.textContent=t??""}}function qf(e){return this.tween("text",typeof e=="function"?Zf(Zr(this,"text",e)):Uf(e==null?"":e+""))}function Gf(e){return function(t){this.textContent=e.call(this,t)}}function jf(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Gf(r)),t}return i._value=e,i}function $f(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,jf(e))}function Jf(){for(var e=this._name,t=this._id,n=Sl(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],l=o.length,a,u=0;u<l;++u)if(a=o[u]){var c=pt(a,t);Hi(a,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Pt(i,this._parents,e,n)}function Qf(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var l={value:o},a={value:function(){--r===0&&s()}};n.each(function(){var u=_t(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(a)),u.on=t}),r===0&&s()})}var eh=0;function Pt(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Sl(){return++eh}var St=Bn.prototype;Pt.prototype={constructor:Pt,select:zf,selectAll:Df,selectChild:St.selectChild,selectChildren:St.selectChildren,filter:Af,merge:Nf,selection:Hf,transition:Jf,call:St.call,nodes:St.nodes,node:St.node,size:St.size,empty:St.empty,each:St.each,on:Pf,attr:df,attrTween:mf,style:Vf,styleTween:Kf,text:qf,textTween:$f,remove:Of,tween:rf,delay:xf,duration:_f,ease:Ef,easeVarying:Cf,end:Qf,[Symbol.iterator]:St[Symbol.iterator]};function th(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var nh={time:null,delay:0,duration:250,ease:th};function ih(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rh(e){var t,n;e instanceof Pt?(t=e._id,e=e._name):(t=Sl(),(n=nh).time=Kr(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],l=o.length,a,u=0;u<l;++u)(a=o[u])&&Hi(a,e,t,u,o,n||ih(a,t));return new Pt(i,this._parents,e,t)}Bn.prototype.interrupt=ef;Bn.prototype.transition=rh;const Jn=e=>()=>e;function oh(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function At(e,t,n){this.k=e,this.x=t,this.y=n}At.prototype={constructor:At,scale:function(e){return e===1?this:new At(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new At(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ri=new At(1,0,0);Cl.prototype=At.prototype;function Cl(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ri;return e.__zoom}function tr(e){e.stopImmediatePropagation()}function Nn(e){e.preventDefault(),e.stopImmediatePropagation()}function sh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function lh(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Jo(){return this.__zoom||Ri}function ah(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ch(){return navigator.maxTouchPoints||"ontouchstart"in this}function uh(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Al(){var e=sh,t=lh,n=uh,i=ah,r=ch,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,a=Ud,u=zi("start","zoom","end"),c,f,d,g=500,v=150,x=0,y=10;function b(w){w.property("__zoom",Jo).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",N).filter(r).on("touchstart.zoom",I).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(w,D,k,A){var z=w.selection?w.selection():w;z.property("__zoom",Jo),w!==z?E(w,D,k,A):z.interrupt().each(function(){C(this,arguments).event(A).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},b.scaleBy=function(w,D,k,A){b.scaleTo(w,function(){var z=this.__zoom.k,L=typeof D=="function"?D.apply(this,arguments):D;return z*L},k,A)},b.scaleTo=function(w,D,k,A){b.transform(w,function(){var z=t.apply(this,arguments),L=this.__zoom,B=k==null?_(z):typeof k=="function"?k.apply(this,arguments):k,K=L.invert(B),j=typeof D=="function"?D.apply(this,arguments):D;return n(S(m(L,j),B,K),z,o)},k,A)},b.translateBy=function(w,D,k,A){b.transform(w,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),o)},null,A)},b.translateTo=function(w,D,k,A,z){b.transform(w,function(){var L=t.apply(this,arguments),B=this.__zoom,K=A==null?_(L):typeof A=="function"?A.apply(this,arguments):A;return n(Ri.translate(K[0],K[1]).scale(B.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof k=="function"?-k.apply(this,arguments):-k),L,o)},A,z)};function m(w,D){return D=Math.max(s[0],Math.min(s[1],D)),D===w.k?w:new At(D,w.x,w.y)}function S(w,D,k){var A=D[0]-k[0]*w.k,z=D[1]-k[1]*w.k;return A===w.x&&z===w.y?w:new At(w.k,A,z)}function _(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function E(w,D,k,A){w.on("start.zoom",function(){C(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(A).end()}).tween("zoom",function(){var z=this,L=arguments,B=C(z,L).event(A),K=t.apply(z,L),j=k==null?_(K):typeof k=="function"?k.apply(z,L):k,te=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),W=z.__zoom,$=typeof D=="function"?D.apply(z,L):D,re=a(W.invert(j).concat(te/W.k),$.invert(j).concat(te/$.k));return function(me){if(me===1)me=$;else{var ye=re(me),Z=te/ye[2];me=new At(Z,j[0]-ye[0]*Z,j[1]-ye[1]*Z)}B.zoom(null,me)}})}function C(w,D,k){return!k&&w.__zooming||new M(w,D)}function M(w,D){this.that=w,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,D),this.taps=0}M.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,D){return this.mouse&&w!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var D=ut(this.that).datum();u.call(w,this.that,new oh(w,{sourceEvent:this.sourceEvent,target:b,type:w,transform:this.that.__zoom,dispatch:u}),D)}};function O(w,...D){if(!e.apply(this,arguments))return;var k=C(this,D).event(w),A=this.__zoom,z=Math.max(s[0],Math.min(s[1],A.k*Math.pow(2,i.apply(this,arguments)))),L=ft(w);if(k.wheel)(k.mouse[0][0]!==L[0]||k.mouse[0][1]!==L[1])&&(k.mouse[1]=A.invert(k.mouse[0]=L)),clearTimeout(k.wheel);else{if(A.k===z)return;k.mouse=[L,A.invert(L)],li(this),k.start()}Nn(w),k.wheel=setTimeout(B,v),k.zoom("mouse",n(S(m(A,z),k.mouse[0],k.mouse[1]),k.extent,o));function B(){k.wheel=null,k.end()}}function H(w,...D){if(d||!e.apply(this,arguments))return;var k=w.currentTarget,A=C(this,D,!0).event(w),z=ut(w.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",te,!0),L=ft(w,k),B=w.clientX,K=w.clientY;dl(w.view),tr(w),A.mouse=[L,this.__zoom.invert(L)],li(this),A.start();function j(W){if(Nn(W),!A.moved){var $=W.clientX-B,re=W.clientY-K;A.moved=$*$+re*re>x}A.event(W).zoom("mouse",n(S(A.that.__zoom,A.mouse[0]=ft(W,k),A.mouse[1]),A.extent,o))}function te(W){z.on("mousemove.zoom mouseup.zoom",null),fl(W.view,A.moved),Nn(W),A.event(W).end()}}function N(w,...D){if(e.apply(this,arguments)){var k=this.__zoom,A=ft(w.changedTouches?w.changedTouches[0]:w,this),z=k.invert(A),L=k.k*(w.shiftKey?.5:2),B=n(S(m(k,L),A,z),t.apply(this,D),o);Nn(w),l>0?ut(this).transition().duration(l).call(E,B,A,w):ut(this).call(b.transform,B,A,w)}}function I(w,...D){if(e.apply(this,arguments)){var k=w.touches,A=k.length,z=C(this,D,w.changedTouches.length===A).event(w),L,B,K,j;for(tr(w),B=0;B<A;++B)K=k[B],j=ft(K,this),j=[j,this.__zoom.invert(j),K.identifier],z.touch0?!z.touch1&&z.touch0[2]!==j[2]&&(z.touch1=j,z.taps=0):(z.touch0=j,L=!0,z.taps=1+!!c);c&&(c=clearTimeout(c)),L&&(z.taps<2&&(f=j[0],c=setTimeout(function(){c=null},g)),li(this),z.start())}}function T(w,...D){if(this.__zooming){var k=C(this,D).event(w),A=w.changedTouches,z=A.length,L,B,K,j;for(Nn(w),L=0;L<z;++L)B=A[L],K=ft(B,this),k.touch0&&k.touch0[2]===B.identifier?k.touch0[0]=K:k.touch1&&k.touch1[2]===B.identifier&&(k.touch1[0]=K);if(B=k.that.__zoom,k.touch1){var te=k.touch0[0],W=k.touch0[1],$=k.touch1[0],re=k.touch1[1],me=(me=$[0]-te[0])*me+(me=$[1]-te[1])*me,ye=(ye=re[0]-W[0])*ye+(ye=re[1]-W[1])*ye;B=m(B,Math.sqrt(me/ye)),K=[(te[0]+$[0])/2,(te[1]+$[1])/2],j=[(W[0]+re[0])/2,(W[1]+re[1])/2]}else if(k.touch0)K=k.touch0[0],j=k.touch0[1];else return;k.zoom("touch",n(S(B,K,j),k.extent,o))}}function P(w,...D){if(this.__zooming){var k=C(this,D).event(w),A=w.changedTouches,z=A.length,L,B;for(tr(w),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),L=0;L<z;++L)B=A[L],k.touch0&&k.touch0[2]===B.identifier?delete k.touch0:k.touch1&&k.touch1[2]===B.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(B=ft(B,this),Math.hypot(f[0]-B[0],f[1]-B[1])<y)){var K=ut(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return b.wheelDelta=function(w){return arguments.length?(i=typeof w=="function"?w:Jn(+w),b):i},b.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Jn(!!w),b):e},b.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Jn(!!w),b):r},b.extent=function(w){return arguments.length?(t=typeof w=="function"?w:Jn([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),b):t},b.scaleExtent=function(w){return arguments.length?(s[0]=+w[0],s[1]=+w[1],b):[s[0],s[1]]},b.translateExtent=function(w){return arguments.length?(o[0][0]=+w[0][0],o[1][0]=+w[1][0],o[0][1]=+w[0][1],o[1][1]=+w[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(w){return arguments.length?(n=w,b):n},b.duration=function(w){return arguments.length?(l=+w,b):l},b.interpolate=function(w){return arguments.length?(a=w,b):a},b.on=function(){var w=u.on.apply(u,arguments);return w===u?b:w},b.clickDistance=function(w){return arguments.length?(x=(w=+w)*w,b):Math.sqrt(x)},b.tapDistance=function(w){return arguments.length?(y=+w,b):y},b}const Xn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},vi=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var jt;(function(e){e.Strict="strict",e.Loose="loose"})(jt||(jt={}));var Lt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Lt||(Lt={}));var xi;(function(e){e.Partial="partial",e.Full="full"})(xi||(xi={}));const Er={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var fn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(fn||(fn={}));var wi;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(wi||(wi={}));var le;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(le||(le={}));const Qo={[le.Left]:le.Right,[le.Right]:le.Left,[le.Top]:le.Bottom,[le.Bottom]:le.Top};function dh(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function es(e,t,n){if(!n)return;const i=[];e.forEach((r,s)=>{t!=null&&t.has(s)||i.push(r)}),i.length&&n(i)}function fh(e){return e===null?null:e?"valid":"invalid"}const hh=e=>"id"in e&&"source"in e&&"target"in e,gh=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),qr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Wn=(e,t=[0,0])=>{const{width:n,height:i}=Yt(e),r=e.origin??t,s=n*r[0],o=i*r[1];return{x:e.position.x-s,y:e.position.y-o}},ph=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,r)=>{const s=typeof r=="string";let o=!t.nodeLookup&&!s?r:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(r):qr(r)?r:t.nodeLookup.get(r.id));const l=o?bi(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Fi(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Yi(n)},Kn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const r=bi(i);n=Fi(n,r)}}),Yi(n)},Nl=(e,t,[n,i,r]=[0,0,1],s=!1,o=!1)=>{const l={...Un(t,[n,i,r]),width:t.width/r,height:t.height/r},a=[];for(const u of e.values()){const{measured:c,selectable:f=!0,hidden:d=!1}=u;if(o&&!f||d)continue;const g=c.width??u.width??u.initialWidth??null,v=c.height??u.height??u.initialHeight??null,x=Hn(l,vn(u)),y=(g??0)*(v??0),b=s&&x>0;(!u.internals.handleBounds||b||x>=y||u.dragging)&&a.push(u)}return a},Sr=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function ts(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function ns({nodes:e,width:t,height:n,panZoom:i,minZoom:r,maxZoom:s},o){if(e.size===0)return Promise.resolve(!1);const l=Kn(e),a=jr(l,t,n,(o==null?void 0:o.minZoom)??r,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await i.setViewport(a,{duration:o==null?void 0:o.duration}),Promise.resolve(!0)}function mh({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:s}){const o=n.get(e),l=o.parentId?n.get(o.parentId):void 0,{x:a,y:u}=l?l.internals.positionAbsolute:{x:0,y:0},c=o.origin??i;let f=r;if(o.extent==="parent"&&!o.expandParent)if(!l)s==null||s("005",Xn.error005());else{const g=l.measured.width,v=l.measured.height;g&&v&&(f=[[a,u],[a+g,u+v]])}else l&&xn(o.extent)&&(f=[[o.extent[0][0]+a,o.extent[0][1]+u],[o.extent[1][0]+a,o.extent[1][1]+u]]);const d=xn(f)?$t(t,f,o.measured):t;return{position:{x:d.x-a+o.measured.width*c[0],y:d.y-u+o.measured.height*c[1]},positionAbsolute:d}}async function Ml({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:r}){const s=new Set(e.map(d=>d.id)),o=[];for(const d of n){if(d.deletable===!1)continue;const g=s.has(d.id),v=!g&&d.parentId&&o.find(x=>x.id===d.parentId);(g||v)&&o.push(d)}const l=new Set(t.map(d=>d.id)),a=i.filter(d=>d.deletable!==!1),c=Sr(o,a);for(const d of a)l.has(d.id)&&!c.find(v=>v.id===d.id)&&c.push(d);if(!r)return{edges:c,nodes:o};const f=await r({nodes:o,edges:c});return typeof f=="boolean"?f?{edges:c,nodes:o}:{edges:[],nodes:[]}:f}const yn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),$t=(e={x:0,y:0},t,n)=>({x:yn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:yn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Tl(e,t,n){const{width:i,height:r}=Yt(n),{x:s,y:o}=n.internals.positionAbsolute;return $t(e,[[s,o],[s+i,o+r]],t)}const is=(e,t,n)=>e<t?yn(Math.abs(e-t),1,t)/t:e>n?-yn(Math.abs(e-n),1,t)/t:0,Pl=(e,t,n=15,i=40)=>{const r=is(e.x,i,t.width-i)*n,s=is(e.y,i,t.height-i)*n;return[r,s]},Fi=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Cr=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),Yi=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),vn=(e,t=[0,0])=>{var r,s;const{x:n,y:i}=qr(e)?e.internals.positionAbsolute:Wn(e,t);return{x:n,y:i,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0}},bi=(e,t=[0,0])=>{var r,s;const{x:n,y:i}=qr(e)?e.internals.positionAbsolute:Wn(e,t);return{x:n,y:i,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:i+(((s=e.measured)==null?void 0:s.height)??e.height??e.initialHeight??0)}},Il=(e,t)=>Yi(Fi(Cr(e),Cr(t))),Hn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},rs=e=>Nt(e.width)&&Nt(e.height)&&Nt(e.x)&&Nt(e.y),Nt=e=>!isNaN(e)&&isFinite(e),yh=(e,t)=>{},Gr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Un=({x:e,y:t},[n,i,r],s=!1,o=[1,1])=>{const l={x:(e-n)/r,y:(t-i)/r};return s?Gr(l,o):l},Ol=({x:e,y:t},[n,i,r])=>({x:e*r+n,y:t*r+i}),jr=(e,t,n,i,r,s)=>{const o=t/(e.width*(1+s)),l=n/(e.height*(1+s)),a=Math.min(o,l),u=yn(a,i,r),c=e.x+e.width/2,f=e.y+e.height/2,d=t/2-c*u,g=n/2-f*u;return{x:d,y:g,zoom:u}},_i=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function xn(e){return e!==void 0&&e!=="parent"}function Yt(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function zl(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function vh(e,t={width:0,height:0},n,i,r){const s={...e},o=i.get(n);if(o){const l=o.origin||r;s.x+=o.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function nr(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:s,y:o}=Mt(e),l=Un({x:s-((r==null?void 0:r.left)??0),y:o-((r==null?void 0:r.top)??0)},i),{x:a,y:u}=n?Gr(l,t):l;return{xSnapped:a,ySnapped:u,...l}}const $r=e=>({width:e.offsetWidth,height:e.offsetHeight}),xh=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},wh=["INPUT","SELECT","TEXTAREA"];function bh(e){var i,r;const t=((r=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:r[0])||e.target;return wh.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const Dl=e=>"clientX"in e,Mt=(e,t)=>{var s,o;const n=Dl(e),i=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,r=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},os=(e,t,n,i,r)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:r,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...$r(o)}})};function _h({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:s,targetControlX:o,targetControlY:l}){const a=e*.125+r*.375+o*.375+n*.125,u=t*.125+s*.375+l*.375+i*.125,c=Math.abs(a-e),f=Math.abs(u-t);return[a,u,c,f]}function Qn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ss({pos:e,x1:t,y1:n,x2:i,y2:r,c:s}){switch(e){case le.Left:return[t-Qn(t-i,s),n];case le.Right:return[t+Qn(i-t,s),n];case le.Top:return[t,n-Qn(n-r,s)];case le.Bottom:return[t,n+Qn(r-n,s)]}}function Ll({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:i,targetY:r,targetPosition:s=le.Top,curvature:o=.25}){const[l,a]=ss({pos:n,x1:e,y1:t,x2:i,y2:r,c:o}),[u,c]=ss({pos:s,x1:i,y1:r,x2:e,y2:t,c:o}),[f,d,g,v]=_h({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:l,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${e},${t} C${l},${a} ${u},${c} ${i},${r}`,f,d,g,v]}function Hl({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,o=Math.abs(i-t)/2,l=i<t?i+o:i-o;return[s,l,r,o]}function kh({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const s=n||t.selected||e.selected,o=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(s?o:0)}function Eh({sourceNode:e,targetNode:t,width:n,height:i,transform:r}){const s=Fi(bi(e),bi(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return Hn(o,Yi(s))>0}const Sh=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,Ch=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Ah=(e,t)=>{if(!e.source||!e.target)return t;let n;return hh(e)?n={...e}:n={...e,id:Sh(e)},Ch(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Ar({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[r,s,o,l]=Hl({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,r,s,o,l]}const ls={[le.Left]:{x:-1,y:0},[le.Right]:{x:1,y:0},[le.Top]:{x:0,y:-1},[le.Bottom]:{x:0,y:1}},Nh=({source:e,sourcePosition:t=le.Bottom,target:n})=>t===le.Left||t===le.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},as=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Mh({source:e,sourcePosition:t=le.Bottom,target:n,targetPosition:i=le.Top,center:r,offset:s}){const o=ls[t],l=ls[i],a={x:e.x+o.x*s,y:e.y+o.y*s},u={x:n.x+l.x*s,y:n.y+l.y*s},c=Nh({source:a,sourcePosition:t,target:u}),f=c.x!==0?"x":"y",d=c[f];let g=[],v,x;const y={x:0,y:0},b={x:0,y:0},[m,S,_,E]=Hl({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[f]*l[f]===-1){v=r.x??m,x=r.y??S;const M=[{x:v,y:a.y},{x:v,y:u.y}],O=[{x:a.x,y:x},{x:u.x,y:x}];o[f]===d?g=f==="x"?M:O:g=f==="x"?O:M}else{const M=[{x:a.x,y:u.y}],O=[{x:u.x,y:a.y}];if(f==="x"?g=o.x===d?O:M:g=o.y===d?M:O,t===i){const P=Math.abs(e[f]-n[f]);if(P<=s){const w=Math.min(s-1,s-P);o[f]===d?y[f]=(a[f]>e[f]?-1:1)*w:b[f]=(u[f]>n[f]?-1:1)*w}}if(t!==i){const P=f==="x"?"y":"x",w=o[f]===l[P],D=a[P]>u[P],k=a[P]<u[P];(o[f]===1&&(!w&&D||w&&k)||o[f]!==1&&(!w&&k||w&&D))&&(g=f==="x"?M:O)}const H={x:a.x+y.x,y:a.y+y.y},N={x:u.x+b.x,y:u.y+b.y},I=Math.max(Math.abs(H.x-g[0].x),Math.abs(N.x-g[0].x)),T=Math.max(Math.abs(H.y-g[0].y),Math.abs(N.y-g[0].y));I>=T?(v=(H.x+N.x)/2,x=g[0].y):(v=g[0].x,x=(H.y+N.y)/2)}return[[e,{x:a.x+y.x,y:a.y+y.y},...g,{x:u.x+b.x,y:u.y+b.y},n],v,x,_,E]}function Th(e,t,n,i){const r=Math.min(as(e,t)/2,as(t,n)/2,i),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+r*u},${o}Q ${s},${o} ${s},${o+r*c}`}const l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${s},${o+r*a}Q ${s},${o} ${s+r*l},${o}`}function ki({sourceX:e,sourceY:t,sourcePosition:n=le.Bottom,targetX:i,targetY:r,targetPosition:s=le.Top,borderRadius:o=5,centerX:l,centerY:a,offset:u=20}){const[c,f,d,g,v]=Mh({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:r},targetPosition:s,center:{x:l,y:a},offset:u});return[c.reduce((y,b,m)=>{let S="";return m>0&&m<c.length-1?S=Th(c[m-1],b,c[m+1],o):S=`${m===0?"M":"L"}${b.x} ${b.y}`,y+=S,y},""),f,d,g,v]}function cs(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Ph(e){var f;const{sourceNode:t,targetNode:n}=e;if(!cs(t)||!cs(n))return null;const i=t.internals.handleBounds||us(t.handles),r=n.internals.handleBounds||us(n.handles),s=ds((i==null?void 0:i.source)??[],e.sourceHandle),o=ds(e.connectionMode===jt.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!s||!o)return(f=e.onError)==null||f.call(e,"008",Xn.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(s==null?void 0:s.position)||le.Bottom,a=(o==null?void 0:o.position)||le.Top,u=Rn(t,s,l),c=Rn(n,o,a);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:l,targetPosition:a}}function us(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Rn(e,t,n=le.Left,i=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,s=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:l}=t??Yt(e);if(i)return{x:r+o/2,y:s+l/2};switch((t==null?void 0:t.position)??n){case le.Top:return{x:r+o/2,y:s};case le.Right:return{x:r+o,y:s+l/2};case le.Bottom:return{x:r+o/2,y:s+l};case le.Left:return{x:r,y:s+l/2}}}function ds(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Nr(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function Ih(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const s=new Set;return e.reduce((o,l)=>([l.markerStart||i,l.markerEnd||r].forEach(a=>{if(a&&typeof a=="object"){const u=Nr(a,t);s.has(u)||(o.push({id:u,color:a.color||n,...a}),s.add(u))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}function Oh(e,t,n,i,r){let s=.5;r==="start"?s=0:r==="end"&&(s=1);let o=[(e.x+e.width*s)*t.zoom+t.x,e.y*t.zoom+t.y-i],l=[-100*s,-100];switch(n){case le.Right:o=[(e.x+e.width)*t.zoom+t.x+i,(e.y+e.height*s)*t.zoom+t.y],l=[0,-100*s];break;case le.Bottom:o[1]=(e.y+e.height)*t.zoom+t.y+i,l[1]=0;break;case le.Left:o=[e.x*t.zoom+t.x-i,(e.y+e.height*s)*t.zoom+t.y],l=[-100,-100*s];break}return`translate(${o[0]}px, ${o[1]}px) translate(${l[0]}%, ${l[1]}%)`}const Jr={nodeOrigin:[0,0],nodeExtent:vi,elevateNodesOnSelect:!0,defaults:{}},zh={...Jr,checkEquality:!0};function Qr(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function Dh(e,t,n){const i=Qr(Jr,n);for(const r of e.values())if(r.parentId)eo(r,e,t,i);else{const s=Wn(r,i.nodeOrigin),o=xn(r.extent)?r.extent:i.nodeExtent,l=$t(s,o,Yt(r));r.internals.positionAbsolute=l}}function Rl(e,t,n,i){var l,a;const r=Qr(zh,i),s=new Map(t),o=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let c=s.get(u.id);if(r.checkEquality&&u===(c==null?void 0:c.internals.userNode))t.set(u.id,c);else{const f=Wn(u,r.nodeOrigin),d=xn(u.extent)?u.extent:r.nodeExtent,g=$t(f,d,Yt(u));c={...r.defaults,...u,measured:{width:(l=u.measured)==null?void 0:l.width,height:(a=u.measured)==null?void 0:a.height},internals:{positionAbsolute:g,handleBounds:u.measured?c==null?void 0:c.internals.handleBounds:void 0,z:Fl(u,o),userNode:u}},t.set(u.id,c)}u.parentId&&eo(c,t,n,i)}}function Lh(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function eo(e,t,n,i){const{elevateNodesOnSelect:r,nodeOrigin:s,nodeExtent:o}=Qr(Jr,i),l=e.parentId,a=t.get(l);if(!a){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Lh(e,n);const u=r?1e3:0,{x:c,y:f,z:d}=Hh(e,a,s,o,u),{positionAbsolute:g}=e.internals,v=c!==g.x||f!==g.y;(v||d!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:v?{x:c,y:f}:g,z:d})}function Fl(e,t){return(Nt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Hh(e,t,n,i,r){const{x:s,y:o}=t.internals.positionAbsolute,l=Yt(e),a=Wn(e,n),u=xn(e.extent)?$t(a,e.extent,l):a;let c=$t({x:s+u.x,y:o+u.y},i,l);e.extent==="parent"&&(c=Tl(c,l,t));const f=Fl(e,r),d=t.internals.z??0;return{x:c.x,y:c.y,z:d>f?d:f}}function Rh(e,t,n,i=[0,0]){var o;const r=[],s=new Map;for(const l of e){const a=t.get(l.parentId);if(!a)continue;const u=((o=s.get(l.parentId))==null?void 0:o.expandedRect)??vn(a),c=Il(u,l.rect);s.set(l.parentId,{expandedRect:c,parent:a})}return s.size>0&&s.forEach(({expandedRect:l,parent:a},u)=>{var S;const c=a.internals.positionAbsolute,f=Yt(a),d=a.origin??i,g=l.x<c.x?Math.round(Math.abs(c.x-l.x)):0,v=l.y<c.y?Math.round(Math.abs(c.y-l.y)):0,x=Math.max(f.width,Math.round(l.width)),y=Math.max(f.height,Math.round(l.height)),b=(x-f.width)*d[0],m=(y-f.height)*d[1];(g>0||v>0||b||m)&&(r.push({id:u,type:"position",position:{x:a.position.x-g+b,y:a.position.y-v+m}}),(S=n.get(u))==null||S.forEach(_=>{e.some(E=>E.id===_.id)||r.push({id:_.id,type:"position",position:{x:_.position.x+g,y:_.position.y+v}})})),(f.width<l.width||f.height<l.height||g||v)&&r.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:x+(g?d[0]*g-b:0),height:y+(v?d[1]*v-m:0)}})}),r}function Fh(e,t,n,i,r,s){const o=i==null?void 0:i.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const a=[],u=window.getComputedStyle(o),{m22:c}=new window.DOMMatrixReadOnly(u.transform),f=[];for(const d of e.values()){const g=t.get(d.id);if(g)if(g.hidden)g.internals={...g.internals,handleBounds:void 0},l=!0;else{const v=$r(d.nodeElement),x=g.measured.width!==v.width||g.measured.height!==v.height;if(!!(v.width&&v.height&&(x||!g.internals.handleBounds||d.force))){const b=d.nodeElement.getBoundingClientRect(),m=xn(g.extent)?g.extent:s;let{positionAbsolute:S}=g.internals;g.parentId&&g.extent==="parent"?S=Tl(S,v,t.get(g.parentId)):m&&(S=$t(S,m,v)),g.measured=v,g.internals={...g.internals,positionAbsolute:S,handleBounds:{source:os("source",d.nodeElement,b,c,g.id),target:os("target",d.nodeElement,b,c,g.id)}},g.parentId&&eo(g,t,n,{nodeOrigin:r}),l=!0,x&&(a.push({id:g.id,type:"dimensions",dimensions:v}),g.expandParent&&g.parentId&&f.push({id:g.id,parentId:g.parentId,rect:vn(g,r)}))}}}if(f.length>0){const d=Rh(f,t,n,r);a.push(...d)}return{changes:a,updatedInternals:l}}async function Yh({delta:e,panZoom:t,transform:n,translateExtent:i,width:r,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,s]],i),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function Yl(e,t,n){e.clear(),t.clear();for(const i of n){const{source:r,target:s,sourceHandle:o=null,targetHandle:l=null}=i,a=`${r}-source-${o}`,u=`${s}-target-${l}`,c=e.get(a)||new Map,f=e.get(u)||new Map,d={edgeId:i.id,source:r,target:s,sourceHandle:o,targetHandle:l};t.set(i.id,i),e.set(a,c.set(`${s}-${l}`,d)),e.set(u,f.set(`${r}-${o}`,d))}}function Bl(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Bl(n,t):!1}function fs(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Bh(e,t,n,i){const r=new Map;for(const[s,o]of e)if((o.selected||o.id===i)&&(!o.parentId||!Bl(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const l=e.get(s);l&&r.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return r}function ir({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var o,l,a;const r=[];for(const[u,c]of t){const f=(o=n.get(u))==null?void 0:o.internals.userNode;f&&r.push({...f,position:c.position,dragging:i})}if(!e)return[r[0],r];const s=(l=n.get(e))==null?void 0:l.internals.userNode;return[s?{...s,position:((a=t.get(e))==null?void 0:a.position)||s.position,dragging:i}:r[0],r]}function Vh({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:r}){let s={x:null,y:null},o=0,l=new Map,a=!1,u={x:0,y:0},c=null,f=!1,d=null,g=!1;function v({noDragClassName:y,handleSelector:b,domNode:m,isSelectable:S,nodeId:_,nodeClickDistance:E=0}){d=ut(m);function C({x:N,y:I},T){const{nodeLookup:P,nodeExtent:w,snapGrid:D,snapToGrid:k,nodeOrigin:A,onNodeDrag:z,onSelectionDrag:L,onError:B,updateNodePositions:K}=t();s={x:N,y:I};let j=!1,te={x:0,y:0,x2:0,y2:0};if(l.size>1&&w){const W=Kn(l);te=Cr(W)}for(const[W,$]of l){if(!P.has(W))continue;let re={x:N-$.distance.x,y:I-$.distance.y};k&&(re=Gr(re,D));let me=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];if(l.size>1&&w&&!$.extent){const{positionAbsolute:G}=$.internals,oe=G.x-te.x+w[0][0],ce=G.x+$.measured.width-te.x2+w[1][0],Ee=G.y-te.y+w[0][1],be=G.y+$.measured.height-te.y2+w[1][1];me=[[oe,Ee],[ce,be]]}const{position:ye,positionAbsolute:Z}=mh({nodeId:W,nextPosition:re,nodeLookup:P,nodeExtent:me,nodeOrigin:A,onError:B});j=j||$.position.x!==ye.x||$.position.y!==ye.y,$.position=ye,$.internals.positionAbsolute=Z}if(j&&(K(l,!0),T&&(i||z||!_&&L))){const[W,$]=ir({nodeId:_,dragItems:l,nodeLookup:P});i==null||i(T,l,W,$),z==null||z(T,W,$),_||L==null||L(T,$)}}async function M(){if(!c)return;const{transform:N,panBy:I,autoPanSpeed:T}=t(),[P,w]=Pl(u,c,T);(P!==0||w!==0)&&(s.x=(s.x??0)-P/N[2],s.y=(s.y??0)-w/N[2],await I({x:P,y:w})&&C(s,null)),o=requestAnimationFrame(M)}function O(N){var j;const{nodeLookup:I,multiSelectionActive:T,nodesDraggable:P,transform:w,snapGrid:D,snapToGrid:k,selectNodesOnDrag:A,onNodeDragStart:z,onSelectionDragStart:L,unselectNodesAndEdges:B}=t();f=!0,(!A||!S)&&!T&&_&&((j=I.get(_))!=null&&j.selected||B()),S&&A&&_&&(e==null||e(_));const K=nr(N.sourceEvent,{transform:w,snapGrid:D,snapToGrid:k,containerBounds:c});if(s=K,l=Bh(I,P,K,_),l.size>0&&(n||z||!_&&L)){const[te,W]=ir({nodeId:_,dragItems:l,nodeLookup:I});n==null||n(N.sourceEvent,l,te,W),z==null||z(N.sourceEvent,te,W),_||L==null||L(N.sourceEvent,W)}}const H=wd().clickDistance(E).on("start",N=>{const{domNode:I,nodeDragThreshold:T,transform:P,snapGrid:w,snapToGrid:D}=t();c=(I==null?void 0:I.getBoundingClientRect())||null,g=!1,T===0&&O(N),s=nr(N.sourceEvent,{transform:P,snapGrid:w,snapToGrid:D,containerBounds:c}),u=Mt(N.sourceEvent,c)}).on("drag",N=>{const{autoPanOnNodeDrag:I,transform:T,snapGrid:P,snapToGrid:w,nodeDragThreshold:D,nodeLookup:k}=t(),A=nr(N.sourceEvent,{transform:T,snapGrid:P,snapToGrid:w,containerBounds:c});if((N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1||_&&!k.has(_))&&(g=!0),!g){if(!a&&I&&f&&(a=!0,M()),!f){const z=A.xSnapped-(s.x??0),L=A.ySnapped-(s.y??0);Math.sqrt(z*z+L*L)>D&&O(N)}(s.x!==A.xSnapped||s.y!==A.ySnapped)&&l&&f&&(u=Mt(N.sourceEvent,c),C(A,N.sourceEvent))}}).on("end",N=>{if(!(!f||g)&&(a=!1,f=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:I,updateNodePositions:T,onNodeDragStop:P,onSelectionDragStop:w}=t();if(T(l,!1),r||P||!_&&w){const[D,k]=ir({nodeId:_,dragItems:l,nodeLookup:I,dragging:!1});r==null||r(N.sourceEvent,l,D,k),P==null||P(N.sourceEvent,D,k),_||w==null||w(N.sourceEvent,k)}}}).filter(N=>{const I=N.target;return!N.button&&(!y||!fs(I,`.${y}`,m))&&(!b||fs(I,b,m))});d.call(H)}function x(){d==null||d.on(".drag",null)}return{update:v,destroy:x}}function Xh(e,t,n){const i=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Hn(r,vn(s))>0&&i.push(s);return i}const Wh=250;function Kh(e,t,n,i){var l,a;let r=[],s=1/0;const o=Xh(e,n,t+Wh);for(const u of o){const c=[...((l=u.internals.handleBounds)==null?void 0:l.source)??[],...((a=u.internals.handleBounds)==null?void 0:a.target)??[]];for(const f of c){if(i.nodeId===f.nodeId&&i.type===f.type&&i.id===f.id)continue;const{x:d,y:g}=Rn(u,f,f.position,!0),v=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(g-e.y,2));v>t||(v<s?(r=[{...f,x:d,y:g}],s=v):v===s&&r.push({...f,x:d,y:g}))}}if(!r.length)return null;if(r.length>1){const u=i.type==="source"?"target":"source";return r.find(c=>c.type===u)??r[0]}return r[0]}function Vl(e,t,n,i,r,s=!1){var u,c,f;const o=i.get(e);if(!o)return null;const l=r==="strict"?(u=o.internals.handleBounds)==null?void 0:u[t]:[...((c=o.internals.handleBounds)==null?void 0:c.source)??[],...((f=o.internals.handleBounds)==null?void 0:f.target)??[]],a=(n?l==null?void 0:l.find(d=>d.id===n):l==null?void 0:l[0])??null;return a&&s?{...a,...Rn(o,a,a.position,!0)}:a}function Xl(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Uh(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Wl=()=>!0;function Zh(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:a,lib:u,autoPanOnConnect:c,flowId:f,panBy:d,cancelConnection:g,onConnectStart:v,onConnect:x,onConnectEnd:y,isValidConnection:b=Wl,onReconnectEnd:m,updateConnection:S,getTransform:_,getFromHandle:E,autoPanSpeed:C}){const M=xh(e.target);let O=0,H;const{x:N,y:I}=Mt(e),T=M==null?void 0:M.elementFromPoint(N,I),P=Xl(s,T),w=l==null?void 0:l.getBoundingClientRect();if(!w||!P)return;const D=Vl(r,P,i,a,t);if(!D)return;let k=Mt(e,w),A=!1,z=null,L=!1,B=null;function K(){if(!c||!w)return;const[Z,G]=Pl(k,w,C);d({x:Z,y:G}),O=requestAnimationFrame(K)}const j={...D,nodeId:r,type:P,position:D.position},te=a.get(r),$={inProgress:!0,isValid:null,from:Rn(te,j,le.Left,!0),fromHandle:j,fromPosition:j.position,fromNode:te,to:k,toHandle:null,toPosition:Qo[j.position],toNode:null};S($);let re=$;v==null||v(e,{nodeId:r,handleId:i,handleType:P});function me(Z){if(!E()||!j){ye(Z);return}const G=_();k=Mt(Z,w),H=Kh(Un(k,G,!1,[1,1]),n,a,j),A||(K(),A=!0);const oe=Kl(Z,{handle:H,connectionMode:t,fromNodeId:r,fromHandleId:i,fromType:o?"target":"source",isValidConnection:b,doc:M,lib:u,flowId:f,nodeLookup:a});B=oe.handleDomNode,z=oe.connection,L=Uh(!!H,oe.isValid);const ce={...re,isValid:L,to:H&&L?Ol({x:H.x,y:H.y},G):k,toHandle:oe.toHandle,toPosition:L&&oe.toHandle?oe.toHandle.position:Qo[j.position],toNode:oe.toHandle?a.get(oe.toHandle.nodeId):null};L&&H&&re.toHandle&&ce.toHandle&&re.toHandle.type===ce.toHandle.type&&re.toHandle.nodeId===ce.toHandle.nodeId&&re.toHandle.id===ce.toHandle.id&&re.to.x===ce.to.x&&re.to.y===ce.to.y||(S(ce),re=ce)}function ye(Z){(H||B)&&z&&L&&(x==null||x(z));const{inProgress:G,...oe}=re,ce={...oe,toPosition:re.toHandle?re.toPosition:null};y==null||y(Z,ce),s&&(m==null||m(Z,ce)),g(),cancelAnimationFrame(O),A=!1,L=!1,z=null,B=null,M.removeEventListener("mousemove",me),M.removeEventListener("mouseup",ye),M.removeEventListener("touchmove",me),M.removeEventListener("touchend",ye)}M.addEventListener("mousemove",me),M.addEventListener("mouseup",ye),M.addEventListener("touchmove",me),M.addEventListener("touchend",ye)}function Kl(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:s,doc:o,lib:l,flowId:a,isValidConnection:u=Wl,nodeLookup:c}){const f=s==="target",d=t?o.querySelector(`.${l}-flow__handle[data-id="${a}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:v}=Mt(e),x=o.elementFromPoint(g,v),y=x!=null&&x.classList.contains(`${l}-flow__handle`)?x:d,b={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const m=Xl(void 0,y),S=y.getAttribute("data-nodeid"),_=y.getAttribute("data-handleid"),E=y.classList.contains("connectable"),C=y.classList.contains("connectableend");if(!S||!m)return b;const M={source:f?S:i,sourceHandle:f?_:r,target:f?i:S,targetHandle:f?r:_};b.connection=M;const H=E&&C&&(n===jt.Strict?f&&m==="source"||!f&&m==="target":S!==i||_!==r);b.isValid=H&&u(M),b.toHandle=Vl(S,m,_,c,n,!1)}return b}const qh={onPointerDown:Zh,isValid:Kl};function Gh({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const r=ut(e);function s({translateExtent:l,width:a,height:u,zoomStep:c=10,pannable:f=!0,zoomable:d=!0,inversePan:g=!1}){const v=S=>{const _=n();if(S.sourceEvent.type!=="wheel"||!t)return;const E=-S.sourceEvent.deltaY*(S.sourceEvent.deltaMode===1?.05:S.sourceEvent.deltaMode?1:.002)*c,C=_[2]*Math.pow(2,E);t.scaleTo(C)};let x=[0,0];const y=S=>{(S.sourceEvent.type==="mousedown"||S.sourceEvent.type==="touchstart")&&(x=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY])},b=S=>{const _=n();if(S.sourceEvent.type!=="mousemove"&&S.sourceEvent.type!=="touchmove"||!t)return;const E=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY],C=[E[0]-x[0],E[1]-x[1]];x=E;const M=i()*Math.max(_[2],Math.log(_[2]))*(g?-1:1),O={x:_[0]-C[0]*M,y:_[1]-C[1]*M},H=[[0,0],[a,u]];t.setViewportConstrained({x:O.x,y:O.y,zoom:_[2]},H,l)},m=Al().on("start",y).on("zoom",f?b:null).on("zoom.wheel",d?v:null);r.call(m,{})}function o(){r.on("zoom",null)}return{update:s,destroy:o,pointer:ft}}const jh=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Bi=e=>({x:e.x,y:e.y,zoom:e.k}),rr=({x:e,y:t,zoom:n})=>Ri.translate(e,t).scale(n),on=(e,t)=>e.target.closest(`.${t}`),Ul=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),or=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},Zl=e=>{const t=e.ctrlKey&&_i()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function $h({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:u}){return c=>{if(on(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(c.ctrlKey&&o){const y=ft(c),b=Zl(c),m=f*Math.pow(2,b);i.scaleTo(n,m,y,c);return}const d=c.deltaMode===1?20:1;let g=r===Lt.Vertical?0:c.deltaX*d,v=r===Lt.Horizontal?0:c.deltaY*d;!_i()&&c.shiftKey&&r!==Lt.Vertical&&(g=c.deltaY*d,v=0),i.translateBy(n,-(g/f)*s,-(v/f)*s,{internal:!0});const x=Bi(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l==null||l(c,x)),e.isPanScrolling&&(a==null||a(c,x),e.panScrollTimeout=setTimeout(()=>{u==null||u(c,x),e.isPanScrolling=!1},150))}}function Jh({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,r){if(!t&&i.type==="wheel"&&!i.ctrlKey||on(i,e))return null;i.preventDefault(),n.call(this,i,r)}}function Qh({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var s,o,l;if((s=i.sourceEvent)!=null&&s.internal)return;const r=Bi(i.transform);e.mouseButton=((o=i.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((l=i.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,r))}}function eg({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return s=>{var o,l;e.usedRightMouseButton=!!(n&&Ul(t,e.mouseButton??0)),(o=s.sourceEvent)!=null&&o.sync||i([s.transform.x,s.transform.y,s.transform.k]),r&&!((l=s.sourceEvent)!=null&&l.internal)&&(r==null||r(s.sourceEvent,Bi(s.transform)))}}function tg({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:s}){return o=>{var l;if(!((l=o.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,s&&Ul(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,i(!1),r&&jh(e.prevViewport,o.transform))){const a=Bi(o.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(o.sourceEvent,a)},n?150:0)}}}function ng({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:a,lib:u}){return c=>{var v;const f=e||t,d=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(on(c,`${u}-flow__node`)||on(c,`${u}-flow__edge`)))return!0;if(!i&&!f&&!r&&!s&&!n||o||on(c,l)&&c.type==="wheel"||on(c,a)&&(c.type!=="wheel"||r&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((v=c.touches)==null?void 0:v.length)>1)return c.preventDefault(),!1;if(!f&&!r&&!d&&c.type==="wheel"||!i&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(i)&&!i.includes(c.button)&&c.type==="mousedown")return!1;const g=Array.isArray(i)&&i.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&g}}function ig({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:r,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:a,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),d=Al().clickDistance(!Nt(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(r),g=ut(e).call(d);S({x:s.x,y:s.y,zoom:yn(s.zoom,t,n)},[[0,0],[f.width,f.height]],r);const v=g.on("wheel.zoom"),x=g.on("dblclick.zoom");d.wheelDelta(Zl);function y(T,P){return g?new Promise(w=>{d==null||d.transform(or(g,P==null?void 0:P.duration,()=>w(!0)),T)}):Promise.resolve(!1)}function b({noWheelClassName:T,noPanClassName:P,onPaneContextMenu:w,userSelectionActive:D,panOnScroll:k,panOnDrag:A,panOnScrollMode:z,panOnScrollSpeed:L,preventScrolling:B,zoomOnPinch:K,zoomOnScroll:j,zoomOnDoubleClick:te,zoomActivationKeyPressed:W,lib:$,onTransformChange:re}){D&&!c.isZoomingOrPanning&&m();const ye=k&&!W&&!D?$h({zoomPanValues:c,noWheelClassName:T,d3Selection:g,d3Zoom:d,panOnScrollMode:z,panOnScrollSpeed:L,zoomOnPinch:K,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:a}):Jh({noWheelClassName:T,preventScrolling:B,d3ZoomHandler:v});if(g.on("wheel.zoom",ye,{passive:!1}),!D){const G=Qh({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:l});d.on("start",G);const oe=eg({zoomPanValues:c,panOnDrag:A,onPaneContextMenu:!!w,onPanZoom:o,onTransformChange:re});d.on("zoom",oe);const ce=tg({zoomPanValues:c,panOnDrag:A,panOnScroll:k,onPaneContextMenu:w,onPanZoomEnd:a,onDraggingChange:u});d.on("end",ce)}const Z=ng({zoomActivationKeyPressed:W,panOnDrag:A,zoomOnScroll:j,panOnScroll:k,zoomOnDoubleClick:te,zoomOnPinch:K,userSelectionActive:D,noPanClassName:P,noWheelClassName:T,lib:$});d.filter(Z),te?g.on("dblclick.zoom",x):g.on("dblclick.zoom",null)}function m(){d.on("zoom",null)}async function S(T,P,w){const D=rr(T),k=d==null?void 0:d.constrain()(D,P,w);return k&&await y(k),new Promise(A=>A(k))}async function _(T,P){const w=rr(T);return await y(w,P),new Promise(D=>D(w))}function E(T){if(g){const P=rr(T),w=g.property("__zoom");(w.k!==T.zoom||w.x!==T.x||w.y!==T.y)&&(d==null||d.transform(g,P,null,{sync:!0}))}}function C(){const T=g?Cl(g.node()):{x:0,y:0,k:1};return{x:T.x,y:T.y,zoom:T.k}}function M(T,P){return g?new Promise(w=>{d==null||d.scaleTo(or(g,P==null?void 0:P.duration,()=>w(!0)),T)}):Promise.resolve(!1)}function O(T,P){return g?new Promise(w=>{d==null||d.scaleBy(or(g,P==null?void 0:P.duration,()=>w(!0)),T)}):Promise.resolve(!1)}function H(T){d==null||d.scaleExtent(T)}function N(T){d==null||d.translateExtent(T)}function I(T){const P=!Nt(T)||T<0?0:T;d==null||d.clickDistance(P)}return{update:b,destroy:m,setViewport:_,setViewportConstrained:S,getViewport:C,scaleTo:M,scaleBy:O,setScaleExtent:H,setTranslateExtent:N,syncViewport:E,setClickDistance:I}}var hs;(function(e){e.Line="line",e.Handle="handle"})(hs||(hs={}));var rg=ge('<div role="button" tabindex="-1"><!></div>');function wn(e,t){ue(t,!1);const n=Be(),i=()=>X(j,"$connectable",n),r=()=>X(me,"$connectionRadius",n),s=()=>X($,"$domNode",n),o=()=>X(re,"$nodeLookup",n),l=()=>X(W,"$connectionMode",n),a=()=>X(G,"$lib",n),u=()=>X(He,"$autoPanOnConnect",n),c=()=>X(Ve,"$flowId",n),f=()=>X(Z,"$isValidConnectionStore",n),d=()=>X(ce,"$onedgecreate",n),g=()=>X(Ce,"$onConnectAction",n),v=()=>X(pe,"$onConnectStartAction",n),x=()=>X(et,"$onConnectEndAction",n),y=()=>X(ye,"$viewport",n),b=()=>X(Me,"$connection",n),m=()=>X(Te,"$edges",n),S=()=>X(ke,"$connectionLookup",n),_=V(),E=V(),C=V(),M=V(),O=V(),H=V(),N=V(),I=V();let T=p(t,"id",8,void 0),P=p(t,"type",8,"source"),w=p(t,"position",24,()=>le.Top),D=p(t,"style",8,void 0),k=p(t,"isValidConnection",8,void 0),A=p(t,"onconnect",8,void 0),z=p(t,"ondisconnect",8,void 0),L=p(t,"isConnectable",8,void 0),B=p(t,"class",8,void 0);const K=Pn("svelteflow__node_id"),j=Pn("svelteflow__node_connectable"),te=Le(),{connectionMode:W,domNode:$,nodeLookup:re,connectionRadius:me,viewport:ye,isValidConnection:Z,lib:G,addEdge:oe,onedgecreate:ce,panBy:Ee,cancelConnection:be,updateConnection:_e,autoPanOnConnect:He,edges:Te,connectionLookup:ke,onconnect:Ce,onconnectstart:pe,onconnectend:et,flowId:Ve,connection:Me}=te;function rt(Re){const Ae=Dl(Re);(Ae&&Re.button===0||!Ae)&&qh.onPointerDown(Re,{handleId:h(C),nodeId:K,isTarget:h(_),connectionRadius:r(),domNode:s(),nodeLookup:o(),connectionMode:l(),lib:a(),autoPanOnConnect:u(),flowId:c(),isValidConnection:k()??f(),updateConnection:_e,cancelConnection:be,panBy:Ee,onConnect:Ie=>{var at;const Xe=d()?d()(Ie):Ie;Xe&&(oe(Xe),(at=g())==null||at(Ie))},onConnectStart:(Ie,Xe)=>{var at;(at=v())==null||at(Ie,{nodeId:Xe.nodeId,handleId:Xe.handleId,handleType:Xe.handleType})},onConnectEnd:(Ie,Xe)=>{var at;(at=x())==null||at(Ie,Xe)},getTransform:()=>[y().x,y().y,y().zoom],getFromHandle:()=>b().fromHandle})}let Ue=V(null),Ze=V();q(()=>Y(P()),()=>{F(_,P()==="target")}),q(()=>(Y(L()),i()),()=>{F(E,L()!==void 0?L():i())}),q(()=>Y(T()),()=>{F(C,T()||null)}),q(()=>(Y(A()),Y(z()),m(),S(),Y(P()),Y(T())),()=>{(A()||z())&&(m(),F(Ze,S().get(`${K}-${P()}-${T()||null}`)))}),q(()=>(h(Ue),h(Ze),Y(z()),Y(A())),()=>{if(h(Ue)&&!dh(h(Ze),h(Ue))){const Re=h(Ze)??new Map;es(h(Ue),Re,z()),es(Re,h(Ue),A())}F(Ue,h(Ze)??new Map)}),q(()=>b(),()=>{F(M,!!b().fromHandle)}),q(()=>(b(),Y(P()),h(C)),()=>{var Re,Ae,Ie;F(O,((Re=b().fromHandle)==null?void 0:Re.nodeId)===K&&((Ae=b().fromHandle)==null?void 0:Ae.type)===P()&&((Ie=b().fromHandle)==null?void 0:Ie.id)===h(C))}),q(()=>(b(),Y(P()),h(C)),()=>{var Re,Ae,Ie;F(H,((Re=b().toHandle)==null?void 0:Re.nodeId)===K&&((Ae=b().toHandle)==null?void 0:Ae.type)===P()&&((Ie=b().toHandle)==null?void 0:Ie.id)===h(C))}),q(()=>(l(),b(),Y(P()),h(C)),()=>{var Re,Ae,Ie;F(N,l()===jt.Strict?((Re=b().fromHandle)==null?void 0:Re.type)!==P():K!==((Ae=b().fromHandle)==null?void 0:Ae.nodeId)||h(C)!==((Ie=b().fromHandle)==null?void 0:Ie.id))}),q(()=>(h(H),b()),()=>{F(I,h(H)&&b().isValid)}),Ke(),fe();var Pe=rg();J(Pe,"data-nodeid",K);const Bt=ne(()=>Qe(["svelte-flow__handle",`svelte-flow__handle-${w()}`,"nodrag","nopan",w(),B()]));var Qt=ae(Pe);je(Qt,t,"default",{}),se(Pe),xe(()=>{J(Pe,"data-handleid",h(C)),J(Pe,"data-handlepos",w()),J(Pe,"data-id",`${c()??""}-${K??""}-${(T()||null)??""}-${P()??""}`),Ks(Pe,h(Bt)),J(Pe,"style",D()),Oe(Pe,"valid",h(I)),Oe(Pe,"connectingto",h(H)),Oe(Pe,"connectingfrom",h(O)),Oe(Pe,"source",!h(_)),Oe(Pe,"target",h(_)),Oe(Pe,"connectablestart",h(E)),Oe(Pe,"connectableend",h(E)),Oe(Pe,"connectable",h(E)),Oe(Pe,"connectionindicator",h(E)&&(!h(M)||h(N)))}),he("mousedown",Pe,rt),he("touchstart",Pe,rt),U(e,Pe),de()}var og=ge("<!> <!>",1);function Mr(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["data","targetPosition","sourcePosition"]),ue(t,!1);let i=p(t,"data",24,()=>({label:"Node"})),r=p(t,"targetPosition",8,void 0),s=p(t,"sourcePosition",8,void 0);fe();var o=og(),l=Ne(o),a=ne(()=>r()??le.Top);wn(l,{type:"target",get position(){return h(a)}});var u=ie(l),c=ie(u),f=ne(()=>s()??le.Bottom);wn(c,{type:"source",get position(){return h(f)}}),xe(()=>{var d;return xt(u,` ${((d=i())==null?void 0:d.label)??""} `)}),U(e,o),de()}var sg=ge(" <!>",1);function lg(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["data","sourcePosition"]),ue(t,!1);let i=p(t,"data",24,()=>({label:"Node"})),r=p(t,"sourcePosition",8,void 0);fe(),an();var s=sg(),o=Ne(s),l=ie(o),a=ne(()=>r()??le.Bottom);wn(l,{type:"source",get position(){return h(a)}}),xe(()=>{var u;return xt(o,`${((u=i())==null?void 0:u.label)??""} `)}),U(e,s),de()}var ag=ge(" <!>",1);function cg(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["data","targetPosition"]),ue(t,!1);let i=p(t,"data",24,()=>({label:"Node"})),r=p(t,"targetPosition",8,void 0);fe(),an();var s=ag(),o=Ne(s),l=ie(o),a=ne(()=>r()??le.Top);wn(l,{type:"target",get position(){return h(a)}}),xe(()=>{var u;return xt(o,`${((u=i())==null?void 0:u.label)??""} `)}),U(e,s),de()}function ug(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,[])}function gs(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function ql(e,{target:t,domNode:n}){return gs(e,n,t),{async update({target:i,domNode:r}){gs(e,r,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}var dg=ge("<div><!></div>");function fg(e,t){ue(t,!1);const n=Be(),i=()=>X(r,"$domNode",n),{domNode:r}=Le();fe();var s=dg(),o=ae(s);je(o,t,"default",{}),se(s),Ge(s,(l,a)=>ql(l,a),()=>({target:".svelte-flow__edgelabel-renderer",domNode:i()})),U(e,s),de()}function Gl(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:r,unselectNodesAndEdges:s,elementsSelectable:o}=Le();return l=>{const a=R(e).get(l);if(!a){console.warn("012",Xn.error012(l));return}(a.selectable||R(o)&&typeof a.selectable>"u")&&(t.set(null),n.set(null),a.selected?a.selected&&R(i)&&s({nodes:[],edges:[a]}):r([l]))}}var hg=ge('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function gg(e,t){ue(t,!1);let n=p(t,"style",8,void 0),i=p(t,"x",8,void 0),r=p(t,"y",8,void 0);const s=Gl(),o=Pn("svelteflow__edge_id");fe(),fg(e,{children:(l,a)=>{var u=hg(),c=ae(u);je(c,t,"default",{}),se(u),xe(()=>{J(u,"style","pointer-events: all;"+n()),ze(u,"transform",`translate(-50%, -50%) translate(${i()??""}px,${r()??""}px)`)}),he("keyup",u,()=>{}),he("click",u,()=>{o&&s(o)}),U(l,u)},$$slots:{default:!0}}),de()}var pg=Ye('<path fill="none" class="svelte-flow__edge-interaction"></path>'),mg=Ye('<path fill="none"></path><!><!>',1);function Vi(e,t){ue(t,!1);let n=p(t,"id",8,void 0),i=p(t,"path",8),r=p(t,"label",8,void 0),s=p(t,"labelX",8,void 0),o=p(t,"labelY",8,void 0),l=p(t,"labelStyle",8,void 0),a=p(t,"markerStart",8,void 0),u=p(t,"markerEnd",8,void 0),c=p(t,"style",8,void 0),f=p(t,"interactionWidth",8,20),d=p(t,"class",8,void 0),g=f()===void 0?20:f();fe();var v=mg(),x=Ne(v);const y=ne(()=>Qe(["svelte-flow__edge-path",d()]));var b=ie(x);Se(b,()=>g,S=>{var _=pg();J(_,"stroke-opacity",0),J(_,"stroke-width",g),xe(()=>J(_,"d",i())),U(S,_)});var m=ie(b);Se(m,r,S=>{gg(S,{get x(){return s()},get y(){return o()},get style(){return l()},children:(_,E)=>{an();var C=ni();xe(()=>xt(C,r())),U(_,C)},$$slots:{default:!0}})}),xe(()=>{J(x,"id",n()),J(x,"d",i()),Jt(x,h(y)),J(x,"marker-start",a()),J(x,"marker-end",u()),J(x,"style",c())}),U(e,v),de()}function Tr(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ue(t,!1);const i=V(),r=V(),s=V();let o=p(t,"label",8,void 0),l=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),f=p(t,"interactionWidth",8,void 0),d=p(t,"sourceX",8),g=p(t,"sourceY",8),v=p(t,"sourcePosition",8),x=p(t,"targetX",8),y=p(t,"targetY",8),b=p(t,"targetPosition",8);q(()=>(h(i),h(r),h(s),Y(d()),Y(g()),Y(x()),Y(y()),Y(v()),Y(b())),()=>{(m=>(F(i,m[0]),F(r,m[1]),F(s,m[2])))(Ll({sourceX:d(),sourceY:g(),targetX:x(),targetY:y(),sourcePosition:v(),targetPosition:b()}))}),Ke(),fe(),Vi(e,{get path(){return h(i)},get labelX(){return h(r)},get labelY(){return h(s)},get label(){return o()},get labelStyle(){return l()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return f()},get style(){return a()}}),de()}function yg(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ue(t,!1);const i=V(),r=V(),s=V();let o=p(t,"label",8,void 0),l=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),f=p(t,"interactionWidth",8,void 0),d=p(t,"sourceX",8),g=p(t,"sourceY",8),v=p(t,"sourcePosition",8),x=p(t,"targetX",8),y=p(t,"targetY",8),b=p(t,"targetPosition",8);q(()=>(h(i),h(r),h(s),Y(d()),Y(g()),Y(x()),Y(y()),Y(v()),Y(b())),()=>{(m=>(F(i,m[0]),F(r,m[1]),F(s,m[2])))(ki({sourceX:d(),sourceY:g(),targetX:x(),targetY:y(),sourcePosition:v(),targetPosition:b()}))}),Ke(),fe(),Vi(e,{get path(){return h(i)},get labelX(){return h(r)},get labelY(){return h(s)},get label(){return o()},get labelStyle(){return l()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return f()},get style(){return a()}}),de()}function vg(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),ue(t,!1);const i=V(),r=V(),s=V();let o=p(t,"label",8,void 0),l=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),f=p(t,"interactionWidth",8,void 0),d=p(t,"sourceX",8),g=p(t,"sourceY",8),v=p(t,"targetX",8),x=p(t,"targetY",8);q(()=>(h(i),h(r),h(s),Y(d()),Y(g()),Y(v()),Y(x())),()=>{(y=>(F(i,y[0]),F(r,y[1]),F(s,y[2])))(Ar({sourceX:d(),sourceY:g(),targetX:v(),targetY:x()}))}),Ke(),fe(),Vi(e,{get path(){return h(i)},get labelX(){return h(r)},get labelY(){return h(s)},get label(){return o()},get labelStyle(){return l()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return f()},get style(){return a()}}),de()}function xg(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ue(t,!1);const i=V(),r=V(),s=V();let o=p(t,"label",8,void 0),l=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),f=p(t,"interactionWidth",8,void 0),d=p(t,"sourceX",8),g=p(t,"sourceY",8),v=p(t,"sourcePosition",8),x=p(t,"targetX",8),y=p(t,"targetY",8),b=p(t,"targetPosition",8);q(()=>(h(i),h(r),h(s),Y(d()),Y(g()),Y(x()),Y(y()),Y(v()),Y(b())),()=>{(m=>(F(i,m[0]),F(r,m[1]),F(s,m[2])))(ki({sourceX:d(),sourceY:g(),targetX:x(),targetY:y(),sourcePosition:v(),targetPosition:b(),borderRadius:0}))}),Ke(),fe(),Vi(e,{get path(){return h(i)},get labelX(){return h(r)},get labelY(){return h(s)},get label(){return o()},get labelStyle(){return l()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return f()},get style(){return a()}}),de()}function wg(e,t){const n=e.set,i=t.set,r=R(e),s=R(t);let l=r.length===0&&s.length>0?s:r;e.set(l);const a=u=>{const c=n(u);return l=c,i(l),c};e.set=t.set=a,e.update=t.update=u=>a(u(l))}function bg(e,t){const n=e.set,i=t.set;let r=R(t);e.set(r);const s=o=>{n(o),i(o),r=o};e.set=t.set=s,e.update=t.update=o=>s(o(r))}const _g=(e,t,n)=>{if(!n)return;const i=R(e),r=t.set,s=n.set;let o=n?R(n):{x:0,y:0,zoom:1};t.set(o),t.set=l=>(r(l),s(l),o=l,l),n.set=l=>(i==null||i.syncViewport(l),r(l),s(l),o=l,l),t.update=l=>{t.set(l(o))},n.update=l=>{n.set(l(o))}},kg=(e,t,n,i=[0,0],r=vi)=>{const{subscribe:s,set:o,update:l}=Q([]);let a=e,u={},c=!0;const f=x=>(Rl(x,t,n,{elevateNodesOnSelect:c,nodeOrigin:i,nodeExtent:r,defaults:u,checkEquality:!1}),a=x,o(a),a),d=x=>f(x(a)),g=x=>{u=x},v=x=>{c=x.elevateNodesOnSelect??c};return f(a),{subscribe:s,set:f,update:d,setDefaultOptions:g,setOptions:v}},Eg=(e,t,n,i)=>{const{subscribe:r,set:s,update:o}=Q([]);let l=e,a={};const u=d=>{const g=a?d.map(v=>({...a,...v})):d;Yl(t,n,g),l=g,s(l)},c=d=>u(d(l)),f=d=>{a=d};return u(l),{subscribe:r,set:u,update:c,setDefaultOptions:f}},jl={input:lg,output:cg,default:Mr,group:ug},$l={straight:vg,smoothstep:yg,default:Tr,step:xg},Sg=({nodes:e=[],edges:t=[],width:n,height:i,fitView:r,nodeOrigin:s,nodeExtent:o})=>{const l=new Map,a=new Map,u=new Map,c=new Map,f=s??[0,0],d=o??vi;Rl(e,l,a,{nodeExtent:d,nodeOrigin:f,elevateNodesOnSelect:!1,checkEquality:!1}),Yl(u,c,t);let g={x:0,y:0,zoom:1};if(r&&n&&i){const v=Kn(l,{filter:x=>!!((x.width||x.initialWidth)&&(x.height||x.initialHeight))});g=jr(v,n,i,.5,2,.1)}return{flowId:Q(null),nodes:kg(e,l,a,f,d),nodeLookup:dt(l),parentLookup:dt(a),edgeLookup:dt(c),visibleNodes:dt([]),edges:Eg(t,u,c),visibleEdges:dt([]),connectionLookup:dt(u),height:Q(500),width:Q(500),minZoom:Q(.5),maxZoom:Q(2),nodeOrigin:Q(f),nodeDragThreshold:Q(1),nodeExtent:Q(d),translateExtent:Q(vi),autoPanOnNodeDrag:Q(!0),autoPanOnConnect:Q(!0),fitViewOnInit:Q(!1),fitViewOnInitDone:Q(!1),fitViewOptions:Q(void 0),panZoom:Q(null),snapGrid:Q(null),dragging:Q(!1),selectionRect:Q(null),selectionKeyPressed:Q(!1),multiselectionKeyPressed:Q(!1),deleteKeyPressed:Q(!1),panActivationKeyPressed:Q(!1),zoomActivationKeyPressed:Q(!1),selectionRectMode:Q(null),selectionMode:Q(xi.Partial),nodeTypes:Q(jl),edgeTypes:Q($l),viewport:Q(g),connectionMode:Q(jt.Strict),domNode:Q(null),connection:dt(Er),connectionLineType:Q(fn.Bezier),connectionRadius:Q(20),isValidConnection:Q(()=>!0),nodesDraggable:Q(!0),nodesConnectable:Q(!0),elementsSelectable:Q(!0),selectNodesOnDrag:Q(!0),markers:dt([]),defaultMarkerColor:Q("#b1b1b7"),lib:dt("svelte"),onlyRenderVisibleElements:Q(!1),onerror:Q(yh),ondelete:Q(void 0),onedgecreate:Q(void 0),onconnect:Q(void 0),onconnectstart:Q(void 0),onconnectend:Q(void 0),onbeforedelete:Q(void 0),nodesInitialized:Q(!1),edgesInitialized:Q(!1),viewportInitialized:Q(!1),initialized:dt(!1)}};function Cg(e){const t=cn([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,r,s,o,l])=>r&&o&&l?n.filter(u=>{const c=i.get(u.source),f=i.get(u.target);return c&&f&&Eh({sourceNode:c,targetNode:f,width:o,height:l,transform:[s.x,s.y,s.zoom]})}):n);return cn([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,r,s])=>n.reduce((l,a)=>{const u=i.get(a.source),c=i.get(a.target);if(!u||!c)return l;const f=Ph({id:a.id,sourceNode:u,targetNode:c,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:r,onError:s});return f&&l.push({...a,zIndex:kh({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:c,elevateOnSelect:!1}),...f}),l},[]))}function Ag(e){return cn([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,r,s])=>{const o=[s.x,s.y,s.zoom];return n?Nl(t,{x:0,y:0,width:i,height:r},o,!0):Array.from(t.values())})}const to=Symbol();function Ng({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:s,nodeExtent:o}){const l=Sg({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:s,nodeExtent:o});function a(k){l.nodeTypes.set({...jl,...k})}function u(k){l.edgeTypes.set({...$l,...k})}function c(k){const A=R(l.edges);l.edges.set(Ah(k,A))}const f=(k,A=!1)=>{var L;const z=R(l.nodeLookup);for(const[B,K]of k){const j=(L=z.get(B))==null?void 0:L.internals.userNode;j&&(j.position=K.position,j.dragging=A)}l.nodes.update(B=>B)};function d(k){var K,j,te;const A=R(l.nodeLookup),z=R(l.parentLookup),{changes:L,updatedInternals:B}=Fh(k,A,R(l.parentLookup),R(l.domNode),R(l.nodeOrigin));if(B){if(Dh(A,z,{nodeOrigin:s,nodeExtent:o}),!R(l.fitViewOnInitDone)&&R(l.fitViewOnInit)){const W=R(l.fitViewOptions),$=v({...W,nodes:W==null?void 0:W.nodes});l.fitViewOnInitDone.set($)}for(const W of L){const $=(K=A.get(W.id))==null?void 0:K.internals.userNode;if($)switch(W.type){case"dimensions":{const re={...$.measured,...W.dimensions};W.setAttributes&&($.width=((j=W.dimensions)==null?void 0:j.width)??$.width,$.height=((te=W.dimensions)==null?void 0:te.height)??$.height),$.measured=re;break}case"position":$.position=W.position??$.position;break}}l.nodes.update(W=>W),R(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function g(k){const A=R(l.panZoom),z=R(l.domNode);if(!A||!z)return Promise.resolve(!1);const{width:L,height:B}=$r(z),K=ts(R(l.nodeLookup),k);return ns({nodes:K,width:L,height:B,minZoom:R(l.minZoom),maxZoom:R(l.maxZoom),panZoom:A},k)}function v(k){const A=R(l.panZoom);if(!A)return!1;const z=ts(R(l.nodeLookup),k);return ns({nodes:z,width:R(l.width),height:R(l.height),minZoom:R(l.minZoom),maxZoom:R(l.maxZoom),panZoom:A},k),z.size>0}function x(k,A){const z=R(l.panZoom);return z?z.scaleBy(k,A):Promise.resolve(!1)}function y(k){return x(1.2,k)}function b(k){return x(1/1.2,k)}function m(k){const A=R(l.panZoom);A&&(A.setScaleExtent([k,R(l.maxZoom)]),l.minZoom.set(k))}function S(k){const A=R(l.panZoom);A&&(A.setScaleExtent([R(l.minZoom),k]),l.maxZoom.set(k))}function _(k){const A=R(l.panZoom);A&&(A.setTranslateExtent(k),l.translateExtent.set(k))}function E(k){let A=!1;return k.forEach(z=>{z.selected&&(z.selected=!1,A=!0)}),A}function C(k){var A;(A=R(l.panZoom))==null||A.setClickDistance(k)}function M(k){E((k==null?void 0:k.nodes)||R(l.nodes))&&l.nodes.set(R(l.nodes)),E((k==null?void 0:k.edges)||R(l.edges))&&l.edges.set(R(l.edges))}l.deleteKeyPressed.subscribe(async k=>{var A;if(k){const z=R(l.nodes),L=R(l.edges),B=z.filter(W=>W.selected),K=L.filter(W=>W.selected),{nodes:j,edges:te}=await Ml({nodesToRemove:B,edgesToRemove:K,nodes:z,edges:L,onBeforeDelete:R(l.onbeforedelete)});(j.length||te.length)&&(l.nodes.update(W=>W.filter($=>!j.some(re=>re.id===$.id))),l.edges.update(W=>W.filter($=>!te.some(re=>re.id===$.id))),(A=R(l.ondelete))==null||A({nodes:j,edges:te}))}});function O(k){const A=R(l.multiselectionKeyPressed);l.nodes.update(z=>z.map(L=>{const B=k.includes(L.id),K=A&&L.selected||B;return L.selected=K,L})),A||l.edges.update(z=>z.map(L=>(L.selected=!1,L)))}function H(k){const A=R(l.multiselectionKeyPressed);l.edges.update(z=>z.map(L=>{const B=k.includes(L.id),K=A&&L.selected||B;return L.selected=K,L})),A||l.nodes.update(z=>z.map(L=>(L.selected=!1,L)))}function N(k){var z;const A=(z=R(l.nodes))==null?void 0:z.find(L=>L.id===k);if(!A){console.warn("012",Xn.error012(k));return}l.selectionRect.set(null),l.selectionRectMode.set(null),A.selected?A.selected&&R(l.multiselectionKeyPressed)&&M({nodes:[A],edges:[]}):O([k])}function I(k){const A=R(l.viewport);return Yh({delta:k,panZoom:R(l.panZoom),transform:[A.x,A.y,A.zoom],translateExtent:R(l.translateExtent),width:R(l.width),height:R(l.height)})}const T=Q(Er),P=k=>{T.set({...k})};function w(){T.set(Er)}function D(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),M(),w()}return{...l,visibleEdges:Cg(l),visibleNodes:Ag(l),connection:cn([T,l.viewport],([k,A])=>k.inProgress?{...k,to:Un(k.to,[A.x,A.y,A.zoom])}:{...k}),markers:cn([l.edges,l.defaultMarkerColor,l.flowId],([k,A,z])=>Ih(k,{defaultColor:A,id:z})),initialized:(()=>{let k=!1;const A=R(l.nodes).length,z=R(l.edges).length;return cn([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([L,B,K])=>k||(A===0?k=K:z===0?k=K&&L:k=K&&L&&B,k))})(),syncNodeStores:k=>wg(l.nodes,k),syncEdgeStores:k=>bg(l.edges,k),syncViewport:k=>_g(l.panZoom,l.viewport,k),setNodeTypes:a,setEdgeTypes:u,addEdge:c,updateNodePositions:f,updateNodeInternals:d,zoomIn:y,zoomOut:b,fitView:k=>g(k),setMinZoom:m,setMaxZoom:S,setTranslateExtent:_,setPaneClickDistance:C,unselectNodesAndEdges:M,addSelectedNodes:O,addSelectedEdges:H,handleNodeSelection:N,panBy:I,updateConnection:P,cancelConnection:w,reset:D}}function Le(){const e=Pn(to);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function Mg({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:s,nodeExtent:o}){const l=Ng({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:s,nodeExtent:o});return ui(to,{getStore:()=>l}),l}function Tg(e,t){const{panZoom:n,minZoom:i,maxZoom:r,initialViewport:s,viewport:o,dragging:l,translateExtent:a,paneClickDistance:u}=t,c=ig({domNode:e,minZoom:i,maxZoom:r,translateExtent:a,viewport:s,paneClickDistance:u,onDraggingChange:l.set}),f=c.getViewport();return o.set(f),n.set(c),c.update(t),{update(d){c.update(d)}}}var Pg=ge('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function Ig(e,t){ue(t,!1);const n=Be(),i=()=>X(A,"$panActivationKeyPressed",n),r=()=>X(T,"$minZoom",n),s=()=>X(P,"$maxZoom",n),o=()=>X(z,"$zoomActivationKeyPressed",n),l=()=>X(I,"$selectionRect",n),a=()=>X(D,"$translateExtent",n),u=()=>X(k,"$lib",n),c=V(),f=V(),d=V();let g=p(t,"initialViewport",8,void 0),v=p(t,"onMoveStart",8,void 0),x=p(t,"onMove",8,void 0),y=p(t,"onMoveEnd",8,void 0),b=p(t,"panOnScrollMode",8),m=p(t,"preventScrolling",8),S=p(t,"zoomOnScroll",8),_=p(t,"zoomOnDoubleClick",8),E=p(t,"zoomOnPinch",8),C=p(t,"panOnDrag",8),M=p(t,"panOnScroll",8),O=p(t,"paneClickDistance",8);const{viewport:H,panZoom:N,selectionRect:I,minZoom:T,maxZoom:P,dragging:w,translateExtent:D,lib:k,panActivationKeyPressed:A,zoomActivationKeyPressed:z,viewportInitialized:L}=Le(),B=te=>H.set({x:te[0],y:te[1],zoom:te[2]});Ft(()=>{di(L,!0)}),q(()=>Y(g()),()=>{F(c,g()||{x:0,y:0,zoom:1})}),q(()=>(i(),Y(C())),()=>{F(f,i()||C())}),q(()=>(i(),Y(M())),()=>{F(d,i()||M())}),Ke(),fe();var K=Pg(),j=ae(K);je(j,t,"default",{}),se(K),Ge(K,(te,W)=>Tg(te,W),()=>({viewport:H,minZoom:r(),maxZoom:s(),initialViewport:h(c),dragging:w,panZoom:N,onPanZoomStart:v(),onPanZoom:x(),onPanZoomEnd:y(),zoomOnScroll:S(),zoomOnDoubleClick:_(),zoomOnPinch:E(),panOnScroll:h(d),panOnDrag:h(f),panOnScrollSpeed:.5,panOnScrollMode:b()||Lt.Free,zoomActivationKeyPressed:o(),preventScrolling:typeof m()=="boolean"?m():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!l(),translateExtent:a(),lib:u(),paneClickDistance:O(),onTransformChange:B})),U(e,K),de()}function ps(e,t){return n=>{n.target===t&&(e==null||e(n))}}function ms(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}var Og=ge('<div class="svelte-flow__pane svelte-1esy7hx"><!></div>');function zg(e,t){ue(t,!1);const n=Be(),i=()=>X(P,"$panActivationKeyPressed",n),r=()=>X(I,"$selectionKeyPressed",n),s=()=>X(H,"$selectionRect",n),o=()=>X(O,"$elementsSelectable",n),l=()=>X(N,"$selectionRectMode",n),a=()=>X(E,"$edges",n),u=()=>X(_,"$nodeLookup",n),c=()=>X(C,"$viewport",n),f=()=>X(T,"$selectionMode",n),d=()=>X(M,"$dragging",n),g=V(),v=V(),x=V();let y=p(t,"panOnDrag",8,void 0),b=p(t,"selectionOnDrag",8,void 0);const m=Oi(),{nodes:S,nodeLookup:_,edges:E,viewport:C,dragging:M,elementsSelectable:O,selectionRect:H,selectionRectMode:N,selectionKeyPressed:I,selectionMode:T,panActivationKeyPressed:P,unselectNodesAndEdges:w}=Le();let D=V(),k=null,A=[],z=!1;function L(Z){if(z){z=!1;return}m("paneclick",{event:Z}),w(),N.set(null)}function B(Z){var ce,Ee;if(k=h(D).getBoundingClientRect(),!O||!h(v)||Z.button!==0||Z.target!==h(D)||!k)return;(Ee=(ce=Z.target)==null?void 0:ce.setPointerCapture)==null||Ee.call(ce,Z.pointerId);const{x:G,y:oe}=Mt(Z,k);w(),H.set({width:0,height:0,startX:G,startY:oe,x:G,y:oe})}function K(Z){if(!h(v)||!k||!s())return;z=!0;const G=Mt(Z,k),oe=s().startX??0,ce=s().startY??0,Ee={...s(),x:G.x<oe?G.x:oe,y:G.y<ce?G.y:ce,width:Math.abs(G.x-oe),height:Math.abs(G.y-ce)},be=A.map(ke=>ke.id),_e=Sr(A,a()).map(ke=>ke.id);A=Nl(u(),Ee,[c().x,c().y,c().zoom],f()===xi.Partial,!0);const He=Sr(A,a()).map(ke=>ke.id),Te=A.map(ke=>ke.id);(be.length!==Te.length||Te.some(ke=>!be.includes(ke)))&&S.update(ke=>ke.map(ms(Te))),(_e.length!==He.length||He.some(ke=>!_e.includes(ke)))&&E.update(ke=>ke.map(ms(He))),N.set("user"),H.set(Ee)}function j(Z){var G,oe;Z.button===0&&((oe=(G=Z.target)==null?void 0:G.releasePointerCapture)==null||oe.call(G,Z.pointerId),!h(v)&&l()==="user"&&Z.target===h(D)&&(L==null||L(Z)),H.set(null),A.length>0&&di(N,"nodes"),r()&&(z=!1))}const te=Z=>{var G;if(Array.isArray(h(g))&&((G=h(g))!=null&&G.includes(2))){Z.preventDefault();return}m("panecontextmenu",{event:Z})};q(()=>(i(),Y(y())),()=>{F(g,i()||y())}),q(()=>(r(),s(),Y(b()),h(g)),()=>{F(v,r()||s()||b()&&h(g)!==!0)}),q(()=>(o(),h(v),l()),()=>{F(x,o()&&(h(v)||l()==="user"))}),Ke(),fe();var W=Og(),$=No(()=>h(x)?void 0:ps(L,h(D))),re=No(()=>ps(te,h(D)));const me=ne(()=>y()===!0||Array.isArray(y())&&y().includes(0));xe(()=>Oe(W,"draggable",h(me)));var ye=ae(W);je(ye,t,"default",{}),se(W),Yr(W,Z=>F(D,Z),()=>h(D)),xe(()=>{Oe(W,"dragging",d()),Oe(W,"selection",h(v))}),he("click",W,function(...Z){var G;(G=h($))==null||G.apply(this,Z)}),he("pointerdown",W,function(...Z){var G;(G=h(x)?B:void 0)==null||G.apply(this,Z)}),he("pointermove",W,function(...Z){var G;(G=h(x)?K:void 0)==null||G.apply(this,Z)}),he("pointerup",W,function(...Z){var G;(G=h(x)?j:void 0)==null||G.apply(this,Z)}),he("contextmenu",W,function(...Z){var G;(G=h(re))==null||G.apply(this,Z)}),U(e,W),de()}var Dg=ge('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function Lg(e,t){ue(t,!1);const n=Be(),i=()=>X(r,"$viewport",n),{viewport:r}=Le();fe();var s=Dg(),o=ae(s);je(o,t,"default",{}),se(s),xe(()=>J(s,"style",`transform: translate(${i().x??""}px, ${i().y??""}px) scale(${i().zoom??""})`)),U(e,s),de()}function Jl(e,t){const{store:n,onDrag:i,onDragStart:r,onDragStop:s,onNodeMouseDown:o}=t,l=Vh({onDrag:i,onDragStart:r,onDragStop:s,onNodeMouseDown:o,getStoreItems:()=>{const u=R(n.snapGrid),c=R(n.viewport);return{nodes:R(n.nodes),nodeLookup:R(n.nodeLookup),edges:R(n.edges),nodeExtent:R(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:R(n.nodeOrigin),multiSelectionActive:R(n.multiselectionKeyPressed),domNode:R(n.domNode),transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:R(n.autoPanOnNodeDrag),nodesDraggable:R(n.nodesDraggable),selectNodesOnDrag:R(n.selectNodesOnDrag),nodeDragThreshold:R(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,c){if(c.disabled){l.destroy();return}l.update({domNode:u,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return a(e,t),{update(u){a(e,u)},destroy(){l.destroy()}}}function Hg({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:r,measuredHeight:s}){if(r===void 0&&s===void 0){const o=e??n,l=t??i;return{width:o?`width:${o}px;`:"",height:l?`height:${l}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}var Rg=ge("<div><!></div>");function Fg(e,t){ue(t,!1);const n=Be(),i=()=>X(W,"$nodeTypes",n),r=()=>X(ce,"$connectableStore",n),s=V(void 0,!0),o=V(void 0,!0),l=V(void 0,!0),a=V(void 0,!0);let u=p(t,"node",9),c=p(t,"id",9),f=p(t,"data",25,()=>({})),d=p(t,"selected",9,!1),g=p(t,"draggable",9,void 0),v=p(t,"selectable",9,void 0),x=p(t,"connectable",9,!0),y=p(t,"deletable",9,!0),b=p(t,"hidden",9,!1),m=p(t,"dragging",9,!1),S=p(t,"resizeObserver",9,null),_=p(t,"style",9,void 0),E=p(t,"type",9,"default"),C=p(t,"isParent",9,!1),M=p(t,"positionX",9),O=p(t,"positionY",9),H=p(t,"sourcePosition",9,void 0),N=p(t,"targetPosition",9,void 0),I=p(t,"zIndex",9),T=p(t,"measuredWidth",9,void 0),P=p(t,"measuredHeight",9,void 0),w=p(t,"initialWidth",9,void 0),D=p(t,"initialHeight",9,void 0),k=p(t,"width",9,void 0),A=p(t,"height",9,void 0),z=p(t,"dragHandle",9,void 0),L=p(t,"initialized",9,!1),B=p(t,"parentId",9,void 0),K=p(t,"nodeClickDistance",9,void 0),j=p(t,"class",9,"");const te=Le(),{nodeTypes:W,nodeDragThreshold:$,selectNodesOnDrag:re,handleNodeSelection:me,updateNodeInternals:ye}=te;let Z=V(void 0,!0),G=V(null,!0);const oe=Oi(),ce=Q(x());let Ee=V(void 0,!0),be=V(void 0,!0),_e=V(void 0,!0);ui("svelteflow__node_id",c()),ui("svelteflow__node_connectable",ce),Ys(()=>{var Ce;h(G)&&((Ce=S())==null||Ce.unobserve(h(G)))});function He(Ce){v()&&(!R(re)||!g()||R($)>0)&&me(c()),oe("nodeclick",{node:u().internals.userNode,event:Ce})}q(()=>Y(E()),()=>{F(s,E()||"default")}),q(()=>(i(),h(s)),()=>{F(o,!!i()[h(s)])}),q(()=>(i(),h(s),Mr),()=>{F(l,i()[h(s)]||Mr)}),q(()=>(h(o),Y(E())),()=>{h(o)||console.warn("003",Xn.error003(E()))}),q(()=>(Y(k()),Y(A()),Y(w()),Y(D()),Y(T()),Y(P())),()=>{F(a,Hg({width:k(),height:A(),initialWidth:w(),initialHeight:D(),measuredWidth:T(),measuredHeight:P()}))}),q(()=>Y(x()),()=>{ce.set(!!x())}),q(()=>(h(Ee),h(s),h(be),Y(H()),h(_e),Y(N()),Y(c()),h(Z)),()=>{(h(Ee)&&h(s)!==h(Ee)||h(be)&&H()!==h(be)||h(_e)&&N()!==h(_e))&&requestAnimationFrame(()=>ye(new Map([[c(),{id:c(),nodeElement:h(Z),force:!0}]]))),F(Ee,h(s)),F(be,H()),F(_e,N())}),q(()=>(Y(S()),h(Z),h(G),Y(L())),()=>{S()&&(h(Z)!==h(G)||!L())&&(h(G)&&S().unobserve(h(G)),h(Z)&&S().observe(h(Z)),F(G,h(Z)))}),Ke(),fe(!0);var Te=st(),ke=Ne(Te);Se(ke,()=>!b(),Ce=>{var pe=Rg();const et=ne(()=>Qe(["svelte-flow__node",`svelte-flow__node-${h(s)}`,j()]));var Ve=ae(pe);Bs(Ve,()=>h(l),(Me,rt)=>{rt(Me,{get data(){return f()},get id(){return c()},get selected(){return d()},get selectable(){return v()},get deletable(){return y()},get sourcePosition(){return H()},get targetPosition(){return N()},get zIndex(){return I()},get dragging(){return m()},get draggable(){return g()},get dragHandle(){return z()},get parentId(){return B()},get type(){return h(s)},get isConnectable(){return r()},get positionAbsoluteX(){return M()},get positionAbsoluteY(){return O()},get width(){return k()},get height(){return A()}})}),se(pe),Ge(pe,(Me,rt)=>Jl(Me,rt),()=>({nodeId:c(),isSelectable:v(),disabled:!1,handleSelector:z(),noDragClass:"nodrag",nodeClickDistance:K(),onNodeMouseDown:me,onDrag:(Me,rt,Ue,Ze)=>{oe("nodedrag",{event:Me,targetNode:Ue,nodes:Ze})},onDragStart:(Me,rt,Ue,Ze)=>{oe("nodedragstart",{event:Me,targetNode:Ue,nodes:Ze})},onDragStop:(Me,rt,Ue,Ze)=>{oe("nodedragstop",{event:Me,targetNode:Ue,nodes:Ze})},store:te})),Yr(pe,Me=>F(Z,Me),()=>h(Z)),ht(()=>he("click",pe,He)),ht(()=>he("mouseenter",pe,Me=>oe("nodemouseenter",{node:u(),event:Me}))),ht(()=>he("mouseleave",pe,Me=>oe("nodemouseleave",{node:u(),event:Me}))),ht(()=>he("mousemove",pe,Me=>oe("nodemousemove",{node:u(),event:Me}))),ht(()=>he("contextmenu",pe,Me=>oe("nodecontextmenu",{node:u(),event:Me}))),xe(()=>{J(pe,"data-id",c()),Ks(pe,h(et)),J(pe,"style",`${_()??""??""};${h(a).width??""}${h(a).height??""}`),Oe(pe,"dragging",m()),Oe(pe,"selected",d()),Oe(pe,"draggable",g()),Oe(pe,"connectable",x()),Oe(pe,"selectable",v()),Oe(pe,"nopan",g()),Oe(pe,"parent",C()),ze(pe,"z-index",I()),ze(pe,"transform",`translate(${M()??""}px, ${O()??""}px)`),ze(pe,"visibility",L()?"visible":"hidden")}),U(Ce,pe)}),U(e,Te),de()}var Yg=ge('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function Bg(e,t){ue(t,!1);const n=Be(),i=()=>X(u,"$visibleNodes",n),r=()=>X(c,"$nodesDraggable",n),s=()=>X(d,"$elementsSelectable",n),o=()=>X(f,"$nodesConnectable",n),l=()=>X(v,"$parentLookup",n);let a=p(t,"nodeClickDistance",8,0);const{visibleNodes:u,nodesDraggable:c,nodesConnectable:f,elementsSelectable:d,updateNodeInternals:g,parentLookup:v}=Le(),x=typeof ResizeObserver>"u"?null:new ResizeObserver(b=>{const m=new Map;b.forEach(S=>{const _=S.target.getAttribute("data-id");m.set(_,{id:_,nodeElement:S.target,force:!0})}),g(m)});Ys(()=>{x==null||x.disconnect()}),fe();var y=Yg();gn(y,5,i,b=>b.id,(b,m)=>{var S=ne(()=>!!h(m).selected),_=ne(()=>!!h(m).hidden),E=ne(()=>!!(h(m).draggable||r()&&typeof h(m).draggable>"u")),C=ne(()=>!!(h(m).selectable||s()&&typeof h(m).selectable>"u")),M=ne(()=>!!(h(m).connectable||o()&&typeof h(m).connectable>"u")),O=ne(()=>h(m).deletable??!0),H=ne(()=>l().has(h(m).id)),N=ne(()=>h(m).type??"default"),I=ne(()=>h(m).internals.z??0),T=ne(()=>zl(h(m)));Fg(b,{get node(){return h(m)},get id(){return h(m).id},get data(){return h(m).data},get selected(){return h(S)},get hidden(){return h(_)},get draggable(){return h(E)},get selectable(){return h(C)},get connectable(){return h(M)},get deletable(){return h(O)},get positionX(){return h(m).internals.positionAbsolute.x},get positionY(){return h(m).internals.positionAbsolute.y},get isParent(){return h(H)},get style(){return h(m).style},get class(){return h(m).class},get type(){return h(N)},get sourcePosition(){return h(m).sourcePosition},get targetPosition(){return h(m).targetPosition},get dragging(){return h(m).dragging},get zIndex(){return h(I)},get dragHandle(){return h(m).dragHandle},get initialized(){return h(T)},get width(){return h(m).width},get height(){return h(m).height},get initialWidth(){return h(m).initialWidth},get initialHeight(){return h(m).initialHeight},get measuredWidth(){return h(m).measured.width},get measuredHeight(){return h(m).measured.height},get parentId(){return h(m).parentId},resizeObserver:x,get nodeClickDistance(){return a()},$$events:{nodeclick(P){we.call(this,t,P)},nodemouseenter(P){we.call(this,t,P)},nodemousemove(P){we.call(this,t,P)},nodemouseleave(P){we.call(this,t,P)},nodedrag(P){we.call(this,t,P)},nodedragstart(P){we.call(this,t,P)},nodedragstop(P){we.call(this,t,P)},nodecontextmenu(P){we.call(this,t,P)}}})}),se(y),U(e,y),de()}var Vg=Ye('<svg><g role="img"><!></g></svg>');function Xg(e,t){ue(t,!1);const n=Be(),i=()=>X(W,"$edgeTypes",n),r=()=>X($,"$flowId",n),s=()=>X(re,"$elementsSelectable",n),o=()=>X(te,"$edgeLookup",n),l=V(void 0,!0),a=V(void 0,!0),u=V(void 0,!0),c=V(void 0,!0),f=V(void 0,!0);let d=p(t,"id",9),g=p(t,"type",9,"default"),v=p(t,"source",9,""),x=p(t,"target",9,""),y=p(t,"data",25,()=>({})),b=p(t,"style",9,void 0),m=p(t,"zIndex",9,void 0),S=p(t,"animated",9,!1),_=p(t,"selected",9,!1),E=p(t,"selectable",9,void 0),C=p(t,"deletable",9,void 0),M=p(t,"hidden",9,!1),O=p(t,"label",9,void 0),H=p(t,"labelStyle",9,void 0),N=p(t,"markerStart",9,void 0),I=p(t,"markerEnd",9,void 0),T=p(t,"sourceHandle",9,void 0),P=p(t,"targetHandle",9,void 0),w=p(t,"sourceX",9),D=p(t,"sourceY",9),k=p(t,"targetX",9),A=p(t,"targetY",9),z=p(t,"sourcePosition",9),L=p(t,"targetPosition",9),B=p(t,"ariaLabel",9,void 0),K=p(t,"interactionWidth",9,void 0),j=p(t,"class",9,"");ui("svelteflow__edge_id",d());const{edgeLookup:te,edgeTypes:W,flowId:$,elementsSelectable:re}=Le(),me=Oi(),ye=Gl();function Z(Ee){const be=o().get(d());be&&(ye(d()),me("edgeclick",{event:Ee,edge:be}))}function G(Ee,be){const _e=o().get(d());_e&&me(be,{event:Ee,edge:_e})}q(()=>Y(g()),()=>{F(l,g()||"default")}),q(()=>(i(),h(l),Tr),()=>{F(a,i()[h(l)]||Tr)}),q(()=>(Y(N()),r()),()=>{F(u,N()?`url('#${Nr(N(),r())}')`:void 0)}),q(()=>(Y(I()),r()),()=>{F(c,I()?`url('#${Nr(I(),r())}')`:void 0)}),q(()=>(Y(E()),s()),()=>{F(f,E()??s())}),Ke(),fe(!0);var oe=st(),ce=Ne(oe);Se(ce,()=>!M(),Ee=>{var be=Vg(),_e=ae(be);const He=ne(()=>Qe(["svelte-flow__edge",j()]));var Te=ae(_e),ke=ne(()=>C()??!0);Bs(Te,()=>h(a),(Ce,pe)=>{pe(Ce,{get id(){return d()},get source(){return v()},get target(){return x()},get sourceX(){return w()},get sourceY(){return D()},get targetX(){return k()},get targetY(){return A()},get sourcePosition(){return z()},get targetPosition(){return L()},get animated(){return S()},get selected(){return _()},get label(){return O()},get labelStyle(){return H()},get data(){return y()},get style(){return b()},get interactionWidth(){return K()},get selectable(){return h(f)},get deletable(){return h(ke)},get type(){return h(l)},get sourceHandleId(){return T()},get targetHandleId(){return P()},get markerStart(){return h(u)},get markerEnd(){return h(c)}})}),se(_e),se(be),xe(()=>{ze(be,"z-index",m()),Jt(_e,h(He)),J(_e,"data-id",d()),J(_e,"aria-label",B()===null?void 0:B()?B():`Edge from ${v()} to ${x()}`),Oe(_e,"animated",S()),Oe(_e,"selected",_()),Oe(_e,"selectable",h(f))}),he("click",_e,Z),he("contextmenu",_e,Ce=>{G(Ce,"edgecontextmenu")}),he("mouseenter",_e,Ce=>{G(Ce,"edgemouseenter")}),he("mouseleave",_e,Ce=>{G(Ce,"edgemouseleave")}),U(Ee,be)}),U(e,oe),de()}function Wg(e,t){ue(t,!1);let n=p(t,"onMount",8,void 0),i=p(t,"onDestroy",8,void 0);Ft(()=>{var r;return(r=n())==null||r(),i()}),fe(),de()}var Kg=Ye("<defs></defs>");function Ug(e,t){ue(t,!1);const n=Be(),i=()=>X(r,"$markers",n),{markers:r}=Le();fe();var s=Kg();gn(s,5,i,o=>o.id,(o,l)=>{jg(o,rn(()=>h(l)))}),se(s),U(e,s),de()}var Zg=Ye('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),qg=Ye('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Gg=Ye('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function jg(e,t){ue(t,!1);let n=p(t,"id",8),i=p(t,"type",8),r=p(t,"width",8,12.5),s=p(t,"height",8,12.5),o=p(t,"markerUnits",8,"strokeWidth"),l=p(t,"orient",8,"auto-start-reverse"),a=p(t,"color",8,void 0),u=p(t,"strokeWidth",8,void 0);fe();var c=Gg(),f=ae(c);Se(f,()=>i()===wi.Arrow,d=>{var g=Zg();xe(()=>{J(g,"stroke",a()),J(g,"stroke-width",u())}),U(d,g)},d=>{var g=st(),v=Ne(g);Se(v,()=>i()===wi.ArrowClosed,x=>{var y=qg();xe(()=>{J(y,"stroke",a()),J(y,"stroke-width",u()),J(y,"fill",a())}),U(x,y)},null,!0),U(d,g)}),se(c),xe(()=>{J(c,"id",n()),J(c,"markerWidth",`${r()}`),J(c,"markerHeight",`${s()}`),J(c,"markerUnits",o()),J(c,"orient",l())}),U(e,c),de()}var $g=ge('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function Jg(e,t){ue(t,!1);const n=Be(),i=()=>X(o,"$visibleEdges",n),r=()=>X(u,"$elementsSelectable",n);let s=p(t,"defaultEdgeOptions",8);const{visibleEdges:o,edgesInitialized:l,edges:{setDefaultOptions:a},elementsSelectable:u}=Le();Ft(()=>{s()&&a(s())}),fe();var c=$g(),f=ae(c),d=ae(f);Ug(d,{}),se(f);var g=ie(f,2);gn(g,1,i,x=>x.id,(x,y)=>{var b=ne(()=>h(y).selectable??r()),m=ne(()=>h(y).type||"default");Xg(x,{get id(){return h(y).id},get source(){return h(y).source},get target(){return h(y).target},get data(){return h(y).data},get style(){return h(y).style},get animated(){return h(y).animated},get selected(){return h(y).selected},get selectable(){return h(b)},get deletable(){return h(y).deletable},get hidden(){return h(y).hidden},get label(){return h(y).label},get labelStyle(){return h(y).labelStyle},get markerStart(){return h(y).markerStart},get markerEnd(){return h(y).markerEnd},get sourceHandle(){return h(y).sourceHandle},get targetHandle(){return h(y).targetHandle},get sourceX(){return h(y).sourceX},get sourceY(){return h(y).sourceY},get targetX(){return h(y).targetX},get targetY(){return h(y).targetY},get sourcePosition(){return h(y).sourcePosition},get targetPosition(){return h(y).targetPosition},get ariaLabel(){return h(y).ariaLabel},get interactionWidth(){return h(y).interactionWidth},get class(){return h(y).class},get type(){return h(m)},get zIndex(){return h(y).zIndex},$$events:{edgeclick(S){we.call(this,t,S)},edgecontextmenu(S){we.call(this,t,S)},edgemouseenter(S){we.call(this,t,S)},edgemouseleave(S){we.call(this,t,S)}}})});var v=ie(g,2);Se(v,()=>i().length>0,x=>{Wg(x,{onMount:()=>{di(l,!0)},onDestroy:()=>{di(l,!1)}})}),se(c),U(e,c),de()}var Qg=ge('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function Ql(e,t){let n=p(t,"x",8,0),i=p(t,"y",8,0),r=p(t,"width",8,0),s=p(t,"height",8,0),o=p(t,"isVisible",8,!0);var l=st(),a=Ne(l);Se(a,o,u=>{var c=Qg();xe(()=>{ze(c,"width",typeof r()=="string"?r():`${r()}px`),ze(c,"height",typeof s()=="string"?s():`${s()}px`),ze(c,"transform",`translate(${n()}px, ${i()}px)`)}),U(u,c)}),U(e,l)}function e0(e,t){ue(t,!1);const n=Be(),i=()=>X(s,"$selectionRect",n),r=()=>X(o,"$selectionRectMode",n),{selectionRect:s,selectionRectMode:o}=Le();fe();var l=ne(()=>!!(i()&&r()==="user")),a=ne(()=>{var d;return(d=i())==null?void 0:d.width}),u=ne(()=>{var d;return(d=i())==null?void 0:d.height}),c=ne(()=>{var d;return(d=i())==null?void 0:d.x}),f=ne(()=>{var d;return(d=i())==null?void 0:d.y});Ql(e,{get isVisible(){return h(l)},get width(){return h(a)},get height(){return h(u)},get x(){return h(c)},get y(){return h(f)}}),de()}var t0=ge('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function n0(e,t){ue(t,!1);const n=Be(),i=()=>X(l,"$selectionRectMode",n),r=()=>X(u,"$nodeLookup",n),s=()=>X(a,"$nodes",n),o=Le(),{selectionRectMode:l,nodes:a,nodeLookup:u}=o,c=Oi();let f=V(null);function d(y){const b=s().filter(m=>m.selected);c("selectioncontextmenu",{nodes:b,event:y})}function g(y){const b=s().filter(m=>m.selected);c("selectionclick",{nodes:b,event:y})}q(()=>(i(),r(),s()),()=>{i()==="nodes"&&(F(f,Kn(r(),{filter:y=>!!y.selected})),s())}),Ke(),fe();var v=st(),x=Ne(v);Se(x,()=>i()==="nodes"&&h(f)&&Nt(h(f).x)&&Nt(h(f).y),y=>{var b=t0(),m=ae(b);Ql(m,{width:"100%",height:"100%",x:0,y:0}),se(b),Ge(b,(S,_)=>Jl(S,_),()=>({disabled:!1,store:o,onDrag:(S,_,E,C)=>{c("nodedrag",{event:S,targetNode:null,nodes:C})},onDragStart:(S,_,E,C)=>{c("nodedragstart",{event:S,targetNode:null,nodes:C})},onDragStop:(S,_,E,C)=>{c("nodedragstop",{event:S,targetNode:null,nodes:C})}})),ht(()=>he("contextmenu",b,d)),ht(()=>he("click",b,g)),ht(()=>he("keyup",b,()=>{})),xe(()=>J(b,"style",`width: ${h(f).width??""}px; height: ${h(f).height??""}px; transform: translate(${h(f).x??""}px, ${h(f).y??""}px)`)),U(y,b)}),U(e,v),de()}function vt(e,t){let{enabled:n=!0,trigger:i,type:r="keydown"}=t;function s(o){const l=Array.isArray(i)?i:[i],a={alt:o.altKey,ctrl:o.ctrlKey,shift:o.shiftKey,meta:o.metaKey};for(const u of l){const c={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:f,key:d,callback:g,preventDefault:v,enabled:x}=c;if(x){if(f.length&&!(Array.isArray(f)?f:[f]).map(m=>typeof m=="string"?[m]:m).some(m=>m.every(S=>a[S])))continue;if(o.key===d){v&&o.preventDefault();const y={node:e,trigger:c,originalEvent:o};e.dispatchEvent(new CustomEvent("shortcut",{detail:y})),g==null||g(y)}}}}return n&&e.addEventListener(r,s),{update:o=>{const{enabled:l=!0,type:a="keydown"}=o;n&&(!l||r!==a)?e.removeEventListener(r,s):!n&&l&&e.addEventListener(a,s),n=l,r=a,i=o.trigger},destroy:()=>{e.removeEventListener(r,s)}}}function i0(e,t){ue(t,!1);let n=p(t,"selectionKey",8,"Shift"),i=p(t,"multiSelectionKey",24,()=>_i()?"Meta":"Control"),r=p(t,"deleteKey",8,"Backspace"),s=p(t,"panActivationKey",8," "),o=p(t,"zoomActivationKey",24,()=>_i()?"Meta":"Control");const{selectionKeyPressed:l,multiselectionKeyPressed:a,deleteKeyPressed:u,panActivationKeyPressed:c,zoomActivationKeyPressed:f,selectionRect:d}=Le();function g(m){return m!==null&&typeof m=="object"}function v(m){return g(m)?m.modifier||[]:[]}function x(m){return m==null?"":g(m)?m.key:m}function y(m,S){return(Array.isArray(m)?m:[m]).map(E=>{const C=x(E);return{key:C,modifier:v(E),enabled:C!==null,callback:S}})}function b(){d.set(null),l.set(!1),a.set(!1),u.set(!1),c.set(!1),f.set(!1)}fe(),he("blur",ct,b),he("contextmenu",ct,b),Ge(ct,(m,S)=>vt(m,S),()=>({trigger:y(n(),()=>l.set(!0)),type:"keydown"})),Ge(ct,(m,S)=>vt(m,S),()=>({trigger:y(n(),()=>l.set(!1)),type:"keyup"})),Ge(ct,(m,S)=>vt(m,S),()=>({trigger:y(i(),()=>a.set(!0)),type:"keydown"})),Ge(ct,(m,S)=>vt(m,S),()=>({trigger:y(i(),()=>a.set(!1)),type:"keyup"})),Ge(ct,(m,S)=>vt(m,S),()=>({trigger:y(r(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!bh(m.originalEvent)&&u.set(!0)}),type:"keydown"})),Ge(ct,(m,S)=>vt(m,S),()=>({trigger:y(r(),()=>u.set(!1)),type:"keyup"})),Ge(ct,(m,S)=>vt(m,S),()=>({trigger:y(s(),()=>c.set(!0)),type:"keydown"})),Ge(ct,(m,S)=>vt(m,S),()=>({trigger:y(s(),()=>c.set(!1)),type:"keyup"})),Ge(ct,(m,S)=>vt(m,S),()=>({trigger:y(o(),()=>f.set(!0)),type:"keydown"})),Ge(ct,(m,S)=>vt(m,S),()=>({trigger:y(o(),()=>f.set(!1)),type:"keyup"})),de()}var r0=Ye('<path fill="none" class="svelte-flow__connection-path"></path>'),o0=Ye('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function s0(e,t){ue(t,!1);const n=Be(),i=()=>X(d,"$connection",n),r=()=>X(g,"$connectionLineType",n),s=()=>X(c,"$width",n),o=()=>X(f,"$height",n);let l=p(t,"containerStyle",8,""),a=p(t,"style",8,""),u=p(t,"isCustomComponent",8,!1);const{width:c,height:f,connection:d,connectionLineType:g}=Le();let v=V(null);q(()=>(i(),Y(u()),r(),h(v),Ar),()=>{if(i().inProgress&&!u()){const{from:b,to:m,fromPosition:S,toPosition:_}=i(),E={sourceX:b.x,sourceY:b.y,sourcePosition:S,targetX:m.x,targetY:m.y,targetPosition:_};switch(r()){case fn.Bezier:(C=>F(v,C[0]))(Ll(E));break;case fn.Step:(C=>F(v,C[0]))(ki({...E,borderRadius:0}));break;case fn.SmoothStep:(C=>F(v,C[0]))(ki(E));break;default:(C=>F(v,C[0]))(Ar(E))}}}),Ke(),fe();var x=st(),y=Ne(x);Se(y,()=>i().inProgress,b=>{var m=o0(),S=ae(m);const _=ne(()=>Qe(["svelte-flow__connection",fh(i().isValid)]));var E=ae(S);je(E,t,"connectionLine",{});var C=ie(E);Se(C,()=>!u(),M=>{var O=r0();xe(()=>{J(O,"d",h(v)),J(O,"style",a())}),U(M,O)}),se(S),se(m),xe(()=>{J(m,"width",s()),J(m,"height",o()),J(m,"style",l()),Jt(S,h(_))}),U(b,m)}),U(e,x),de()}var l0=ge("<div><!></div>");function no(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]),i=De(n,["position","style","class"]);ue(t,!1);const r=Be(),s=()=>X(c,"$selectionRectMode",r),o=V();let l=p(t,"position",8,"top-right"),a=p(t,"style",8,void 0),u=p(t,"class",8,void 0);const{selectionRectMode:c}=Le();q(()=>Y(l()),()=>{F(o,`${l()}`.split("-"))}),Ke(),fe();var f=l0();let d;var g=ae(f);je(g,t,"default",{}),se(f),xe(()=>{d=Br(f,d,{class:Qe(["svelte-flow__panel",u(),...h(o)]),style:a(),...i}),ze(f,"pointer-events",s()?"none":"")}),U(e,f),de()}var a0=ge('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function c0(e,t){ue(t,!1);let n=p(t,"proOptions",8,void 0),i=p(t,"position",8,"bottom-right");fe();var r=st(),s=Ne(r);Se(s,()=>{var o;return!((o=n())!=null&&o.hideAttribution)},o=>{no(o,{get position(){return i()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(l,a)=>{var u=a0();U(l,u)},$$slots:{default:!0}})}),U(e,r),de()}function ys(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:r,translateExtent:s,paneClickDistance:o}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),r!==void 0&&e.setMaxZoom(r),s!==void 0&&e.setTranslateExtent(s),o!==void 0&&e.setPaneClickDistance(o)}const u0=e=>Object.keys(e);function vs(e,t){u0(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function d0(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function f0(e="light"){return dt("light",n=>{if(e!=="system"){n(e);return}const i=d0(),r=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",r),()=>{i==null||i.removeEventListener("change",r)}})}var h0=ge('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),g0=ge("<!> <!>",1),p0=ge("<div><!> <!> <!> <!></div>");function m0(e,t){const n=hc(t),i=De(t,["children","$$slots","$$events","$$legacy"]),r=De(i,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);ue(t,!1);const s=Be(),o=()=>X(m(),"$viewport",s),l=()=>X(Ki,"$initialized",s),a=()=>X(h(u),"$colorModeClass",s),u=V();let c=p(t,"id",8,"1"),f=p(t,"nodes",8),d=p(t,"edges",8),g=p(t,"fitView",8,void 0),v=p(t,"fitViewOptions",8,void 0),x=p(t,"minZoom",8,void 0),y=p(t,"maxZoom",8,void 0),b=p(t,"initialViewport",8,void 0),m=p(t,"viewport",8,void 0),S=p(t,"nodeTypes",8,void 0),_=p(t,"edgeTypes",8,void 0),E=p(t,"selectionKey",8,void 0),C=p(t,"selectionMode",8,void 0),M=p(t,"panActivationKey",8,void 0),O=p(t,"multiSelectionKey",8,void 0),H=p(t,"zoomActivationKey",8,void 0),N=p(t,"nodesDraggable",8,void 0),I=p(t,"nodesConnectable",8,void 0),T=p(t,"nodeDragThreshold",8,void 0),P=p(t,"elementsSelectable",8,void 0),w=p(t,"snapGrid",8,void 0),D=p(t,"deleteKey",8,void 0),k=p(t,"connectionRadius",8,void 0),A=p(t,"connectionLineType",8,void 0),z=p(t,"connectionMode",24,()=>jt.Strict),L=p(t,"connectionLineStyle",8,""),B=p(t,"connectionLineContainerStyle",8,""),K=p(t,"onMoveStart",8,void 0),j=p(t,"onMove",8,void 0),te=p(t,"onMoveEnd",8,void 0),W=p(t,"isValidConnection",8,void 0),$=p(t,"translateExtent",8,void 0),re=p(t,"nodeExtent",8,void 0),me=p(t,"onlyRenderVisibleElements",8,void 0),ye=p(t,"panOnScrollMode",24,()=>Lt.Free),Z=p(t,"preventScrolling",8,!0),G=p(t,"zoomOnScroll",8,!0),oe=p(t,"zoomOnDoubleClick",8,!0),ce=p(t,"zoomOnPinch",8,!0),Ee=p(t,"panOnScroll",8,!1),be=p(t,"panOnDrag",8,!0),_e=p(t,"selectionOnDrag",8,void 0),He=p(t,"autoPanOnConnect",8,!0),Te=p(t,"autoPanOnNodeDrag",8,!0),ke=p(t,"onerror",8,void 0),Ce=p(t,"ondelete",8,void 0),pe=p(t,"onedgecreate",8,void 0),et=p(t,"attributionPosition",8,void 0),Ve=p(t,"proOptions",8,void 0),Me=p(t,"defaultEdgeOptions",8,void 0),rt=p(t,"width",8,void 0),Ue=p(t,"height",8,void 0),Ze=p(t,"colorMode",8,"light"),Pe=p(t,"onconnect",8,void 0),Bt=p(t,"onconnectstart",8,void 0),Qt=p(t,"onconnectend",8,void 0),Re=p(t,"onbeforedelete",8,void 0),Ae=p(t,"oninit",8,void 0),Ie=p(t,"nodeOrigin",8,void 0),Xe=p(t,"paneClickDistance",8,0),at=p(t,"nodeClickDistance",8,0),mt=p(t,"defaultMarkerColor",8,"#b1b1b7"),yt=p(t,"style",8,void 0),en=p(t,"class",8,void 0),ot=V(),Vt=V(),Xt=V();const Wi=o()||b(),We=dc(to)?Le():Mg({nodes:R(f()),edges:R(d()),width:rt(),height:Ue(),fitView:g(),nodeOrigin:Ie(),nodeExtent:re()});Ft(()=>(We.width.set(h(Vt)),We.height.set(h(Xt)),We.domNode.set(h(ot)),We.syncNodeStores(f()),We.syncEdgeStores(d()),We.syncViewport(m()),g()!==void 0&&We.fitViewOnInit.set(g()),v()&&We.fitViewOptions.set(v()),ys(We,{nodeTypes:S(),edgeTypes:_(),minZoom:x(),maxZoom:y(),translateExtent:$(),paneClickDistance:Xe()}),()=>{We.reset()}));const{initialized:Ki}=We;let _n=V(!1);q(()=>(h(Vt),h(Xt)),()=>{h(Vt)!==void 0&&h(Xt)!==void 0&&(We.width.set(h(Vt)),We.height.set(h(Xt)))}),q(()=>(h(_n),l(),Y(Ae())),()=>{var qe;!h(_n)&&l()&&((qe=Ae())==null||qe(),F(_n,!0))}),q(()=>(Y(c()),Y(A()),Y(k()),Y(C()),Y(w()),Y(mt()),Y(N()),Y(I()),Y(P()),Y(me()),Y(W()),Y(He()),Y(Te()),Y(ke()),Y(Ce()),Y(pe()),Y(z()),Y(T()),Y(Pe()),Y(Bt()),Y(Qt()),Y(Re()),Y(Ie()),vs),()=>{const qe={flowId:c(),connectionLineType:A(),connectionRadius:k(),selectionMode:C(),snapGrid:w(),defaultMarkerColor:mt(),nodesDraggable:N(),nodesConnectable:I(),elementsSelectable:P(),onlyRenderVisibleElements:me(),isValidConnection:W(),autoPanOnConnect:He(),autoPanOnNodeDrag:Te(),onerror:ke(),ondelete:Ce(),onedgecreate:pe(),connectionMode:z(),nodeDragThreshold:T(),onconnect:Pe(),onconnectstart:Bt(),onconnectend:Qt(),onbeforedelete:Re(),nodeOrigin:Ie()};vs(We,qe)}),q(()=>(Y(S()),Y(_()),Y(x()),Y(y()),Y($()),Y(Xe())),()=>{ys(We,{nodeTypes:S(),edgeTypes:_(),minZoom:x(),maxZoom:y(),translateExtent:$(),paneClickDistance:Xe()})}),q(()=>Y(Ze()),()=>{_c(F(u,f0(Ze())),"$colorModeClass",s)}),Ke(),fe();var kt=p0();let lo;var ao=ae(kt);i0(ao,{get selectionKey(){return E()},get deleteKey(){return D()},get panActivationKey(){return M()},get multiSelectionKey(){return O()},get zoomActivationKey(){return H()}});var co=ie(ao,2),Sa=ne(()=>ye()===void 0?Lt.Free:ye()),Ca=ne(()=>Z()===void 0?!0:Z()),Aa=ne(()=>G()===void 0?!0:G()),Na=ne(()=>oe()===void 0?!0:oe()),Ma=ne(()=>ce()===void 0?!0:ce()),Ta=ne(()=>Ee()===void 0?!1:Ee()),Pa=ne(()=>be()===void 0?!0:be()),Ia=ne(()=>Xe()===void 0?0:Xe());Ig(co,{initialViewport:Wi,get onMoveStart(){return K()},get onMove(){return j()},get onMoveEnd(){return te()},get panOnScrollMode(){return h(Sa)},get preventScrolling(){return h(Ca)},get zoomOnScroll(){return h(Aa)},get zoomOnDoubleClick(){return h(Na)},get zoomOnPinch(){return h(Ma)},get panOnScroll(){return h(Ta)},get panOnDrag(){return h(Pa)},get paneClickDistance(){return h(Ia)},children:(qe,ky)=>{var za=ne(()=>be()===void 0?!0:be());zg(qe,{get panOnDrag(){return h(za)},get selectionOnDrag(){return _e()},$$events:{paneclick(kn){we.call(this,t,kn)},panecontextmenu(kn){we.call(this,t,kn)}},children:(kn,Ey)=>{var fo=g0(),ho=Ne(fo);Lg(ho,{children:(La,Sy)=>{var go=h0(),po=Ne(go);Jg(po,{get defaultEdgeOptions(){return Me()},$$events:{edgeclick(ve){we.call(this,t,ve)},edgecontextmenu(ve){we.call(this,t,ve)},edgemouseenter(ve){we.call(this,t,ve)},edgemouseleave(ve){we.call(this,t,ve)}}});var mo=ie(po,2);s0(mo,{get containerStyle(){return B()},get style(){return L()},isCustomComponent:n.connectionLine,$$slots:{connectionLine:(ve,Cy)=>{var vo=st(),Ra=Ne(vo);je(Ra,t,"connectionLine",{}),U(ve,vo)}}});var yo=ie(mo,6);Bg(yo,{get nodeClickDistance(){return at()},$$events:{nodeclick(ve){we.call(this,t,ve)},nodemouseenter(ve){we.call(this,t,ve)},nodemousemove(ve){we.call(this,t,ve)},nodemouseleave(ve){we.call(this,t,ve)},nodedragstart(ve){we.call(this,t,ve)},nodedrag(ve){we.call(this,t,ve)},nodedragstop(ve){we.call(this,t,ve)},nodecontextmenu(ve){we.call(this,t,ve)}}});var Ha=ie(yo,2);n0(Ha,{$$events:{selectionclick(ve){we.call(this,t,ve)},selectioncontextmenu(ve){we.call(this,t,ve)},nodedragstart(ve){we.call(this,t,ve)},nodedrag(ve){we.call(this,t,ve)},nodedragstop(ve){we.call(this,t,ve)}}}),U(La,go)},$$slots:{default:!0}});var Da=ie(ho,2);e0(Da,{}),U(kn,fo)},$$slots:{default:!0}})},$$slots:{default:!0}});var uo=ie(co,2);c0(uo,{get proOptions(){return Ve()},get position(){return et()}});var Oa=ie(uo,2);je(Oa,t,"default",{}),se(kt),Yr(kt,qe=>F(ot,qe),()=>h(ot)),xe(()=>lo=Br(kt,lo,{style:yt(),class:Qe(["svelte-flow",en(),a()]),"data-testid":"svelte-flow__wrapper",...r,role:"application"},"svelte-12wlba6")),Oo(kt,"clientWidth",qe=>F(Vt,qe)),Oo(kt,"clientHeight",qe=>F(Xt,qe)),he("dragover",kt,function(qe){we.call(this,t,qe)}),he("drop",kt,function(qe){we.call(this,t,qe)}),U(e,kt),de()}var y0=ge("<button><!></button>");function Ut(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]),i=De(n,["class"]);ue(t,!1);let r=p(t,"class",8,void 0),s,o,l,a,u;fe();var c=y0();let f;var d=ae(c);je(d,t,"default",{class:"button-svg"}),se(c),xe(()=>{f=Br(c,f,{type:"button",class:Qe(["svelte-flow__controls-button",r()]),...i}),ze(c,"--xy-controls-button-background-color-props",s),ze(c,"--xy-controls-button-background-color-hover-props",o),ze(c,"--xy-controls-button-color-props",l),ze(c,"--xy-controls-button-color-hover-props",a),ze(c,"--xy-controls-button-border-color-props",u)}),he("click",c,function(g){we.call(this,t,g)}),U(e,c),de()}var v0=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function x0(e){var t=v0();U(e,t)}var w0=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function b0(e){var t=w0();U(e,t)}var _0=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function k0(e){var t=_0();U(e,t)}var E0=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function S0(e){var t=E0();U(e,t)}var C0=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function A0(e){var t=C0();U(e,t)}var N0=ge("<!> <!>",1),M0=ge("<!> <!> <!> <!> <!> <!>",1);function T0(e,t){ue(t,!1);const n=Be(),i=()=>X(A,"$nodesDraggable",n),r=()=>X(z,"$nodesConnectable",n),s=()=>X(L,"$elementsSelectable",n),o=()=>X(w,"$viewport",n),l=()=>X(D,"$minZoom",n),a=()=>X(k,"$maxZoom",n),u=V(),c=V(),f=V(),d=V();let g=p(t,"position",8,"bottom-left"),v=p(t,"showZoom",8,!0),x=p(t,"showFitView",8,!0),y=p(t,"showLock",8,!0),b=p(t,"buttonBgColor",8,void 0),m=p(t,"buttonBgColorHover",8,void 0),S=p(t,"buttonColor",8,void 0),_=p(t,"buttonColorHover",8,void 0),E=p(t,"buttonBorderColor",8,void 0),C=p(t,"ariaLabel",8,void 0),M=p(t,"style",8,void 0),O=p(t,"orientation",8,"vertical"),H=p(t,"fitViewOptions",8,void 0),N=p(t,"class",8,"");const{zoomIn:I,zoomOut:T,fitView:P,viewport:w,minZoom:D,maxZoom:k,nodesDraggable:A,nodesConnectable:z,elementsSelectable:L}=Le(),B={bgColor:b(),bgColorHover:m(),color:S(),colorHover:_(),borderColor:E()},K=()=>{I()},j=()=>{T()},te=()=>{P(H())},W=()=>{F(u,!h(u)),A.set(h(u)),z.set(h(u)),L.set(h(u))};q(()=>(i(),r(),s()),()=>{F(u,i()||r()||s())}),q(()=>(o(),l()),()=>{F(c,o().zoom<=l())}),q(()=>(o(),a()),()=>{F(f,o().zoom>=a())}),q(()=>Y(O()),()=>{F(d,O()==="horizontal"?"horizontal":"vertical")}),Ke(),fe();var $=ne(()=>Qe(["svelte-flow__controls",h(d),N()])),re=ne(()=>C()??"Svelte Flow controls");no(e,{get class(){return h($)},get position(){return g()},"data-testid":"svelte-flow__controls",get"aria-label"(){return h(re)},get style(){return M()},children:(me,ye)=>{var Z=M0(),G=Ne(Z);je(G,t,"before",{});var oe=ie(G,2);Se(oe,v,He=>{var Te=N0(),ke=Ne(Te);Ut(ke,rn({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return h(f)}},B,{$$events:{click:K},children:(pe,et)=>{x0(pe)},$$slots:{default:!0}}));var Ce=ie(ke,2);Ut(Ce,rn({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return h(c)}},B,{$$events:{click:j},children:(pe,et)=>{b0(pe)},$$slots:{default:!0}})),U(He,Te)});var ce=ie(oe,2);Se(ce,x,He=>{Ut(He,rn({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},B,{$$events:{click:te},children:(Te,ke)=>{k0(Te)},$$slots:{default:!0}}))});var Ee=ie(ce,2);Se(Ee,y,He=>{Ut(He,rn({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},B,{$$events:{click:W},children:(Te,ke)=>{var Ce=st(),pe=Ne(Ce);Se(pe,()=>h(u),et=>{A0(et)},et=>{S0(et)}),U(Te,Ce)},$$slots:{default:!0}}))});var be=ie(Ee,2);je(be,t,"default",{});var _e=ie(be,2);je(_e,t,"after",{}),U(me,Z)},$$slots:{default:!0}}),de()}var Tt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Tt||(Tt={}));var P0=Ye("<circle></circle>");function I0(e,t){ue(t,!1);let n=p(t,"radius",8,5),i=p(t,"class",8,"");fe();var r=P0();const s=ne(()=>Qe(["svelte-flow__background-pattern","dots",i()]));xe(()=>{J(r,"cx",n()),J(r,"cy",n()),J(r,"r",n()),Jt(r,h(s))}),U(e,r),de()}var O0=Ye("<path></path>");function z0(e,t){ue(t,!1);let n=p(t,"lineWidth",8,1),i=p(t,"dimensions",8),r=p(t,"variant",8,void 0),s=p(t,"class",8,"");fe();var o=O0();const l=ne(()=>Qe(["svelte-flow__background-pattern",r(),s()]));xe(()=>{J(o,"stroke-width",n()),J(o,"d",`M${i()[0]/2} 0 V${i()[1]} M0 ${i()[1]/2} H${i()[0]}`),Jt(o,h(l))}),U(e,o),de()}const D0={[Tt.Dots]:1,[Tt.Lines]:1,[Tt.Cross]:6};var L0=Ye('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function H0(e,t){ue(t,!1);const n=Be(),i=()=>X(_,"$flowId",n),r=()=>X(S,"$viewport",n),s=V(),o=V(),l=V(),a=V(),u=V();let c=p(t,"id",8,void 0),f=p(t,"variant",24,()=>Tt.Dots),d=p(t,"gap",8,20),g=p(t,"size",8,1),v=p(t,"lineWidth",8,1),x=p(t,"bgColor",8,void 0),y=p(t,"patternColor",8,void 0),b=p(t,"patternClass",8,void 0),m=p(t,"class",8,"");const{viewport:S,flowId:_}=Le(),E=g()||D0[f()],C=f()===Tt.Dots,M=f()===Tt.Cross,O=Array.isArray(d())?d():[d(),d()];q(()=>(i(),Y(c())),()=>{F(s,`background-pattern-${i()}-${c()?c():""}`)}),q(()=>r(),()=>{F(o,[O[0]*r().zoom||1,O[1]*r().zoom||1])}),q(()=>r(),()=>{F(l,E*r().zoom)}),q(()=>(h(l),h(o)),()=>{F(a,M?[h(l),h(l)]:h(o))}),q(()=>(h(l),h(a)),()=>{F(u,C?[h(l)/2,h(l)/2]:[h(a)[0]/2,h(a)[1]/2])}),Ke(),fe();var H=L0();const N=ne(()=>`${Qe(["svelte-flow__background",m()])??""} svelte-1r7pe8d`);var I=ae(H),T=ae(I);Se(T,()=>C,w=>{var D=ne(()=>h(l)/2);I0(w,{get radius(){return h(D)},get class(){return b()}})},w=>{z0(w,{get dimensions(){return h(a)},get variant(){return f()},get lineWidth(){return v()},get class(){return b()}})}),se(I);var P=ie(I);se(H),xe(()=>{Jt(H,h(N)),ze(H,"--xy-background-color-props",x()),ze(H,"--xy-background-pattern-color-props",y()),J(I,"id",h(s)),J(I,"x",r().x%h(o)[0]),J(I,"y",r().y%h(o)[1]),J(I,"width",h(o)[0]),J(I,"height",h(o)[1]),J(I,"patternTransform",`translate(-${h(u)[0]},-${h(u)[1]})`),J(P,"fill",`url(#${h(s)})`)}),U(e,H),de()}var R0=Ye("<rect></rect>");function F0(e,t){ue(t,!1);let n=p(t,"x",8),i=p(t,"y",8),r=p(t,"width",8,0),s=p(t,"height",8,0),o=p(t,"borderRadius",8,5),l=p(t,"color",8,void 0),a=p(t,"shapeRendering",8),u=p(t,"strokeColor",8,void 0),c=p(t,"strokeWidth",8,2),f=p(t,"selected",8,!1),d=p(t,"class",8,"");fe();var g=R0();const v=ne(()=>Qe(["svelte-flow__minimap-node",d()]));xe(()=>{Jt(g,h(v)),J(g,"x",n()),J(g,"y",i()),J(g,"rx",o()),J(g,"ry",o()),J(g,"width",r()),J(g,"height",s()),J(g,"style",`${l()?`fill: ${l()};`:""}${u()?`stroke: ${u()};`:""}${c()?`stroke-width: ${c()};`:""}`),J(g,"shape-rendering",a()),Oe(g,"selected",f())}),U(e,g),de()}function Y0(e,t){const n=Gh({domNode:e,panZoom:t.panZoom,getTransform:()=>{const r=R(t.viewport);return[r.x,r.y,r.zoom]},getViewScale:t.getViewScale});function i(r){n.update({translateExtent:r.translateExtent,width:r.width,height:r.height,inversePan:r.inversePan,zoomStep:r.zoomStep,pannable:r.pannable,zoomable:r.zoomable})}return{update:i,destroy(){n.destroy()}}}const sr=e=>e instanceof Function?e:()=>e;var B0=Ye("<title> </title>"),V0=Ye('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>');function X0(e,t){ue(t,!1);const n=Be(),i=()=>X(be,"$flowId",n),r=()=>X(oe,"$viewport",n),s=()=>X(ce,"$containerWidth",n),o=()=>X(Ee,"$containerHeight",n),l=()=>X(G,"$nodeLookup",n),a=()=>X(Z,"$nodes",n),u=()=>X(_e,"$panZoom",n),c=()=>X(He,"$translateExtent",n),f=V(),d=V(),g=V(),v=V(),x=V(),y=V(),b=V(),m=V(),S=V(),_=V(),E=V(),C=V(),M=V();let O=p(t,"position",8,"bottom-right"),H=p(t,"ariaLabel",8,"Mini map"),N=p(t,"nodeStrokeColor",8,"transparent"),I=p(t,"nodeColor",8,void 0),T=p(t,"nodeClass",8,""),P=p(t,"nodeBorderRadius",8,5),w=p(t,"nodeStrokeWidth",8,2),D=p(t,"bgColor",8,void 0),k=p(t,"maskColor",8,void 0),A=p(t,"maskStrokeColor",8,void 0),z=p(t,"maskStrokeWidth",8,void 0),L=p(t,"width",8,void 0),B=p(t,"height",8,void 0),K=p(t,"pannable",8,!0),j=p(t,"zoomable",8,!0),te=p(t,"inversePan",8,void 0),W=p(t,"zoomStep",8,void 0),$=p(t,"style",8,""),re=p(t,"class",8,"");const me=200,ye=150,{nodes:Z,nodeLookup:G,viewport:oe,width:ce,height:Ee,flowId:be,panZoom:_e,translateExtent:He}=Le(),Te=I()===void 0?void 0:sr(I()),ke=sr(N()),Ce=sr(T()),pe=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",et=`svelte-flow__minimap-desc-${i()}`;let Ve=V(h(f));const Me=()=>h(y);q(()=>(r(),s(),o()),()=>{F(f,{x:-r().x/r().zoom,y:-r().y/r().zoom,width:s()/r().zoom,height:o()/r().zoom})}),q(()=>(l(),h(f),a()),()=>{F(Ve,l().size>0?Il(Kn(l()),h(f)):h(f)),a()}),q(()=>Y(L()),()=>{F(d,L()??me)}),q(()=>Y(B()),()=>{F(g,B()??ye)}),q(()=>(h(Ve),h(d)),()=>{F(v,h(Ve).width/h(d))}),q(()=>(h(Ve),h(g)),()=>{F(x,h(Ve).height/h(g))}),q(()=>(h(v),h(x)),()=>{F(y,Math.max(h(v),h(x)))}),q(()=>(h(y),h(d)),()=>{F(b,h(y)*h(d))}),q(()=>(h(y),h(g)),()=>{F(m,h(y)*h(g))}),q(()=>h(y),()=>{F(S,5*h(y))}),q(()=>(h(Ve),h(b),h(S)),()=>{F(_,h(Ve).x-(h(b)-h(Ve).width)/2-h(S))}),q(()=>(h(Ve),h(m),h(S)),()=>{F(E,h(Ve).y-(h(m)-h(Ve).height)/2-h(S))}),q(()=>(h(b),h(S)),()=>{F(C,h(b)+h(S)*2)}),q(()=>(h(m),h(S)),()=>{F(M,h(m)+h(S)*2)}),Ke(),fe();var rt=ne(()=>$()+(D()?`;--xy-minimap-background-color-props:${D()}`:"")),Ue=ne(()=>Qe(["svelte-flow__minimap",re()]));no(e,{get position(){return O()},get style(){return h(rt)},get class(){return h(Ue)},"data-testid":"svelte-flow__minimap",children:(Ze,Pe)=>{var Bt=st(),Qt=Ne(Bt);Se(Qt,u,Re=>{var Ae=V0();J(Ae,"aria-labelledby",et);var Ie=ae(Ae);Se(Ie,H,mt=>{var yt=B0();J(yt,"id",et);var en=ae(yt,!0);se(yt),xe(()=>xt(en,H())),U(mt,yt)});var Xe=ie(Ie);gn(Xe,1,a,mt=>mt.id,(mt,yt)=>{var en=st();const ot=ne(()=>l().get(h(yt).id));var Vt=Ne(en);Se(Vt,()=>h(ot)&&zl(h(ot)),Xt=>{const Wi=ne(()=>Yt(h(ot)));var We=ne(()=>Te==null?void 0:Te(h(ot))),Ki=ne(()=>ke(h(ot))),_n=ne(()=>Ce(h(ot)));F0(Xt,rn({get x(){return h(ot).internals.positionAbsolute.x},get y(){return h(ot).internals.positionAbsolute.y}},()=>h(Wi),{get selected(){return h(ot).selected},get color(){return h(We)},get borderRadius(){return P()},get strokeColor(){return h(Ki)},get strokeWidth(){return w()},shapeRendering:pe,get class(){return h(_n)}}))}),U(mt,en)});var at=ie(Xe);se(Ae),Ge(Ae,(mt,yt)=>Y0(mt,yt),()=>({panZoom:u(),viewport:oe,getViewScale:Me,translateExtent:c(),width:s(),height:o(),inversePan:te(),zoomStep:W(),pannable:K(),zoomable:j()})),xe(()=>{J(Ae,"width",h(d)),J(Ae,"height",h(g)),J(Ae,"viewBox",`${h(_)??""} ${h(E)??""} ${h(C)??""} ${h(M)??""}`),ze(Ae,"--xy-minimap-mask-background-color-props",k()),ze(Ae,"--xy-minimap-mask-stroke-color-props",A()),ze(Ae,"--xy-minimap-mask-stroke-width-props",z()?z()*h(y):void 0),J(at,"d",`M${h(_)-h(S)},${h(E)-h(S)}h${h(C)+h(S)*2}v${h(M)+h(S)*2}h${-h(C)-h(S)*2}z
      M${h(f).x??""},${h(f).y??""}h${h(f).width??""}v${h(f).height??""}h${-h(f).width}z`)}),U(Re,Ae)}),U(Ze,Bt)},$$slots:{default:!0}}),de()}const xs=e=>gh(e);function W0(){const{zoomIn:e,zoomOut:t,fitView:n,onbeforedelete:i,snapGrid:r,viewport:s,width:o,height:l,minZoom:a,maxZoom:u,panZoom:c,nodes:f,edges:d,domNode:g,nodeLookup:v,nodeOrigin:x,edgeLookup:y,connectionLookup:b}=Le(),m=E=>{var N,I;const C=R(v),M=xs(E)?E:C.get(E.id),O=M.parentId?vh(M.position,M.measured,M.parentId,C,R(x)):M.position,H={id:M.id,position:O,width:((N=M.measured)==null?void 0:N.width)??M.width,height:((I=M.measured)==null?void 0:I.height)??M.height,data:M.data};return vn(H)},S=(E,C,M={replace:!1})=>{var N;const O=(N=R(v).get(E))==null?void 0:N.internals.userNode;if(!O)return;const H=typeof C=="function"?C(O):C;M.replace?f.update(I=>I.map(T=>T.id===E?xs(H)?H:{...T,...H}:T)):(Object.assign(O,H),f.update(I=>I))},_=E=>R(v).get(E);return{zoomIn:e,zoomOut:t,getInternalNode:_,getNode:E=>{var C;return(C=_(E))==null?void 0:C.internals.userNode},getNodes:E=>E===void 0?R(f):ws(R(v),E),getEdge:E=>R(y).get(E),getEdges:E=>E===void 0?R(d):ws(R(y),E),setZoom:(E,C)=>{const M=R(c);return M?M.scaleTo(E,{duration:C==null?void 0:C.duration}):Promise.resolve(!1)},getZoom:()=>R(s).zoom,setViewport:async(E,C)=>{const M=R(s),O=R(c);return O?(await O.setViewport({x:E.x??M.x,y:E.y??M.y,zoom:E.zoom??M.zoom},{duration:C==null?void 0:C.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>R(s),setCenter:async(E,C,M)=>{const O=typeof(M==null?void 0:M.zoom)<"u"?M.zoom:R(u),H=R(c);return H?(await H.setViewport({x:R(o)/2-E*O,y:R(l)/2-C*O,zoom:O},{duration:M==null?void 0:M.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(E,C)=>{const M=R(c);if(!M)return Promise.resolve(!1);const O=jr(E,R(o),R(l),R(a),R(u),(C==null?void 0:C.padding)??.1);return await M.setViewport(O,{duration:C==null?void 0:C.duration}),Promise.resolve(!0)},getIntersectingNodes:(E,C=!0,M)=>{const O=rs(E),H=O?E:m(E);return H?(M||R(f)).filter(N=>{const I=R(v).get(N.id);if(!I||!O&&N.id===E.id)return!1;const T=vn(I),P=Hn(T,H);return C&&P>0||P>=H.width*H.height}):[]},isNodeIntersecting:(E,C,M=!0)=>{const H=rs(E)?E:m(E);if(!H)return!1;const N=Hn(H,C);return M&&N>0||N>=H.width*H.height},deleteElements:async({nodes:E=[],edges:C=[]})=>{const{nodes:M,edges:O}=await Ml({nodesToRemove:E,edgesToRemove:C,nodes:R(f),edges:R(d),onBeforeDelete:R(i)});return M&&f.update(H=>H.filter(N=>!M.some(({id:I})=>I===N.id))),O&&d.update(H=>H.filter(N=>!O.some(({id:I})=>I===N.id))),{deletedNodes:M,deletedEdges:O}},screenToFlowPosition:(E,C={snapToGrid:!0})=>{const M=R(g);if(!M)return E;const O=C.snapToGrid?R(r):!1,{x:H,y:N,zoom:I}=R(s),{x:T,y:P}=M.getBoundingClientRect(),w={x:E.x-T,y:E.y-P};return Un(w,[H,N,I],O!==null,O||[1,1])},flowToScreenPosition:E=>{const C=R(g);if(!C)return E;const{x:M,y:O,zoom:H}=R(s),{x:N,y:I}=C.getBoundingClientRect(),T=Ol(E,[M,O,H]);return{x:T.x+N,y:T.y+I}},toObject:()=>({nodes:R(f).map(E=>({...E,position:{...E.position},data:{...E.data}})),edges:R(d).map(E=>({...E})),viewport:{...R(s)}}),updateNode:S,updateNodeData:(E,C,M)=>{var N;const O=(N=R(v).get(E))==null?void 0:N.internals.userNode;if(!O)return;const H=typeof C=="function"?C(O):C;O.data=M!=null&&M.replace?H:{...O.data,...H},f.update(I=>I)},getNodesBounds:E=>{const C=R(v),M=R(x);return ph(E,{nodeLookup:C,nodeOrigin:M})},getHandleConnections:({type:E,id:C,nodeId:M})=>{var O;return Array.from(((O=R(b).get(`${M}-${E}-${C??null}`))==null?void 0:O.values())??[])},viewport:s}}function ws(e,t){var i;const n=[];for(const r of t){const s=e.get(r);if(s){const o="internals"in s?(i=s.internals)==null?void 0:i.userNode:s;n.push(o)}}return n}var K0=ge('<div class="svelte-flow__node-toolbar"><!></div>');function U0(e,t){ue(t,!1);const n=Be(),i=()=>X(m,"$nodes",n),r=()=>X(b,"$nodeLookup",n),s=()=>X(y,"$viewport",n),o=()=>X(x,"$domNode",n),l=V(),a=V(),u=V();let c=p(t,"nodeId",8,void 0),f=p(t,"position",8,void 0),d=p(t,"align",8,void 0),g=p(t,"offset",8,void 0),v=p(t,"isVisible",8,void 0);const{domNode:x,viewport:y,nodeLookup:b,nodes:m}=Le(),{getNodesBounds:S}=W0(),_=Pn("svelteflow__node_id");let E=V(),C=V([]),M=g()!==void 0?g():10,O=f()!==void 0?f():le.Top,H=d()!==void 0?d():"center";q(()=>(i(),Y(c()),r()),()=>{i();const T=Array.isArray(c())?c():[c()||_];F(C,T.reduce((P,w)=>{const D=r().get(w);return D&&P.push(D),P},[]))}),q(()=>(h(C),s()),()=>{const T=S(h(C));T&&F(E,Oh(T,s(),O,M,H))}),q(()=>h(C),()=>{F(l,h(C).length===0?1:Math.max(...h(C).map(T=>(T.internals.z||5)+1)))}),q(()=>i(),()=>{F(a,i().filter(T=>T.selected).length)}),q(()=>(Y(v()),h(C),h(a)),()=>{F(u,typeof v()=="boolean"?v():h(C).length===1&&h(C)[0].selected&&h(a)===1)}),Ke(),fe();var N=st(),I=Ne(N);Se(I,()=>o()&&h(u)&&h(C),T=>{var P=K0();xe(()=>J(P,"data-id",h(C).reduce((D,k)=>`${D}${k.id} `,"").trim()));var w=ae(P);je(w,t,"default",{}),se(P),Ge(P,(D,k)=>ql(D,k),()=>({domNode:o()})),xe(()=>{ze(P,"position","absolute"),ze(P,"transform",h(E)),ze(P,"z-index",h(l))}),U(T,P)}),U(e,N),de()}const ea=Q(""),io=Q({}),Pr=Q(!0),Ir=Q(!0);console.log("browser",$s,window.location.href),ea.set(window.location.href),io.set({width:window.innerWidth,height:window.innerHeight}),console.log("screenSize",window.innerWidth,window.innerHeight);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function ta(e){return typeof e>"u"||e===null}function Z0(e){return typeof e=="object"&&e!==null}function q0(e){return Array.isArray(e)?e:ta(e)?[]:[e]}function G0(e,t){var n,i,r,s;if(t)for(s=Object.keys(t),n=0,i=s.length;n<i;n+=1)r=s[n],e[r]=t[r];return e}function j0(e,t){var n="",i;for(i=0;i<t;i+=1)n+=e;return n}function $0(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var J0=ta,Q0=Z0,ep=q0,tp=j0,np=$0,ip=G0,Je={isNothing:J0,isObject:Q0,toArray:ep,repeat:tp,isNegativeZero:np,extend:ip};function na(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),i+" "+n):i}function Fn(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=na(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Fn.prototype=Object.create(Error.prototype);Fn.prototype.constructor=Fn;Fn.prototype.toString=function(t){return this.name+": "+na(this,t)};var Ct=Fn;function lr(e,t,n,i,r){var s="",o="",l=Math.floor(r/2)-1;return i-t>l&&(s=" ... ",t=i-l+s.length),n-i>l&&(o=" ...",n=i+l-o.length),{str:s+e.slice(t,n).replace(/\t/g,"")+o,pos:i-t+s.length}}function ar(e,t){return Je.repeat(" ",t-e.length)+e}function rp(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],r=[],s,o=-1;s=n.exec(e.buffer);)r.push(s.index),i.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var l="",a,u,c=Math.min(e.line+t.linesAfter,r.length).toString().length,f=t.maxLength-(t.indent+c+3);for(a=1;a<=t.linesBefore&&!(o-a<0);a++)u=lr(e.buffer,i[o-a],r[o-a],e.position-(i[o]-i[o-a]),f),l=Je.repeat(" ",t.indent)+ar((e.line-a+1).toString(),c)+" | "+u.str+`
`+l;for(u=lr(e.buffer,i[o],r[o],e.position,f),l+=Je.repeat(" ",t.indent)+ar((e.line+1).toString(),c)+" | "+u.str+`
`,l+=Je.repeat("-",t.indent+c+3+u.pos)+`^
`,a=1;a<=t.linesAfter&&!(o+a>=r.length);a++)u=lr(e.buffer,i[o+a],r[o+a],e.position-(i[o]-i[o+a]),f),l+=Je.repeat(" ",t.indent)+ar((e.line+a+1).toString(),c)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var op=rp,sp=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],lp=["scalar","sequence","mapping"];function ap(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(i){t[String(i)]=n})}),t}function cp(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(sp.indexOf(n)===-1)throw new Ct('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=ap(t.styleAliases||null),lp.indexOf(this.kind)===-1)throw new Ct('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var $e=cp;function bs(e,t){var n=[];return e[t].forEach(function(i){var r=n.length;n.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(r=o)}),n[r]=i}),n}function up(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function i(r){r.multi?(e.multi[r.kind].push(r),e.multi.fallback.push(r)):e[r.kind][r.tag]=e.fallback[r.tag]=r}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(i);return e}function Or(e){return this.extend(e)}Or.prototype.extend=function(t){var n=[],i=[];if(t instanceof $e)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new Ct("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof $e))throw new Ct("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Ct("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Ct("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof $e))throw new Ct("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(Or.prototype);return r.implicit=(this.implicit||[]).concat(n),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=bs(r,"implicit"),r.compiledExplicit=bs(r,"explicit"),r.compiledTypeMap=up(r.compiledImplicit,r.compiledExplicit),r};var dp=Or,fp=new $e("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),hp=new $e("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),gp=new $e("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),pp=new dp({explicit:[fp,hp,gp]});function mp(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function yp(){return null}function vp(e){return e===null}var xp=new $e("tag:yaml.org,2002:null",{kind:"scalar",resolve:mp,construct:yp,predicate:vp,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function wp(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function bp(e){return e==="true"||e==="True"||e==="TRUE"}function _p(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var kp=new $e("tag:yaml.org,2002:bool",{kind:"scalar",resolve:wp,construct:bp,predicate:_p,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Ep(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Sp(e){return 48<=e&&e<=55}function Cp(e){return 48<=e&&e<=57}function Ap(e){if(e===null)return!1;var t=e.length,n=0,i=!1,r;if(!t)return!1;if(r=e[n],(r==="-"||r==="+")&&(r=e[++n]),r==="0"){if(n+1===t)return!0;if(r=e[++n],r==="b"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(r!=="0"&&r!=="1")return!1;i=!0}return i&&r!=="_"}if(r==="x"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(!Ep(e.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}if(r==="o"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(!Sp(e.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}}if(r==="_")return!1;for(;n<t;n++)if(r=e[n],r!=="_"){if(!Cp(e.charCodeAt(n)))return!1;i=!0}return!(!i||r==="_")}function Np(e){var t=e,n=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function Mp(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Je.isNegativeZero(e)}var Tp=new $e("tag:yaml.org,2002:int",{kind:"scalar",resolve:Ap,construct:Np,predicate:Mp,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Pp=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Ip(e){return!(e===null||!Pp.test(e)||e[e.length-1]==="_")}function Op(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var zp=/^[-+]?[0-9]+e/;function Dp(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Je.isNegativeZero(e))return"-0.0";return n=e.toString(10),zp.test(n)?n.replace("e",".e"):n}function Lp(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Je.isNegativeZero(e))}var Hp=new $e("tag:yaml.org,2002:float",{kind:"scalar",resolve:Ip,construct:Op,predicate:Lp,represent:Dp,defaultStyle:"lowercase"}),Rp=pp.extend({implicit:[xp,kp,Tp,Hp]}),Fp=Rp,ia=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ra=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Yp(e){return e===null?!1:ia.exec(e)!==null||ra.exec(e)!==null}function Bp(e){var t,n,i,r,s,o,l,a=0,u=null,c,f,d;if(t=ia.exec(e),t===null&&(t=ra.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(n,i,r));if(s=+t[4],o=+t[5],l=+t[6],t[7]){for(a=t[7].slice(0,3);a.length<3;)a+="0";a=+a}return t[9]&&(c=+t[10],f=+(t[11]||0),u=(c*60+f)*6e4,t[9]==="-"&&(u=-u)),d=new Date(Date.UTC(n,i,r,s,o,l,a)),u&&d.setTime(d.getTime()-u),d}function Vp(e){return e.toISOString()}var Xp=new $e("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Yp,construct:Bp,instanceOf:Date,represent:Vp});function Wp(e){return e==="<<"||e===null}var Kp=new $e("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Wp}),ro=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Up(e){if(e===null)return!1;var t,n,i=0,r=e.length,s=ro;for(n=0;n<r;n++)if(t=s.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function Zp(e){var t,n,i=e.replace(/[\r\n=]/g,""),r=i.length,s=ro,o=0,l=[];for(t=0;t<r;t++)t%4===0&&t&&(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)),o=o<<6|s.indexOf(i.charAt(t));return n=r%4*6,n===0?(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)):n===18?(l.push(o>>10&255),l.push(o>>2&255)):n===12&&l.push(o>>4&255),new Uint8Array(l)}function qp(e){var t="",n=0,i,r,s=e.length,o=ro;for(i=0;i<s;i++)i%3===0&&i&&(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]),n=(n<<8)+e[i];return r=s%3,r===0?(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]):r===2?(t+=o[n>>10&63],t+=o[n>>4&63],t+=o[n<<2&63],t+=o[64]):r===1&&(t+=o[n>>2&63],t+=o[n<<4&63],t+=o[64],t+=o[64]),t}function Gp(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var jp=new $e("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Up,construct:Zp,predicate:Gp,represent:qp}),$p=Object.prototype.hasOwnProperty,Jp=Object.prototype.toString;function Qp(e){if(e===null)return!0;var t=[],n,i,r,s,o,l=e;for(n=0,i=l.length;n<i;n+=1){if(r=l[n],o=!1,Jp.call(r)!=="[object Object]")return!1;for(s in r)if($p.call(r,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function em(e){return e!==null?e:[]}var tm=new $e("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Qp,construct:em}),nm=Object.prototype.toString;function im(e){if(e===null)return!0;var t,n,i,r,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(i=o[t],nm.call(i)!=="[object Object]"||(r=Object.keys(i),r.length!==1))return!1;s[t]=[r[0],i[r[0]]]}return!0}function rm(e){if(e===null)return[];var t,n,i,r,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1)i=o[t],r=Object.keys(i),s[t]=[r[0],i[r[0]]];return s}var om=new $e("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:im,construct:rm}),sm=Object.prototype.hasOwnProperty;function lm(e){if(e===null)return!0;var t,n=e;for(t in n)if(sm.call(n,t)&&n[t]!==null)return!1;return!0}function am(e){return e!==null?e:{}}var cm=new $e("tag:yaml.org,2002:set",{kind:"mapping",resolve:lm,construct:am}),um=Fp.extend({implicit:[Xp,Kp],explicit:[jp,tm,om,cm]}),Rt=Object.prototype.hasOwnProperty,Ei=1,oa=2,sa=3,Si=4,cr=1,dm=2,_s=3,fm=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,hm=/[\x85\u2028\u2029]/,gm=/[,\[\]\{\}]/,la=/^(?:!|!!|![a-z\-]+!)$/i,aa=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ks(e){return Object.prototype.toString.call(e)}function bt(e){return e===10||e===13}function qt(e){return e===9||e===32}function it(e){return e===9||e===32||e===10||e===13}function sn(e){return e===44||e===91||e===93||e===123||e===125}function pm(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function mm(e){return e===120?2:e===117?4:e===85?8:0}function ym(e){return 48<=e&&e<=57?e-48:-1}function Es(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function vm(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var ca=new Array(256),ua=new Array(256);for(var tn=0;tn<256;tn++)ca[tn]=Es(tn)?1:0,ua[tn]=Es(tn);function xm(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||um,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function da(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=op(n),new Ct(t,n)}function ee(e,t){throw da(e,t)}function Ci(e,t){e.onWarning&&e.onWarning.call(null,da(e,t))}var Ss={YAML:function(t,n,i){var r,s,o;t.version!==null&&ee(t,"duplication of %YAML directive"),i.length!==1&&ee(t,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),r===null&&ee(t,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),o=parseInt(r[2],10),s!==1&&ee(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Ci(t,"unsupported YAML version of the document")},TAG:function(t,n,i){var r,s;i.length!==2&&ee(t,"TAG directive accepts exactly two arguments"),r=i[0],s=i[1],la.test(r)||ee(t,"ill-formed tag handle (first argument) of the TAG directive"),Rt.call(t.tagMap,r)&&ee(t,'there is a previously declared suffix for "'+r+'" tag handle'),aa.test(s)||ee(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{ee(t,"tag prefix is malformed: "+s)}t.tagMap[r]=s}};function Ht(e,t,n,i){var r,s,o,l;if(t<n){if(l=e.input.slice(t,n),i)for(r=0,s=l.length;r<s;r+=1)o=l.charCodeAt(r),o===9||32<=o&&o<=1114111||ee(e,"expected valid JSON character");else fm.test(l)&&ee(e,"the stream contains non-printable characters");e.result+=l}}function Cs(e,t,n,i){var r,s,o,l;for(Je.isObject(n)||ee(e,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(n),o=0,l=r.length;o<l;o+=1)s=r[o],Rt.call(t,s)||(t[s]=n[s],i[s]=!0)}function ln(e,t,n,i,r,s,o,l,a){var u,c;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),u=0,c=r.length;u<c;u+=1)Array.isArray(r[u])&&ee(e,"nested arrays are not supported inside keys"),typeof r=="object"&&ks(r[u])==="[object Object]"&&(r[u]="[object Object]");if(typeof r=="object"&&ks(r)==="[object Object]"&&(r="[object Object]"),r=String(r),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,c=s.length;u<c;u+=1)Cs(e,t,s[u],n);else Cs(e,t,s,n);else!e.json&&!Rt.call(n,r)&&Rt.call(t,r)&&(e.line=o||e.line,e.lineStart=l||e.lineStart,e.position=a||e.position,ee(e,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(t,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[r]=s,delete n[r];return t}function oo(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):ee(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Fe(e,t,n){for(var i=0,r=e.input.charCodeAt(e.position);r!==0;){for(;qt(r);)r===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(t&&r===35)do r=e.input.charCodeAt(++e.position);while(r!==10&&r!==13&&r!==0);if(bt(r))for(oo(e),r=e.input.charCodeAt(e.position),i++,e.lineIndent=0;r===32;)e.lineIndent++,r=e.input.charCodeAt(++e.position);else break}return n!==-1&&i!==0&&e.lineIndent<n&&Ci(e,"deficient indentation"),i}function Xi(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||it(n)))}function so(e,t){t===1?e.result+=" ":t>1&&(e.result+=Je.repeat(`
`,t-1))}function wm(e,t,n){var i,r,s,o,l,a,u,c,f=e.kind,d=e.result,g;if(g=e.input.charCodeAt(e.position),it(g)||sn(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(r=e.input.charCodeAt(e.position+1),it(r)||n&&sn(r)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,l=!1;g!==0;){if(g===58){if(r=e.input.charCodeAt(e.position+1),it(r)||n&&sn(r))break}else if(g===35){if(i=e.input.charCodeAt(e.position-1),it(i))break}else{if(e.position===e.lineStart&&Xi(e)||n&&sn(g))break;if(bt(g))if(a=e.line,u=e.lineStart,c=e.lineIndent,Fe(e,!1,-1),e.lineIndent>=t){l=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=a,e.lineStart=u,e.lineIndent=c;break}}l&&(Ht(e,s,o,!1),so(e,e.line-a),s=o=e.position,l=!1),qt(g)||(o=e.position+1),g=e.input.charCodeAt(++e.position)}return Ht(e,s,o,!1),e.result?!0:(e.kind=f,e.result=d,!1)}function bm(e,t){var n,i,r;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=r=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Ht(e,i,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)i=e.position,e.position++,r=e.position;else return!0;else bt(n)?(Ht(e,i,r,!0),so(e,Fe(e,!1,t)),i=r=e.position):e.position===e.lineStart&&Xi(e)?ee(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);ee(e,"unexpected end of the stream within a single quoted scalar")}function _m(e,t){var n,i,r,s,o,l;if(l=e.input.charCodeAt(e.position),l!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(l=e.input.charCodeAt(e.position))!==0;){if(l===34)return Ht(e,n,e.position,!0),e.position++,!0;if(l===92){if(Ht(e,n,e.position,!0),l=e.input.charCodeAt(++e.position),bt(l))Fe(e,!1,t);else if(l<256&&ca[l])e.result+=ua[l],e.position++;else if((o=mm(l))>0){for(r=o,s=0;r>0;r--)l=e.input.charCodeAt(++e.position),(o=pm(l))>=0?s=(s<<4)+o:ee(e,"expected hexadecimal character");e.result+=vm(s),e.position++}else ee(e,"unknown escape sequence");n=i=e.position}else bt(l)?(Ht(e,n,i,!0),so(e,Fe(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Xi(e)?ee(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}ee(e,"unexpected end of the stream within a double quoted scalar")}function km(e,t){var n=!0,i,r,s,o=e.tag,l,a=e.anchor,u,c,f,d,g,v=Object.create(null),x,y,b,m;if(m=e.input.charCodeAt(e.position),m===91)c=93,g=!1,l=[];else if(m===123)c=125,g=!0,l={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),m=e.input.charCodeAt(++e.position);m!==0;){if(Fe(e,!0,t),m=e.input.charCodeAt(e.position),m===c)return e.position++,e.tag=o,e.anchor=a,e.kind=g?"mapping":"sequence",e.result=l,!0;n?m===44&&ee(e,"expected the node content, but found ','"):ee(e,"missed comma between flow collection entries"),y=x=b=null,f=d=!1,m===63&&(u=e.input.charCodeAt(e.position+1),it(u)&&(f=d=!0,e.position++,Fe(e,!0,t))),i=e.line,r=e.lineStart,s=e.position,bn(e,t,Ei,!1,!0),y=e.tag,x=e.result,Fe(e,!0,t),m=e.input.charCodeAt(e.position),(d||e.line===i)&&m===58&&(f=!0,m=e.input.charCodeAt(++e.position),Fe(e,!0,t),bn(e,t,Ei,!1,!0),b=e.result),g?ln(e,l,v,y,x,b,i,r,s):f?l.push(ln(e,null,v,y,x,b,i,r,s)):l.push(x),Fe(e,!0,t),m=e.input.charCodeAt(e.position),m===44?(n=!0,m=e.input.charCodeAt(++e.position)):n=!1}ee(e,"unexpected end of the stream within a flow collection")}function Em(e,t){var n,i,r=cr,s=!1,o=!1,l=t,a=0,u=!1,c,f;if(f=e.input.charCodeAt(e.position),f===124)i=!1;else if(f===62)i=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)cr===r?r=f===43?_s:dm:ee(e,"repeat of a chomping mode identifier");else if((c=ym(f))>=0)c===0?ee(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ee(e,"repeat of an indentation width identifier"):(l=t+c-1,o=!0);else break;if(qt(f)){do f=e.input.charCodeAt(++e.position);while(qt(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!bt(f)&&f!==0)}for(;f!==0;){for(oo(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<l)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>l&&(l=e.lineIndent),bt(f)){a++;continue}if(e.lineIndent<l){r===_s?e.result+=Je.repeat(`
`,s?1+a:a):r===cr&&s&&(e.result+=`
`);break}for(i?qt(f)?(u=!0,e.result+=Je.repeat(`
`,s?1+a:a)):u?(u=!1,e.result+=Je.repeat(`
`,a+1)):a===0?s&&(e.result+=" "):e.result+=Je.repeat(`
`,a):e.result+=Je.repeat(`
`,s?1+a:a),s=!0,o=!0,a=0,n=e.position;!bt(f)&&f!==0;)f=e.input.charCodeAt(++e.position);Ht(e,n,e.position,!1)}return!0}function As(e,t){var n,i=e.tag,r=e.anchor,s=[],o,l=!1,a;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),a=e.input.charCodeAt(e.position);a!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ee(e,"tab characters must not be used in indentation")),!(a!==45||(o=e.input.charCodeAt(e.position+1),!it(o))));){if(l=!0,e.position++,Fe(e,!0,-1)&&e.lineIndent<=t){s.push(null),a=e.input.charCodeAt(e.position);continue}if(n=e.line,bn(e,t,sa,!1,!0),s.push(e.result),Fe(e,!0,-1),a=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&a!==0)ee(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return l?(e.tag=i,e.anchor=r,e.kind="sequence",e.result=s,!0):!1}function Sm(e,t,n){var i,r,s,o,l,a,u=e.tag,c=e.anchor,f={},d=Object.create(null),g=null,v=null,x=null,y=!1,b=!1,m;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),m=e.input.charCodeAt(e.position);m!==0;){if(!y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ee(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),s=e.line,(m===63||m===58)&&it(i))m===63?(y&&(ln(e,f,d,g,v,null,o,l,a),g=v=x=null),b=!0,y=!0,r=!0):y?(y=!1,r=!0):ee(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,m=i;else{if(o=e.line,l=e.lineStart,a=e.position,!bn(e,n,oa,!1,!0))break;if(e.line===s){for(m=e.input.charCodeAt(e.position);qt(m);)m=e.input.charCodeAt(++e.position);if(m===58)m=e.input.charCodeAt(++e.position),it(m)||ee(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(ln(e,f,d,g,v,null,o,l,a),g=v=x=null),b=!0,y=!1,r=!1,g=e.tag,v=e.result;else if(b)ee(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=c,!0}else if(b)ee(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=c,!0}if((e.line===s||e.lineIndent>t)&&(y&&(o=e.line,l=e.lineStart,a=e.position),bn(e,t,Si,!0,r)&&(y?v=e.result:x=e.result),y||(ln(e,f,d,g,v,x,o,l,a),g=v=x=null),Fe(e,!0,-1),m=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&m!==0)ee(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&ln(e,f,d,g,v,null,o,l,a),b&&(e.tag=u,e.anchor=c,e.kind="mapping",e.result=f),b}function Cm(e){var t,n=!1,i=!1,r,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&ee(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(n=!0,o=e.input.charCodeAt(++e.position)):o===33?(i=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",t=e.position,n){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):ee(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!it(o);)o===33&&(i?ee(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),la.test(r)||ee(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),gm.test(s)&&ee(e,"tag suffix cannot contain flow indicator characters")}s&&!aa.test(s)&&ee(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{ee(e,"tag name is malformed: "+s)}return n?e.tag=s:Rt.call(e.tagMap,r)?e.tag=e.tagMap[r]+s:r==="!"?e.tag="!"+s:r==="!!"?e.tag="tag:yaml.org,2002:"+s:ee(e,'undeclared tag handle "'+r+'"'),!0}function Am(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&ee(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!it(n)&&!sn(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&ee(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Nm(e){var t,n,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!it(i)&&!sn(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&ee(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Rt.call(e.anchorMap,n)||ee(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Fe(e,!0,-1),!0}function bn(e,t,n,i,r){var s,o,l,a=1,u=!1,c=!1,f,d,g,v,x,y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=l=Si===n||sa===n,i&&Fe(e,!0,-1)&&(u=!0,e.lineIndent>t?a=1:e.lineIndent===t?a=0:e.lineIndent<t&&(a=-1)),a===1)for(;Cm(e)||Am(e);)Fe(e,!0,-1)?(u=!0,l=s,e.lineIndent>t?a=1:e.lineIndent===t?a=0:e.lineIndent<t&&(a=-1)):l=!1;if(l&&(l=u||r),(a===1||Si===n)&&(Ei===n||oa===n?x=t:x=t+1,y=e.position-e.lineStart,a===1?l&&(As(e,y)||Sm(e,y,x))||km(e,x)?c=!0:(o&&Em(e,x)||bm(e,x)||_m(e,x)?c=!0:Nm(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&ee(e,"alias node should not have any properties")):wm(e,x,Ei===n)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):a===0&&(c=l&&As(e,y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&ee(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,d=e.implicitTypes.length;f<d;f+=1)if(v=e.implicitTypes[f],v.resolve(e.result)){e.result=v.construct(e.result),e.tag=v.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Rt.call(e.typeMap[e.kind||"fallback"],e.tag))v=e.typeMap[e.kind||"fallback"][e.tag];else for(v=null,g=e.typeMap.multi[e.kind||"fallback"],f=0,d=g.length;f<d;f+=1)if(e.tag.slice(0,g[f].tag.length)===g[f].tag){v=g[f];break}v||ee(e,"unknown tag !<"+e.tag+">"),e.result!==null&&v.kind!==e.kind&&ee(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+v.kind+'", not "'+e.kind+'"'),v.resolve(e.result,e.tag)?(e.result=v.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ee(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function Mm(e){var t=e.position,n,i,r,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Fe(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!it(o);)o=e.input.charCodeAt(++e.position);for(i=e.input.slice(n,e.position),r=[],i.length<1&&ee(e,"directive name must not be less than one character in length");o!==0;){for(;qt(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!bt(o));break}if(bt(o))break;for(n=e.position;o!==0&&!it(o);)o=e.input.charCodeAt(++e.position);r.push(e.input.slice(n,e.position))}o!==0&&oo(e),Rt.call(Ss,i)?Ss[i](e,i,r):Ci(e,'unknown document directive "'+i+'"')}if(Fe(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Fe(e,!0,-1)):s&&ee(e,"directives end mark is expected"),bn(e,e.lineIndent-1,Si,!1,!0),Fe(e,!0,-1),e.checkLineBreaks&&hm.test(e.input.slice(t,e.position))&&Ci(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Xi(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Fe(e,!0,-1));return}if(e.position<e.length-1)ee(e,"end of the stream or a document separator is expected");else return}function fa(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new xm(e,t),i=e.indexOf("\0");for(i!==-1&&(n.position=i,ee(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Mm(n);return n.documents}function Tm(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var i=fa(e,n);if(typeof t!="function")return i;for(var r=0,s=i.length;r<s;r+=1)t(i[r])}function Pm(e,t){var n=fa(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new Ct("expected a single document in the stream, but found more")}}var Im=Tm,Om=Pm,zm={loadAll:Im,load:Om},Dm=zm.load;let zr="";ea.subscribe(e=>zr=e);async function Ns(e){console.log("base",zr,e);const t=new URL(e,zr).toString();try{const n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch YAML from ${t}`);const i=await n.text();return Dm(i)}catch(n){throw console.error(`Error fetching or parsing YAML from ${t}:`,n),n}}function Lm(e,t={}){if(!e)return;const n=window.innerWidth,i=window.innerHeight,r=t.centerX??n/2,s=t.centerY??i/2,o=t.scale??2;return{x:r+e.x*o,y:s-e.y*o}}let ha={width:900,height:600};io.subscribe(e=>ha=e);function Hm(e){const n=Math.max(900,e.width)-50,i=Math.max(600,e.height)-50;return`width: ${n}px; height: ${i}px;`}function Rm(e,t,n,i,r,s,o,l){var g,v;if(!i)throw new Error("no concept component",i);const{name:a,icon:u,description:c,...f}=t,d=s&&Object.keys(f).length>0;return{id:e,type:d?"group":((g=i[e])==null?void 0:g.type)||e,position:Lm((v=i[e])==null?void 0:v.position)||{x:0,y:0},data:{label:u?`${u} ${a}`:a,description:c||"",icon:u},...d?{style:Hm(o),extent:"parent"}:{},...l?{parentId:n,extent:"parent"}:{},level:r}}const Fm=(e,t,n)=>{const i=[],r=[],{concept_component:s}=t;let o=!0,l=!0;Pr.subscribe(f=>{o=f}),Ir.subscribe(f=>{l=f});const a=(f,d,g,v=0,x=!1)=>{if(typeof d!="object"||d===null)return;const y=Rm(f,d,g,s,v,o,ha,x);i.push(y);const b=y.type==="group";if(l&&!o){const m={id:`${g}-${f}`,type:"default",source:g,target:f,label:d.description,animated:!1};r.push(m),console.log("newEdge-pc",m)}for(const m in d)m!=="relationships"&&a(m,d[m],f,v+1,b)},u=(f,d)=>{if(!(typeof d!="object"||d===null)){d.relationships&&d.relationships.forEach(g=>{r.push({id:`${f}-${g.end}`,type:"default",source:f,target:g.end,label:g.description,animated:!0})});for(const g in d)u(g,d[g])}},c=()=>{const f={},d=(x,y)=>{f[x]===void 0&&(f[x]=y,r.filter(b=>b.source===x).forEach(b=>d(b.target,y+1)))};i.filter(x=>!r.some(y=>y.target===x.id)).forEach(x=>d(x.id,0));const v={};i.forEach((x,y)=>{if(!x.position){const b=f[x.id]||x.level,m=(v[b]||x.level)*300,S=b*100+y*50;x.position={x:m,y:S},v[b]=(v[b]||0)+1}})};return a("root",e,void 0),u("root",e),c(),{nodes:i,edges:r}};io.subscribe(e=>e);const ga=Q([]),pa=Q([]);async function ur(e,t,n={}){const i=Fm(e,{...t,groups:n.groups,showRelationships:n.showRelationships});ga.set(i.nodes),pa.set(i.edges)}const Ai=Q([{sender:"Agent1",content:"Hello, how are you?"}]);function ei(e,t,n){for(let i=0;i<n.length;i++)e.setUint8(t+i,n.charCodeAt(i))}function Dr(e,t){const r=t*1*4,s=1*(32/8),o=new ArrayBuffer(44+e.byteLength),l=new DataView(o);return ei(l,0,"RIFF"),l.setUint32(4,36+e.byteLength,!0),ei(l,8,"WAVE"),ei(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,3,!0),l.setUint16(22,1,!0),l.setUint32(24,t,!0),l.setUint32(28,r,!0),l.setUint16(32,s,!0),l.setUint16(34,32,!0),ei(l,36,"data"),l.setUint32(40,e.byteLength,!0),new Float32Array(o,44).set(e),new Blob([o],{type:"audio/wav"})}var Ym=ge('<button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Play</button> <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Download</button>',1);function Bm(e,t){ue(t,!1);let n=p(t,"audioData",8),i=p(t,"samplingRate",8),r;Ft(()=>{r=new(window.AudioContext||window.webkitAudioContext)});function s(){const c=r.createBuffer(1,n().length,i());c.getChannelData(0).set(n());const d=r.createBufferSource();d.buffer=c,d.connect(r.destination),d.start()}function o(){if(!n()||!i())return;const c=Dr(n(),i()),f=URL.createObjectURL(c),d=document.createElement("a");d.href=f,d.download="audio.wav",d.click(),URL.revokeObjectURL(f)}fe();var l=Ym(),a=Ne(l),u=ie(a,2);he("click",a,s),he("click",u,o),U(e,l),de()}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ma=Symbol("Comlink.proxy"),Vm=Symbol("Comlink.endpoint"),Xm=Symbol("Comlink.releaseProxy"),dr=Symbol("Comlink.finalizer"),ai=Symbol("Comlink.thrown"),ya=e=>typeof e=="object"&&e!==null||typeof e=="function",Wm={canHandle:e=>ya(e)&&e[ma],serialize(e){const{port1:t,port2:n}=new MessageChannel;return xa(e,t),[n,[n]]},deserialize(e){return e.start(),ba(e)}},Km={canHandle:e=>ya(e)&&ai in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},va=new Map([["proxy",Wm],["throw",Km]]);function Um(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function xa(e,t=globalThis,n=["*"]){t.addEventListener("message",function i(r){if(!r||!r.data)return;if(!Um(n,r.origin)){console.warn(`Invalid origin '${r.origin}' for comlink proxy`);return}const{id:s,type:o,path:l}=Object.assign({path:[]},r.data),a=(r.data.argumentList||[]).map(Wt);let u;try{const c=l.slice(0,-1).reduce((d,g)=>d[g],e),f=l.reduce((d,g)=>d[g],e);switch(o){case"GET":u=f;break;case"SET":c[l.slice(-1)[0]]=Wt(r.data.value),u=!0;break;case"APPLY":u=f.apply(c,a);break;case"CONSTRUCT":{const d=new f(...a);u=Jm(d)}break;case"ENDPOINT":{const{port1:d,port2:g}=new MessageChannel;xa(e,g),u=$m(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[ai]:0}}Promise.resolve(u).catch(c=>({value:c,[ai]:0})).then(c=>{const[f,d]=Ti(c);t.postMessage(Object.assign(Object.assign({},f),{id:s}),d),o==="RELEASE"&&(t.removeEventListener("message",i),wa(t),dr in e&&typeof e[dr]=="function"&&e[dr]())}).catch(c=>{const[f,d]=Ti({value:new TypeError("Unserializable return value"),[ai]:0});t.postMessage(Object.assign(Object.assign({},f),{id:s}),d)})}),t.start&&t.start()}function Zm(e){return e.constructor.name==="MessagePort"}function wa(e){Zm(e)&&e.close()}function ba(e,t){const n=new Map;return e.addEventListener("message",function(r){const{data:s}=r;if(!s||!s.id)return;const o=n.get(s.id);if(o)try{o(s)}finally{n.delete(s.id)}}),Lr(e,n,[],t)}function ti(e){if(e)throw new Error("Proxy has been released and is not useable")}function _a(e){return nn(e,new Map,{type:"RELEASE"}).then(()=>{wa(e)})}const Ni=new WeakMap,Mi="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(Ni.get(e)||0)-1;Ni.set(e,t),t===0&&_a(e)});function qm(e,t){const n=(Ni.get(t)||0)+1;Ni.set(t,n),Mi&&Mi.register(e,t,e)}function Gm(e){Mi&&Mi.unregister(e)}function Lr(e,t,n=[],i=function(){}){let r=!1;const s=new Proxy(i,{get(o,l){if(ti(r),l===Xm)return()=>{Gm(s),_a(e),t.clear(),r=!0};if(l==="then"){if(n.length===0)return{then:()=>s};const a=nn(e,t,{type:"GET",path:n.map(u=>u.toString())}).then(Wt);return a.then.bind(a)}return Lr(e,t,[...n,l])},set(o,l,a){ti(r);const[u,c]=Ti(a);return nn(e,t,{type:"SET",path:[...n,l].map(f=>f.toString()),value:u},c).then(Wt)},apply(o,l,a){ti(r);const u=n[n.length-1];if(u===Vm)return nn(e,t,{type:"ENDPOINT"}).then(Wt);if(u==="bind")return Lr(e,t,n.slice(0,-1));const[c,f]=Ms(a);return nn(e,t,{type:"APPLY",path:n.map(d=>d.toString()),argumentList:c},f).then(Wt)},construct(o,l){ti(r);const[a,u]=Ms(l);return nn(e,t,{type:"CONSTRUCT",path:n.map(c=>c.toString()),argumentList:a},u).then(Wt)}});return qm(s,e),s}function jm(e){return Array.prototype.concat.apply([],e)}function Ms(e){const t=e.map(Ti);return[t.map(n=>n[0]),jm(t.map(n=>n[1]))]}const ka=new WeakMap;function $m(e,t){return ka.set(e,t),e}function Jm(e){return Object.assign(e,{[ma]:!0})}function Ti(e){for(const[t,n]of va)if(n.canHandle(e)){const[i,r]=n.serialize(e);return[{type:"HANDLER",name:t,value:i},r]}return[{type:"RAW",value:e},ka.get(e)||[]]}function Wt(e){switch(e.type){case"HANDLER":return va.get(e.name).deserialize(e.value);case"RAW":return e.value}}function nn(e,t,n,i){return new Promise(r=>{const s=Qm();t.set(s,r),e.start&&e.start(),e.postMessage(Object.assign({id:s},n),i)})}function Qm(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let fr=null,Ts=null;function Ea(){return fr||(fr=new Worker(new URL(""+new URL("../workers/hfworker-Bh7VPUfc.js",import.meta.url).href,import.meta.url),{type:"module"}),Ts=ba(fr)),Ts}var ey=ge('<div class="flex items-center space-x-4 p-4 bg-gray-100 rounded-lg shadow-md"><textarea placeholder="Enter your prompt here" class="px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" rows="1" style="resize: none; overflow: hidden;"></textarea> <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">chat</button></div>'),ty=ge('<div class="mt-6 p-4 bg-white border border-gray-200 rounded-lg shadow-md"><h3 class="text-lg font-semibold text-gray-800">Message:</h3> <p class="mt-2 text-gray-700"> </p> <button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">hf-to-audio</button></div>'),ny=ge('<div class="mt-6 p-4 bg-white border border-gray-200 rounded-lg shadow-md"><!></div>'),iy=ge("<!> <!> <!>",1),ry=ge('<div><div class="node bg-slate-300 p-4 rounded-md text-gray-800"><div> </div> <!> <!></div> <div><!></div></div>');function Ps(e,t){ue(t,!1);const n=Ea();let i=p(t,"data",8),r=V(""),s=V(""),o=V(!0),l=V();async function a(_){const E={role:i().label,goal:i().description,prompt:_.prompt},C=await n.ask(E);return console.log("response",C),C}async function u(){console.log("handleInvoke",i()),F(o,!1),Ai.update(E=>[...E,{sender:"user",content:`@${i().label} ${h(r)}`}]);const _=await a({prompt:h(r)});Ai.update(E=>[...E,{sender:i().label,content:_}]),F(s,_)}async function c(){F(l,await n.speech(h(s)))}Ft(()=>{if(h(o)){const _=document.querySelector("input");_&&_.focus()}});function f(_){_.key==="Enter"&&!_.ctrlKey&&(_.preventDefault(),F(r,h(r)+`
`)),_.key==="Enter"&&_.ctrlKey&&(_.preventDefault(),u())}fe();var d=ry(),g=ae(d),v=ae(g),x=ae(v,!0);se(v);var y=ie(v,2);wn(y,{type:"target",get position(){return le.Left}});var b=ie(y,2);wn(b,{type:"source",get position(){return le.Right}}),se(g);var m=ie(g,2),S=ae(m);U0(S,{children:(_,E)=>{var C=iy(),M=Ne(C);Se(M,()=>h(o),N=>{var I=ey(),T=ae(I);Vs(T);var P=ie(T,2);se(I),Gs(T,()=>h(r),w=>F(r,w)),he("keydown",T,f),he("click",P,u),U(N,I)});var O=ie(M,2);Se(O,()=>h(s),N=>{var I=ty(),T=ie(ae(I),2),P=ae(T,!0);se(T);var w=ie(T,2);se(I),xe(()=>xt(P,h(s))),he("click",w,c),U(N,I)});var H=ie(O,2);Se(H,()=>h(l),N=>{var I=ny(),T=ae(I);Bm(T,{get audioData(){return h(l).audio},get samplingRate(){return h(l).sampling_rate}}),se(I),U(N,I)}),U(_,C)},$$slots:{default:!0}}),se(m),se(d),xe(()=>xt(x,i().label)),U(e,d),de()}async function oy(e){const t={};for(const[n,i]of Object.entries(e.concept_component))try{i.component?(t[n]=(await fc(async()=>{const{default:r}=await import(`../components/brain/${i.component}`);return{default:r}},[],import.meta.url)).default,console.log("found component",n,i.component)):t[n]=Ps}catch(r){console.log("error",r),t[n]=Ps}return t}async function sy(e){try{return await oy(e)}catch(t){throw console.error("Error loading node types:",t),t}}function ly(e,t){const n=[];let i=0;const r=e.length;if(r<t)return[e];for(;i<r;){let s=i+t;s>r&&(s=r);let o=e.lastIndexOf(" ",s-1);o<=i&&(o=s);const l=e.substring(i,o);n.push(l),i=o+1}return n}const ay=10;function cy(e,t){return e.length*(1/t)/ay}const hr=[];async function uy(e,t,n={}){if(!("speechSynthesis"in window))return Promise.reject(new Error("Speech Synthesis not supported in this browser."));if(typeof e!="string"||e.trim().length===0)return Promise.reject(new Error("Invalid message."));let{rate:i=.8,chunkSize:r=180,maxRetries:s=3}=n;const o=ly(e,r);return hr.push(...o),s=o.length,new Promise((l,a)=>{let u=0;function c(){if(hr.length===0){l();return}const f=hr.shift(),d=new SpeechSynthesisUtterance(f);d.rate=i;const g=setTimeout(()=>{console.warn("Fallback Timeout triggered for:",f),x(new Error("Timeout fallback"))},Math.max(5e3,cy(f,i)*1e3)),v=setInterval(()=>{speechSynthesis.speaking||(clearInterval(v),speechSynthesis.speak(d))},500);d.onend=()=>{console.log("Finished chunk:",f),clearTimeout(g),clearInterval(v),c()},d.onerror=y=>{console.error("Error speaking chunk:",f,y),clearTimeout(g),clearInterval(v),x(new Error(y.error||"Unknown SpeechSynthesis error"))};function x(y){u<s?(console.warn(`Retrying chunk (${u+1}/${s}), state.speaking:`,speechSynthesis.speaking),u++,speechSynthesis.pause(),speechSynthesis.cancel(),speechSynthesis.resume(),c()):(console.error("Max retries reached. Rejecting."),a(y))}try{speechSynthesis.speak(d)}catch(y){console.error("Speech synthesis failed:",y),x(y)}}speechSynthesis.cancel(),c()})}var dy=ge('<li class="flex p-2 bg-gray-100 rounded message-container svelte-jmerrv"><div><strong class="font-semibold"> </strong> </div> <div class="flex space-x-1 action-btn svelte-jmerrv"><button title="Speak"></button> <button title="Download"></button></div></li>'),fy=ge('<div class="px-4 py-2 hover:bg-gray-100 cursor-pointer mention-highlight svelte-jmerrv"> </div>'),hy=ge('<div class="absolute z-10 w-full bg-white border border-gray-200 rounded shadow"></div>'),gy=ge('<div class="fixed top-16 right-0 w-96 bg-white p-4 border-l border-gray-200 z-50"><h2 class="text-lg font-bold mb-2">Chat Messages</h2> <div id="chat-messages" class="max-h-96 overflow-y-auto mb-4"><ul class="space-y-2"></ul></div> <div class="relative"><!> <textarea rows="3" class="textarea svelte-jmerrv" placeholder="Type a message... (Ctrl+Enter to send)"></textarea></div> <button class="mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Send</button> <button class="mt-4 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">Download All Messages as Audio</button> <button class="mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Close</button></div>');function py(e,t){ue(t,!1);const n=Ea();let i=V([]),r=p(t,"showPanel",12),s=new Set,o=V([]),l=V(""),a=V(!1);async function u(N){N.content.trim()!==""?await uy(`${N.sender}: ${N.content}`):console.warn("No message to speak.")}async function c(N){try{const I=window.URL.createObjectURL(N),T=document.createElement("a");T.href=I,T.download="titlex-message.mp3",document.body.appendChild(T),T.click(),document.body.removeChild(T)}catch(I){console.error("Failed to download audio:",I)}}async function f(N){try{const I=await n.speech(N.content),T=Dr(I.audio,I.sampling_rate);await c(T)}catch(I){console.error("Failed to download audio:",I)}}async function d(){try{const N=h(i).map(P=>`${P.sender}: ${P.content}`).join(`
`);console.log("text.length",N.length);const I=await n.speech(N),T=Dr(I.audio,I.sampling_rate);await c(T)}catch(N){console.error("Failed to download conversation audio:",N)}}function g(N){F(l,h(l).replace(/@\w*$/,`@${N} `)),F(a,!1)}function v(){h(l).trim()!==""&&(Ai.update(N=>[...N,{sender:"User",content:h(l)}]),F(l,""),setTimeout(()=>{const N=document.getElementById("chat-messages");N==null||N.scrollTo(0,N.scrollHeight)},0))}function x(N){const I=N.target.value;if(F(l,I),I.includes("@")){const T=I.match(/@(\w*)$/);if(T){const P=T[1];F(a,h(o).some(w=>w.startsWith(P)))}else F(a,!1)}else F(a,!1)}function y(N){N.key==="Enter"&&N.ctrlKey&&(N.preventDefault(),v())}Ft(()=>{Ai.subscribe(N=>{F(i,N),s=new Set(N.map(I=>I.sender)),F(o,Array.from(s))})}),fe();var b=gy(),m=ie(ae(b),2),S=ae(m);gn(S,5,()=>h(i),Mo,(N,I)=>{var T=dy(),P=ae(T),w=ae(P),D=ae(w);se(w);var k=ie(w);se(P);var A=ie(P,2),z=ae(A),L=ie(z,2);se(A),se(T),xe(()=>{xt(D,`${h(I).sender??""}:`),xt(k,` ${h(I).content??""}`)}),he("click",z,()=>u(h(I))),he("click",L,()=>f(h(I))),U(N,T)}),se(S),se(m);var _=ie(m,2),E=ae(_);Se(E,()=>h(a),N=>{var I=hy();gn(I,5,()=>h(o),Mo,(T,P)=>{var w=fy(),D=ae(w);se(w),xe(()=>xt(D,`@${h(P)??""}`)),he("click",w,()=>g(h(P))),U(T,w)}),se(I),U(N,I)});var C=ie(E,2);Vs(C),se(_);var M=ie(_,2),O=ie(M,2),H=ie(O,2);se(b),Gs(C,()=>h(l),N=>F(l,N)),he("input",C,x),he("keydown",C,y),he("click",M,v),he("click",O,d),he("click",H,()=>r(!1)),qs(3,b,()=>Js),U(e,b),de()}var my=ge("<!> <!> <!>",1),yy=ge("<!> <!> <!>",1),vy=ge("<p>Loading node types...</p>"),xy=ge('<div class="panel svelte-69d2lt"><!></div>'),wy=ge('<div class="w-full h-screen" style="height:100vh;"><!> <!></div>');function by(e,t){ue(t,!1);const n=Be(),i=()=>X(Pr,"$groups",n),r=()=>X(Ir,"$showRelationships",n);let s,o,l=V(!1),a=V({});function u(x){console.log(`Node description: ${x.detail.node.data.description}`)}Ft(async()=>{s=await Ns("brain.yaml"),o=await Ns("nodeTypes.yaml");try{await ur(s,o),F(a,await sy(o))}catch(x){console.error("Initialization error:",x)}});function c(){Pr.set(!i()),console.log("Groups state:",i()),ur(s,o,{groups:i(),showRelationships:r()})}function f(){Ir.set(!r()),console.log("Show Relationships state:",r()),ur(s,o,{groups:i(),showRelationships:r()})}fe();var d=wy(),g=ae(d);Se(g,()=>Object.keys(h(a)).length>0,x=>{m0(x,{nodes:ga,edges:pa,get nodeTypes(){return h(a)},fitView:!0,autoPanOnNodeDrag:!1,attributionPosition:"top-right",$$events:{nodeclick:u},children:(y,b)=>{var m=yy(),S=Ne(m);H0(S,{bgColor:"rgba(255, 240, 137, 0.25)",get variant(){return Tt.Dots}});var _=ie(S,2);T0(_,{children:(C,M)=>{var O=my(),H=Ne(O);Ut(H,{$$events:{click:()=>F(l,!h(l))},children:(T,P)=>{an();var w=ni("");U(T,w)},$$slots:{default:!0}});var N=ie(H,2);Ut(N,{$$events:{click:c},children:(T,P)=>{an();var w=ni("");U(T,w)},$$slots:{default:!0}});var I=ie(N,2);Ut(I,{$$events:{click:f},children:(T,P)=>{an();var w=ni("");U(T,w)},$$slots:{default:!0}}),U(C,O)},$$slots:{default:!0}});var E=ie(_,2);X0(E,{nodeStrokeWidth:3}),U(y,m)},$$slots:{default:!0}})},x=>{var y=vy();U(x,y)});var v=ie(g,2);Se(v,()=>h(l),x=>{var y=xy(),b=ae(y);py(b,{get showPanel(){return h(l)},set showPanel(m){F(l,m)},$$legacy:!0}),se(y),qs(3,y,()=>Js),U(x,y)}),se(d),U(e,d),de()}var _y=ge('<!> <div class="bg-slate-100"><!></div>',1);function Ly(e,t){var n=_y(),i=Ne(n);Se(i,()=>$s,o=>{var l=st(),a=Ne(l);je(a,t,"default",{}),U(o,l)});var r=ie(i,2),s=ae(r);by(s,{}),se(r),U(e,n)}export{Ly as component};
