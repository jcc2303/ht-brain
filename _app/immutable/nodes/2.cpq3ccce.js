var Rs=Object.defineProperty;var Wr=e=>{throw TypeError(e)};var Ys=(e,t,n)=>t in e?Rs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Kr=(e,t,n)=>Ys(e,typeof t!="symbol"?t+"":t,n),Ii=(e,t,n)=>t.has(e)||Wr("Cannot "+n);var kt=(e,t,n)=>(Ii(e,t,"read from private field"),n?n.call(e):t.get(e)),yn=(e,t,n)=>t.has(e)?Wr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),zi=(e,t,n,i)=>(Ii(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Zr=(e,t,n)=>(Ii(e,t,"access private method"),n);import{a as Q,t as be,d as jo,n as Fe,c as lt}from"../chunks/disclose-version.DoY_IjgQ.js";import"../chunks/legacy.ohuXAy7x.js";import{F as Jo,h as ot,A as Oi,v as Fs,a as Bs,a8 as Vs,H as Qo,R as $o,ac as Xs,ad as qr,M as Di,z as vn,av as Gn,a9 as el,U as tl,aa as Ws,x as Gr,aw as dr,ax as Ur,ay as fr,az as Ks,Q as Zs,aA as qs,aB as Gs,aC as nl,w as Us,N as js,D as Js,aD as Qs,V as $s,a2 as jr,aE as ea,K as ta,ae as vt,d as il,af as na,f as Y,s as ia,aF as ra,a7 as Jr,aG as oa,p as ae,aH as En,aI as q,aJ as Ke,m as Ee,o as we,t as pe,l as ce,g as d,W as X,aK as K,ar as ne,k as Te,q as xe,aL as On,aM as $n,i as Qr,aN as ct,aO as la}from"../chunks/runtime.DpzR_POb.js";import{p,l as De,i as Oe,o as Dn,d as vi,b as hr,e as rl,c as ol,s as Jt}from"../chunks/index-client.BIX1smmM.js";import{s as je,a as sa}from"../chunks/slot.Cyg2C_hG.js";import{i as ue}from"../chunks/lifecycle.CtVDq1OD.js";import{g as O,w as ee,r as dt,d as tn}from"../chunks/index.B3hEQ4Ky.js";import{i as aa,d as ca,e as ua,n as da,f as fa,s as Be,g as Se,b as V,a as gn,j as ei,k as ha}from"../chunks/store.DxA5QPGO.js";const ga=!0;function pa(e,t){if(t){const n=document.body;e.autofocus=!0,Jo(()=>{document.activeElement===n&&e.focus()})}}function ma(e,t,n,i){for(var r=[],l=t.length,o=0;o<l;o++)Ks(t[o].e,r,!0);var s=l>0&&r.length===0&&n!==null;if(s){var a=n.parentNode;Zs(a),a.append(n),i.clear(),Pt(e,t[0].prev,t[l-1].next)}qs(r,()=>{for(var u=0;u<l;u++){var c=t[u];s||(i.delete(c.k),Pt(e,c.prev,c.next)),Gs(c.e,!s)}})}function xi(e,t,n,i,r,l=null){var o=e,s={flags:t,items:new Map,first:null},a=(t&nl)!==0;if(a){var u=e;o=ot?Oi(Us(u)):u.appendChild(Fs())}ot&&Bs();var c=null,h=!1;Vs(()=>{var f=n(),g=Qo(f)?f:f==null?[]:$o(f),y=g.length;if(h&&y===0)return;h=y===0;let k=!1;if(ot){var v=o.data===Xs;v!==(y===0)&&(o=qr(),Oi(o),Di(!1),k=!0)}if(ot){for(var _=null,m,C=0;C<y;C++){if(vn.nodeType===8&&vn.data===js){o=vn,k=!0,Di(!1);break}var b=g[C],E=i(b,C);m=ll(vn,s,_,null,b,E,C,r,t),s.items.set(E,m),_=m}y>0&&Oi(qr())}if(!ot){var A=Js;ya(g,s,o,r,t,(A.f&Gn)!==0,i)}l!==null&&(y===0?c?el(c):c=tl(()=>l(o)):c!==null&&Ws(c,()=>{c=null})),k&&Di(!0),n()}),ot&&(o=vn)}function ya(e,t,n,i,r,l,o){var x,P,w,S;var s=(r&Qs)!==0,a=(r&(dr|fr))!==0,u=e.length,c=t.items,h=t.first,f=h,g,y=null,k,v=[],_=[],m,C,b,E;if(s)for(E=0;E<u;E+=1)m=e[E],C=o(m,E),b=c.get(C),b!==void 0&&((x=b.a)==null||x.measure(),(k??(k=new Set)).add(b));for(E=0;E<u;E+=1){if(m=e[E],C=o(m,E),b=c.get(C),b===void 0){var A=f?f.e.nodes_start:n;y=ll(A,t,y,y===null?t.first:y.next,m,C,E,i,r),c.set(C,y),v=[],_=[],f=y.next;continue}if(a&&va(b,m,E,r),b.e.f&Gn&&(el(b.e),s&&((P=b.a)==null||P.unfix(),(k??(k=new Set)).delete(b))),b!==f){if(g!==void 0&&g.has(b)){if(v.length<_.length){var N=_[0],z;y=N.prev;var H=v[0],D=v[v.length-1];for(z=0;z<v.length;z+=1)$r(v[z],N,n);for(z=0;z<_.length;z+=1)g.delete(_[z]);Pt(t,H.prev,D.next),Pt(t,y,H),Pt(t,D,N),f=N,y=D,E-=1,v=[],_=[]}else g.delete(b),$r(b,f,n),Pt(t,b.prev,b.next),Pt(t,b,y===null?t.first:y.next),Pt(t,y,b),y=b;continue}for(v=[],_=[];f!==null&&f.k!==C;)(l||!(f.e.f&Gn))&&(g??(g=new Set)).add(f),_.push(f),f=f.next;if(f===null)continue;b=f}v.push(b),y=b,f=b.next}if(f!==null||g!==void 0){for(var R=g===void 0?[]:$o(g);f!==null;)(l||!(f.e.f&Gn))&&R.push(f),f=f.next;var L=R.length;if(L>0){var M=r&nl&&u===0?n:null;if(s){for(E=0;E<L;E+=1)(w=R[E].a)==null||w.measure();for(E=0;E<L;E+=1)(S=R[E].a)==null||S.fix()}ma(t,R,M,c)}}s&&Jo(()=>{var T;if(k!==void 0)for(b of k)(T=b.a)==null||T.apply()}),Gr.first=t.first&&t.first.e,Gr.last=y&&y.e}function va(e,t,n,i){i&dr&&Ur(e.v,t),i&fr?Ur(e.i,n):e.i=n}function ll(e,t,n,i,r,l,o,s,a){var u=(a&dr)!==0,c=(a&ea)===0,h=u?c?$s(r):jr(r):r,f=a&fr?jr(o):o,g={i:f,v:h,k:l,a:null,e:null,prev:n,next:i};try{return g.e=tl(()=>s(e,h,f),ot),g.e.prev=n&&n.e,g.e.next=i&&i.e,n===null?t.first=g:(n.next=g,n.e.next=g.e),i!==null&&(i.prev=g,i.e.prev=g.e),g}finally{}}function $r(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,l=e.e.nodes_start;l!==i;){var o=ta(l);r.before(l),l=o}}function Pt(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ue(e,t,n){vt(()=>{var i=il(()=>t(e,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var r=!1,l={};na(()=>{var o=n();Y(o),r&&ia(l,o)&&(l=o,i.update(o))}),r=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function J(e,t,n,i){var r=e.__attributes??(e.__attributes={});ot&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||r[t]!==(r[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[ra]=n),n==null?e.removeAttribute(t):typeof n!="string"&&sl(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function gr(e,t,n,i,r=!1,l=!1,o=!1){var s=t||{},a=e.tagName==="OPTION";for(var u in t)u in n||(n[u]=null);i!==void 0&&(n.class=n.class?n.class+" "+i:i);var c=sl(e),h=e.__attributes??(e.__attributes={});for(const v in n){let _=n[v];if(a&&v==="value"&&_==null){e.value=e.__value="",s[v]=_;continue}var f=s[v];if(_!==f){s[v]=_;var g=v[0]+v[1];if(g!=="$$"){if(g==="on"){const m={},C="$$"+v;let b=v.slice(2);var y=fa(b);if(aa(b)&&(b=b.slice(0,-7),m.capture=!0),!y&&f){if(_!=null)continue;e.removeEventListener(b,s[C],m),s[C]=null}if(_!=null)if(y)e[`__${b}`]=_,ua([b]);else{let E=function(A){s[v].call(this,A)};s[C]=ca(b,e,E,m)}}else if(v==="style"&&_!=null)e.style.cssText=_+"";else if(v==="autofocus")pa(e,!!_);else if(v==="__value"||v==="value"&&_!=null)e.value=e[v]=e.__value=_;else{var k=v;r||(k=da(k)),_==null&&!l?(h[v]=null,e.removeAttribute(v)):c.includes(k)&&(l||typeof _!="string")?e[k]=_:typeof _!="function"&&(ot&&(k==="src"||k==="href"||k==="srcset")||J(e,k,_))}v==="style"&&"__styles"in e&&(e.__styles={})}}}return s}var eo=new Map;function sl(e){var t=eo.get(e.nodeName);if(t)return t;eo.set(e.nodeName,t=[]);for(var n,i=Jr(e),r=Element.prototype;r!==i;){n=oa(i);for(var l in n)n[l].set&&t.push(l);i=Jr(i)}return t}function qt(e,t){var n=e.__className,i=cl(t);ot&&e.getAttribute("class")===i?e.__className=i:(n!==i||ot&&e.getAttribute("class")!==i)&&(i===""?e.removeAttribute("class"):e.setAttribute("class",i),e.__className=i)}function al(e,t){var n=e.__className,i=cl(t);ot&&e.className===i?e.__className=i:(n!==i||ot&&e.className!==i)&&(t==null?e.removeAttribute("class"):e.className=i,e.__className=i)}function cl(e){return e??""}function Ie(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function ze(e,t,n,i){var r=e.__styles??(e.__styles={});r[t]!==n&&(r[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}var zt,ln,zn,mi,ul;const yi=class yi{constructor(t){yn(this,mi);yn(this,zt,new WeakMap);yn(this,ln);yn(this,zn);zi(this,zn,t)}observe(t,n){var i=kt(this,zt).get(t)||new Set;return i.add(n),kt(this,zt).set(t,i),Zr(this,mi,ul).call(this).observe(t,kt(this,zn)),()=>{var r=kt(this,zt).get(t);r.delete(n),r.size===0&&(kt(this,zt).delete(t),kt(this,ln).unobserve(t))}}};zt=new WeakMap,ln=new WeakMap,zn=new WeakMap,mi=new WeakSet,ul=function(){return kt(this,ln)??zi(this,ln,new ResizeObserver(t=>{for(var n of t){yi.entries.set(n.target,n);for(var i of kt(this,zt).get(n.target)||[])i(n)}}))},Kr(yi,"entries",new WeakMap);let Gi=yi;var xa=new Gi({box:"border-box"});function to(e,t,n){var i=xa.observe(e,()=>n(e[t]));vt(()=>(il(()=>n(e[t])),i))}function ge(e,t){var l;var n=(l=e.$$events)==null?void 0:l[t.type],i=Qo(n)?n.slice():n==null?[]:[n];for(var r of i)r.call(this,t)}const wa=ga;function $e(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=$e(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var _a={value:()=>{}};function wi(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Un(n)}function Un(e){this._=e}function ba(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Un.prototype=wi.prototype={constructor:Un,on:function(e,t){var n=this._,i=ba(e+"",n),r,l=-1,o=i.length;if(arguments.length<2){for(;++l<o;)if((r=(e=i[l]).type)&&(r=ka(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<o;)if(r=(e=i[l]).type)n[r]=no(n[r],e.name,t);else if(t==null)for(r in n)n[r]=no(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Un(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,l;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],i=0,r=l.length;i<r;++i)l[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,l=i.length;r<l;++r)i[r].value.apply(t,n)}};function ka(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function no(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=_a,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ui="http://www.w3.org/1999/xhtml";const io={svg:"http://www.w3.org/2000/svg",xhtml:Ui,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _i(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),io.hasOwnProperty(t)?{space:io[t],local:e}:e}function Ea(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ui&&t.documentElement.namespaceURI===Ui?t.createElement(e):t.createElementNS(n,e)}}function Ca(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function dl(e){var t=_i(e);return(t.local?Ca:Ea)(t)}function Sa(){}function pr(e){return e==null?Sa:function(){return this.querySelector(e)}}function Aa(e){typeof e!="function"&&(e=pr(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var l=t[r],o=l.length,s=i[r]=new Array(o),a,u,c=0;c<o;++c)(a=l[c])&&(u=e.call(a,a.__data__,c,l))&&("__data__"in a&&(u.__data__=a.__data__),s[c]=u);return new st(i,this._parents)}function Na(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ma(){return[]}function fl(e){return e==null?Ma:function(){return this.querySelectorAll(e)}}function Ta(e){return function(){return Na(e.apply(this,arguments))}}function Pa(e){typeof e=="function"?e=Ta(e):e=fl(e);for(var t=this._groups,n=t.length,i=[],r=[],l=0;l<n;++l)for(var o=t[l],s=o.length,a,u=0;u<s;++u)(a=o[u])&&(i.push(e.call(a,a.__data__,u,o)),r.push(a));return new st(i,r)}function hl(e){return function(){return this.matches(e)}}function gl(e){return function(t){return t.matches(e)}}var Ia=Array.prototype.find;function za(e){return function(){return Ia.call(this.children,e)}}function Oa(){return this.firstElementChild}function Da(e){return this.select(e==null?Oa:za(typeof e=="function"?e:gl(e)))}var La=Array.prototype.filter;function Ha(){return Array.from(this.children)}function Ra(e){return function(){return La.call(this.children,e)}}function Ya(e){return this.selectAll(e==null?Ha:Ra(typeof e=="function"?e:gl(e)))}function Fa(e){typeof e!="function"&&(e=hl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var l=t[r],o=l.length,s=i[r]=[],a,u=0;u<o;++u)(a=l[u])&&e.call(a,a.__data__,u,l)&&s.push(a);return new st(i,this._parents)}function pl(e){return new Array(e.length)}function Ba(){return new st(this._enter||this._groups.map(pl),this._parents)}function ti(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ti.prototype={constructor:ti,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Va(e){return function(){return e}}function Xa(e,t,n,i,r,l){for(var o=0,s,a=t.length,u=l.length;o<u;++o)(s=t[o])?(s.__data__=l[o],i[o]=s):n[o]=new ti(e,l[o]);for(;o<a;++o)(s=t[o])&&(r[o]=s)}function Wa(e,t,n,i,r,l,o){var s,a,u=new Map,c=t.length,h=l.length,f=new Array(c),g;for(s=0;s<c;++s)(a=t[s])&&(f[s]=g=o.call(a,a.__data__,s,t)+"",u.has(g)?r[s]=a:u.set(g,a));for(s=0;s<h;++s)g=o.call(e,l[s],s,l)+"",(a=u.get(g))?(i[s]=a,a.__data__=l[s],u.delete(g)):n[s]=new ti(e,l[s]);for(s=0;s<c;++s)(a=t[s])&&u.get(f[s])===a&&(r[s]=a)}function Ka(e){return e.__data__}function Za(e,t){if(!arguments.length)return Array.from(this,Ka);var n=t?Wa:Xa,i=this._parents,r=this._groups;typeof e!="function"&&(e=Va(e));for(var l=r.length,o=new Array(l),s=new Array(l),a=new Array(l),u=0;u<l;++u){var c=i[u],h=r[u],f=h.length,g=qa(e.call(c,c&&c.__data__,u,i)),y=g.length,k=s[u]=new Array(y),v=o[u]=new Array(y),_=a[u]=new Array(f);n(c,h,k,v,_,g,t);for(var m=0,C=0,b,E;m<y;++m)if(b=k[m]){for(m>=C&&(C=m+1);!(E=v[C])&&++C<y;);b._next=E||null}}return o=new st(o,i),o._enter=s,o._exit=a,o}function qa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ga(){return new st(this._exit||this._groups.map(pl),this._parents)}function Ua(e,t,n){var i=this.enter(),r=this,l=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?l.remove():n(l),i&&r?i.merge(r).order():r}function ja(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,l=i.length,o=Math.min(r,l),s=new Array(r),a=0;a<o;++a)for(var u=n[a],c=i[a],h=u.length,f=s[a]=new Array(h),g,y=0;y<h;++y)(g=u[y]||c[y])&&(f[y]=g);for(;a<r;++a)s[a]=n[a];return new st(s,this._parents)}function Ja(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,l=i[r],o;--r>=0;)(o=i[r])&&(l&&o.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(o,l),l=o);return this}function Qa(e){e||(e=$a);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,i=n.length,r=new Array(i),l=0;l<i;++l){for(var o=n[l],s=o.length,a=r[l]=new Array(s),u,c=0;c<s;++c)(u=o[c])&&(a[c]=u);a.sort(t)}return new st(r,this._parents).order()}function $a(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ec(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function tc(){return Array.from(this)}function nc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,l=i.length;r<l;++r){var o=i[r];if(o)return o}return null}function ic(){let e=0;for(const t of this)++e;return e}function rc(){return!this.node()}function oc(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],l=0,o=r.length,s;l<o;++l)(s=r[l])&&e.call(s,s.__data__,l,r);return this}function lc(e){return function(){this.removeAttribute(e)}}function sc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ac(e,t){return function(){this.setAttribute(e,t)}}function cc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function uc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function dc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function fc(e,t){var n=_i(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?sc:lc:typeof t=="function"?n.local?dc:uc:n.local?cc:ac)(n,t))}function ml(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function hc(e){return function(){this.style.removeProperty(e)}}function gc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function pc(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function mc(e,t,n){return arguments.length>1?this.each((t==null?hc:typeof t=="function"?pc:gc)(e,t,n??"")):sn(this.node(),e)}function sn(e,t){return e.style.getPropertyValue(t)||ml(e).getComputedStyle(e,null).getPropertyValue(t)}function yc(e){return function(){delete this[e]}}function vc(e,t){return function(){this[e]=t}}function xc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function wc(e,t){return arguments.length>1?this.each((t==null?yc:typeof t=="function"?xc:vc)(e,t)):this.node()[e]}function yl(e){return e.trim().split(/^|\s+/)}function mr(e){return e.classList||new vl(e)}function vl(e){this._node=e,this._names=yl(e.getAttribute("class")||"")}vl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function xl(e,t){for(var n=mr(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function wl(e,t){for(var n=mr(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function _c(e){return function(){xl(this,e)}}function bc(e){return function(){wl(this,e)}}function kc(e,t){return function(){(t.apply(this,arguments)?xl:wl)(this,e)}}function Ec(e,t){var n=yl(e+"");if(arguments.length<2){for(var i=mr(this.node()),r=-1,l=n.length;++r<l;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?kc:t?_c:bc)(n,t))}function Cc(){this.textContent=""}function Sc(e){return function(){this.textContent=e}}function Ac(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Nc(e){return arguments.length?this.each(e==null?Cc:(typeof e=="function"?Ac:Sc)(e)):this.node().textContent}function Mc(){this.innerHTML=""}function Tc(e){return function(){this.innerHTML=e}}function Pc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ic(e){return arguments.length?this.each(e==null?Mc:(typeof e=="function"?Pc:Tc)(e)):this.node().innerHTML}function zc(){this.nextSibling&&this.parentNode.appendChild(this)}function Oc(){return this.each(zc)}function Dc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Lc(){return this.each(Dc)}function Hc(e){var t=typeof e=="function"?e:dl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Rc(){return null}function Yc(e,t){var n=typeof e=="function"?e:dl(e),i=t==null?Rc:typeof t=="function"?t:pr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Fc(){var e=this.parentNode;e&&e.removeChild(this)}function Bc(){return this.each(Fc)}function Vc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wc(e){return this.select(e?Xc:Vc)}function Kc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Zc(e){return function(t){e.call(this,t,this.__data__)}}function qc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Gc(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,l;n<r;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++i]=l;++i?t.length=i:delete this.__on}}}function Uc(e,t,n){return function(){var i=this.__on,r,l=Zc(t);if(i){for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=l,r.options=n),r.value=t;return}}this.addEventListener(e.type,l,n),r={type:e.type,name:e.name,value:t,listener:l,options:n},i?i.push(r):this.__on=[r]}}function jc(e,t,n){var i=qc(e+""),r,l=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var a=0,u=s.length,c;a<u;++a)for(r=0,c=s[a];r<l;++r)if((o=i[r]).type===c.type&&o.name===c.name)return c.value}return}for(s=t?Uc:Gc,r=0;r<l;++r)this.each(s(i[r],t,n));return this}function _l(e,t,n){var i=ml(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Jc(e,t){return function(){return _l(this,e,t)}}function Qc(e,t){return function(){return _l(this,e,t.apply(this,arguments))}}function $c(e,t){return this.each((typeof t=="function"?Qc:Jc)(e,t))}function*eu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,l=i.length,o;r<l;++r)(o=i[r])&&(yield o)}var bl=[null];function st(e,t){this._groups=e,this._parents=t}function Ln(){return new st([[document.documentElement]],bl)}function tu(){return this}st.prototype=Ln.prototype={constructor:st,select:Aa,selectAll:Pa,selectChild:Da,selectChildren:Ya,filter:Fa,data:Za,enter:Ba,exit:Ga,join:Ua,merge:ja,selection:tu,order:Ja,sort:Qa,call:ec,nodes:tc,node:nc,size:ic,empty:rc,each:oc,attr:fc,style:mc,property:wc,classed:Ec,text:Nc,html:Ic,raise:Oc,lower:Lc,append:Hc,insert:Yc,remove:Bc,clone:Wc,datum:Kc,on:jc,dispatch:$c,[Symbol.iterator]:eu};function ut(e){return typeof e=="string"?new st([[document.querySelector(e)]],[document.documentElement]):new st([[e]],bl)}function nu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ft(e,t){if(e=nu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const iu={passive:!1},Cn={capture:!0,passive:!1};function Li(e){e.stopImmediatePropagation()}function nn(e){e.preventDefault(),e.stopImmediatePropagation()}function kl(e){var t=e.document.documentElement,n=ut(e).on("dragstart.drag",nn,Cn);"onselectstart"in t?n.on("selectstart.drag",nn,Cn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function El(e,t){var n=e.document.documentElement,i=ut(e).on("dragstart.drag",null);t&&(i.on("click.drag",nn,Cn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Vn=e=>()=>e;function ji(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:l,x:o,y:s,dx:a,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}ji.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ru(e){return!e.ctrlKey&&!e.button}function ou(){return this.parentNode}function lu(e,t){return t??{x:e.x,y:e.y}}function su(){return navigator.maxTouchPoints||"ontouchstart"in this}function au(){var e=ru,t=ou,n=lu,i=su,r={},l=wi("start","drag","end"),o=0,s,a,u,c,h=0;function f(b){b.on("mousedown.drag",g).filter(i).on("touchstart.drag",v).on("touchmove.drag",_,iu).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(b,E){if(!(c||!e.call(this,b,E))){var A=C(this,t.call(this,b,E),b,E,"mouse");A&&(ut(b.view).on("mousemove.drag",y,Cn).on("mouseup.drag",k,Cn),kl(b.view),Li(b),u=!1,s=b.clientX,a=b.clientY,A("start",b))}}function y(b){if(nn(b),!u){var E=b.clientX-s,A=b.clientY-a;u=E*E+A*A>h}r.mouse("drag",b)}function k(b){ut(b.view).on("mousemove.drag mouseup.drag",null),El(b.view,u),nn(b),r.mouse("end",b)}function v(b,E){if(e.call(this,b,E)){var A=b.changedTouches,N=t.call(this,b,E),z=A.length,H,D;for(H=0;H<z;++H)(D=C(this,N,b,E,A[H].identifier,A[H]))&&(Li(b),D("start",b,A[H]))}}function _(b){var E=b.changedTouches,A=E.length,N,z;for(N=0;N<A;++N)(z=r[E[N].identifier])&&(nn(b),z("drag",b,E[N]))}function m(b){var E=b.changedTouches,A=E.length,N,z;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),N=0;N<A;++N)(z=r[E[N].identifier])&&(Li(b),z("end",b,E[N]))}function C(b,E,A,N,z,H){var D=l.copy(),R=ft(H||A,E),L,M,x;if((x=n.call(b,new ji("beforestart",{sourceEvent:A,target:f,identifier:z,active:o,x:R[0],y:R[1],dx:0,dy:0,dispatch:D}),N))!=null)return L=x.x-R[0]||0,M=x.y-R[1]||0,function P(w,S,T){var I=R,F;switch(w){case"start":r[z]=P,F=o++;break;case"end":delete r[z],--o;case"drag":R=ft(T||S,E),F=o;break}D.call(w,b,new ji(w,{sourceEvent:S,subject:x,target:f,identifier:z,active:F,x:R[0]+L,y:R[1]+M,dx:R[0]-I[0],dy:R[1]-I[1],dispatch:D}),N)}}return f.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Vn(!!b),f):e},f.container=function(b){return arguments.length?(t=typeof b=="function"?b:Vn(b),f):t},f.subject=function(b){return arguments.length?(n=typeof b=="function"?b:Vn(b),f):n},f.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:Vn(!!b),f):i},f.on=function(){var b=l.on.apply(l,arguments);return b===l?f:b},f.clickDistance=function(b){return arguments.length?(h=(b=+b)*b,f):Math.sqrt(h)},f}function yr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Cl(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Hn(){}var Sn=.7,ni=1/Sn,rn="\\s*([+-]?\\d+)\\s*",An="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cu=/^#([0-9a-f]{3,8})$/,uu=new RegExp(`^rgb\\(${rn},${rn},${rn}\\)$`),du=new RegExp(`^rgb\\(${xt},${xt},${xt}\\)$`),fu=new RegExp(`^rgba\\(${rn},${rn},${rn},${An}\\)$`),hu=new RegExp(`^rgba\\(${xt},${xt},${xt},${An}\\)$`),gu=new RegExp(`^hsl\\(${An},${xt},${xt}\\)$`),pu=new RegExp(`^hsla\\(${An},${xt},${xt},${An}\\)$`),ro={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yr(Hn,Nn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oo,formatHex:oo,formatHex8:mu,formatHsl:yu,formatRgb:lo,toString:lo});function oo(){return this.rgb().formatHex()}function mu(){return this.rgb().formatHex8()}function yu(){return Sl(this).formatHsl()}function lo(){return this.rgb().formatRgb()}function Nn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=cu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?so(t):n===3?new tt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uu.exec(e))?new tt(t[1],t[2],t[3],1):(t=du.exec(e))?new tt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fu.exec(e))?Xn(t[1],t[2],t[3],t[4]):(t=hu.exec(e))?Xn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gu.exec(e))?uo(t[1],t[2]/100,t[3]/100,1):(t=pu.exec(e))?uo(t[1],t[2]/100,t[3]/100,t[4]):ro.hasOwnProperty(e)?so(ro[e]):e==="transparent"?new tt(NaN,NaN,NaN,0):null}function so(e){return new tt(e>>16&255,e>>8&255,e&255,1)}function Xn(e,t,n,i){return i<=0&&(e=t=n=NaN),new tt(e,t,n,i)}function vu(e){return e instanceof Hn||(e=Nn(e)),e?(e=e.rgb(),new tt(e.r,e.g,e.b,e.opacity)):new tt}function Ji(e,t,n,i){return arguments.length===1?vu(e):new tt(e,t,n,i??1)}function tt(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}yr(tt,Ji,Cl(Hn,{brighter(e){return e=e==null?ni:Math.pow(ni,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Sn:Math.pow(Sn,e),new tt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tt(Vt(this.r),Vt(this.g),Vt(this.b),ii(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ao,formatHex:ao,formatHex8:xu,formatRgb:co,toString:co}));function ao(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}`}function xu(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}${Bt((isNaN(this.opacity)?1:this.opacity)*255)}`}function co(){const e=ii(this.opacity);return`${e===1?"rgb(":"rgba("}${Vt(this.r)}, ${Vt(this.g)}, ${Vt(this.b)}${e===1?")":`, ${e})`}`}function ii(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bt(e){return e=Vt(e),(e<16?"0":"")+e.toString(16)}function uo(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ht(e,t,n,i)}function Sl(e){if(e instanceof ht)return new ht(e.h,e.s,e.l,e.opacity);if(e instanceof Hn||(e=Nn(e)),!e)return new ht;if(e instanceof ht)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),l=Math.max(t,n,i),o=NaN,s=l-r,a=(l+r)/2;return s?(t===l?o=(n-i)/s+(n<i)*6:n===l?o=(i-t)/s+2:o=(t-n)/s+4,s/=a<.5?l+r:2-l-r,o*=60):s=a>0&&a<1?0:o,new ht(o,s,a,e.opacity)}function wu(e,t,n,i){return arguments.length===1?Sl(e):new ht(e,t,n,i??1)}function ht(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}yr(ht,wu,Cl(Hn,{brighter(e){return e=e==null?ni:Math.pow(ni,e),new ht(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Sn:Math.pow(Sn,e),new ht(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new tt(Hi(e>=240?e-240:e+120,r,i),Hi(e,r,i),Hi(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new ht(fo(this.h),Wn(this.s),Wn(this.l),ii(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ii(this.opacity);return`${e===1?"hsl(":"hsla("}${fo(this.h)}, ${Wn(this.s)*100}%, ${Wn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function fo(e){return e=(e||0)%360,e<0?e+360:e}function Wn(e){return Math.max(0,Math.min(1,e||0))}function Hi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Al=e=>()=>e;function _u(e,t){return function(n){return e+n*t}}function bu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function ku(e){return(e=+e)==1?Nl:function(t,n){return n-t?bu(t,n,e):Al(isNaN(t)?n:t)}}function Nl(e,t){var n=t-e;return n?_u(e,n):Al(isNaN(e)?t:e)}const ho=function e(t){var n=ku(t);function i(r,l){var o=n((r=Ji(r)).r,(l=Ji(l)).r),s=n(r.g,l.g),a=n(r.b,l.b),u=Nl(r.opacity,l.opacity);return function(c){return r.r=o(c),r.g=s(c),r.b=a(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function It(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Qi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ri=new RegExp(Qi.source,"g");function Eu(e){return function(){return e}}function Cu(e){return function(t){return e(t)+""}}function Su(e,t){var n=Qi.lastIndex=Ri.lastIndex=0,i,r,l,o=-1,s=[],a=[];for(e=e+"",t=t+"";(i=Qi.exec(e))&&(r=Ri.exec(t));)(l=r.index)>n&&(l=t.slice(n,l),s[o]?s[o]+=l:s[++o]=l),(i=i[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,a.push({i:o,x:It(i,r)})),n=Ri.lastIndex;return n<t.length&&(l=t.slice(n),s[o]?s[o]+=l:s[++o]=l),s.length<2?a[0]?Cu(a[0].x):Eu(t):(t=a.length,function(u){for(var c=0,h;c<t;++c)s[(h=a[c]).i]=h.x(u);return s.join("")})}var go=180/Math.PI,$i={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ml(e,t,n,i,r,l){var o,s,a;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(a=e*n+t*i)&&(n-=e*a,i-=t*a),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,a/=s),e*i<t*n&&(e=-e,t=-t,a=-a,o=-o),{translateX:r,translateY:l,rotate:Math.atan2(t,e)*go,skewX:Math.atan(a)*go,scaleX:o,scaleY:s}}var Kn;function Au(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$i:Ml(t.a,t.b,t.c,t.d,t.e,t.f)}function Nu(e){return e==null||(Kn||(Kn=document.createElementNS("http://www.w3.org/2000/svg","g")),Kn.setAttribute("transform",e),!(e=Kn.transform.baseVal.consolidate()))?$i:(e=e.matrix,Ml(e.a,e.b,e.c,e.d,e.e,e.f))}function Tl(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function l(u,c,h,f,g,y){if(u!==h||c!==f){var k=g.push("translate(",null,t,null,n);y.push({i:k-4,x:It(u,h)},{i:k-2,x:It(c,f)})}else(h||f)&&g.push("translate("+h+t+f+n)}function o(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(r(h)+"rotate(",null,i)-2,x:It(u,c)})):c&&h.push(r(h)+"rotate("+c+i)}function s(u,c,h,f){u!==c?f.push({i:h.push(r(h)+"skewX(",null,i)-2,x:It(u,c)}):c&&h.push(r(h)+"skewX("+c+i)}function a(u,c,h,f,g,y){if(u!==h||c!==f){var k=g.push(r(g)+"scale(",null,",",null,")");y.push({i:k-4,x:It(u,h)},{i:k-2,x:It(c,f)})}else(h!==1||f!==1)&&g.push(r(g)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=e(u),c=e(c),l(u.translateX,u.translateY,c.translateX,c.translateY,h,f),o(u.rotate,c.rotate,h,f),s(u.skewX,c.skewX,h,f),a(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(g){for(var y=-1,k=f.length,v;++y<k;)h[(v=f[y]).i]=v.x(g);return h.join("")}}}var Mu=Tl(Au,"px, ","px)","deg)"),Tu=Tl(Nu,", ",")",")"),Pu=1e-12;function po(e){return((e=Math.exp(e))+1/e)/2}function Iu(e){return((e=Math.exp(e))-1/e)/2}function zu(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ou=function e(t,n,i){function r(l,o){var s=l[0],a=l[1],u=l[2],c=o[0],h=o[1],f=o[2],g=c-s,y=h-a,k=g*g+y*y,v,_;if(k<Pu)_=Math.log(f/u)/t,v=function(N){return[s+N*g,a+N*y,u*Math.exp(t*N*_)]};else{var m=Math.sqrt(k),C=(f*f-u*u+i*k)/(2*u*n*m),b=(f*f-u*u-i*k)/(2*f*n*m),E=Math.log(Math.sqrt(C*C+1)-C),A=Math.log(Math.sqrt(b*b+1)-b);_=(A-E)/t,v=function(N){var z=N*_,H=po(E),D=u/(n*m)*(H*zu(t*z+E)-Iu(E));return[s+D*g,a+D*y,u*H/po(t*z+E)]}}return v.duration=_*1e3*t/Math.SQRT2,v}return r.rho=function(l){var o=Math.max(.001,+l),s=o*o,a=s*s;return e(o,s,a)},r}(Math.SQRT2,2,4);var an=0,_n=0,xn=0,Pl=1e3,ri,bn,oi=0,Wt=0,bi=0,Mn=typeof performance=="object"&&performance.now?performance:Date,Il=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function vr(){return Wt||(Il(Du),Wt=Mn.now()+bi)}function Du(){Wt=0}function li(){this._call=this._time=this._next=null}li.prototype=zl.prototype={constructor:li,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?vr():+n)+(t==null?0:+t),!this._next&&bn!==this&&(bn?bn._next=this:ri=this,bn=this),this._call=e,this._time=n,er()},stop:function(){this._call&&(this._call=null,this._time=1/0,er())}};function zl(e,t,n){var i=new li;return i.restart(e,t,n),i}function Lu(){vr(),++an;for(var e=ri,t;e;)(t=Wt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--an}function mo(){Wt=(oi=Mn.now())+bi,an=_n=0;try{Lu()}finally{an=0,Ru(),Wt=0}}function Hu(){var e=Mn.now(),t=e-oi;t>Pl&&(bi-=t,oi=e)}function Ru(){for(var e,t=ri,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ri=n);bn=e,er(i)}function er(e){if(!an){_n&&(_n=clearTimeout(_n));var t=e-Wt;t>24?(e<1/0&&(_n=setTimeout(mo,e-Mn.now()-bi)),xn&&(xn=clearInterval(xn))):(xn||(oi=Mn.now(),xn=setInterval(Hu,Pl)),an=1,Il(mo))}}function yo(e,t,n){var i=new li;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Yu=wi("start","end","cancel","interrupt"),Fu=[],Ol=0,vo=1,tr=2,jn=3,xo=4,nr=5,Jn=6;function ki(e,t,n,i,r,l){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Bu(e,n,{name:t,index:i,group:r,on:Yu,tween:Fu,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Ol})}function xr(e,t){var n=gt(e,t);if(n.state>Ol)throw new Error("too late; already scheduled");return n}function _t(e,t){var n=gt(e,t);if(n.state>jn)throw new Error("too late; already running");return n}function gt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Bu(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=zl(l,0,n.time);function l(u){n.state=vo,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,h,f,g;if(n.state!==vo)return a();for(c in i)if(g=i[c],g.name===n.name){if(g.state===jn)return yo(o);g.state===xo?(g.state=Jn,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[c]):+c<t&&(g.state=Jn,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[c])}if(yo(function(){n.state===jn&&(n.state=xo,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=tr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===tr){for(n.state=jn,r=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=g);r.length=h+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=nr,1),h=-1,f=r.length;++h<f;)r[h].call(e,c);n.state===nr&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Jn,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function Qn(e,t){var n=e.__transition,i,r,l=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){l=!1;continue}r=i.state>tr&&i.state<nr,i.state=Jn,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}l&&delete e.__transition}}function Vu(e){return this.each(function(){Qn(this,e)})}function Xu(e,t){var n,i;return function(){var r=_t(this,e),l=r.tween;if(l!==n){i=n=l;for(var o=0,s=i.length;o<s;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function Wu(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var l=_t(this,e),o=l.tween;if(o!==i){r=(i=o).slice();for(var s={name:t,value:n},a=0,u=r.length;a<u;++a)if(r[a].name===t){r[a]=s;break}a===u&&r.push(s)}l.tween=r}}function Ku(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=gt(this.node(),n).tween,r=0,l=i.length,o;r<l;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?Xu:Wu)(n,e,t))}function wr(e,t,n){var i=e._id;return e.each(function(){var r=_t(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return gt(r,i).value[t]}}function Dl(e,t){var n;return(typeof t=="number"?It:t instanceof Nn?ho:(n=Nn(t))?(t=n,ho):Su)(e,t)}function Zu(e){return function(){this.removeAttribute(e)}}function qu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gu(e,t,n){var i,r=n+"",l;return function(){var o=this.getAttribute(e);return o===r?null:o===i?l:l=t(i=o,n)}}function Uu(e,t,n){var i,r=n+"",l;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?l:l=t(i=o,n)}}function ju(e,t,n){var i,r,l;return function(){var o,s=n(this),a;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),a=s+"",o===a?null:o===i&&a===r?l:(r=a,l=t(i=o,s)))}}function Ju(e,t,n){var i,r,l;return function(){var o,s=n(this),a;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),a=s+"",o===a?null:o===i&&a===r?l:(r=a,l=t(i=o,s)))}}function Qu(e,t){var n=_i(e),i=n==="transform"?Tu:Dl;return this.attrTween(e,typeof t=="function"?(n.local?Ju:ju)(n,i,wr(this,"attr."+e,t)):t==null?(n.local?qu:Zu)(n):(n.local?Uu:Gu)(n,i,t))}function $u(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ed(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function td(e,t){var n,i;function r(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&ed(e,l)),n}return r._value=t,r}function nd(e,t){var n,i;function r(){var l=t.apply(this,arguments);return l!==i&&(n=(i=l)&&$u(e,l)),n}return r._value=t,r}function id(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=_i(e);return this.tween(n,(i.local?td:nd)(i,t))}function rd(e,t){return function(){xr(this,e).delay=+t.apply(this,arguments)}}function od(e,t){return t=+t,function(){xr(this,e).delay=t}}function ld(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rd:od)(t,e)):gt(this.node(),t).delay}function sd(e,t){return function(){_t(this,e).duration=+t.apply(this,arguments)}}function ad(e,t){return t=+t,function(){_t(this,e).duration=t}}function cd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sd:ad)(t,e)):gt(this.node(),t).duration}function ud(e,t){if(typeof t!="function")throw new Error;return function(){_t(this,e).ease=t}}function dd(e){var t=this._id;return arguments.length?this.each(ud(t,e)):gt(this.node(),t).ease}function fd(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_t(this,e).ease=n}}function hd(e){if(typeof e!="function")throw new Error;return this.each(fd(this._id,e))}function gd(e){typeof e!="function"&&(e=hl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var l=t[r],o=l.length,s=i[r]=[],a,u=0;u<o;++u)(a=l[u])&&e.call(a,a.__data__,u,l)&&s.push(a);return new Tt(i,this._parents,this._name,this._id)}function pd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,l=Math.min(i,r),o=new Array(i),s=0;s<l;++s)for(var a=t[s],u=n[s],c=a.length,h=o[s]=new Array(c),f,g=0;g<c;++g)(f=a[g]||u[g])&&(h[g]=f);for(;s<i;++s)o[s]=t[s];return new Tt(o,this._parents,this._name,this._id)}function md(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yd(e,t,n){var i,r,l=md(t)?xr:_t;return function(){var o=l(this,e),s=o.on;s!==i&&(r=(i=s).copy()).on(t,n),o.on=r}}function vd(e,t){var n=this._id;return arguments.length<2?gt(this.node(),n).on.on(e):this.each(yd(n,e,t))}function xd(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function wd(){return this.on("end.remove",xd(this._id))}function _d(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pr(e));for(var i=this._groups,r=i.length,l=new Array(r),o=0;o<r;++o)for(var s=i[o],a=s.length,u=l[o]=new Array(a),c,h,f=0;f<a;++f)(c=s[f])&&(h=e.call(c,c.__data__,f,s))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,ki(u[f],t,n,f,u,gt(c,n)));return new Tt(l,this._parents,t,n)}function bd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fl(e));for(var i=this._groups,r=i.length,l=[],o=[],s=0;s<r;++s)for(var a=i[s],u=a.length,c,h=0;h<u;++h)if(c=a[h]){for(var f=e.call(c,c.__data__,h,a),g,y=gt(c,n),k=0,v=f.length;k<v;++k)(g=f[k])&&ki(g,t,n,k,f,y);l.push(f),o.push(c)}return new Tt(l,o,t,n)}var kd=Ln.prototype.constructor;function Ed(){return new kd(this._groups,this._parents)}function Cd(e,t){var n,i,r;return function(){var l=sn(this,e),o=(this.style.removeProperty(e),sn(this,e));return l===o?null:l===n&&o===i?r:r=t(n=l,i=o)}}function Ll(e){return function(){this.style.removeProperty(e)}}function Sd(e,t,n){var i,r=n+"",l;return function(){var o=sn(this,e);return o===r?null:o===i?l:l=t(i=o,n)}}function Ad(e,t,n){var i,r,l;return function(){var o=sn(this,e),s=n(this),a=s+"";return s==null&&(a=s=(this.style.removeProperty(e),sn(this,e))),o===a?null:o===i&&a===r?l:(r=a,l=t(i=o,s))}}function Nd(e,t){var n,i,r,l="style."+t,o="end."+l,s;return function(){var a=_t(this,e),u=a.on,c=a.value[l]==null?s||(s=Ll(t)):void 0;(u!==n||r!==c)&&(i=(n=u).copy()).on(o,r=c),a.on=i}}function Md(e,t,n){var i=(e+="")=="transform"?Mu:Dl;return t==null?this.styleTween(e,Cd(e,i)).on("end.style."+e,Ll(e)):typeof t=="function"?this.styleTween(e,Ad(e,i,wr(this,"style."+e,t))).each(Nd(this._id,e)):this.styleTween(e,Sd(e,i,t),n).on("end.style."+e,null)}function Td(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Pd(e,t,n){var i,r;function l(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&Td(e,o,n)),i}return l._value=t,l}function Id(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Pd(e,t,n??""))}function zd(e){return function(){this.textContent=e}}function Od(e){return function(){var t=e(this);this.textContent=t??""}}function Dd(e){return this.tween("text",typeof e=="function"?Od(wr(this,"text",e)):zd(e==null?"":e+""))}function Ld(e){return function(t){this.textContent=e.call(this,t)}}function Hd(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Ld(r)),t}return i._value=e,i}function Rd(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Hd(e))}function Yd(){for(var e=this._name,t=this._id,n=Hl(),i=this._groups,r=i.length,l=0;l<r;++l)for(var o=i[l],s=o.length,a,u=0;u<s;++u)if(a=o[u]){var c=gt(a,t);ki(a,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Tt(i,this._parents,e,n)}function Fd(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(l,o){var s={value:o},a={value:function(){--r===0&&l()}};n.each(function(){var u=_t(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(a)),u.on=t}),r===0&&l()})}var Bd=0;function Tt(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Hl(){return++Bd}var Et=Ln.prototype;Tt.prototype={constructor:Tt,select:_d,selectAll:bd,selectChild:Et.selectChild,selectChildren:Et.selectChildren,filter:gd,merge:pd,selection:Ed,transition:Yd,call:Et.call,nodes:Et.nodes,node:Et.node,size:Et.size,empty:Et.empty,each:Et.each,on:vd,attr:Qu,attrTween:id,style:Md,styleTween:Id,text:Dd,textTween:Rd,remove:wd,tween:Ku,delay:ld,duration:cd,ease:dd,easeVarying:hd,end:Fd,[Symbol.iterator]:Et[Symbol.iterator]};function Vd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Xd={time:null,delay:0,duration:250,ease:Vd};function Wd(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Kd(e){var t,n;e instanceof Tt?(t=e._id,e=e._name):(t=Hl(),(n=Xd).time=vr(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,l=0;l<r;++l)for(var o=i[l],s=o.length,a,u=0;u<s;++u)(a=o[u])&&ki(a,e,t,u,o,n||Wd(a,t));return new Tt(i,this._parents,e,t)}Ln.prototype.interrupt=Vu;Ln.prototype.transition=Kd;const Zn=e=>()=>e;function Zd(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function St(e,t,n){this.k=e,this.x=t,this.y=n}St.prototype={constructor:St,scale:function(e){return e===1?this:new St(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new St(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ei=new St(1,0,0);Rl.prototype=St.prototype;function Rl(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ei;return e.__zoom}function Yi(e){e.stopImmediatePropagation()}function wn(e){e.preventDefault(),e.stopImmediatePropagation()}function qd(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Gd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function wo(){return this.__zoom||Ei}function Ud(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jd(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>l?(l+o)/2:Math.min(0,l)||Math.max(0,o))}function Yl(){var e=qd,t=Gd,n=Jd,i=Ud,r=jd,l=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,a=Ou,u=wi("start","zoom","end"),c,h,f,g=500,y=150,k=0,v=10;function _(x){x.property("__zoom",wo).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",D).filter(r).on("touchstart.zoom",R).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(x,P,w,S){var T=x.selection?x.selection():x;T.property("__zoom",wo),x!==T?E(x,P,w,S):T.interrupt().each(function(){A(this,arguments).event(S).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},_.scaleBy=function(x,P,w,S){_.scaleTo(x,function(){var T=this.__zoom.k,I=typeof P=="function"?P.apply(this,arguments):P;return T*I},w,S)},_.scaleTo=function(x,P,w,S){_.transform(x,function(){var T=t.apply(this,arguments),I=this.__zoom,F=w==null?b(T):typeof w=="function"?w.apply(this,arguments):w,W=I.invert(F),U=typeof P=="function"?P.apply(this,arguments):P;return n(C(m(I,U),F,W),T,o)},w,S)},_.translateBy=function(x,P,w,S){_.transform(x,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof w=="function"?w.apply(this,arguments):w),t.apply(this,arguments),o)},null,S)},_.translateTo=function(x,P,w,S,T){_.transform(x,function(){var I=t.apply(this,arguments),F=this.__zoom,W=S==null?b(I):typeof S=="function"?S.apply(this,arguments):S;return n(Ei.translate(W[0],W[1]).scale(F.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof w=="function"?-w.apply(this,arguments):-w),I,o)},S,T)};function m(x,P){return P=Math.max(l[0],Math.min(l[1],P)),P===x.k?x:new St(P,x.x,x.y)}function C(x,P,w){var S=P[0]-w[0]*x.k,T=P[1]-w[1]*x.k;return S===x.x&&T===x.y?x:new St(x.k,S,T)}function b(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function E(x,P,w,S){x.on("start.zoom",function(){A(this,arguments).event(S).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(S).end()}).tween("zoom",function(){var T=this,I=arguments,F=A(T,I).event(S),W=t.apply(T,I),U=w==null?b(W):typeof w=="function"?w.apply(T,I):w,te=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),B=T.__zoom,j=typeof P=="function"?P.apply(T,I):P,ie=a(B.invert(U).concat(te/B.k),j.invert(U).concat(te/j.k));return function(de){if(de===1)de=j;else{var fe=ie(de),Z=te/fe[2];de=new St(Z,U[0]-fe[0]*Z,U[1]-fe[1]*Z)}F.zoom(null,de)}})}function A(x,P,w){return!w&&x.__zooming||new N(x,P)}function N(x,P){this.that=x,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(x,P),this.taps=0}N.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,P){return this.mouse&&x!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var P=ut(this.that).datum();u.call(x,this.that,new Zd(x,{sourceEvent:this.sourceEvent,target:_,type:x,transform:this.that.__zoom,dispatch:u}),P)}};function z(x,...P){if(!e.apply(this,arguments))return;var w=A(this,P).event(x),S=this.__zoom,T=Math.max(l[0],Math.min(l[1],S.k*Math.pow(2,i.apply(this,arguments)))),I=ft(x);if(w.wheel)(w.mouse[0][0]!==I[0]||w.mouse[0][1]!==I[1])&&(w.mouse[1]=S.invert(w.mouse[0]=I)),clearTimeout(w.wheel);else{if(S.k===T)return;w.mouse=[I,S.invert(I)],Qn(this),w.start()}wn(x),w.wheel=setTimeout(F,y),w.zoom("mouse",n(C(m(S,T),w.mouse[0],w.mouse[1]),w.extent,o));function F(){w.wheel=null,w.end()}}function H(x,...P){if(f||!e.apply(this,arguments))return;var w=x.currentTarget,S=A(this,P,!0).event(x),T=ut(x.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",te,!0),I=ft(x,w),F=x.clientX,W=x.clientY;kl(x.view),Yi(x),S.mouse=[I,this.__zoom.invert(I)],Qn(this),S.start();function U(B){if(wn(B),!S.moved){var j=B.clientX-F,ie=B.clientY-W;S.moved=j*j+ie*ie>k}S.event(B).zoom("mouse",n(C(S.that.__zoom,S.mouse[0]=ft(B,w),S.mouse[1]),S.extent,o))}function te(B){T.on("mousemove.zoom mouseup.zoom",null),El(B.view,S.moved),wn(B),S.event(B).end()}}function D(x,...P){if(e.apply(this,arguments)){var w=this.__zoom,S=ft(x.changedTouches?x.changedTouches[0]:x,this),T=w.invert(S),I=w.k*(x.shiftKey?.5:2),F=n(C(m(w,I),S,T),t.apply(this,P),o);wn(x),s>0?ut(this).transition().duration(s).call(E,F,S,x):ut(this).call(_.transform,F,S,x)}}function R(x,...P){if(e.apply(this,arguments)){var w=x.touches,S=w.length,T=A(this,P,x.changedTouches.length===S).event(x),I,F,W,U;for(Yi(x),F=0;F<S;++F)W=w[F],U=ft(W,this),U=[U,this.__zoom.invert(U),W.identifier],T.touch0?!T.touch1&&T.touch0[2]!==U[2]&&(T.touch1=U,T.taps=0):(T.touch0=U,I=!0,T.taps=1+!!c);c&&(c=clearTimeout(c)),I&&(T.taps<2&&(h=U[0],c=setTimeout(function(){c=null},g)),Qn(this),T.start())}}function L(x,...P){if(this.__zooming){var w=A(this,P).event(x),S=x.changedTouches,T=S.length,I,F,W,U;for(wn(x),I=0;I<T;++I)F=S[I],W=ft(F,this),w.touch0&&w.touch0[2]===F.identifier?w.touch0[0]=W:w.touch1&&w.touch1[2]===F.identifier&&(w.touch1[0]=W);if(F=w.that.__zoom,w.touch1){var te=w.touch0[0],B=w.touch0[1],j=w.touch1[0],ie=w.touch1[1],de=(de=j[0]-te[0])*de+(de=j[1]-te[1])*de,fe=(fe=ie[0]-B[0])*fe+(fe=ie[1]-B[1])*fe;F=m(F,Math.sqrt(de/fe)),W=[(te[0]+j[0])/2,(te[1]+j[1])/2],U=[(B[0]+ie[0])/2,(B[1]+ie[1])/2]}else if(w.touch0)W=w.touch0[0],U=w.touch0[1];else return;w.zoom("touch",n(C(F,W,U),w.extent,o))}}function M(x,...P){if(this.__zooming){var w=A(this,P).event(x),S=x.changedTouches,T=S.length,I,F;for(Yi(x),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),I=0;I<T;++I)F=S[I],w.touch0&&w.touch0[2]===F.identifier?delete w.touch0:w.touch1&&w.touch1[2]===F.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(F=ft(F,this),Math.hypot(h[0]-F[0],h[1]-F[1])<v)){var W=ut(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return _.wheelDelta=function(x){return arguments.length?(i=typeof x=="function"?x:Zn(+x),_):i},_.filter=function(x){return arguments.length?(e=typeof x=="function"?x:Zn(!!x),_):e},_.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:Zn(!!x),_):r},_.extent=function(x){return arguments.length?(t=typeof x=="function"?x:Zn([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),_):t},_.scaleExtent=function(x){return arguments.length?(l[0]=+x[0],l[1]=+x[1],_):[l[0],l[1]]},_.translateExtent=function(x){return arguments.length?(o[0][0]=+x[0][0],o[1][0]=+x[1][0],o[0][1]=+x[0][1],o[1][1]=+x[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(x){return arguments.length?(n=x,_):n},_.duration=function(x){return arguments.length?(s=+x,_):s},_.interpolate=function(x){return arguments.length?(a=x,_):a},_.on=function(){var x=u.on.apply(u,arguments);return x===u?_:x},_.clickDistance=function(x){return arguments.length?(k=(x=+x)*x,_):Math.sqrt(k)},_.tapDistance=function(x){return arguments.length?(v=+x,_):v},_}const Rn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},si=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Kt;(function(e){e.Strict="strict",e.Loose="loose"})(Kt||(Kt={}));var Ot;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ot||(Ot={}));var ai;(function(e){e.Partial="partial",e.Full="full"})(ai||(ai={}));const ir={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var on;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(on||(on={}));var ci;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ci||(ci={}));var oe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(oe||(oe={}));const _o={[oe.Left]:oe.Right,[oe.Right]:oe.Left,[oe.Top]:oe.Bottom,[oe.Bottom]:oe.Top};function Qd(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function bo(e,t,n){if(!n)return;const i=[];e.forEach((r,l)=>{t!=null&&t.has(l)||i.push(r)}),i.length&&n(i)}function $d(e){return e===null?null:e?"valid":"invalid"}const ef=e=>"id"in e&&"source"in e&&"target"in e,tf=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),_r=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Yn=(e,t=[0,0])=>{const{width:n,height:i}=Ht(e),r=e.origin??t,l=n*r[0],o=i*r[1];return{x:e.position.x-l,y:e.position.y-o}},nf=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,r)=>{const l=typeof r=="string";let o=!t.nodeLookup&&!l?r:void 0;t.nodeLookup&&(o=l?t.nodeLookup.get(r):_r(r)?r:t.nodeLookup.get(r.id));const s=o?ui(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ci(i,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Si(n)},Fn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const r=ui(i);n=Ci(n,r)}}),Si(n)},Fl=(e,t,[n,i,r]=[0,0,1],l=!1,o=!1)=>{const s={...Bn(t,[n,i,r]),width:t.width/r,height:t.height/r},a=[];for(const u of e.values()){const{measured:c,selectable:h=!0,hidden:f=!1}=u;if(o&&!h||f)continue;const g=c.width??u.width??u.initialWidth??null,y=c.height??u.height??u.initialHeight??null,k=Tn(s,un(u)),v=(g??0)*(y??0),_=l&&k>0;(!u.internals.handleBounds||_||k>=v||u.dragging)&&a.push(u)}return a},rr=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function ko(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function Eo({nodes:e,width:t,height:n,panZoom:i,minZoom:r,maxZoom:l},o){if(e.size===0)return Promise.resolve(!1);const s=Fn(e),a=kr(s,t,n,(o==null?void 0:o.minZoom)??r,(o==null?void 0:o.maxZoom)??l,(o==null?void 0:o.padding)??.1);return await i.setViewport(a,{duration:o==null?void 0:o.duration}),Promise.resolve(!0)}function rf({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:l}){const o=n.get(e),s=o.parentId?n.get(o.parentId):void 0,{x:a,y:u}=s?s.internals.positionAbsolute:{x:0,y:0},c=o.origin??i;let h=r;if(o.extent==="parent"&&!o.expandParent)if(!s)l==null||l("005",Rn.error005());else{const g=s.measured.width,y=s.measured.height;g&&y&&(h=[[a,u],[a+g,u+y]])}else s&&dn(o.extent)&&(h=[[o.extent[0][0]+a,o.extent[0][1]+u],[o.extent[1][0]+a,o.extent[1][1]+u]]);const f=dn(h)?Zt(t,h,o.measured):t;return{position:{x:f.x-a+o.measured.width*c[0],y:f.y-u+o.measured.height*c[1]},positionAbsolute:f}}async function Bl({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:r}){const l=new Set(e.map(f=>f.id)),o=[];for(const f of n){if(f.deletable===!1)continue;const g=l.has(f.id),y=!g&&f.parentId&&o.find(k=>k.id===f.parentId);(g||y)&&o.push(f)}const s=new Set(t.map(f=>f.id)),a=i.filter(f=>f.deletable!==!1),c=rr(o,a);for(const f of a)s.has(f.id)&&!c.find(y=>y.id===f.id)&&c.push(f);if(!r)return{edges:c,nodes:o};const h=await r({nodes:o,edges:c});return typeof h=="boolean"?h?{edges:c,nodes:o}:{edges:[],nodes:[]}:h}const cn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Zt=(e={x:0,y:0},t,n)=>({x:cn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:cn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Vl(e,t,n){const{width:i,height:r}=Ht(n),{x:l,y:o}=n.internals.positionAbsolute;return Zt(e,[[l,o],[l+i,o+r]],t)}const Co=(e,t,n)=>e<t?cn(Math.abs(e-t),1,t)/t:e>n?-cn(Math.abs(e-n),1,t)/t:0,Xl=(e,t,n=15,i=40)=>{const r=Co(e.x,i,t.width-i)*n,l=Co(e.y,i,t.height-i)*n;return[r,l]},Ci=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),or=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),Si=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),un=(e,t=[0,0])=>{var r,l;const{x:n,y:i}=_r(e)?e.internals.positionAbsolute:Yn(e,t);return{x:n,y:i,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((l=e.measured)==null?void 0:l.height)??e.height??e.initialHeight??0}},ui=(e,t=[0,0])=>{var r,l;const{x:n,y:i}=_r(e)?e.internals.positionAbsolute:Yn(e,t);return{x:n,y:i,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:i+(((l=e.measured)==null?void 0:l.height)??e.height??e.initialHeight??0)}},Wl=(e,t)=>Si(Ci(or(e),or(t))),Tn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},So=e=>At(e.width)&&At(e.height)&&At(e.x)&&At(e.y),At=e=>!isNaN(e)&&isFinite(e),of=(e,t)=>{},br=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Bn=({x:e,y:t},[n,i,r],l=!1,o=[1,1])=>{const s={x:(e-n)/r,y:(t-i)/r};return l?br(s,o):s},Kl=({x:e,y:t},[n,i,r])=>({x:e*r+n,y:t*r+i}),kr=(e,t,n,i,r,l)=>{const o=t/(e.width*(1+l)),s=n/(e.height*(1+l)),a=Math.min(o,s),u=cn(a,i,r),c=e.x+e.width/2,h=e.y+e.height/2,f=t/2-c*u,g=n/2-h*u;return{x:f,y:g,zoom:u}},di=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function dn(e){return e!==void 0&&e!=="parent"}function Ht(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Zl(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function lf(e,t={width:0,height:0},n,i,r){const l={...e},o=i.get(n);if(o){const s=o.origin||r;l.x+=o.internals.positionAbsolute.x-(t.width??0)*s[0],l.y+=o.internals.positionAbsolute.y-(t.height??0)*s[1]}return l}function Fi(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:l,y:o}=Nt(e),s=Bn({x:l-((r==null?void 0:r.left)??0),y:o-((r==null?void 0:r.top)??0)},i),{x:a,y:u}=n?br(s,t):s;return{xSnapped:a,ySnapped:u,...s}}const Er=e=>({width:e.offsetWidth,height:e.offsetHeight}),sf=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},af=["INPUT","SELECT","TEXTAREA"];function cf(e){var i,r;const t=((r=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:r[0])||e.target;return af.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const ql=e=>"clientX"in e,Nt=(e,t)=>{var l,o;const n=ql(e),i=n?e.clientX:(l=e.touches)==null?void 0:l[0].clientX,r=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Ao=(e,t,n,i,r)=>{const l=t.querySelectorAll(`.${e}`);return!l||!l.length?null:Array.from(l).map(o=>{const s=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:r,position:o.getAttribute("data-handlepos"),x:(s.left-n.left)/i,y:(s.top-n.top)/i,...Er(o)}})};function uf({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:l,targetControlX:o,targetControlY:s}){const a=e*.125+r*.375+o*.375+n*.125,u=t*.125+l*.375+s*.375+i*.125,c=Math.abs(a-e),h=Math.abs(u-t);return[a,u,c,h]}function qn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function No({pos:e,x1:t,y1:n,x2:i,y2:r,c:l}){switch(e){case oe.Left:return[t-qn(t-i,l),n];case oe.Right:return[t+qn(i-t,l),n];case oe.Top:return[t,n-qn(n-r,l)];case oe.Bottom:return[t,n+qn(r-n,l)]}}function Gl({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:i,targetY:r,targetPosition:l=oe.Top,curvature:o=.25}){const[s,a]=No({pos:n,x1:e,y1:t,x2:i,y2:r,c:o}),[u,c]=No({pos:l,x1:i,y1:r,x2:e,y2:t,c:o}),[h,f,g,y]=uf({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${e},${t} C${s},${a} ${u},${c} ${i},${r}`,h,f,g,y]}function Ul({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,l=n<e?n+r:n-r,o=Math.abs(i-t)/2,s=i<t?i+o:i-o;return[l,s,r,o]}function df({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const l=n||t.selected||e.selected,o=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(l?o:0)}function ff({sourceNode:e,targetNode:t,width:n,height:i,transform:r}){const l=Ci(ui(e),ui(t));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const o={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return Tn(o,Si(l))>0}const hf=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,gf=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),pf=(e,t)=>{if(!e.source||!e.target)return t;let n;return ef(e)?n={...e}:n={...e,id:hf(e)},gf(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function lr({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[r,l,o,s]=Ul({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,r,l,o,s]}const Mo={[oe.Left]:{x:-1,y:0},[oe.Right]:{x:1,y:0},[oe.Top]:{x:0,y:-1},[oe.Bottom]:{x:0,y:1}},mf=({source:e,sourcePosition:t=oe.Bottom,target:n})=>t===oe.Left||t===oe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},To=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function yf({source:e,sourcePosition:t=oe.Bottom,target:n,targetPosition:i=oe.Top,center:r,offset:l}){const o=Mo[t],s=Mo[i],a={x:e.x+o.x*l,y:e.y+o.y*l},u={x:n.x+s.x*l,y:n.y+s.y*l},c=mf({source:a,sourcePosition:t,target:u}),h=c.x!==0?"x":"y",f=c[h];let g=[],y,k;const v={x:0,y:0},_={x:0,y:0},[m,C,b,E]=Ul({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[h]*s[h]===-1){y=r.x??m,k=r.y??C;const N=[{x:y,y:a.y},{x:y,y:u.y}],z=[{x:a.x,y:k},{x:u.x,y:k}];o[h]===f?g=h==="x"?N:z:g=h==="x"?z:N}else{const N=[{x:a.x,y:u.y}],z=[{x:u.x,y:a.y}];if(h==="x"?g=o.x===f?z:N:g=o.y===f?N:z,t===i){const M=Math.abs(e[h]-n[h]);if(M<=l){const x=Math.min(l-1,l-M);o[h]===f?v[h]=(a[h]>e[h]?-1:1)*x:_[h]=(u[h]>n[h]?-1:1)*x}}if(t!==i){const M=h==="x"?"y":"x",x=o[h]===s[M],P=a[M]>u[M],w=a[M]<u[M];(o[h]===1&&(!x&&P||x&&w)||o[h]!==1&&(!x&&w||x&&P))&&(g=h==="x"?N:z)}const H={x:a.x+v.x,y:a.y+v.y},D={x:u.x+_.x,y:u.y+_.y},R=Math.max(Math.abs(H.x-g[0].x),Math.abs(D.x-g[0].x)),L=Math.max(Math.abs(H.y-g[0].y),Math.abs(D.y-g[0].y));R>=L?(y=(H.x+D.x)/2,k=g[0].y):(y=g[0].x,k=(H.y+D.y)/2)}return[[e,{x:a.x+v.x,y:a.y+v.y},...g,{x:u.x+_.x,y:u.y+_.y},n],y,k,b,E]}function vf(e,t,n,i){const r=Math.min(To(e,t)/2,To(t,n)/2,i),{x:l,y:o}=t;if(e.x===l&&l===n.x||e.y===o&&o===n.y)return`L${l} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${l+r*u},${o}Q ${l},${o} ${l},${o+r*c}`}const s=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${l},${o+r*a}Q ${l},${o} ${l+r*s},${o}`}function fi({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:i,targetY:r,targetPosition:l=oe.Top,borderRadius:o=5,centerX:s,centerY:a,offset:u=20}){const[c,h,f,g,y]=yf({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:r},targetPosition:l,center:{x:s,y:a},offset:u});return[c.reduce((v,_,m)=>{let C="";return m>0&&m<c.length-1?C=vf(c[m-1],_,c[m+1],o):C=`${m===0?"M":"L"}${_.x} ${_.y}`,v+=C,v},""),h,f,g,y]}function Po(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function xf(e){var h;const{sourceNode:t,targetNode:n}=e;if(!Po(t)||!Po(n))return null;const i=t.internals.handleBounds||Io(t.handles),r=n.internals.handleBounds||Io(n.handles),l=zo((i==null?void 0:i.source)??[],e.sourceHandle),o=zo(e.connectionMode===Kt.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!l||!o)return(h=e.onError)==null||h.call(e,"008",Rn.error008(l?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(l==null?void 0:l.position)||oe.Bottom,a=(o==null?void 0:o.position)||oe.Top,u=Pn(t,l,s),c=Pn(n,o,a);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:s,targetPosition:a}}function Io(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Pn(e,t,n=oe.Left,i=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,l=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:o,height:s}=t??Ht(e);if(i)return{x:r+o/2,y:l+s/2};switch((t==null?void 0:t.position)??n){case oe.Top:return{x:r+o/2,y:l};case oe.Right:return{x:r+o,y:l+s/2};case oe.Bottom:return{x:r+o/2,y:l+s};case oe.Left:return{x:r,y:l+s/2}}}function zo(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function sr(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function wf(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const l=new Set;return e.reduce((o,s)=>([s.markerStart||i,s.markerEnd||r].forEach(a=>{if(a&&typeof a=="object"){const u=sr(a,t);l.has(u)||(o.push({id:u,color:a.color||n,...a}),l.add(u))}}),o),[]).sort((o,s)=>o.id.localeCompare(s.id))}function _f(e,t,n,i,r){let l=.5;r==="start"?l=0:r==="end"&&(l=1);let o=[(e.x+e.width*l)*t.zoom+t.x,e.y*t.zoom+t.y-i],s=[-100*l,-100];switch(n){case oe.Right:o=[(e.x+e.width)*t.zoom+t.x+i,(e.y+e.height*l)*t.zoom+t.y],s=[0,-100*l];break;case oe.Bottom:o[1]=(e.y+e.height)*t.zoom+t.y+i,s[1]=0;break;case oe.Left:o=[e.x*t.zoom+t.x-i,(e.y+e.height*l)*t.zoom+t.y],s=[-100,-100*l];break}return`translate(${o[0]}px, ${o[1]}px) translate(${s[0]}%, ${s[1]}%)`}const Cr={nodeOrigin:[0,0],nodeExtent:si,elevateNodesOnSelect:!0,defaults:{}},bf={...Cr,checkEquality:!0};function Sr(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function kf(e,t,n){const i=Sr(Cr,n);for(const r of e.values())if(r.parentId)Ar(r,e,t,i);else{const l=Yn(r,i.nodeOrigin),o=dn(r.extent)?r.extent:i.nodeExtent,s=Zt(l,o,Ht(r));r.internals.positionAbsolute=s}}function jl(e,t,n,i){var s,a;const r=Sr(bf,i),l=new Map(t),o=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let c=l.get(u.id);if(r.checkEquality&&u===(c==null?void 0:c.internals.userNode))t.set(u.id,c);else{const h=Yn(u,r.nodeOrigin),f=dn(u.extent)?u.extent:r.nodeExtent,g=Zt(h,f,Ht(u));c={...r.defaults,...u,measured:{width:(s=u.measured)==null?void 0:s.width,height:(a=u.measured)==null?void 0:a.height},internals:{positionAbsolute:g,handleBounds:u.measured?c==null?void 0:c.internals.handleBounds:void 0,z:Jl(u,o),userNode:u}},t.set(u.id,c)}u.parentId&&Ar(c,t,n,i)}}function Ef(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Ar(e,t,n,i){const{elevateNodesOnSelect:r,nodeOrigin:l,nodeExtent:o}=Sr(Cr,i),s=e.parentId,a=t.get(s);if(!a){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Ef(e,n);const u=r?1e3:0,{x:c,y:h,z:f}=Cf(e,a,l,o,u),{positionAbsolute:g}=e.internals,y=c!==g.x||h!==g.y;(y||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:c,y:h}:g,z:f})}function Jl(e,t){return(At(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Cf(e,t,n,i,r){const{x:l,y:o}=t.internals.positionAbsolute,s=Ht(e),a=Yn(e,n),u=dn(e.extent)?Zt(a,e.extent,s):a;let c=Zt({x:l+u.x,y:o+u.y},i,s);e.extent==="parent"&&(c=Vl(c,s,t));const h=Jl(e,r),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>h?f:h}}function Sf(e,t,n,i=[0,0]){var o;const r=[],l=new Map;for(const s of e){const a=t.get(s.parentId);if(!a)continue;const u=((o=l.get(s.parentId))==null?void 0:o.expandedRect)??un(a),c=Wl(u,s.rect);l.set(s.parentId,{expandedRect:c,parent:a})}return l.size>0&&l.forEach(({expandedRect:s,parent:a},u)=>{var C;const c=a.internals.positionAbsolute,h=Ht(a),f=a.origin??i,g=s.x<c.x?Math.round(Math.abs(c.x-s.x)):0,y=s.y<c.y?Math.round(Math.abs(c.y-s.y)):0,k=Math.max(h.width,Math.round(s.width)),v=Math.max(h.height,Math.round(s.height)),_=(k-h.width)*f[0],m=(v-h.height)*f[1];(g>0||y>0||_||m)&&(r.push({id:u,type:"position",position:{x:a.position.x-g+_,y:a.position.y-y+m}}),(C=n.get(u))==null||C.forEach(b=>{e.some(E=>E.id===b.id)||r.push({id:b.id,type:"position",position:{x:b.position.x+g,y:b.position.y+y}})})),(h.width<s.width||h.height<s.height||g||y)&&r.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:k+(g?f[0]*g-_:0),height:v+(y?f[1]*y-m:0)}})}),r}function Af(e,t,n,i,r,l){const o=i==null?void 0:i.querySelector(".xyflow__viewport");let s=!1;if(!o)return{changes:[],updatedInternals:s};const a=[],u=window.getComputedStyle(o),{m22:c}=new window.DOMMatrixReadOnly(u.transform),h=[];for(const f of e.values()){const g=t.get(f.id);if(g)if(g.hidden)g.internals={...g.internals,handleBounds:void 0},s=!0;else{const y=Er(f.nodeElement),k=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(k||!g.internals.handleBounds||f.force))){const _=f.nodeElement.getBoundingClientRect(),m=dn(g.extent)?g.extent:l;let{positionAbsolute:C}=g.internals;g.parentId&&g.extent==="parent"?C=Vl(C,y,t.get(g.parentId)):m&&(C=Zt(C,m,y)),g.measured=y,g.internals={...g.internals,positionAbsolute:C,handleBounds:{source:Ao("source",f.nodeElement,_,c,g.id),target:Ao("target",f.nodeElement,_,c,g.id)}},g.parentId&&Ar(g,t,n,{nodeOrigin:r}),s=!0,k&&(a.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&h.push({id:g.id,parentId:g.parentId,rect:un(g,r)}))}}}if(h.length>0){const f=Sf(h,t,n,r);a.push(...f)}return{changes:a,updatedInternals:s}}async function Nf({delta:e,panZoom:t,transform:n,translateExtent:i,width:r,height:l}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,l]],i),s=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(s)}function Ql(e,t,n){e.clear(),t.clear();for(const i of n){const{source:r,target:l,sourceHandle:o=null,targetHandle:s=null}=i,a=`${r}-source-${o}`,u=`${l}-target-${s}`,c=e.get(a)||new Map,h=e.get(u)||new Map,f={edgeId:i.id,source:r,target:l,sourceHandle:o,targetHandle:s};t.set(i.id,i),e.set(a,c.set(`${l}-${s}`,f)),e.set(u,h.set(`${r}-${o}`,f))}}function $l(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:$l(n,t):!1}function Oo(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Mf(e,t,n,i){const r=new Map;for(const[l,o]of e)if((o.selected||o.id===i)&&(!o.parentId||!$l(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const s=e.get(l);s&&r.set(l,{id:l,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return r}function Bi({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var o,s,a;const r=[];for(const[u,c]of t){const h=(o=n.get(u))==null?void 0:o.internals.userNode;h&&r.push({...h,position:c.position,dragging:i})}if(!e)return[r[0],r];const l=(s=n.get(e))==null?void 0:s.internals.userNode;return[l?{...l,position:((a=t.get(e))==null?void 0:a.position)||l.position,dragging:i}:r[0],r]}function Tf({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:r}){let l={x:null,y:null},o=0,s=new Map,a=!1,u={x:0,y:0},c=null,h=!1,f=null,g=!1;function y({noDragClassName:v,handleSelector:_,domNode:m,isSelectable:C,nodeId:b,nodeClickDistance:E=0}){f=ut(m);function A({x:D,y:R},L){const{nodeLookup:M,nodeExtent:x,snapGrid:P,snapToGrid:w,nodeOrigin:S,onNodeDrag:T,onSelectionDrag:I,onError:F,updateNodePositions:W}=t();l={x:D,y:R};let U=!1,te={x:0,y:0,x2:0,y2:0};if(s.size>1&&x){const B=Fn(s);te=or(B)}for(const[B,j]of s){if(!M.has(B))continue;let ie={x:D-j.distance.x,y:R-j.distance.y};w&&(ie=br(ie,P));let de=[[x[0][0],x[0][1]],[x[1][0],x[1][1]]];if(s.size>1&&x&&!j.extent){const{positionAbsolute:G}=j.internals,re=G.x-te.x+x[0][0],le=G.x+j.measured.width-te.x2+x[1][0],_e=G.y-te.y+x[0][1],me=G.y+j.measured.height-te.y2+x[1][1];de=[[re,_e],[le,me]]}const{position:fe,positionAbsolute:Z}=rf({nodeId:B,nextPosition:ie,nodeLookup:M,nodeExtent:de,nodeOrigin:S,onError:F});U=U||j.position.x!==fe.x||j.position.y!==fe.y,j.position=fe,j.internals.positionAbsolute=Z}if(U&&(W(s,!0),L&&(i||T||!b&&I))){const[B,j]=Bi({nodeId:b,dragItems:s,nodeLookup:M});i==null||i(L,s,B,j),T==null||T(L,B,j),b||I==null||I(L,j)}}async function N(){if(!c)return;const{transform:D,panBy:R,autoPanSpeed:L}=t(),[M,x]=Xl(u,c,L);(M!==0||x!==0)&&(l.x=(l.x??0)-M/D[2],l.y=(l.y??0)-x/D[2],await R({x:M,y:x})&&A(l,null)),o=requestAnimationFrame(N)}function z(D){var U;const{nodeLookup:R,multiSelectionActive:L,nodesDraggable:M,transform:x,snapGrid:P,snapToGrid:w,selectNodesOnDrag:S,onNodeDragStart:T,onSelectionDragStart:I,unselectNodesAndEdges:F}=t();h=!0,(!S||!C)&&!L&&b&&((U=R.get(b))!=null&&U.selected||F()),C&&S&&b&&(e==null||e(b));const W=Fi(D.sourceEvent,{transform:x,snapGrid:P,snapToGrid:w,containerBounds:c});if(l=W,s=Mf(R,M,W,b),s.size>0&&(n||T||!b&&I)){const[te,B]=Bi({nodeId:b,dragItems:s,nodeLookup:R});n==null||n(D.sourceEvent,s,te,B),T==null||T(D.sourceEvent,te,B),b||I==null||I(D.sourceEvent,B)}}const H=au().clickDistance(E).on("start",D=>{const{domNode:R,nodeDragThreshold:L,transform:M,snapGrid:x,snapToGrid:P}=t();c=(R==null?void 0:R.getBoundingClientRect())||null,g=!1,L===0&&z(D),l=Fi(D.sourceEvent,{transform:M,snapGrid:x,snapToGrid:P,containerBounds:c}),u=Nt(D.sourceEvent,c)}).on("drag",D=>{const{autoPanOnNodeDrag:R,transform:L,snapGrid:M,snapToGrid:x,nodeDragThreshold:P,nodeLookup:w}=t(),S=Fi(D.sourceEvent,{transform:L,snapGrid:M,snapToGrid:x,containerBounds:c});if((D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1||b&&!w.has(b))&&(g=!0),!g){if(!a&&R&&h&&(a=!0,N()),!h){const T=S.xSnapped-(l.x??0),I=S.ySnapped-(l.y??0);Math.sqrt(T*T+I*I)>P&&z(D)}(l.x!==S.xSnapped||l.y!==S.ySnapped)&&s&&h&&(u=Nt(D.sourceEvent,c),A(S,D.sourceEvent))}}).on("end",D=>{if(!(!h||g)&&(a=!1,h=!1,cancelAnimationFrame(o),s.size>0)){const{nodeLookup:R,updateNodePositions:L,onNodeDragStop:M,onSelectionDragStop:x}=t();if(L(s,!1),r||M||!b&&x){const[P,w]=Bi({nodeId:b,dragItems:s,nodeLookup:R,dragging:!1});r==null||r(D.sourceEvent,s,P,w),M==null||M(D.sourceEvent,P,w),b||x==null||x(D.sourceEvent,w)}}}).filter(D=>{const R=D.target;return!D.button&&(!v||!Oo(R,`.${v}`,m))&&(!_||Oo(R,_,m))});f.call(H)}function k(){f==null||f.on(".drag",null)}return{update:y,destroy:k}}function Pf(e,t,n){const i=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const l of t.values())Tn(r,un(l))>0&&i.push(l);return i}const If=250;function zf(e,t,n,i){var s,a;let r=[],l=1/0;const o=Pf(e,n,t+If);for(const u of o){const c=[...((s=u.internals.handleBounds)==null?void 0:s.source)??[],...((a=u.internals.handleBounds)==null?void 0:a.target)??[]];for(const h of c){if(i.nodeId===h.nodeId&&i.type===h.type&&i.id===h.id)continue;const{x:f,y:g}=Pn(u,h,h.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(g-e.y,2));y>t||(y<l?(r=[{...h,x:f,y:g}],l=y):y===l&&r.push({...h,x:f,y:g}))}}if(!r.length)return null;if(r.length>1){const u=i.type==="source"?"target":"source";return r.find(c=>c.type===u)??r[0]}return r[0]}function es(e,t,n,i,r,l=!1){var u,c,h;const o=i.get(e);if(!o)return null;const s=r==="strict"?(u=o.internals.handleBounds)==null?void 0:u[t]:[...((c=o.internals.handleBounds)==null?void 0:c.source)??[],...((h=o.internals.handleBounds)==null?void 0:h.target)??[]],a=(n?s==null?void 0:s.find(f=>f.id===n):s==null?void 0:s[0])??null;return a&&l?{...a,...Pn(o,a,a.position,!0)}:a}function ts(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Of(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const ns=()=>!0;function Df(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:l,isTarget:o,domNode:s,nodeLookup:a,lib:u,autoPanOnConnect:c,flowId:h,panBy:f,cancelConnection:g,onConnectStart:y,onConnect:k,onConnectEnd:v,isValidConnection:_=ns,onReconnectEnd:m,updateConnection:C,getTransform:b,getFromHandle:E,autoPanSpeed:A}){const N=sf(e.target);let z=0,H;const{x:D,y:R}=Nt(e),L=N==null?void 0:N.elementFromPoint(D,R),M=ts(l,L),x=s==null?void 0:s.getBoundingClientRect();if(!x||!M)return;const P=es(r,M,i,a,t);if(!P)return;let w=Nt(e,x),S=!1,T=null,I=!1,F=null;function W(){if(!c||!x)return;const[Z,G]=Xl(w,x,A);f({x:Z,y:G}),z=requestAnimationFrame(W)}const U={...P,nodeId:r,type:M,position:P.position},te=a.get(r),j={inProgress:!0,isValid:null,from:Pn(te,U,oe.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:te,to:w,toHandle:null,toPosition:_o[U.position],toNode:null};C(j);let ie=j;y==null||y(e,{nodeId:r,handleId:i,handleType:M});function de(Z){if(!E()||!U){fe(Z);return}const G=b();w=Nt(Z,x),H=zf(Bn(w,G,!1,[1,1]),n,a,U),S||(W(),S=!0);const re=is(Z,{handle:H,connectionMode:t,fromNodeId:r,fromHandleId:i,fromType:o?"target":"source",isValidConnection:_,doc:N,lib:u,flowId:h,nodeLookup:a});F=re.handleDomNode,T=re.connection,I=Of(!!H,re.isValid);const le={...ie,isValid:I,to:H&&I?Kl({x:H.x,y:H.y},G):w,toHandle:re.toHandle,toPosition:I&&re.toHandle?re.toHandle.position:_o[U.position],toNode:re.toHandle?a.get(re.toHandle.nodeId):null};I&&H&&ie.toHandle&&le.toHandle&&ie.toHandle.type===le.toHandle.type&&ie.toHandle.nodeId===le.toHandle.nodeId&&ie.toHandle.id===le.toHandle.id&&ie.to.x===le.to.x&&ie.to.y===le.to.y||(C(le),ie=le)}function fe(Z){(H||F)&&T&&I&&(k==null||k(T));const{inProgress:G,...re}=ie,le={...re,toPosition:ie.toHandle?ie.toPosition:null};v==null||v(Z,le),l&&(m==null||m(Z,le)),g(),cancelAnimationFrame(z),S=!1,I=!1,T=null,F=null,N.removeEventListener("mousemove",de),N.removeEventListener("mouseup",fe),N.removeEventListener("touchmove",de),N.removeEventListener("touchend",fe)}N.addEventListener("mousemove",de),N.addEventListener("mouseup",fe),N.addEventListener("touchmove",de),N.addEventListener("touchend",fe)}function is(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:l,doc:o,lib:s,flowId:a,isValidConnection:u=ns,nodeLookup:c}){const h=l==="target",f=t?o.querySelector(`.${s}-flow__handle[data-id="${a}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y}=Nt(e),k=o.elementFromPoint(g,y),v=k!=null&&k.classList.contains(`${s}-flow__handle`)?k:f,_={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const m=ts(void 0,v),C=v.getAttribute("data-nodeid"),b=v.getAttribute("data-handleid"),E=v.classList.contains("connectable"),A=v.classList.contains("connectableend");if(!C||!m)return _;const N={source:h?C:i,sourceHandle:h?b:r,target:h?i:C,targetHandle:h?r:b};_.connection=N;const H=E&&A&&(n===Kt.Strict?h&&m==="source"||!h&&m==="target":C!==i||b!==r);_.isValid=H&&u(N),_.toHandle=es(C,m,b,c,n,!1)}return _}const Lf={onPointerDown:Df,isValid:is};function Hf({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const r=ut(e);function l({translateExtent:s,width:a,height:u,zoomStep:c=10,pannable:h=!0,zoomable:f=!0,inversePan:g=!1}){const y=C=>{const b=n();if(C.sourceEvent.type!=="wheel"||!t)return;const E=-C.sourceEvent.deltaY*(C.sourceEvent.deltaMode===1?.05:C.sourceEvent.deltaMode?1:.002)*c,A=b[2]*Math.pow(2,E);t.scaleTo(A)};let k=[0,0];const v=C=>{(C.sourceEvent.type==="mousedown"||C.sourceEvent.type==="touchstart")&&(k=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY])},_=C=>{const b=n();if(C.sourceEvent.type!=="mousemove"&&C.sourceEvent.type!=="touchmove"||!t)return;const E=[C.sourceEvent.clientX??C.sourceEvent.touches[0].clientX,C.sourceEvent.clientY??C.sourceEvent.touches[0].clientY],A=[E[0]-k[0],E[1]-k[1]];k=E;const N=i()*Math.max(b[2],Math.log(b[2]))*(g?-1:1),z={x:b[0]-A[0]*N,y:b[1]-A[1]*N},H=[[0,0],[a,u]];t.setViewportConstrained({x:z.x,y:z.y,zoom:b[2]},H,s)},m=Yl().on("start",v).on("zoom",h?_:null).on("zoom.wheel",f?y:null);r.call(m,{})}function o(){r.on("zoom",null)}return{update:l,destroy:o,pointer:ft}}const Rf=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ai=e=>({x:e.x,y:e.y,zoom:e.k}),Vi=({x:e,y:t,zoom:n})=>Ei.translate(e,t).scale(n),Qt=(e,t)=>e.target.closest(`.${t}`),rs=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Xi=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},os=e=>{const t=e.ctrlKey&&di()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Yf({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:l,zoomOnPinch:o,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:u}){return c=>{if(Qt(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(c.ctrlKey&&o){const v=ft(c),_=os(c),m=h*Math.pow(2,_);i.scaleTo(n,m,v,c);return}const f=c.deltaMode===1?20:1;let g=r===Ot.Vertical?0:c.deltaX*f,y=r===Ot.Horizontal?0:c.deltaY*f;!di()&&c.shiftKey&&r!==Ot.Vertical&&(g=c.deltaY*f,y=0),i.translateBy(n,-(g/h)*l,-(y/h)*l,{internal:!0});const k=Ai(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(c,k)),e.isPanScrolling&&(a==null||a(c,k),e.panScrollTimeout=setTimeout(()=>{u==null||u(c,k),e.isPanScrolling=!1},150))}}function Ff({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,r){if(!t&&i.type==="wheel"&&!i.ctrlKey||Qt(i,e))return null;i.preventDefault(),n.call(this,i,r)}}function Bf({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var l,o,s;if((l=i.sourceEvent)!=null&&l.internal)return;const r=Ai(i.transform);e.mouseButton=((o=i.sourceEvent)==null?void 0:o.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((s=i.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,r))}}function Vf({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return l=>{var o,s;e.usedRightMouseButton=!!(n&&rs(t,e.mouseButton??0)),(o=l.sourceEvent)!=null&&o.sync||i([l.transform.x,l.transform.y,l.transform.k]),r&&!((s=l.sourceEvent)!=null&&s.internal)&&(r==null||r(l.sourceEvent,Ai(l.transform)))}}function Xf({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:l}){return o=>{var s;if(!((s=o.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,l&&rs(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&l(o.sourceEvent),e.usedRightMouseButton=!1,i(!1),r&&Rf(e.prevViewport,o.transform))){const a=Ai(o.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(o.sourceEvent,a)},n?150:0)}}}function Wf({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:l,userSelectionActive:o,noWheelClassName:s,noPanClassName:a,lib:u}){return c=>{var y;const h=e||t,f=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(Qt(c,`${u}-flow__node`)||Qt(c,`${u}-flow__edge`)))return!0;if(!i&&!h&&!r&&!l&&!n||o||Qt(c,s)&&c.type==="wheel"||Qt(c,a)&&(c.type!=="wheel"||r&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((y=c.touches)==null?void 0:y.length)>1)return c.preventDefault(),!1;if(!h&&!r&&!f&&c.type==="wheel"||!i&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(i)&&!i.includes(c.button)&&c.type==="mousedown")return!1;const g=Array.isArray(i)&&i.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&g}}function Kf({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:r,viewport:l,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=Yl().clickDistance(!At(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(r),g=ut(e).call(f);C({x:l.x,y:l.y,zoom:cn(l.zoom,t,n)},[[0,0],[h.width,h.height]],r);const y=g.on("wheel.zoom"),k=g.on("dblclick.zoom");f.wheelDelta(os);function v(L,M){return g?new Promise(x=>{f==null||f.transform(Xi(g,M==null?void 0:M.duration,()=>x(!0)),L)}):Promise.resolve(!1)}function _({noWheelClassName:L,noPanClassName:M,onPaneContextMenu:x,userSelectionActive:P,panOnScroll:w,panOnDrag:S,panOnScrollMode:T,panOnScrollSpeed:I,preventScrolling:F,zoomOnPinch:W,zoomOnScroll:U,zoomOnDoubleClick:te,zoomActivationKeyPressed:B,lib:j,onTransformChange:ie}){P&&!c.isZoomingOrPanning&&m();const fe=w&&!B&&!P?Yf({zoomPanValues:c,noWheelClassName:L,d3Selection:g,d3Zoom:f,panOnScrollMode:T,panOnScrollSpeed:I,zoomOnPinch:W,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:a}):Ff({noWheelClassName:L,preventScrolling:F,d3ZoomHandler:y});if(g.on("wheel.zoom",fe,{passive:!1}),!P){const G=Bf({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:s});f.on("start",G);const re=Vf({zoomPanValues:c,panOnDrag:S,onPaneContextMenu:!!x,onPanZoom:o,onTransformChange:ie});f.on("zoom",re);const le=Xf({zoomPanValues:c,panOnDrag:S,panOnScroll:w,onPaneContextMenu:x,onPanZoomEnd:a,onDraggingChange:u});f.on("end",le)}const Z=Wf({zoomActivationKeyPressed:B,panOnDrag:S,zoomOnScroll:U,panOnScroll:w,zoomOnDoubleClick:te,zoomOnPinch:W,userSelectionActive:P,noPanClassName:M,noWheelClassName:L,lib:j});f.filter(Z),te?g.on("dblclick.zoom",k):g.on("dblclick.zoom",null)}function m(){f.on("zoom",null)}async function C(L,M,x){const P=Vi(L),w=f==null?void 0:f.constrain()(P,M,x);return w&&await v(w),new Promise(S=>S(w))}async function b(L,M){const x=Vi(L);return await v(x,M),new Promise(P=>P(x))}function E(L){if(g){const M=Vi(L),x=g.property("__zoom");(x.k!==L.zoom||x.x!==L.x||x.y!==L.y)&&(f==null||f.transform(g,M,null,{sync:!0}))}}function A(){const L=g?Rl(g.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function N(L,M){return g?new Promise(x=>{f==null||f.scaleTo(Xi(g,M==null?void 0:M.duration,()=>x(!0)),L)}):Promise.resolve(!1)}function z(L,M){return g?new Promise(x=>{f==null||f.scaleBy(Xi(g,M==null?void 0:M.duration,()=>x(!0)),L)}):Promise.resolve(!1)}function H(L){f==null||f.scaleExtent(L)}function D(L){f==null||f.translateExtent(L)}function R(L){const M=!At(L)||L<0?0:L;f==null||f.clickDistance(M)}return{update:_,destroy:m,setViewport:b,setViewportConstrained:C,getViewport:A,scaleTo:N,scaleBy:z,setScaleExtent:H,setTranslateExtent:D,syncViewport:E,setClickDistance:R}}var Do;(function(e){e.Line="line",e.Handle="handle"})(Do||(Do={}));var Zf=be('<div role="button" tabindex="-1"><!></div>');function fn(e,t){ae(t,!1);const n=Be(),i=()=>V(U,"$connectable",n),r=()=>V(de,"$connectionRadius",n),l=()=>V(j,"$domNode",n),o=()=>V(ie,"$nodeLookup",n),s=()=>V(B,"$connectionMode",n),a=()=>V(G,"$lib",n),u=()=>V(He,"$autoPanOnConnect",n),c=()=>V(Ve,"$flowId",n),h=()=>V(Z,"$isValidConnectionStore",n),f=()=>V(le,"$onedgecreate",n),g=()=>V(ke,"$onConnectAction",n),y=()=>V(se,"$onConnectStartAction",n),k=()=>V(et,"$onConnectEndAction",n),v=()=>V(fe,"$viewport",n),_=()=>V(Ae,"$connection",n),m=()=>V(Ne,"$edges",n),C=()=>V(ve,"$connectionLookup",n),b=K(),E=K(),A=K(),N=K(),z=K(),H=K(),D=K(),R=K();let L=p(t,"id",8,void 0),M=p(t,"type",8,"source"),x=p(t,"position",24,()=>oe.Top),P=p(t,"style",8,void 0),w=p(t,"isValidConnection",8,void 0),S=p(t,"onconnect",8,void 0),T=p(t,"ondisconnect",8,void 0),I=p(t,"isConnectable",8,void 0),F=p(t,"class",8,void 0);const W=En("svelteflow__node_id"),U=En("svelteflow__node_connectable"),te=Le(),{connectionMode:B,domNode:j,nodeLookup:ie,connectionRadius:de,viewport:fe,isValidConnection:Z,lib:G,addEdge:re,onedgecreate:le,panBy:_e,cancelConnection:me,updateConnection:ye,autoPanOnConnect:He,edges:Ne,connectionLookup:ve,onconnect:ke,onconnectstart:se,onconnectend:et,flowId:Ve,connection:Ae}=te;function it(Re){const Ce=ql(Re);(Ce&&Re.button===0||!Ce)&&Lf.onPointerDown(Re,{handleId:d(A),nodeId:W,isTarget:d(b),connectionRadius:r(),domNode:l(),nodeLookup:o(),connectionMode:s(),lib:a(),autoPanOnConnect:u(),flowId:c(),isValidConnection:w()??h(),updateConnection:ye,cancelConnection:me,panBy:_e,onConnect:Pe=>{var at;const Xe=f()?f()(Pe):Pe;Xe&&(re(Xe),(at=g())==null||at(Pe))},onConnectStart:(Pe,Xe)=>{var at;(at=y())==null||at(Pe,{nodeId:Xe.nodeId,handleId:Xe.handleId,handleType:Xe.handleType})},onConnectEnd:(Pe,Xe)=>{var at;(at=k())==null||at(Pe,Xe)},getTransform:()=>[v().x,v().y,v().zoom],getFromHandle:()=>_().fromHandle})}let Ze=K(null),qe=K();q(()=>Y(M()),()=>{X(b,M()==="target")}),q(()=>(Y(I()),i()),()=>{X(E,I()!==void 0?I():i())}),q(()=>Y(L()),()=>{X(A,L()||null)}),q(()=>(Y(S()),Y(T()),m(),C(),Y(M()),Y(L())),()=>{(S()||T())&&(m(),X(qe,C().get(`${W}-${M()}-${L()||null}`)))}),q(()=>(d(Ze),d(qe),Y(T()),Y(S())),()=>{if(d(Ze)&&!Qd(d(qe),d(Ze))){const Re=d(qe)??new Map;bo(d(Ze),Re,T()),bo(Re,d(Ze),S())}X(Ze,d(qe)??new Map)}),q(()=>_(),()=>{X(N,!!_().fromHandle)}),q(()=>(_(),Y(M()),d(A)),()=>{var Re,Ce,Pe;X(z,((Re=_().fromHandle)==null?void 0:Re.nodeId)===W&&((Ce=_().fromHandle)==null?void 0:Ce.type)===M()&&((Pe=_().fromHandle)==null?void 0:Pe.id)===d(A))}),q(()=>(_(),Y(M()),d(A)),()=>{var Re,Ce,Pe;X(H,((Re=_().toHandle)==null?void 0:Re.nodeId)===W&&((Ce=_().toHandle)==null?void 0:Ce.type)===M()&&((Pe=_().toHandle)==null?void 0:Pe.id)===d(A))}),q(()=>(s(),_(),Y(M()),d(A)),()=>{var Re,Ce,Pe;X(D,s()===Kt.Strict?((Re=_().fromHandle)==null?void 0:Re.type)!==M():W!==((Ce=_().fromHandle)==null?void 0:Ce.nodeId)||d(A)!==((Pe=_().fromHandle)==null?void 0:Pe.id))}),q(()=>(d(H),_()),()=>{X(R,d(H)&&_().isValid)}),Ke(),ue();var Me=Zf();J(Me,"data-nodeid",W);const Rt=ne(()=>$e(["svelte-flow__handle",`svelte-flow__handle-${x()}`,"nodrag","nopan",x(),F()]));var Gt=Ee(Me);je(Gt,t,"default",{}),we(Me),pe(()=>{J(Me,"data-handleid",d(A)),J(Me,"data-handlepos",x()),J(Me,"data-id",`${c()??""}-${W??""}-${(L()||null)??""}-${M()??""}`),al(Me,d(Rt)),J(Me,"style",P()),Ie(Me,"valid",d(R)),Ie(Me,"connectingto",d(H)),Ie(Me,"connectingfrom",d(z)),Ie(Me,"source",!d(b)),Ie(Me,"target",d(b)),Ie(Me,"connectablestart",d(E)),Ie(Me,"connectableend",d(E)),Ie(Me,"connectable",d(E)),Ie(Me,"connectionindicator",d(E)&&(!d(N)||d(D)))}),Se("mousedown",Me,it),Se("touchstart",Me,it),Q(e,Me),ce()}var qf=be("<!> <!>",1);function ar(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["data","targetPosition","sourcePosition"]),ae(t,!1);let i=p(t,"data",24,()=>({label:"Node"})),r=p(t,"targetPosition",8,void 0),l=p(t,"sourcePosition",8,void 0);ue();var o=qf(),s=Te(o),a=ne(()=>r()??oe.Top);fn(s,{type:"target",get position(){return d(a)}});var u=xe(s),c=xe(u),h=ne(()=>l()??oe.Bottom);fn(c,{type:"source",get position(){return d(h)}}),pe(()=>{var f;return gn(u,` ${((f=i())==null?void 0:f.label)??""} `)}),Q(e,o),ce()}var Gf=be(" <!>",1);function Uf(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["data","sourcePosition"]),ae(t,!1);let i=p(t,"data",24,()=>({label:"Node"})),r=p(t,"sourcePosition",8,void 0);ue(),On();var l=Gf(),o=Te(l),s=xe(o),a=ne(()=>r()??oe.Bottom);fn(s,{type:"source",get position(){return d(a)}}),pe(()=>{var u;return gn(o,`${((u=i())==null?void 0:u.label)??""} `)}),Q(e,l),ce()}var jf=be(" <!>",1);function Jf(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["data","targetPosition"]),ae(t,!1);let i=p(t,"data",24,()=>({label:"Node"})),r=p(t,"targetPosition",8,void 0);ue(),On();var l=jf(),o=Te(l),s=xe(o),a=ne(()=>r()??oe.Top);fn(s,{type:"target",get position(){return d(a)}}),pe(()=>{var u;return gn(o,`${((u=i())==null?void 0:u.label)??""} `)}),Q(e,l),ce()}function Qf(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,[])}function Lo(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function ls(e,{target:t,domNode:n}){return Lo(e,n,t),{async update({target:i,domNode:r}){Lo(e,r,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}var $f=be("<div><!></div>");function eh(e,t){ae(t,!1);const n=Be(),i=()=>V(r,"$domNode",n),{domNode:r}=Le();ue();var l=$f(),o=Ee(l);je(o,t,"default",{}),we(l),Ue(l,(s,a)=>ls(s,a),()=>({target:".svelte-flow__edgelabel-renderer",domNode:i()})),Q(e,l),ce()}function ss(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:r,unselectNodesAndEdges:l,elementsSelectable:o}=Le();return s=>{const a=O(e).get(s);if(!a){console.warn("012",Rn.error012(s));return}(a.selectable||O(o)&&typeof a.selectable>"u")&&(t.set(null),n.set(null),a.selected?a.selected&&O(i)&&l({nodes:[],edges:[a]}):r([s]))}}var th=be('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function nh(e,t){ae(t,!1);let n=p(t,"style",8,void 0),i=p(t,"x",8,void 0),r=p(t,"y",8,void 0);const l=ss(),o=En("svelteflow__edge_id");ue(),eh(e,{children:(s,a)=>{var u=th(),c=Ee(u);je(c,t,"default",{}),we(u),pe(()=>{J(u,"style","pointer-events: all;"+n()),ze(u,"transform",`translate(-50%, -50%) translate(${i()??""}px,${r()??""}px)`)}),Se("keyup",u,()=>{}),Se("click",u,()=>{o&&l(o)}),Q(s,u)},$$slots:{default:!0}}),ce()}var ih=Fe('<path fill="none" class="svelte-flow__edge-interaction"></path>'),rh=Fe('<path fill="none"></path><!><!>',1);function Ni(e,t){ae(t,!1);let n=p(t,"id",8,void 0),i=p(t,"path",8),r=p(t,"label",8,void 0),l=p(t,"labelX",8,void 0),o=p(t,"labelY",8,void 0),s=p(t,"labelStyle",8,void 0),a=p(t,"markerStart",8,void 0),u=p(t,"markerEnd",8,void 0),c=p(t,"style",8,void 0),h=p(t,"interactionWidth",8,20),f=p(t,"class",8,void 0),g=h()===void 0?20:h();ue();var y=rh(),k=Te(y);const v=ne(()=>$e(["svelte-flow__edge-path",f()]));var _=xe(k);Oe(_,()=>g,C=>{var b=ih();J(b,"stroke-opacity",0),J(b,"stroke-width",g),pe(()=>J(b,"d",i())),Q(C,b)});var m=xe(_);Oe(m,r,C=>{nh(C,{get x(){return l()},get y(){return o()},get style(){return s()},children:(b,E)=>{On();var A=jo();pe(()=>gn(A,r())),Q(b,A)},$$slots:{default:!0}})}),pe(()=>{J(k,"id",n()),J(k,"d",i()),qt(k,d(v)),J(k,"marker-start",a()),J(k,"marker-end",u()),J(k,"style",c())}),Q(e,y),ce()}function cr(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ae(t,!1);const i=K(),r=K(),l=K();let o=p(t,"label",8,void 0),s=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),h=p(t,"interactionWidth",8,void 0),f=p(t,"sourceX",8),g=p(t,"sourceY",8),y=p(t,"sourcePosition",8),k=p(t,"targetX",8),v=p(t,"targetY",8),_=p(t,"targetPosition",8);q(()=>(d(i),d(r),d(l),Y(f()),Y(g()),Y(k()),Y(v()),Y(y()),Y(_())),()=>{(m=>(X(i,m[0]),X(r,m[1]),X(l,m[2])))(Gl({sourceX:f(),sourceY:g(),targetX:k(),targetY:v(),sourcePosition:y(),targetPosition:_()}))}),Ke(),ue(),Ni(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(l)},get label(){return o()},get labelStyle(){return s()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return h()},get style(){return a()}}),ce()}function oh(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ae(t,!1);const i=K(),r=K(),l=K();let o=p(t,"label",8,void 0),s=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),h=p(t,"interactionWidth",8,void 0),f=p(t,"sourceX",8),g=p(t,"sourceY",8),y=p(t,"sourcePosition",8),k=p(t,"targetX",8),v=p(t,"targetY",8),_=p(t,"targetPosition",8);q(()=>(d(i),d(r),d(l),Y(f()),Y(g()),Y(k()),Y(v()),Y(y()),Y(_())),()=>{(m=>(X(i,m[0]),X(r,m[1]),X(l,m[2])))(fi({sourceX:f(),sourceY:g(),targetX:k(),targetY:v(),sourcePosition:y(),targetPosition:_()}))}),Ke(),ue(),Ni(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(l)},get label(){return o()},get labelStyle(){return s()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return h()},get style(){return a()}}),ce()}function lh(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),ae(t,!1);const i=K(),r=K(),l=K();let o=p(t,"label",8,void 0),s=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),h=p(t,"interactionWidth",8,void 0),f=p(t,"sourceX",8),g=p(t,"sourceY",8),y=p(t,"targetX",8),k=p(t,"targetY",8);q(()=>(d(i),d(r),d(l),Y(f()),Y(g()),Y(y()),Y(k())),()=>{(v=>(X(i,v[0]),X(r,v[1]),X(l,v[2])))(lr({sourceX:f(),sourceY:g(),targetX:y(),targetY:k()}))}),Ke(),ue(),Ni(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(l)},get label(){return o()},get labelStyle(){return s()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return h()},get style(){return a()}}),ce()}function sh(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]);De(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ae(t,!1);const i=K(),r=K(),l=K();let o=p(t,"label",8,void 0),s=p(t,"labelStyle",8,void 0),a=p(t,"style",8,void 0),u=p(t,"markerStart",8,void 0),c=p(t,"markerEnd",8,void 0),h=p(t,"interactionWidth",8,void 0),f=p(t,"sourceX",8),g=p(t,"sourceY",8),y=p(t,"sourcePosition",8),k=p(t,"targetX",8),v=p(t,"targetY",8),_=p(t,"targetPosition",8);q(()=>(d(i),d(r),d(l),Y(f()),Y(g()),Y(k()),Y(v()),Y(y()),Y(_())),()=>{(m=>(X(i,m[0]),X(r,m[1]),X(l,m[2])))(fi({sourceX:f(),sourceY:g(),targetX:k(),targetY:v(),sourcePosition:y(),targetPosition:_(),borderRadius:0}))}),Ke(),ue(),Ni(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(l)},get label(){return o()},get labelStyle(){return s()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return h()},get style(){return a()}}),ce()}function ah(e,t){const n=e.set,i=t.set,r=O(e),l=O(t);let s=r.length===0&&l.length>0?l:r;e.set(s);const a=u=>{const c=n(u);return s=c,i(s),c};e.set=t.set=a,e.update=t.update=u=>a(u(s))}function ch(e,t){const n=e.set,i=t.set;let r=O(t);e.set(r);const l=o=>{n(o),i(o),r=o};e.set=t.set=l,e.update=t.update=o=>l(o(r))}const uh=(e,t,n)=>{if(!n)return;const i=O(e),r=t.set,l=n.set;let o=n?O(n):{x:0,y:0,zoom:1};t.set(o),t.set=s=>(r(s),l(s),o=s,s),n.set=s=>(i==null||i.syncViewport(s),r(s),l(s),o=s,s),t.update=s=>{t.set(s(o))},n.update=s=>{n.set(s(o))}},dh=(e,t,n,i=[0,0],r=si)=>{const{subscribe:l,set:o,update:s}=ee([]);let a=e,u={},c=!0;const h=k=>(jl(k,t,n,{elevateNodesOnSelect:c,nodeOrigin:i,nodeExtent:r,defaults:u,checkEquality:!1}),a=k,o(a),a),f=k=>h(k(a)),g=k=>{u=k},y=k=>{c=k.elevateNodesOnSelect??c};return h(a),{subscribe:l,set:h,update:f,setDefaultOptions:g,setOptions:y}},fh=(e,t,n,i)=>{const{subscribe:r,set:l,update:o}=ee([]);let s=e,a={};const u=f=>{const g=a?f.map(y=>({...a,...y})):f;Ql(t,n,g),s=g,l(s)},c=f=>u(f(s)),h=f=>{a=f};return u(s),{subscribe:r,set:u,update:c,setDefaultOptions:h}},as={input:Uf,output:Jf,default:ar,group:Qf},cs={straight:lh,smoothstep:oh,default:cr,step:sh},hh=({nodes:e=[],edges:t=[],width:n,height:i,fitView:r,nodeOrigin:l,nodeExtent:o})=>{const s=new Map,a=new Map,u=new Map,c=new Map,h=l??[0,0],f=o??si;jl(e,s,a,{nodeExtent:f,nodeOrigin:h,elevateNodesOnSelect:!1,checkEquality:!1}),Ql(u,c,t);let g={x:0,y:0,zoom:1};if(r&&n&&i){const y=Fn(s,{filter:k=>!!((k.width||k.initialWidth)&&(k.height||k.initialHeight))});g=kr(y,n,i,.5,2,.1)}return{flowId:ee(null),nodes:dh(e,s,a,h,f),nodeLookup:dt(s),parentLookup:dt(a),edgeLookup:dt(c),visibleNodes:dt([]),edges:fh(t,u,c),visibleEdges:dt([]),connectionLookup:dt(u),height:ee(500),width:ee(500),minZoom:ee(.5),maxZoom:ee(2),nodeOrigin:ee(h),nodeDragThreshold:ee(1),nodeExtent:ee(f),translateExtent:ee(si),autoPanOnNodeDrag:ee(!0),autoPanOnConnect:ee(!0),fitViewOnInit:ee(!1),fitViewOnInitDone:ee(!1),fitViewOptions:ee(void 0),panZoom:ee(null),snapGrid:ee(null),dragging:ee(!1),selectionRect:ee(null),selectionKeyPressed:ee(!1),multiselectionKeyPressed:ee(!1),deleteKeyPressed:ee(!1),panActivationKeyPressed:ee(!1),zoomActivationKeyPressed:ee(!1),selectionRectMode:ee(null),selectionMode:ee(ai.Partial),nodeTypes:ee(as),edgeTypes:ee(cs),viewport:ee(g),connectionMode:ee(Kt.Strict),domNode:ee(null),connection:dt(ir),connectionLineType:ee(on.Bezier),connectionRadius:ee(20),isValidConnection:ee(()=>!0),nodesDraggable:ee(!0),nodesConnectable:ee(!0),elementsSelectable:ee(!0),selectNodesOnDrag:ee(!0),markers:dt([]),defaultMarkerColor:ee("#b1b1b7"),lib:dt("svelte"),onlyRenderVisibleElements:ee(!1),onerror:ee(of),ondelete:ee(void 0),onedgecreate:ee(void 0),onconnect:ee(void 0),onconnectstart:ee(void 0),onconnectend:ee(void 0),onbeforedelete:ee(void 0),nodesInitialized:ee(!1),edgesInitialized:ee(!1),viewportInitialized:ee(!1),initialized:dt(!1)}};function gh(e){const t=tn([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,r,l,o,s])=>r&&o&&s?n.filter(u=>{const c=i.get(u.source),h=i.get(u.target);return c&&h&&ff({sourceNode:c,targetNode:h,width:o,height:s,transform:[l.x,l.y,l.zoom]})}):n);return tn([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,r,l])=>n.reduce((s,a)=>{const u=i.get(a.source),c=i.get(a.target);if(!u||!c)return s;const h=xf({id:a.id,sourceNode:u,targetNode:c,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:r,onError:l});return h&&s.push({...a,zIndex:df({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:c,elevateOnSelect:!1}),...h}),s},[]))}function ph(e){return tn([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,r,l])=>{const o=[l.x,l.y,l.zoom];return n?Fl(t,{x:0,y:0,width:i,height:r},o,!0):Array.from(t.values())})}const Nr=Symbol();function mh({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:l,nodeExtent:o}){const s=hh({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:l,nodeExtent:o});function a(w){s.nodeTypes.set({...as,...w})}function u(w){s.edgeTypes.set({...cs,...w})}function c(w){const S=O(s.edges);s.edges.set(pf(w,S))}const h=(w,S=!1)=>{var I;const T=O(s.nodeLookup);for(const[F,W]of w){const U=(I=T.get(F))==null?void 0:I.internals.userNode;U&&(U.position=W.position,U.dragging=S)}s.nodes.update(F=>F)};function f(w){var W,U,te;const S=O(s.nodeLookup),T=O(s.parentLookup),{changes:I,updatedInternals:F}=Af(w,S,O(s.parentLookup),O(s.domNode),O(s.nodeOrigin));if(F){if(kf(S,T,{nodeOrigin:l,nodeExtent:o}),!O(s.fitViewOnInitDone)&&O(s.fitViewOnInit)){const B=O(s.fitViewOptions),j=y({...B,nodes:B==null?void 0:B.nodes});s.fitViewOnInitDone.set(j)}for(const B of I){const j=(W=S.get(B.id))==null?void 0:W.internals.userNode;if(j)switch(B.type){case"dimensions":{const ie={...j.measured,...B.dimensions};B.setAttributes&&(j.width=((U=B.dimensions)==null?void 0:U.width)??j.width,j.height=((te=B.dimensions)==null?void 0:te.height)??j.height),j.measured=ie;break}case"position":j.position=B.position??j.position;break}}s.nodes.update(B=>B),O(s.nodesInitialized)||s.nodesInitialized.set(!0)}}function g(w){const S=O(s.panZoom),T=O(s.domNode);if(!S||!T)return Promise.resolve(!1);const{width:I,height:F}=Er(T),W=ko(O(s.nodeLookup),w);return Eo({nodes:W,width:I,height:F,minZoom:O(s.minZoom),maxZoom:O(s.maxZoom),panZoom:S},w)}function y(w){const S=O(s.panZoom);if(!S)return!1;const T=ko(O(s.nodeLookup),w);return Eo({nodes:T,width:O(s.width),height:O(s.height),minZoom:O(s.minZoom),maxZoom:O(s.maxZoom),panZoom:S},w),T.size>0}function k(w,S){const T=O(s.panZoom);return T?T.scaleBy(w,S):Promise.resolve(!1)}function v(w){return k(1.2,w)}function _(w){return k(1/1.2,w)}function m(w){const S=O(s.panZoom);S&&(S.setScaleExtent([w,O(s.maxZoom)]),s.minZoom.set(w))}function C(w){const S=O(s.panZoom);S&&(S.setScaleExtent([O(s.minZoom),w]),s.maxZoom.set(w))}function b(w){const S=O(s.panZoom);S&&(S.setTranslateExtent(w),s.translateExtent.set(w))}function E(w){let S=!1;return w.forEach(T=>{T.selected&&(T.selected=!1,S=!0)}),S}function A(w){var S;(S=O(s.panZoom))==null||S.setClickDistance(w)}function N(w){E((w==null?void 0:w.nodes)||O(s.nodes))&&s.nodes.set(O(s.nodes)),E((w==null?void 0:w.edges)||O(s.edges))&&s.edges.set(O(s.edges))}s.deleteKeyPressed.subscribe(async w=>{var S;if(w){const T=O(s.nodes),I=O(s.edges),F=T.filter(B=>B.selected),W=I.filter(B=>B.selected),{nodes:U,edges:te}=await Bl({nodesToRemove:F,edgesToRemove:W,nodes:T,edges:I,onBeforeDelete:O(s.onbeforedelete)});(U.length||te.length)&&(s.nodes.update(B=>B.filter(j=>!U.some(ie=>ie.id===j.id))),s.edges.update(B=>B.filter(j=>!te.some(ie=>ie.id===j.id))),(S=O(s.ondelete))==null||S({nodes:U,edges:te}))}});function z(w){const S=O(s.multiselectionKeyPressed);s.nodes.update(T=>T.map(I=>{const F=w.includes(I.id),W=S&&I.selected||F;return I.selected=W,I})),S||s.edges.update(T=>T.map(I=>(I.selected=!1,I)))}function H(w){const S=O(s.multiselectionKeyPressed);s.edges.update(T=>T.map(I=>{const F=w.includes(I.id),W=S&&I.selected||F;return I.selected=W,I})),S||s.nodes.update(T=>T.map(I=>(I.selected=!1,I)))}function D(w){var T;const S=(T=O(s.nodes))==null?void 0:T.find(I=>I.id===w);if(!S){console.warn("012",Rn.error012(w));return}s.selectionRect.set(null),s.selectionRectMode.set(null),S.selected?S.selected&&O(s.multiselectionKeyPressed)&&N({nodes:[S],edges:[]}):z([w])}function R(w){const S=O(s.viewport);return Nf({delta:w,panZoom:O(s.panZoom),transform:[S.x,S.y,S.zoom],translateExtent:O(s.translateExtent),width:O(s.width),height:O(s.height)})}const L=ee(ir),M=w=>{L.set({...w})};function x(){L.set(ir)}function P(){s.fitViewOnInitDone.set(!1),s.selectionRect.set(null),s.selectionRectMode.set(null),s.snapGrid.set(null),s.isValidConnection.set(()=>!0),N(),x()}return{...s,visibleEdges:gh(s),visibleNodes:ph(s),connection:tn([L,s.viewport],([w,S])=>w.inProgress?{...w,to:Bn(w.to,[S.x,S.y,S.zoom])}:{...w}),markers:tn([s.edges,s.defaultMarkerColor,s.flowId],([w,S,T])=>wf(w,{defaultColor:S,id:T})),initialized:(()=>{let w=!1;const S=O(s.nodes).length,T=O(s.edges).length;return tn([s.nodesInitialized,s.edgesInitialized,s.viewportInitialized],([I,F,W])=>w||(S===0?w=W:T===0?w=W&&I:w=W&&I&&F,w))})(),syncNodeStores:w=>ah(s.nodes,w),syncEdgeStores:w=>ch(s.edges,w),syncViewport:w=>uh(s.panZoom,s.viewport,w),setNodeTypes:a,setEdgeTypes:u,addEdge:c,updateNodePositions:h,updateNodeInternals:f,zoomIn:v,zoomOut:_,fitView:w=>g(w),setMinZoom:m,setMaxZoom:C,setTranslateExtent:b,setPaneClickDistance:A,unselectNodesAndEdges:N,addSelectedNodes:z,addSelectedEdges:H,handleNodeSelection:D,panBy:R,updateConnection:M,cancelConnection:x,reset:P}}function Le(){const e=En(Nr);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function yh({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:l,nodeExtent:o}){const s=mh({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:l,nodeExtent:o});return $n(Nr,{getStore:()=>s}),s}function vh(e,t){const{panZoom:n,minZoom:i,maxZoom:r,initialViewport:l,viewport:o,dragging:s,translateExtent:a,paneClickDistance:u}=t,c=Kf({domNode:e,minZoom:i,maxZoom:r,translateExtent:a,viewport:l,paneClickDistance:u,onDraggingChange:s.set}),h=c.getViewport();return o.set(h),n.set(c),c.update(t),{update(f){c.update(f)}}}var xh=be('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function wh(e,t){ae(t,!1);const n=Be(),i=()=>V(S,"$panActivationKeyPressed",n),r=()=>V(L,"$minZoom",n),l=()=>V(M,"$maxZoom",n),o=()=>V(T,"$zoomActivationKeyPressed",n),s=()=>V(R,"$selectionRect",n),a=()=>V(P,"$translateExtent",n),u=()=>V(w,"$lib",n),c=K(),h=K(),f=K();let g=p(t,"initialViewport",8,void 0),y=p(t,"onMoveStart",8,void 0),k=p(t,"onMove",8,void 0),v=p(t,"onMoveEnd",8,void 0),_=p(t,"panOnScrollMode",8),m=p(t,"preventScrolling",8),C=p(t,"zoomOnScroll",8),b=p(t,"zoomOnDoubleClick",8),E=p(t,"zoomOnPinch",8),A=p(t,"panOnDrag",8),N=p(t,"panOnScroll",8),z=p(t,"paneClickDistance",8);const{viewport:H,panZoom:D,selectionRect:R,minZoom:L,maxZoom:M,dragging:x,translateExtent:P,lib:w,panActivationKeyPressed:S,zoomActivationKeyPressed:T,viewportInitialized:I}=Le(),F=te=>H.set({x:te[0],y:te[1],zoom:te[2]});Dn(()=>{ei(I,!0)}),q(()=>Y(g()),()=>{X(c,g()||{x:0,y:0,zoom:1})}),q(()=>(i(),Y(A())),()=>{X(h,i()||A())}),q(()=>(i(),Y(N())),()=>{X(f,i()||N())}),Ke(),ue();var W=xh(),U=Ee(W);je(U,t,"default",{}),we(W),Ue(W,(te,B)=>vh(te,B),()=>({viewport:H,minZoom:r(),maxZoom:l(),initialViewport:d(c),dragging:x,panZoom:D,onPanZoomStart:y(),onPanZoom:k(),onPanZoomEnd:v(),zoomOnScroll:C(),zoomOnDoubleClick:b(),zoomOnPinch:E(),panOnScroll:d(f),panOnDrag:d(h),panOnScrollSpeed:.5,panOnScrollMode:_()||Ot.Free,zoomActivationKeyPressed:o(),preventScrolling:typeof m()=="boolean"?m():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!s(),translateExtent:a(),lib:u(),paneClickDistance:z(),onTransformChange:F})),Q(e,W),ce()}function Ho(e,t){return n=>{n.target===t&&(e==null||e(n))}}function Ro(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}var _h=be('<div class="svelte-flow__pane svelte-1esy7hx"><!></div>');function bh(e,t){ae(t,!1);const n=Be(),i=()=>V(M,"$panActivationKeyPressed",n),r=()=>V(R,"$selectionKeyPressed",n),l=()=>V(H,"$selectionRect",n),o=()=>V(z,"$elementsSelectable",n),s=()=>V(D,"$selectionRectMode",n),a=()=>V(E,"$edges",n),u=()=>V(b,"$nodeLookup",n),c=()=>V(A,"$viewport",n),h=()=>V(L,"$selectionMode",n),f=()=>V(N,"$dragging",n),g=K(),y=K(),k=K();let v=p(t,"panOnDrag",8,void 0),_=p(t,"selectionOnDrag",8,void 0);const m=vi(),{nodes:C,nodeLookup:b,edges:E,viewport:A,dragging:N,elementsSelectable:z,selectionRect:H,selectionRectMode:D,selectionKeyPressed:R,selectionMode:L,panActivationKeyPressed:M,unselectNodesAndEdges:x}=Le();let P=K(),w=null,S=[],T=!1;function I(Z){if(T){T=!1;return}m("paneclick",{event:Z}),x(),D.set(null)}function F(Z){var le,_e;if(w=d(P).getBoundingClientRect(),!z||!d(y)||Z.button!==0||Z.target!==d(P)||!w)return;(_e=(le=Z.target)==null?void 0:le.setPointerCapture)==null||_e.call(le,Z.pointerId);const{x:G,y:re}=Nt(Z,w);x(),H.set({width:0,height:0,startX:G,startY:re,x:G,y:re})}function W(Z){if(!d(y)||!w||!l())return;T=!0;const G=Nt(Z,w),re=l().startX??0,le=l().startY??0,_e={...l(),x:G.x<re?G.x:re,y:G.y<le?G.y:le,width:Math.abs(G.x-re),height:Math.abs(G.y-le)},me=S.map(ve=>ve.id),ye=rr(S,a()).map(ve=>ve.id);S=Fl(u(),_e,[c().x,c().y,c().zoom],h()===ai.Partial,!0);const He=rr(S,a()).map(ve=>ve.id),Ne=S.map(ve=>ve.id);(me.length!==Ne.length||Ne.some(ve=>!me.includes(ve)))&&C.update(ve=>ve.map(Ro(Ne))),(ye.length!==He.length||He.some(ve=>!ye.includes(ve)))&&E.update(ve=>ve.map(Ro(He))),D.set("user"),H.set(_e)}function U(Z){var G,re;Z.button===0&&((re=(G=Z.target)==null?void 0:G.releasePointerCapture)==null||re.call(G,Z.pointerId),!d(y)&&s()==="user"&&Z.target===d(P)&&(I==null||I(Z)),H.set(null),S.length>0&&ei(D,"nodes"),r()&&(T=!1))}const te=Z=>{var G;if(Array.isArray(d(g))&&((G=d(g))!=null&&G.includes(2))){Z.preventDefault();return}m("panecontextmenu",{event:Z})};q(()=>(i(),Y(v())),()=>{X(g,i()||v())}),q(()=>(r(),l(),Y(_()),d(g)),()=>{X(y,r()||l()||_()&&d(g)!==!0)}),q(()=>(o(),d(y),s()),()=>{X(k,o()&&(d(y)||s()==="user"))}),Ke(),ue();var B=_h(),j=Qr(()=>d(k)?void 0:Ho(I,d(P))),ie=Qr(()=>Ho(te,d(P)));const de=ne(()=>v()===!0||Array.isArray(v())&&v().includes(0));pe(()=>Ie(B,"draggable",d(de)));var fe=Ee(B);je(fe,t,"default",{}),we(B),hr(B,Z=>X(P,Z),()=>d(P)),pe(()=>{Ie(B,"dragging",f()),Ie(B,"selection",d(y))}),Se("click",B,function(...Z){var G;(G=d(j))==null||G.apply(this,Z)}),Se("pointerdown",B,function(...Z){var G;(G=d(k)?F:void 0)==null||G.apply(this,Z)}),Se("pointermove",B,function(...Z){var G;(G=d(k)?W:void 0)==null||G.apply(this,Z)}),Se("pointerup",B,function(...Z){var G;(G=d(k)?U:void 0)==null||G.apply(this,Z)}),Se("contextmenu",B,function(...Z){var G;(G=d(ie))==null||G.apply(this,Z)}),Q(e,B),ce()}var kh=be('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function Eh(e,t){ae(t,!1);const n=Be(),i=()=>V(r,"$viewport",n),{viewport:r}=Le();ue();var l=kh(),o=Ee(l);je(o,t,"default",{}),we(l),pe(()=>J(l,"style",`transform: translate(${i().x??""}px, ${i().y??""}px) scale(${i().zoom??""})`)),Q(e,l),ce()}function us(e,t){const{store:n,onDrag:i,onDragStart:r,onDragStop:l,onNodeMouseDown:o}=t,s=Tf({onDrag:i,onDragStart:r,onDragStop:l,onNodeMouseDown:o,getStoreItems:()=>{const u=O(n.snapGrid),c=O(n.viewport);return{nodes:O(n.nodes),nodeLookup:O(n.nodeLookup),edges:O(n.edges),nodeExtent:O(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:O(n.nodeOrigin),multiSelectionActive:O(n.multiselectionKeyPressed),domNode:O(n.domNode),transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:O(n.autoPanOnNodeDrag),nodesDraggable:O(n.nodesDraggable),selectNodesOnDrag:O(n.selectNodesOnDrag),nodeDragThreshold:O(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,c){if(c.disabled){s.destroy();return}s.update({domNode:u,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return a(e,t),{update(u){a(e,u)},destroy(){s.destroy()}}}function Ch({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:r,measuredHeight:l}){if(r===void 0&&l===void 0){const o=e??n,s=t??i;return{width:o?`width:${o}px;`:"",height:s?`height:${s}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}var Sh=be("<div><!></div>");function Ah(e,t){ae(t,!1);const n=Be(),i=()=>V(B,"$nodeTypes",n),r=()=>V(le,"$connectableStore",n),l=K(void 0,!0),o=K(void 0,!0),s=K(void 0,!0),a=K(void 0,!0);let u=p(t,"node",9),c=p(t,"id",9),h=p(t,"data",25,()=>({})),f=p(t,"selected",9,!1),g=p(t,"draggable",9,void 0),y=p(t,"selectable",9,void 0),k=p(t,"connectable",9,!0),v=p(t,"deletable",9,!0),_=p(t,"hidden",9,!1),m=p(t,"dragging",9,!1),C=p(t,"resizeObserver",9,null),b=p(t,"style",9,void 0),E=p(t,"type",9,"default"),A=p(t,"isParent",9,!1),N=p(t,"positionX",9),z=p(t,"positionY",9),H=p(t,"sourcePosition",9,void 0),D=p(t,"targetPosition",9,void 0),R=p(t,"zIndex",9),L=p(t,"measuredWidth",9,void 0),M=p(t,"measuredHeight",9,void 0),x=p(t,"initialWidth",9,void 0),P=p(t,"initialHeight",9,void 0),w=p(t,"width",9,void 0),S=p(t,"height",9,void 0),T=p(t,"dragHandle",9,void 0),I=p(t,"initialized",9,!1),F=p(t,"parentId",9,void 0),W=p(t,"nodeClickDistance",9,void 0),U=p(t,"class",9,"");const te=Le(),{nodeTypes:B,nodeDragThreshold:j,selectNodesOnDrag:ie,handleNodeSelection:de,updateNodeInternals:fe}=te;let Z=K(void 0,!0),G=K(null,!0);const re=vi(),le=ee(k());let _e=K(void 0,!0),me=K(void 0,!0),ye=K(void 0,!0);$n("svelteflow__node_id",c()),$n("svelteflow__node_connectable",le),rl(()=>{var ke;d(G)&&((ke=C())==null||ke.unobserve(d(G)))});function He(ke){y()&&(!O(ie)||!g()||O(j)>0)&&de(c()),re("nodeclick",{node:u().internals.userNode,event:ke})}q(()=>Y(E()),()=>{X(l,E()||"default")}),q(()=>(i(),d(l)),()=>{X(o,!!i()[d(l)])}),q(()=>(i(),d(l),ar),()=>{X(s,i()[d(l)]||ar)}),q(()=>(d(o),Y(E())),()=>{d(o)||console.warn("003",Rn.error003(E()))}),q(()=>(Y(w()),Y(S()),Y(x()),Y(P()),Y(L()),Y(M())),()=>{X(a,Ch({width:w(),height:S(),initialWidth:x(),initialHeight:P(),measuredWidth:L(),measuredHeight:M()}))}),q(()=>Y(k()),()=>{le.set(!!k())}),q(()=>(d(_e),d(l),d(me),Y(H()),d(ye),Y(D()),Y(c()),d(Z)),()=>{(d(_e)&&d(l)!==d(_e)||d(me)&&H()!==d(me)||d(ye)&&D()!==d(ye))&&requestAnimationFrame(()=>fe(new Map([[c(),{id:c(),nodeElement:d(Z),force:!0}]]))),X(_e,d(l)),X(me,H()),X(ye,D())}),q(()=>(Y(C()),d(Z),d(G),Y(I())),()=>{C()&&(d(Z)!==d(G)||!I())&&(d(G)&&C().unobserve(d(G)),d(Z)&&C().observe(d(Z)),X(G,d(Z)))}),Ke(),ue(!0);var Ne=lt(),ve=Te(Ne);Oe(ve,()=>!_(),ke=>{var se=Sh();const et=ne(()=>$e(["svelte-flow__node",`svelte-flow__node-${d(l)}`,U()]));var Ve=Ee(se);ol(Ve,()=>d(s),(Ae,it)=>{it(Ae,{get data(){return h()},get id(){return c()},get selected(){return f()},get selectable(){return y()},get deletable(){return v()},get sourcePosition(){return H()},get targetPosition(){return D()},get zIndex(){return R()},get dragging(){return m()},get draggable(){return g()},get dragHandle(){return T()},get parentId(){return F()},get type(){return d(l)},get isConnectable(){return r()},get positionAbsoluteX(){return N()},get positionAbsoluteY(){return z()},get width(){return w()},get height(){return S()}})}),we(se),Ue(se,(Ae,it)=>us(Ae,it),()=>({nodeId:c(),isSelectable:y(),disabled:!1,handleSelector:T(),noDragClass:"nodrag",nodeClickDistance:W(),onNodeMouseDown:de,onDrag:(Ae,it,Ze,qe)=>{re("nodedrag",{event:Ae,targetNode:Ze,nodes:qe})},onDragStart:(Ae,it,Ze,qe)=>{re("nodedragstart",{event:Ae,targetNode:Ze,nodes:qe})},onDragStop:(Ae,it,Ze,qe)=>{re("nodedragstop",{event:Ae,targetNode:Ze,nodes:qe})},store:te})),hr(se,Ae=>X(Z,Ae),()=>d(Z)),vt(()=>Se("click",se,He)),vt(()=>Se("mouseenter",se,Ae=>re("nodemouseenter",{node:u(),event:Ae}))),vt(()=>Se("mouseleave",se,Ae=>re("nodemouseleave",{node:u(),event:Ae}))),vt(()=>Se("mousemove",se,Ae=>re("nodemousemove",{node:u(),event:Ae}))),vt(()=>Se("contextmenu",se,Ae=>re("nodecontextmenu",{node:u(),event:Ae}))),pe(()=>{J(se,"data-id",c()),al(se,d(et)),J(se,"style",`${b()??""??""};${d(a).width??""}${d(a).height??""}`),Ie(se,"dragging",m()),Ie(se,"selected",f()),Ie(se,"draggable",g()),Ie(se,"connectable",k()),Ie(se,"selectable",y()),Ie(se,"nopan",g()),Ie(se,"parent",A()),ze(se,"z-index",R()),ze(se,"transform",`translate(${N()??""}px, ${z()??""}px)`),ze(se,"visibility",I()?"visible":"hidden")}),Q(ke,se)}),Q(e,Ne),ce()}var Nh=be('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function Mh(e,t){ae(t,!1);const n=Be(),i=()=>V(u,"$visibleNodes",n),r=()=>V(c,"$nodesDraggable",n),l=()=>V(f,"$elementsSelectable",n),o=()=>V(h,"$nodesConnectable",n),s=()=>V(y,"$parentLookup",n);let a=p(t,"nodeClickDistance",8,0);const{visibleNodes:u,nodesDraggable:c,nodesConnectable:h,elementsSelectable:f,updateNodeInternals:g,parentLookup:y}=Le(),k=typeof ResizeObserver>"u"?null:new ResizeObserver(_=>{const m=new Map;_.forEach(C=>{const b=C.target.getAttribute("data-id");m.set(b,{id:b,nodeElement:C.target,force:!0})}),g(m)});rl(()=>{k==null||k.disconnect()}),ue();var v=Nh();xi(v,5,i,_=>_.id,(_,m)=>{var C=ne(()=>!!d(m).selected),b=ne(()=>!!d(m).hidden),E=ne(()=>!!(d(m).draggable||r()&&typeof d(m).draggable>"u")),A=ne(()=>!!(d(m).selectable||l()&&typeof d(m).selectable>"u")),N=ne(()=>!!(d(m).connectable||o()&&typeof d(m).connectable>"u")),z=ne(()=>d(m).deletable??!0),H=ne(()=>s().has(d(m).id)),D=ne(()=>d(m).type??"default"),R=ne(()=>d(m).internals.z??0),L=ne(()=>Zl(d(m)));Ah(_,{get node(){return d(m)},get id(){return d(m).id},get data(){return d(m).data},get selected(){return d(C)},get hidden(){return d(b)},get draggable(){return d(E)},get selectable(){return d(A)},get connectable(){return d(N)},get deletable(){return d(z)},get positionX(){return d(m).internals.positionAbsolute.x},get positionY(){return d(m).internals.positionAbsolute.y},get isParent(){return d(H)},get style(){return d(m).style},get class(){return d(m).class},get type(){return d(D)},get sourcePosition(){return d(m).sourcePosition},get targetPosition(){return d(m).targetPosition},get dragging(){return d(m).dragging},get zIndex(){return d(R)},get dragHandle(){return d(m).dragHandle},get initialized(){return d(L)},get width(){return d(m).width},get height(){return d(m).height},get initialWidth(){return d(m).initialWidth},get initialHeight(){return d(m).initialHeight},get measuredWidth(){return d(m).measured.width},get measuredHeight(){return d(m).measured.height},get parentId(){return d(m).parentId},resizeObserver:k,get nodeClickDistance(){return a()},$$events:{nodeclick(M){ge.call(this,t,M)},nodemouseenter(M){ge.call(this,t,M)},nodemousemove(M){ge.call(this,t,M)},nodemouseleave(M){ge.call(this,t,M)},nodedrag(M){ge.call(this,t,M)},nodedragstart(M){ge.call(this,t,M)},nodedragstop(M){ge.call(this,t,M)},nodecontextmenu(M){ge.call(this,t,M)}}})}),we(v),Q(e,v),ce()}var Th=Fe('<svg><g role="img"><!></g></svg>');function Ph(e,t){ae(t,!1);const n=Be(),i=()=>V(B,"$edgeTypes",n),r=()=>V(j,"$flowId",n),l=()=>V(ie,"$elementsSelectable",n),o=()=>V(te,"$edgeLookup",n),s=K(void 0,!0),a=K(void 0,!0),u=K(void 0,!0),c=K(void 0,!0),h=K(void 0,!0);let f=p(t,"id",9),g=p(t,"type",9,"default"),y=p(t,"source",9,""),k=p(t,"target",9,""),v=p(t,"data",25,()=>({})),_=p(t,"style",9,void 0),m=p(t,"zIndex",9,void 0),C=p(t,"animated",9,!1),b=p(t,"selected",9,!1),E=p(t,"selectable",9,void 0),A=p(t,"deletable",9,void 0),N=p(t,"hidden",9,!1),z=p(t,"label",9,void 0),H=p(t,"labelStyle",9,void 0),D=p(t,"markerStart",9,void 0),R=p(t,"markerEnd",9,void 0),L=p(t,"sourceHandle",9,void 0),M=p(t,"targetHandle",9,void 0),x=p(t,"sourceX",9),P=p(t,"sourceY",9),w=p(t,"targetX",9),S=p(t,"targetY",9),T=p(t,"sourcePosition",9),I=p(t,"targetPosition",9),F=p(t,"ariaLabel",9,void 0),W=p(t,"interactionWidth",9,void 0),U=p(t,"class",9,"");$n("svelteflow__edge_id",f());const{edgeLookup:te,edgeTypes:B,flowId:j,elementsSelectable:ie}=Le(),de=vi(),fe=ss();function Z(_e){const me=o().get(f());me&&(fe(f()),de("edgeclick",{event:_e,edge:me}))}function G(_e,me){const ye=o().get(f());ye&&de(me,{event:_e,edge:ye})}q(()=>Y(g()),()=>{X(s,g()||"default")}),q(()=>(i(),d(s),cr),()=>{X(a,i()[d(s)]||cr)}),q(()=>(Y(D()),r()),()=>{X(u,D()?`url('#${sr(D(),r())}')`:void 0)}),q(()=>(Y(R()),r()),()=>{X(c,R()?`url('#${sr(R(),r())}')`:void 0)}),q(()=>(Y(E()),l()),()=>{X(h,E()??l())}),Ke(),ue(!0);var re=lt(),le=Te(re);Oe(le,()=>!N(),_e=>{var me=Th(),ye=Ee(me);const He=ne(()=>$e(["svelte-flow__edge",U()]));var Ne=Ee(ye),ve=ne(()=>A()??!0);ol(Ne,()=>d(a),(ke,se)=>{se(ke,{get id(){return f()},get source(){return y()},get target(){return k()},get sourceX(){return x()},get sourceY(){return P()},get targetX(){return w()},get targetY(){return S()},get sourcePosition(){return T()},get targetPosition(){return I()},get animated(){return C()},get selected(){return b()},get label(){return z()},get labelStyle(){return H()},get data(){return v()},get style(){return _()},get interactionWidth(){return W()},get selectable(){return d(h)},get deletable(){return d(ve)},get type(){return d(s)},get sourceHandleId(){return L()},get targetHandleId(){return M()},get markerStart(){return d(u)},get markerEnd(){return d(c)}})}),we(ye),we(me),pe(()=>{ze(me,"z-index",m()),qt(ye,d(He)),J(ye,"data-id",f()),J(ye,"aria-label",F()===null?void 0:F()?F():`Edge from ${y()} to ${k()}`),Ie(ye,"animated",C()),Ie(ye,"selected",b()),Ie(ye,"selectable",d(h))}),Se("click",ye,Z),Se("contextmenu",ye,ke=>{G(ke,"edgecontextmenu")}),Se("mouseenter",ye,ke=>{G(ke,"edgemouseenter")}),Se("mouseleave",ye,ke=>{G(ke,"edgemouseleave")}),Q(_e,me)}),Q(e,re),ce()}function Ih(e,t){ae(t,!1);let n=p(t,"onMount",8,void 0),i=p(t,"onDestroy",8,void 0);Dn(()=>{var r;return(r=n())==null||r(),i()}),ue(),ce()}var zh=Fe("<defs></defs>");function Oh(e,t){ae(t,!1);const n=Be(),i=()=>V(r,"$markers",n),{markers:r}=Le();ue();var l=zh();xi(l,5,i,o=>o.id,(o,s)=>{Rh(o,Jt(()=>d(s)))}),we(l),Q(e,l),ce()}var Dh=Fe('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),Lh=Fe('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Hh=Fe('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Rh(e,t){ae(t,!1);let n=p(t,"id",8),i=p(t,"type",8),r=p(t,"width",8,12.5),l=p(t,"height",8,12.5),o=p(t,"markerUnits",8,"strokeWidth"),s=p(t,"orient",8,"auto-start-reverse"),a=p(t,"color",8,void 0),u=p(t,"strokeWidth",8,void 0);ue();var c=Hh(),h=Ee(c);Oe(h,()=>i()===ci.Arrow,f=>{var g=Dh();pe(()=>{J(g,"stroke",a()),J(g,"stroke-width",u())}),Q(f,g)},f=>{var g=lt(),y=Te(g);Oe(y,()=>i()===ci.ArrowClosed,k=>{var v=Lh();pe(()=>{J(v,"stroke",a()),J(v,"stroke-width",u()),J(v,"fill",a())}),Q(k,v)},null,!0),Q(f,g)}),we(c),pe(()=>{J(c,"id",n()),J(c,"markerWidth",`${r()}`),J(c,"markerHeight",`${l()}`),J(c,"markerUnits",o()),J(c,"orient",s())}),Q(e,c),ce()}var Yh=be('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function Fh(e,t){ae(t,!1);const n=Be(),i=()=>V(o,"$visibleEdges",n),r=()=>V(u,"$elementsSelectable",n);let l=p(t,"defaultEdgeOptions",8);const{visibleEdges:o,edgesInitialized:s,edges:{setDefaultOptions:a},elementsSelectable:u}=Le();Dn(()=>{l()&&a(l())}),ue();var c=Yh(),h=Ee(c),f=Ee(h);Oh(f,{}),we(h);var g=xe(h,2);xi(g,1,i,k=>k.id,(k,v)=>{var _=ne(()=>d(v).selectable??r()),m=ne(()=>d(v).type||"default");Ph(k,{get id(){return d(v).id},get source(){return d(v).source},get target(){return d(v).target},get data(){return d(v).data},get style(){return d(v).style},get animated(){return d(v).animated},get selected(){return d(v).selected},get selectable(){return d(_)},get deletable(){return d(v).deletable},get hidden(){return d(v).hidden},get label(){return d(v).label},get labelStyle(){return d(v).labelStyle},get markerStart(){return d(v).markerStart},get markerEnd(){return d(v).markerEnd},get sourceHandle(){return d(v).sourceHandle},get targetHandle(){return d(v).targetHandle},get sourceX(){return d(v).sourceX},get sourceY(){return d(v).sourceY},get targetX(){return d(v).targetX},get targetY(){return d(v).targetY},get sourcePosition(){return d(v).sourcePosition},get targetPosition(){return d(v).targetPosition},get ariaLabel(){return d(v).ariaLabel},get interactionWidth(){return d(v).interactionWidth},get class(){return d(v).class},get type(){return d(m)},get zIndex(){return d(v).zIndex},$$events:{edgeclick(C){ge.call(this,t,C)},edgecontextmenu(C){ge.call(this,t,C)},edgemouseenter(C){ge.call(this,t,C)},edgemouseleave(C){ge.call(this,t,C)}}})});var y=xe(g,2);Oe(y,()=>i().length>0,k=>{Ih(k,{onMount:()=>{ei(s,!0)},onDestroy:()=>{ei(s,!1)}})}),we(c),Q(e,c),ce()}var Bh=be('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function ds(e,t){let n=p(t,"x",8,0),i=p(t,"y",8,0),r=p(t,"width",8,0),l=p(t,"height",8,0),o=p(t,"isVisible",8,!0);var s=lt(),a=Te(s);Oe(a,o,u=>{var c=Bh();pe(()=>{ze(c,"width",typeof r()=="string"?r():`${r()}px`),ze(c,"height",typeof l()=="string"?l():`${l()}px`),ze(c,"transform",`translate(${n()}px, ${i()}px)`)}),Q(u,c)}),Q(e,s)}function Vh(e,t){ae(t,!1);const n=Be(),i=()=>V(l,"$selectionRect",n),r=()=>V(o,"$selectionRectMode",n),{selectionRect:l,selectionRectMode:o}=Le();ue();var s=ne(()=>!!(i()&&r()==="user")),a=ne(()=>{var f;return(f=i())==null?void 0:f.width}),u=ne(()=>{var f;return(f=i())==null?void 0:f.height}),c=ne(()=>{var f;return(f=i())==null?void 0:f.x}),h=ne(()=>{var f;return(f=i())==null?void 0:f.y});ds(e,{get isVisible(){return d(s)},get width(){return d(a)},get height(){return d(u)},get x(){return d(c)},get y(){return d(h)}}),ce()}var Xh=be('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function Wh(e,t){ae(t,!1);const n=Be(),i=()=>V(s,"$selectionRectMode",n),r=()=>V(u,"$nodeLookup",n),l=()=>V(a,"$nodes",n),o=Le(),{selectionRectMode:s,nodes:a,nodeLookup:u}=o,c=vi();let h=K(null);function f(v){const _=l().filter(m=>m.selected);c("selectioncontextmenu",{nodes:_,event:v})}function g(v){const _=l().filter(m=>m.selected);c("selectionclick",{nodes:_,event:v})}q(()=>(i(),r(),l()),()=>{i()==="nodes"&&(X(h,Fn(r(),{filter:v=>!!v.selected})),l())}),Ke(),ue();var y=lt(),k=Te(y);Oe(k,()=>i()==="nodes"&&d(h)&&At(d(h).x)&&At(d(h).y),v=>{var _=Xh(),m=Ee(_);ds(m,{width:"100%",height:"100%",x:0,y:0}),we(_),Ue(_,(C,b)=>us(C,b),()=>({disabled:!1,store:o,onDrag:(C,b,E,A)=>{c("nodedrag",{event:C,targetNode:null,nodes:A})},onDragStart:(C,b,E,A)=>{c("nodedragstart",{event:C,targetNode:null,nodes:A})},onDragStop:(C,b,E,A)=>{c("nodedragstop",{event:C,targetNode:null,nodes:A})}})),vt(()=>Se("contextmenu",_,f)),vt(()=>Se("click",_,g)),vt(()=>Se("keyup",_,()=>{})),pe(()=>J(_,"style",`width: ${d(h).width??""}px; height: ${d(h).height??""}px; transform: translate(${d(h).x??""}px, ${d(h).y??""}px)`)),Q(v,_)}),Q(e,y),ce()}function yt(e,t){let{enabled:n=!0,trigger:i,type:r="keydown"}=t;function l(o){const s=Array.isArray(i)?i:[i],a={alt:o.altKey,ctrl:o.ctrlKey,shift:o.shiftKey,meta:o.metaKey};for(const u of s){const c={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:h,key:f,callback:g,preventDefault:y,enabled:k}=c;if(k){if(h.length&&!(Array.isArray(h)?h:[h]).map(m=>typeof m=="string"?[m]:m).some(m=>m.every(C=>a[C])))continue;if(o.key===f){y&&o.preventDefault();const v={node:e,trigger:c,originalEvent:o};e.dispatchEvent(new CustomEvent("shortcut",{detail:v})),g==null||g(v)}}}}return n&&e.addEventListener(r,l),{update:o=>{const{enabled:s=!0,type:a="keydown"}=o;n&&(!s||r!==a)?e.removeEventListener(r,l):!n&&s&&e.addEventListener(a,l),n=s,r=a,i=o.trigger},destroy:()=>{e.removeEventListener(r,l)}}}function Kh(e,t){ae(t,!1);let n=p(t,"selectionKey",8,"Shift"),i=p(t,"multiSelectionKey",24,()=>di()?"Meta":"Control"),r=p(t,"deleteKey",8,"Backspace"),l=p(t,"panActivationKey",8," "),o=p(t,"zoomActivationKey",24,()=>di()?"Meta":"Control");const{selectionKeyPressed:s,multiselectionKeyPressed:a,deleteKeyPressed:u,panActivationKeyPressed:c,zoomActivationKeyPressed:h,selectionRect:f}=Le();function g(m){return m!==null&&typeof m=="object"}function y(m){return g(m)?m.modifier||[]:[]}function k(m){return m==null?"":g(m)?m.key:m}function v(m,C){return(Array.isArray(m)?m:[m]).map(E=>{const A=k(E);return{key:A,modifier:y(E),enabled:A!==null,callback:C}})}function _(){f.set(null),s.set(!1),a.set(!1),u.set(!1),c.set(!1),h.set(!1)}ue(),Se("blur",ct,_),Se("contextmenu",ct,_),Ue(ct,(m,C)=>yt(m,C),()=>({trigger:v(n(),()=>s.set(!0)),type:"keydown"})),Ue(ct,(m,C)=>yt(m,C),()=>({trigger:v(n(),()=>s.set(!1)),type:"keyup"})),Ue(ct,(m,C)=>yt(m,C),()=>({trigger:v(i(),()=>a.set(!0)),type:"keydown"})),Ue(ct,(m,C)=>yt(m,C),()=>({trigger:v(i(),()=>a.set(!1)),type:"keyup"})),Ue(ct,(m,C)=>yt(m,C),()=>({trigger:v(r(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!cf(m.originalEvent)&&u.set(!0)}),type:"keydown"})),Ue(ct,(m,C)=>yt(m,C),()=>({trigger:v(r(),()=>u.set(!1)),type:"keyup"})),Ue(ct,(m,C)=>yt(m,C),()=>({trigger:v(l(),()=>c.set(!0)),type:"keydown"})),Ue(ct,(m,C)=>yt(m,C),()=>({trigger:v(l(),()=>c.set(!1)),type:"keyup"})),Ue(ct,(m,C)=>yt(m,C),()=>({trigger:v(o(),()=>h.set(!0)),type:"keydown"})),Ue(ct,(m,C)=>yt(m,C),()=>({trigger:v(o(),()=>h.set(!1)),type:"keyup"})),ce()}var Zh=Fe('<path fill="none" class="svelte-flow__connection-path"></path>'),qh=Fe('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function Gh(e,t){ae(t,!1);const n=Be(),i=()=>V(f,"$connection",n),r=()=>V(g,"$connectionLineType",n),l=()=>V(c,"$width",n),o=()=>V(h,"$height",n);let s=p(t,"containerStyle",8,""),a=p(t,"style",8,""),u=p(t,"isCustomComponent",8,!1);const{width:c,height:h,connection:f,connectionLineType:g}=Le();let y=K(null);q(()=>(i(),Y(u()),r(),d(y),lr),()=>{if(i().inProgress&&!u()){const{from:_,to:m,fromPosition:C,toPosition:b}=i(),E={sourceX:_.x,sourceY:_.y,sourcePosition:C,targetX:m.x,targetY:m.y,targetPosition:b};switch(r()){case on.Bezier:(A=>X(y,A[0]))(Gl(E));break;case on.Step:(A=>X(y,A[0]))(fi({...E,borderRadius:0}));break;case on.SmoothStep:(A=>X(y,A[0]))(fi(E));break;default:(A=>X(y,A[0]))(lr(E))}}}),Ke(),ue();var k=lt(),v=Te(k);Oe(v,()=>i().inProgress,_=>{var m=qh(),C=Ee(m);const b=ne(()=>$e(["svelte-flow__connection",$d(i().isValid)]));var E=Ee(C);je(E,t,"connectionLine",{});var A=xe(E);Oe(A,()=>!u(),N=>{var z=Zh();pe(()=>{J(z,"d",d(y)),J(z,"style",a())}),Q(N,z)}),we(C),we(m),pe(()=>{J(m,"width",l()),J(m,"height",o()),J(m,"style",s()),qt(C,d(b))}),Q(_,m)}),Q(e,k),ce()}var Uh=be("<div><!></div>");function Mr(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]),i=De(n,["position","style","class"]);ae(t,!1);const r=Be(),l=()=>V(c,"$selectionRectMode",r),o=K();let s=p(t,"position",8,"top-right"),a=p(t,"style",8,void 0),u=p(t,"class",8,void 0);const{selectionRectMode:c}=Le();q(()=>Y(s()),()=>{X(o,`${s()}`.split("-"))}),Ke(),ue();var h=Uh();let f;var g=Ee(h);je(g,t,"default",{}),we(h),pe(()=>{f=gr(h,f,{class:$e(["svelte-flow__panel",u(),...d(o)]),style:a(),...i}),ze(h,"pointer-events",l()?"none":"")}),Q(e,h),ce()}var jh=be('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function Jh(e,t){ae(t,!1);let n=p(t,"proOptions",8,void 0),i=p(t,"position",8,"bottom-right");ue();var r=lt(),l=Te(r);Oe(l,()=>{var o;return!((o=n())!=null&&o.hideAttribution)},o=>{Mr(o,{get position(){return i()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(s,a)=>{var u=jh();Q(s,u)},$$slots:{default:!0}})}),Q(e,r),ce()}function Yo(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:r,translateExtent:l,paneClickDistance:o}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),r!==void 0&&e.setMaxZoom(r),l!==void 0&&e.setTranslateExtent(l),o!==void 0&&e.setPaneClickDistance(o)}const Qh=e=>Object.keys(e);function Fo(e,t){Qh(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function $h(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function eg(e="light"){return dt("light",n=>{if(e!=="system"){n(e);return}const i=$h(),r=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",r),()=>{i==null||i.removeEventListener("change",r)}})}var tg=be('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),ng=be("<!> <!>",1),ig=be("<div><!> <!> <!> <!></div>");function rg(e,t){const n=sa(t),i=De(t,["children","$$slots","$$events","$$legacy"]),r=De(i,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);ae(t,!1);const l=Be(),o=()=>V(m(),"$viewport",l),s=()=>V(Pi,"$initialized",l),a=()=>V(d(u),"$colorModeClass",l),u=K();let c=p(t,"id",8,"1"),h=p(t,"nodes",8),f=p(t,"edges",8),g=p(t,"fitView",8,void 0),y=p(t,"fitViewOptions",8,void 0),k=p(t,"minZoom",8,void 0),v=p(t,"maxZoom",8,void 0),_=p(t,"initialViewport",8,void 0),m=p(t,"viewport",8,void 0),C=p(t,"nodeTypes",8,void 0),b=p(t,"edgeTypes",8,void 0),E=p(t,"selectionKey",8,void 0),A=p(t,"selectionMode",8,void 0),N=p(t,"panActivationKey",8,void 0),z=p(t,"multiSelectionKey",8,void 0),H=p(t,"zoomActivationKey",8,void 0),D=p(t,"nodesDraggable",8,void 0),R=p(t,"nodesConnectable",8,void 0),L=p(t,"nodeDragThreshold",8,void 0),M=p(t,"elementsSelectable",8,void 0),x=p(t,"snapGrid",8,void 0),P=p(t,"deleteKey",8,void 0),w=p(t,"connectionRadius",8,void 0),S=p(t,"connectionLineType",8,void 0),T=p(t,"connectionMode",24,()=>Kt.Strict),I=p(t,"connectionLineStyle",8,""),F=p(t,"connectionLineContainerStyle",8,""),W=p(t,"onMoveStart",8,void 0),U=p(t,"onMove",8,void 0),te=p(t,"onMoveEnd",8,void 0),B=p(t,"isValidConnection",8,void 0),j=p(t,"translateExtent",8,void 0),ie=p(t,"nodeExtent",8,void 0),de=p(t,"onlyRenderVisibleElements",8,void 0),fe=p(t,"panOnScrollMode",24,()=>Ot.Free),Z=p(t,"preventScrolling",8,!0),G=p(t,"zoomOnScroll",8,!0),re=p(t,"zoomOnDoubleClick",8,!0),le=p(t,"zoomOnPinch",8,!0),_e=p(t,"panOnScroll",8,!1),me=p(t,"panOnDrag",8,!0),ye=p(t,"selectionOnDrag",8,void 0),He=p(t,"autoPanOnConnect",8,!0),Ne=p(t,"autoPanOnNodeDrag",8,!0),ve=p(t,"onerror",8,void 0),ke=p(t,"ondelete",8,void 0),se=p(t,"onedgecreate",8,void 0),et=p(t,"attributionPosition",8,void 0),Ve=p(t,"proOptions",8,void 0),Ae=p(t,"defaultEdgeOptions",8,void 0),it=p(t,"width",8,void 0),Ze=p(t,"height",8,void 0),qe=p(t,"colorMode",8,"light"),Me=p(t,"onconnect",8,void 0),Rt=p(t,"onconnectstart",8,void 0),Gt=p(t,"onconnectend",8,void 0),Re=p(t,"onbeforedelete",8,void 0),Ce=p(t,"oninit",8,void 0),Pe=p(t,"nodeOrigin",8,void 0),Xe=p(t,"paneClickDistance",8,0),at=p(t,"nodeClickDistance",8,0),pt=p(t,"defaultMarkerColor",8,"#b1b1b7"),mt=p(t,"style",8,void 0),Ut=p(t,"class",8,void 0),rt=K(),Yt=K(),Ft=K();const Ti=o()||_(),We=la(Nr)?Le():yh({nodes:O(h()),edges:O(f()),width:it(),height:Ze(),fitView:g(),nodeOrigin:Pe(),nodeExtent:ie()});Dn(()=>(We.width.set(d(Yt)),We.height.set(d(Ft)),We.domNode.set(d(rt)),We.syncNodeStores(h()),We.syncEdgeStores(f()),We.syncViewport(m()),g()!==void 0&&We.fitViewOnInit.set(g()),y()&&We.fitViewOptions.set(y()),Yo(We,{nodeTypes:C(),edgeTypes:b(),minZoom:k(),maxZoom:v(),translateExtent:j(),paneClickDistance:Xe()}),()=>{We.reset()}));const{initialized:Pi}=We;let pn=K(!1);q(()=>(d(Yt),d(Ft)),()=>{d(Yt)!==void 0&&d(Ft)!==void 0&&(We.width.set(d(Yt)),We.height.set(d(Ft)))}),q(()=>(d(pn),s(),Y(Ce())),()=>{var Ge;!d(pn)&&s()&&((Ge=Ce())==null||Ge(),X(pn,!0))}),q(()=>(Y(c()),Y(S()),Y(w()),Y(A()),Y(x()),Y(pt()),Y(D()),Y(R()),Y(M()),Y(de()),Y(B()),Y(He()),Y(Ne()),Y(ve()),Y(ke()),Y(se()),Y(T()),Y(L()),Y(Me()),Y(Rt()),Y(Gt()),Y(Re()),Y(Pe()),Fo),()=>{const Ge={flowId:c(),connectionLineType:S(),connectionRadius:w(),selectionMode:A(),snapGrid:x(),defaultMarkerColor:pt(),nodesDraggable:D(),nodesConnectable:R(),elementsSelectable:M(),onlyRenderVisibleElements:de(),isValidConnection:B(),autoPanOnConnect:He(),autoPanOnNodeDrag:Ne(),onerror:ve(),ondelete:ke(),onedgecreate:se(),connectionMode:T(),nodeDragThreshold:L(),onconnect:Me(),onconnectstart:Rt(),onconnectend:Gt(),onbeforedelete:Re(),nodeOrigin:Pe()};Fo(We,Ge)}),q(()=>(Y(C()),Y(b()),Y(k()),Y(v()),Y(j()),Y(Xe())),()=>{Yo(We,{nodeTypes:C(),edgeTypes:b(),minZoom:k(),maxZoom:v(),translateExtent:j(),paneClickDistance:Xe()})}),q(()=>Y(qe()),()=>{ha(X(u,eg(qe())),"$colorModeClass",l)}),Ke(),ue();var bt=ig();let zr;var Or=Ee(bt);Kh(Or,{get selectionKey(){return E()},get deleteKey(){return P()},get panActivationKey(){return N()},get multiSelectionKey(){return z()},get zoomActivationKey(){return H()}});var Dr=xe(Or,2),Es=ne(()=>fe()===void 0?Ot.Free:fe()),Cs=ne(()=>Z()===void 0?!0:Z()),Ss=ne(()=>G()===void 0?!0:G()),As=ne(()=>re()===void 0?!0:re()),Ns=ne(()=>le()===void 0?!0:le()),Ms=ne(()=>_e()===void 0?!1:_e()),Ts=ne(()=>me()===void 0?!0:me()),Ps=ne(()=>Xe()===void 0?0:Xe());wh(Dr,{initialViewport:Ti,get onMoveStart(){return W()},get onMove(){return U()},get onMoveEnd(){return te()},get panOnScrollMode(){return d(Es)},get preventScrolling(){return d(Cs)},get zoomOnScroll(){return d(Ss)},get zoomOnDoubleClick(){return d(As)},get zoomOnPinch(){return d(Ns)},get panOnScroll(){return d(Ms)},get panOnDrag(){return d(Ts)},get paneClickDistance(){return d(Ps)},children:(Ge,Op)=>{var zs=ne(()=>me()===void 0?!0:me());bh(Ge,{get panOnDrag(){return d(zs)},get selectionOnDrag(){return ye()},$$events:{paneclick(mn){ge.call(this,t,mn)},panecontextmenu(mn){ge.call(this,t,mn)}},children:(mn,Dp)=>{var Hr=ng(),Rr=Te(Hr);Eh(Rr,{children:(Ds,Lp)=>{var Yr=tg(),Fr=Te(Yr);Fh(Fr,{get defaultEdgeOptions(){return Ae()},$$events:{edgeclick(he){ge.call(this,t,he)},edgecontextmenu(he){ge.call(this,t,he)},edgemouseenter(he){ge.call(this,t,he)},edgemouseleave(he){ge.call(this,t,he)}}});var Br=xe(Fr,2);Gh(Br,{get containerStyle(){return F()},get style(){return I()},isCustomComponent:n.connectionLine,$$slots:{connectionLine:(he,Hp)=>{var Xr=lt(),Hs=Te(Xr);je(Hs,t,"connectionLine",{}),Q(he,Xr)}}});var Vr=xe(Br,6);Mh(Vr,{get nodeClickDistance(){return at()},$$events:{nodeclick(he){ge.call(this,t,he)},nodemouseenter(he){ge.call(this,t,he)},nodemousemove(he){ge.call(this,t,he)},nodemouseleave(he){ge.call(this,t,he)},nodedragstart(he){ge.call(this,t,he)},nodedrag(he){ge.call(this,t,he)},nodedragstop(he){ge.call(this,t,he)},nodecontextmenu(he){ge.call(this,t,he)}}});var Ls=xe(Vr,2);Wh(Ls,{$$events:{selectionclick(he){ge.call(this,t,he)},selectioncontextmenu(he){ge.call(this,t,he)},nodedragstart(he){ge.call(this,t,he)},nodedrag(he){ge.call(this,t,he)},nodedragstop(he){ge.call(this,t,he)}}}),Q(Ds,Yr)},$$slots:{default:!0}});var Os=xe(Rr,2);Vh(Os,{}),Q(mn,Hr)},$$slots:{default:!0}})},$$slots:{default:!0}});var Lr=xe(Dr,2);Jh(Lr,{get proOptions(){return Ve()},get position(){return et()}});var Is=xe(Lr,2);je(Is,t,"default",{}),we(bt),hr(bt,Ge=>X(rt,Ge),()=>d(rt)),pe(()=>zr=gr(bt,zr,{style:mt(),class:$e(["svelte-flow",Ut(),a()]),"data-testid":"svelte-flow__wrapper",...r,role:"application"},"svelte-12wlba6")),to(bt,"clientWidth",Ge=>X(Yt,Ge)),to(bt,"clientHeight",Ge=>X(Ft,Ge)),Se("dragover",bt,function(Ge){ge.call(this,t,Ge)}),Se("drop",bt,function(Ge){ge.call(this,t,Ge)}),Q(e,bt),ce()}var og=be("<button><!></button>");function kn(e,t){const n=De(t,["children","$$slots","$$events","$$legacy"]),i=De(n,["class"]);ae(t,!1);let r=p(t,"class",8,void 0),l,o,s,a,u;ue();var c=og();let h;var f=Ee(c);je(f,t,"default",{class:"button-svg"}),we(c),pe(()=>{h=gr(c,h,{type:"button",class:$e(["svelte-flow__controls-button",r()]),...i}),ze(c,"--xy-controls-button-background-color-props",l),ze(c,"--xy-controls-button-background-color-hover-props",o),ze(c,"--xy-controls-button-color-props",s),ze(c,"--xy-controls-button-color-hover-props",a),ze(c,"--xy-controls-button-border-color-props",u)}),Se("click",c,function(g){ge.call(this,t,g)}),Q(e,c),ce()}var lg=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function sg(e){var t=lg();Q(e,t)}var ag=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function cg(e){var t=ag();Q(e,t)}var ug=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function dg(e){var t=ug();Q(e,t)}var fg=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function hg(e){var t=fg();Q(e,t)}var gg=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function pg(e){var t=gg();Q(e,t)}var mg=be("<!> <!>",1),yg=be("<!> <!> <!> <!> <!> <!>",1);function vg(e,t){ae(t,!1);const n=Be(),i=()=>V(S,"$nodesDraggable",n),r=()=>V(T,"$nodesConnectable",n),l=()=>V(I,"$elementsSelectable",n),o=()=>V(x,"$viewport",n),s=()=>V(P,"$minZoom",n),a=()=>V(w,"$maxZoom",n),u=K(),c=K(),h=K(),f=K();let g=p(t,"position",8,"bottom-left"),y=p(t,"showZoom",8,!0),k=p(t,"showFitView",8,!0),v=p(t,"showLock",8,!0),_=p(t,"buttonBgColor",8,void 0),m=p(t,"buttonBgColorHover",8,void 0),C=p(t,"buttonColor",8,void 0),b=p(t,"buttonColorHover",8,void 0),E=p(t,"buttonBorderColor",8,void 0),A=p(t,"ariaLabel",8,void 0),N=p(t,"style",8,void 0),z=p(t,"orientation",8,"vertical"),H=p(t,"fitViewOptions",8,void 0),D=p(t,"class",8,"");const{zoomIn:R,zoomOut:L,fitView:M,viewport:x,minZoom:P,maxZoom:w,nodesDraggable:S,nodesConnectable:T,elementsSelectable:I}=Le(),F={bgColor:_(),bgColorHover:m(),color:C(),colorHover:b(),borderColor:E()},W=()=>{R()},U=()=>{L()},te=()=>{M(H())},B=()=>{X(u,!d(u)),S.set(d(u)),T.set(d(u)),I.set(d(u))};q(()=>(i(),r(),l()),()=>{X(u,i()||r()||l())}),q(()=>(o(),s()),()=>{X(c,o().zoom<=s())}),q(()=>(o(),a()),()=>{X(h,o().zoom>=a())}),q(()=>Y(z()),()=>{X(f,z()==="horizontal"?"horizontal":"vertical")}),Ke(),ue();var j=ne(()=>$e(["svelte-flow__controls",d(f),D()])),ie=ne(()=>A()??"Svelte Flow controls");Mr(e,{get class(){return d(j)},get position(){return g()},"data-testid":"svelte-flow__controls",get"aria-label"(){return d(ie)},get style(){return N()},children:(de,fe)=>{var Z=yg(),G=Te(Z);je(G,t,"before",{});var re=xe(G,2);Oe(re,y,He=>{var Ne=mg(),ve=Te(Ne);kn(ve,Jt({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return d(h)}},F,{$$events:{click:W},children:(se,et)=>{sg(se)},$$slots:{default:!0}}));var ke=xe(ve,2);kn(ke,Jt({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return d(c)}},F,{$$events:{click:U},children:(se,et)=>{cg(se)},$$slots:{default:!0}})),Q(He,Ne)});var le=xe(re,2);Oe(le,k,He=>{kn(He,Jt({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},F,{$$events:{click:te},children:(Ne,ve)=>{dg(Ne)},$$slots:{default:!0}}))});var _e=xe(le,2);Oe(_e,v,He=>{kn(He,Jt({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},F,{$$events:{click:B},children:(Ne,ve)=>{var ke=lt(),se=Te(ke);Oe(se,()=>d(u),et=>{pg(et)},et=>{hg(et)}),Q(Ne,ke)},$$slots:{default:!0}}))});var me=xe(_e,2);je(me,t,"default",{});var ye=xe(me,2);je(ye,t,"after",{}),Q(de,Z)},$$slots:{default:!0}}),ce()}var Mt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Mt||(Mt={}));var xg=Fe("<circle></circle>");function wg(e,t){ae(t,!1);let n=p(t,"radius",8,5),i=p(t,"class",8,"");ue();var r=xg();const l=ne(()=>$e(["svelte-flow__background-pattern","dots",i()]));pe(()=>{J(r,"cx",n()),J(r,"cy",n()),J(r,"r",n()),qt(r,d(l))}),Q(e,r),ce()}var _g=Fe("<path></path>");function bg(e,t){ae(t,!1);let n=p(t,"lineWidth",8,1),i=p(t,"dimensions",8),r=p(t,"variant",8,void 0),l=p(t,"class",8,"");ue();var o=_g();const s=ne(()=>$e(["svelte-flow__background-pattern",r(),l()]));pe(()=>{J(o,"stroke-width",n()),J(o,"d",`M${i()[0]/2} 0 V${i()[1]} M0 ${i()[1]/2} H${i()[0]}`),qt(o,d(s))}),Q(e,o),ce()}const kg={[Mt.Dots]:1,[Mt.Lines]:1,[Mt.Cross]:6};var Eg=Fe('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Cg(e,t){ae(t,!1);const n=Be(),i=()=>V(b,"$flowId",n),r=()=>V(C,"$viewport",n),l=K(),o=K(),s=K(),a=K(),u=K();let c=p(t,"id",8,void 0),h=p(t,"variant",24,()=>Mt.Dots),f=p(t,"gap",8,20),g=p(t,"size",8,1),y=p(t,"lineWidth",8,1),k=p(t,"bgColor",8,void 0),v=p(t,"patternColor",8,void 0),_=p(t,"patternClass",8,void 0),m=p(t,"class",8,"");const{viewport:C,flowId:b}=Le(),E=g()||kg[h()],A=h()===Mt.Dots,N=h()===Mt.Cross,z=Array.isArray(f())?f():[f(),f()];q(()=>(i(),Y(c())),()=>{X(l,`background-pattern-${i()}-${c()?c():""}`)}),q(()=>r(),()=>{X(o,[z[0]*r().zoom||1,z[1]*r().zoom||1])}),q(()=>r(),()=>{X(s,E*r().zoom)}),q(()=>(d(s),d(o)),()=>{X(a,N?[d(s),d(s)]:d(o))}),q(()=>(d(s),d(a)),()=>{X(u,A?[d(s)/2,d(s)/2]:[d(a)[0]/2,d(a)[1]/2])}),Ke(),ue();var H=Eg();const D=ne(()=>`${$e(["svelte-flow__background",m()])??""} svelte-1r7pe8d`);var R=Ee(H),L=Ee(R);Oe(L,()=>A,x=>{var P=ne(()=>d(s)/2);wg(x,{get radius(){return d(P)},get class(){return _()}})},x=>{bg(x,{get dimensions(){return d(a)},get variant(){return h()},get lineWidth(){return y()},get class(){return _()}})}),we(R);var M=xe(R);we(H),pe(()=>{qt(H,d(D)),ze(H,"--xy-background-color-props",k()),ze(H,"--xy-background-pattern-color-props",v()),J(R,"id",d(l)),J(R,"x",r().x%d(o)[0]),J(R,"y",r().y%d(o)[1]),J(R,"width",d(o)[0]),J(R,"height",d(o)[1]),J(R,"patternTransform",`translate(-${d(u)[0]},-${d(u)[1]})`),J(M,"fill",`url(#${d(l)})`)}),Q(e,H),ce()}var Sg=Fe("<rect></rect>");function Ag(e,t){ae(t,!1);let n=p(t,"x",8),i=p(t,"y",8),r=p(t,"width",8,0),l=p(t,"height",8,0),o=p(t,"borderRadius",8,5),s=p(t,"color",8,void 0),a=p(t,"shapeRendering",8),u=p(t,"strokeColor",8,void 0),c=p(t,"strokeWidth",8,2),h=p(t,"selected",8,!1),f=p(t,"class",8,"");ue();var g=Sg();const y=ne(()=>$e(["svelte-flow__minimap-node",f()]));pe(()=>{qt(g,d(y)),J(g,"x",n()),J(g,"y",i()),J(g,"rx",o()),J(g,"ry",o()),J(g,"width",r()),J(g,"height",l()),J(g,"style",`${s()?`fill: ${s()};`:""}${u()?`stroke: ${u()};`:""}${c()?`stroke-width: ${c()};`:""}`),J(g,"shape-rendering",a()),Ie(g,"selected",h())}),Q(e,g),ce()}function Ng(e,t){const n=Hf({domNode:e,panZoom:t.panZoom,getTransform:()=>{const r=O(t.viewport);return[r.x,r.y,r.zoom]},getViewScale:t.getViewScale});function i(r){n.update({translateExtent:r.translateExtent,width:r.width,height:r.height,inversePan:r.inversePan,zoomStep:r.zoomStep,pannable:r.pannable,zoomable:r.zoomable})}return{update:i,destroy(){n.destroy()}}}const Wi=e=>e instanceof Function?e:()=>e;var Mg=Fe("<title> </title>"),Tg=Fe('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>');function Pg(e,t){ae(t,!1);const n=Be(),i=()=>V(me,"$flowId",n),r=()=>V(re,"$viewport",n),l=()=>V(le,"$containerWidth",n),o=()=>V(_e,"$containerHeight",n),s=()=>V(G,"$nodeLookup",n),a=()=>V(Z,"$nodes",n),u=()=>V(ye,"$panZoom",n),c=()=>V(He,"$translateExtent",n),h=K(),f=K(),g=K(),y=K(),k=K(),v=K(),_=K(),m=K(),C=K(),b=K(),E=K(),A=K(),N=K();let z=p(t,"position",8,"bottom-right"),H=p(t,"ariaLabel",8,"Mini map"),D=p(t,"nodeStrokeColor",8,"transparent"),R=p(t,"nodeColor",8,void 0),L=p(t,"nodeClass",8,""),M=p(t,"nodeBorderRadius",8,5),x=p(t,"nodeStrokeWidth",8,2),P=p(t,"bgColor",8,void 0),w=p(t,"maskColor",8,void 0),S=p(t,"maskStrokeColor",8,void 0),T=p(t,"maskStrokeWidth",8,void 0),I=p(t,"width",8,void 0),F=p(t,"height",8,void 0),W=p(t,"pannable",8,!0),U=p(t,"zoomable",8,!0),te=p(t,"inversePan",8,void 0),B=p(t,"zoomStep",8,void 0),j=p(t,"style",8,""),ie=p(t,"class",8,"");const de=200,fe=150,{nodes:Z,nodeLookup:G,viewport:re,width:le,height:_e,flowId:me,panZoom:ye,translateExtent:He}=Le(),Ne=R()===void 0?void 0:Wi(R()),ve=Wi(D()),ke=Wi(L()),se=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",et=`svelte-flow__minimap-desc-${i()}`;let Ve=K(d(h));const Ae=()=>d(v);q(()=>(r(),l(),o()),()=>{X(h,{x:-r().x/r().zoom,y:-r().y/r().zoom,width:l()/r().zoom,height:o()/r().zoom})}),q(()=>(s(),d(h),a()),()=>{X(Ve,s().size>0?Wl(Fn(s()),d(h)):d(h)),a()}),q(()=>Y(I()),()=>{X(f,I()??de)}),q(()=>Y(F()),()=>{X(g,F()??fe)}),q(()=>(d(Ve),d(f)),()=>{X(y,d(Ve).width/d(f))}),q(()=>(d(Ve),d(g)),()=>{X(k,d(Ve).height/d(g))}),q(()=>(d(y),d(k)),()=>{X(v,Math.max(d(y),d(k)))}),q(()=>(d(v),d(f)),()=>{X(_,d(v)*d(f))}),q(()=>(d(v),d(g)),()=>{X(m,d(v)*d(g))}),q(()=>d(v),()=>{X(C,5*d(v))}),q(()=>(d(Ve),d(_),d(C)),()=>{X(b,d(Ve).x-(d(_)-d(Ve).width)/2-d(C))}),q(()=>(d(Ve),d(m),d(C)),()=>{X(E,d(Ve).y-(d(m)-d(Ve).height)/2-d(C))}),q(()=>(d(_),d(C)),()=>{X(A,d(_)+d(C)*2)}),q(()=>(d(m),d(C)),()=>{X(N,d(m)+d(C)*2)}),Ke(),ue();var it=ne(()=>j()+(P()?`;--xy-minimap-background-color-props:${P()}`:"")),Ze=ne(()=>$e(["svelte-flow__minimap",ie()]));Mr(e,{get position(){return z()},get style(){return d(it)},get class(){return d(Ze)},"data-testid":"svelte-flow__minimap",children:(qe,Me)=>{var Rt=lt(),Gt=Te(Rt);Oe(Gt,u,Re=>{var Ce=Tg();J(Ce,"aria-labelledby",et);var Pe=Ee(Ce);Oe(Pe,H,pt=>{var mt=Mg();J(mt,"id",et);var Ut=Ee(mt,!0);we(mt),pe(()=>gn(Ut,H())),Q(pt,mt)});var Xe=xe(Pe);xi(Xe,1,a,pt=>pt.id,(pt,mt)=>{var Ut=lt();const rt=ne(()=>s().get(d(mt).id));var Yt=Te(Ut);Oe(Yt,()=>d(rt)&&Zl(d(rt)),Ft=>{const Ti=ne(()=>Ht(d(rt)));var We=ne(()=>Ne==null?void 0:Ne(d(rt))),Pi=ne(()=>ve(d(rt))),pn=ne(()=>ke(d(rt)));Ag(Ft,Jt({get x(){return d(rt).internals.positionAbsolute.x},get y(){return d(rt).internals.positionAbsolute.y}},()=>d(Ti),{get selected(){return d(rt).selected},get color(){return d(We)},get borderRadius(){return M()},get strokeColor(){return d(Pi)},get strokeWidth(){return x()},shapeRendering:se,get class(){return d(pn)}}))}),Q(pt,Ut)});var at=xe(Xe);we(Ce),Ue(Ce,(pt,mt)=>Ng(pt,mt),()=>({panZoom:u(),viewport:re,getViewScale:Ae,translateExtent:c(),width:l(),height:o(),inversePan:te(),zoomStep:B(),pannable:W(),zoomable:U()})),pe(()=>{J(Ce,"width",d(f)),J(Ce,"height",d(g)),J(Ce,"viewBox",`${d(b)??""} ${d(E)??""} ${d(A)??""} ${d(N)??""}`),ze(Ce,"--xy-minimap-mask-background-color-props",w()),ze(Ce,"--xy-minimap-mask-stroke-color-props",S()),ze(Ce,"--xy-minimap-mask-stroke-width-props",T()?T()*d(v):void 0),J(at,"d",`M${d(b)-d(C)},${d(E)-d(C)}h${d(A)+d(C)*2}v${d(N)+d(C)*2}h${-d(A)-d(C)*2}z
      M${d(h).x??""},${d(h).y??""}h${d(h).width??""}v${d(h).height??""}h${-d(h).width}z`)}),Q(Re,Ce)}),Q(qe,Rt)},$$slots:{default:!0}}),ce()}const Bo=e=>tf(e);function Ig(){const{zoomIn:e,zoomOut:t,fitView:n,onbeforedelete:i,snapGrid:r,viewport:l,width:o,height:s,minZoom:a,maxZoom:u,panZoom:c,nodes:h,edges:f,domNode:g,nodeLookup:y,nodeOrigin:k,edgeLookup:v,connectionLookup:_}=Le(),m=E=>{var D,R;const A=O(y),N=Bo(E)?E:A.get(E.id),z=N.parentId?lf(N.position,N.measured,N.parentId,A,O(k)):N.position,H={id:N.id,position:z,width:((D=N.measured)==null?void 0:D.width)??N.width,height:((R=N.measured)==null?void 0:R.height)??N.height,data:N.data};return un(H)},C=(E,A,N={replace:!1})=>{var D;const z=(D=O(y).get(E))==null?void 0:D.internals.userNode;if(!z)return;const H=typeof A=="function"?A(z):A;N.replace?h.update(R=>R.map(L=>L.id===E?Bo(H)?H:{...L,...H}:L)):(Object.assign(z,H),h.update(R=>R))},b=E=>O(y).get(E);return{zoomIn:e,zoomOut:t,getInternalNode:b,getNode:E=>{var A;return(A=b(E))==null?void 0:A.internals.userNode},getNodes:E=>E===void 0?O(h):Vo(O(y),E),getEdge:E=>O(v).get(E),getEdges:E=>E===void 0?O(f):Vo(O(v),E),setZoom:(E,A)=>{const N=O(c);return N?N.scaleTo(E,{duration:A==null?void 0:A.duration}):Promise.resolve(!1)},getZoom:()=>O(l).zoom,setViewport:async(E,A)=>{const N=O(l),z=O(c);return z?(await z.setViewport({x:E.x??N.x,y:E.y??N.y,zoom:E.zoom??N.zoom},{duration:A==null?void 0:A.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>O(l),setCenter:async(E,A,N)=>{const z=typeof(N==null?void 0:N.zoom)<"u"?N.zoom:O(u),H=O(c);return H?(await H.setViewport({x:O(o)/2-E*z,y:O(s)/2-A*z,zoom:z},{duration:N==null?void 0:N.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(E,A)=>{const N=O(c);if(!N)return Promise.resolve(!1);const z=kr(E,O(o),O(s),O(a),O(u),(A==null?void 0:A.padding)??.1);return await N.setViewport(z,{duration:A==null?void 0:A.duration}),Promise.resolve(!0)},getIntersectingNodes:(E,A=!0,N)=>{const z=So(E),H=z?E:m(E);return H?(N||O(h)).filter(D=>{const R=O(y).get(D.id);if(!R||!z&&D.id===E.id)return!1;const L=un(R),M=Tn(L,H);return A&&M>0||M>=H.width*H.height}):[]},isNodeIntersecting:(E,A,N=!0)=>{const H=So(E)?E:m(E);if(!H)return!1;const D=Tn(H,A);return N&&D>0||D>=H.width*H.height},deleteElements:async({nodes:E=[],edges:A=[]})=>{const{nodes:N,edges:z}=await Bl({nodesToRemove:E,edgesToRemove:A,nodes:O(h),edges:O(f),onBeforeDelete:O(i)});return N&&h.update(H=>H.filter(D=>!N.some(({id:R})=>R===D.id))),z&&f.update(H=>H.filter(D=>!z.some(({id:R})=>R===D.id))),{deletedNodes:N,deletedEdges:z}},screenToFlowPosition:(E,A={snapToGrid:!0})=>{const N=O(g);if(!N)return E;const z=A.snapToGrid?O(r):!1,{x:H,y:D,zoom:R}=O(l),{x:L,y:M}=N.getBoundingClientRect(),x={x:E.x-L,y:E.y-M};return Bn(x,[H,D,R],z!==null,z||[1,1])},flowToScreenPosition:E=>{const A=O(g);if(!A)return E;const{x:N,y:z,zoom:H}=O(l),{x:D,y:R}=A.getBoundingClientRect(),L=Kl(E,[N,z,H]);return{x:L.x+D,y:L.y+R}},toObject:()=>({nodes:O(h).map(E=>({...E,position:{...E.position},data:{...E.data}})),edges:O(f).map(E=>({...E})),viewport:{...O(l)}}),updateNode:C,updateNodeData:(E,A,N)=>{var D;const z=(D=O(y).get(E))==null?void 0:D.internals.userNode;if(!z)return;const H=typeof A=="function"?A(z):A;z.data=N!=null&&N.replace?H:{...z.data,...H},h.update(R=>R)},getNodesBounds:E=>{const A=O(y),N=O(k);return nf(E,{nodeLookup:A,nodeOrigin:N})},getHandleConnections:({type:E,id:A,nodeId:N})=>{var z;return Array.from(((z=O(_).get(`${N}-${E}-${A??null}`))==null?void 0:z.values())??[])},viewport:l}}function Vo(e,t){var i;const n=[];for(const r of t){const l=e.get(r);if(l){const o="internals"in l?(i=l.internals)==null?void 0:i.userNode:l;n.push(o)}}return n}var zg=be('<div class="svelte-flow__node-toolbar"><!></div>');function Og(e,t){ae(t,!1);const n=Be(),i=()=>V(m,"$nodes",n),r=()=>V(_,"$nodeLookup",n),l=()=>V(v,"$viewport",n),o=()=>V(k,"$domNode",n),s=K(),a=K(),u=K();let c=p(t,"nodeId",8,void 0),h=p(t,"position",8,void 0),f=p(t,"align",8,void 0),g=p(t,"offset",8,void 0),y=p(t,"isVisible",8,void 0);const{domNode:k,viewport:v,nodeLookup:_,nodes:m}=Le(),{getNodesBounds:C}=Ig(),b=En("svelteflow__node_id");let E=K(),A=K([]),N=g()!==void 0?g():10,z=h()!==void 0?h():oe.Top,H=f()!==void 0?f():"center";q(()=>(i(),Y(c()),r()),()=>{i();const L=Array.isArray(c())?c():[c()||b];X(A,L.reduce((M,x)=>{const P=r().get(x);return P&&M.push(P),M},[]))}),q(()=>(d(A),l()),()=>{const L=C(d(A));L&&X(E,_f(L,l(),z,N,H))}),q(()=>d(A),()=>{X(s,d(A).length===0?1:Math.max(...d(A).map(L=>(L.internals.z||5)+1)))}),q(()=>i(),()=>{X(a,i().filter(L=>L.selected).length)}),q(()=>(Y(y()),d(A),d(a)),()=>{X(u,typeof y()=="boolean"?y():d(A).length===1&&d(A)[0].selected&&d(a)===1)}),Ke(),ue();var D=lt(),R=Te(D);Oe(R,()=>o()&&d(u)&&d(A),L=>{var M=zg();pe(()=>J(M,"data-id",d(A).reduce((P,w)=>`${P}${w.id} `,"").trim()));var x=Ee(M);je(x,t,"default",{}),we(M),Ue(M,(P,w)=>ls(P,w),()=>({domNode:o()})),pe(()=>{ze(M,"position","absolute"),ze(M,"transform",d(E)),ze(M,"z-index",d(s))}),Q(L,M)}),Q(e,D),ce()}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function fs(e){return typeof e>"u"||e===null}function Dg(e){return typeof e=="object"&&e!==null}function Lg(e){return Array.isArray(e)?e:fs(e)?[]:[e]}function Hg(e,t){var n,i,r,l;if(t)for(l=Object.keys(t),n=0,i=l.length;n<i;n+=1)r=l[n],e[r]=t[r];return e}function Rg(e,t){var n="",i;for(i=0;i<t;i+=1)n+=e;return n}function Yg(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Fg=fs,Bg=Dg,Vg=Lg,Xg=Rg,Wg=Yg,Kg=Hg,Qe={isNothing:Fg,isObject:Bg,toArray:Vg,repeat:Xg,isNegativeZero:Wg,extend:Kg};function hs(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),i+" "+n):i}function In(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=hs(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}In.prototype=Object.create(Error.prototype);In.prototype.constructor=In;In.prototype.toString=function(t){return this.name+": "+hs(this,t)};var Ct=In;function Ki(e,t,n,i,r){var l="",o="",s=Math.floor(r/2)-1;return i-t>s&&(l=" ... ",t=i-s+l.length),n-i>s&&(o=" ...",n=i+s-o.length),{str:l+e.slice(t,n).replace(/\t/g,"")+o,pos:i-t+l.length}}function Zi(e,t){return Qe.repeat(" ",t-e.length)+e}function Zg(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],r=[],l,o=-1;l=n.exec(e.buffer);)r.push(l.index),i.push(l.index+l[0].length),e.position<=l.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var s="",a,u,c=Math.min(e.line+t.linesAfter,r.length).toString().length,h=t.maxLength-(t.indent+c+3);for(a=1;a<=t.linesBefore&&!(o-a<0);a++)u=Ki(e.buffer,i[o-a],r[o-a],e.position-(i[o]-i[o-a]),h),s=Qe.repeat(" ",t.indent)+Zi((e.line-a+1).toString(),c)+" | "+u.str+`
`+s;for(u=Ki(e.buffer,i[o],r[o],e.position,h),s+=Qe.repeat(" ",t.indent)+Zi((e.line+1).toString(),c)+" | "+u.str+`
`,s+=Qe.repeat("-",t.indent+c+3+u.pos)+`^
`,a=1;a<=t.linesAfter&&!(o+a>=r.length);a++)u=Ki(e.buffer,i[o+a],r[o+a],e.position-(i[o]-i[o+a]),h),s+=Qe.repeat(" ",t.indent)+Zi((e.line+a+1).toString(),c)+" | "+u.str+`
`;return s.replace(/\n$/,"")}var qg=Zg,Gg=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Ug=["scalar","sequence","mapping"];function jg(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(i){t[String(i)]=n})}),t}function Jg(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(Gg.indexOf(n)===-1)throw new Ct('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=jg(t.styleAliases||null),Ug.indexOf(this.kind)===-1)throw new Ct('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Je=Jg;function Xo(e,t){var n=[];return e[t].forEach(function(i){var r=n.length;n.forEach(function(l,o){l.tag===i.tag&&l.kind===i.kind&&l.multi===i.multi&&(r=o)}),n[r]=i}),n}function Qg(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function i(r){r.multi?(e.multi[r.kind].push(r),e.multi.fallback.push(r)):e[r.kind][r.tag]=e.fallback[r.tag]=r}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(i);return e}function ur(e){return this.extend(e)}ur.prototype.extend=function(t){var n=[],i=[];if(t instanceof Je)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new Ct("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(l){if(!(l instanceof Je))throw new Ct("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(l.loadKind&&l.loadKind!=="scalar")throw new Ct("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(l.multi)throw new Ct("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(l){if(!(l instanceof Je))throw new Ct("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(ur.prototype);return r.implicit=(this.implicit||[]).concat(n),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=Xo(r,"implicit"),r.compiledExplicit=Xo(r,"explicit"),r.compiledTypeMap=Qg(r.compiledImplicit,r.compiledExplicit),r};var $g=ur,e0=new Je("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),t0=new Je("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),n0=new Je("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),i0=new $g({explicit:[e0,t0,n0]});function r0(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function o0(){return null}function l0(e){return e===null}var s0=new Je("tag:yaml.org,2002:null",{kind:"scalar",resolve:r0,construct:o0,predicate:l0,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function a0(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function c0(e){return e==="true"||e==="True"||e==="TRUE"}function u0(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var d0=new Je("tag:yaml.org,2002:bool",{kind:"scalar",resolve:a0,construct:c0,predicate:u0,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function f0(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function h0(e){return 48<=e&&e<=55}function g0(e){return 48<=e&&e<=57}function p0(e){if(e===null)return!1;var t=e.length,n=0,i=!1,r;if(!t)return!1;if(r=e[n],(r==="-"||r==="+")&&(r=e[++n]),r==="0"){if(n+1===t)return!0;if(r=e[++n],r==="b"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(r!=="0"&&r!=="1")return!1;i=!0}return i&&r!=="_"}if(r==="x"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(!f0(e.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}if(r==="o"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(!h0(e.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}}if(r==="_")return!1;for(;n<t;n++)if(r=e[n],r!=="_"){if(!g0(e.charCodeAt(n)))return!1;i=!0}return!(!i||r==="_")}function m0(e){var t=e,n=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function y0(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Qe.isNegativeZero(e)}var v0=new Je("tag:yaml.org,2002:int",{kind:"scalar",resolve:p0,construct:m0,predicate:y0,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),x0=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function w0(e){return!(e===null||!x0.test(e)||e[e.length-1]==="_")}function _0(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var b0=/^[-+]?[0-9]+e/;function k0(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Qe.isNegativeZero(e))return"-0.0";return n=e.toString(10),b0.test(n)?n.replace("e",".e"):n}function E0(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Qe.isNegativeZero(e))}var C0=new Je("tag:yaml.org,2002:float",{kind:"scalar",resolve:w0,construct:_0,predicate:E0,represent:k0,defaultStyle:"lowercase"}),S0=i0.extend({implicit:[s0,d0,v0,C0]}),A0=S0,gs=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ps=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function N0(e){return e===null?!1:gs.exec(e)!==null||ps.exec(e)!==null}function M0(e){var t,n,i,r,l,o,s,a=0,u=null,c,h,f;if(t=gs.exec(e),t===null&&(t=ps.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(n,i,r));if(l=+t[4],o=+t[5],s=+t[6],t[7]){for(a=t[7].slice(0,3);a.length<3;)a+="0";a=+a}return t[9]&&(c=+t[10],h=+(t[11]||0),u=(c*60+h)*6e4,t[9]==="-"&&(u=-u)),f=new Date(Date.UTC(n,i,r,l,o,s,a)),u&&f.setTime(f.getTime()-u),f}function T0(e){return e.toISOString()}var P0=new Je("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:N0,construct:M0,instanceOf:Date,represent:T0});function I0(e){return e==="<<"||e===null}var z0=new Je("tag:yaml.org,2002:merge",{kind:"scalar",resolve:I0}),Tr=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function O0(e){if(e===null)return!1;var t,n,i=0,r=e.length,l=Tr;for(n=0;n<r;n++)if(t=l.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function D0(e){var t,n,i=e.replace(/[\r\n=]/g,""),r=i.length,l=Tr,o=0,s=[];for(t=0;t<r;t++)t%4===0&&t&&(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)),o=o<<6|l.indexOf(i.charAt(t));return n=r%4*6,n===0?(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)):n===18?(s.push(o>>10&255),s.push(o>>2&255)):n===12&&s.push(o>>4&255),new Uint8Array(s)}function L0(e){var t="",n=0,i,r,l=e.length,o=Tr;for(i=0;i<l;i++)i%3===0&&i&&(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]),n=(n<<8)+e[i];return r=l%3,r===0?(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]):r===2?(t+=o[n>>10&63],t+=o[n>>4&63],t+=o[n<<2&63],t+=o[64]):r===1&&(t+=o[n>>2&63],t+=o[n<<4&63],t+=o[64],t+=o[64]),t}function H0(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var R0=new Je("tag:yaml.org,2002:binary",{kind:"scalar",resolve:O0,construct:D0,predicate:H0,represent:L0}),Y0=Object.prototype.hasOwnProperty,F0=Object.prototype.toString;function B0(e){if(e===null)return!0;var t=[],n,i,r,l,o,s=e;for(n=0,i=s.length;n<i;n+=1){if(r=s[n],o=!1,F0.call(r)!=="[object Object]")return!1;for(l in r)if(Y0.call(r,l))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(l)===-1)t.push(l);else return!1}return!0}function V0(e){return e!==null?e:[]}var X0=new Je("tag:yaml.org,2002:omap",{kind:"sequence",resolve:B0,construct:V0}),W0=Object.prototype.toString;function K0(e){if(e===null)return!0;var t,n,i,r,l,o=e;for(l=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(i=o[t],W0.call(i)!=="[object Object]"||(r=Object.keys(i),r.length!==1))return!1;l[t]=[r[0],i[r[0]]]}return!0}function Z0(e){if(e===null)return[];var t,n,i,r,l,o=e;for(l=new Array(o.length),t=0,n=o.length;t<n;t+=1)i=o[t],r=Object.keys(i),l[t]=[r[0],i[r[0]]];return l}var q0=new Je("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:K0,construct:Z0}),G0=Object.prototype.hasOwnProperty;function U0(e){if(e===null)return!0;var t,n=e;for(t in n)if(G0.call(n,t)&&n[t]!==null)return!1;return!0}function j0(e){return e!==null?e:{}}var J0=new Je("tag:yaml.org,2002:set",{kind:"mapping",resolve:U0,construct:j0}),Q0=A0.extend({implicit:[P0,z0],explicit:[R0,X0,q0,J0]}),Lt=Object.prototype.hasOwnProperty,hi=1,ms=2,ys=3,gi=4,qi=1,$0=2,Wo=3,ep=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,tp=/[\x85\u2028\u2029]/,np=/[,\[\]\{\}]/,vs=/^(?:!|!!|![a-z\-]+!)$/i,xs=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ko(e){return Object.prototype.toString.call(e)}function wt(e){return e===10||e===13}function Xt(e){return e===9||e===32}function nt(e){return e===9||e===32||e===10||e===13}function $t(e){return e===44||e===91||e===93||e===123||e===125}function ip(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function rp(e){return e===120?2:e===117?4:e===85?8:0}function op(e){return 48<=e&&e<=57?e-48:-1}function Zo(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function lp(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var ws=new Array(256),_s=new Array(256);for(var jt=0;jt<256;jt++)ws[jt]=Zo(jt)?1:0,_s[jt]=Zo(jt);function sp(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Q0,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function bs(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=qg(n),new Ct(t,n)}function $(e,t){throw bs(e,t)}function pi(e,t){e.onWarning&&e.onWarning.call(null,bs(e,t))}var qo={YAML:function(t,n,i){var r,l,o;t.version!==null&&$(t,"duplication of %YAML directive"),i.length!==1&&$(t,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),r===null&&$(t,"ill-formed argument of the YAML directive"),l=parseInt(r[1],10),o=parseInt(r[2],10),l!==1&&$(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&pi(t,"unsupported YAML version of the document")},TAG:function(t,n,i){var r,l;i.length!==2&&$(t,"TAG directive accepts exactly two arguments"),r=i[0],l=i[1],vs.test(r)||$(t,"ill-formed tag handle (first argument) of the TAG directive"),Lt.call(t.tagMap,r)&&$(t,'there is a previously declared suffix for "'+r+'" tag handle'),xs.test(l)||$(t,"ill-formed tag prefix (second argument) of the TAG directive");try{l=decodeURIComponent(l)}catch{$(t,"tag prefix is malformed: "+l)}t.tagMap[r]=l}};function Dt(e,t,n,i){var r,l,o,s;if(t<n){if(s=e.input.slice(t,n),i)for(r=0,l=s.length;r<l;r+=1)o=s.charCodeAt(r),o===9||32<=o&&o<=1114111||$(e,"expected valid JSON character");else ep.test(s)&&$(e,"the stream contains non-printable characters");e.result+=s}}function Go(e,t,n,i){var r,l,o,s;for(Qe.isObject(n)||$(e,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(n),o=0,s=r.length;o<s;o+=1)l=r[o],Lt.call(t,l)||(t[l]=n[l],i[l]=!0)}function en(e,t,n,i,r,l,o,s,a){var u,c;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),u=0,c=r.length;u<c;u+=1)Array.isArray(r[u])&&$(e,"nested arrays are not supported inside keys"),typeof r=="object"&&Ko(r[u])==="[object Object]"&&(r[u]="[object Object]");if(typeof r=="object"&&Ko(r)==="[object Object]"&&(r="[object Object]"),r=String(r),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(l))for(u=0,c=l.length;u<c;u+=1)Go(e,t,l[u],n);else Go(e,t,l,n);else!e.json&&!Lt.call(n,r)&&Lt.call(t,r)&&(e.line=o||e.line,e.lineStart=s||e.lineStart,e.position=a||e.position,$(e,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(t,r,{configurable:!0,enumerable:!0,writable:!0,value:l}):t[r]=l,delete n[r];return t}function Pr(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):$(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Ye(e,t,n){for(var i=0,r=e.input.charCodeAt(e.position);r!==0;){for(;Xt(r);)r===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(t&&r===35)do r=e.input.charCodeAt(++e.position);while(r!==10&&r!==13&&r!==0);if(wt(r))for(Pr(e),r=e.input.charCodeAt(e.position),i++,e.lineIndent=0;r===32;)e.lineIndent++,r=e.input.charCodeAt(++e.position);else break}return n!==-1&&i!==0&&e.lineIndent<n&&pi(e,"deficient indentation"),i}function Mi(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||nt(n)))}function Ir(e,t){t===1?e.result+=" ":t>1&&(e.result+=Qe.repeat(`
`,t-1))}function ap(e,t,n){var i,r,l,o,s,a,u,c,h=e.kind,f=e.result,g;if(g=e.input.charCodeAt(e.position),nt(g)||$t(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(r=e.input.charCodeAt(e.position+1),nt(r)||n&&$t(r)))return!1;for(e.kind="scalar",e.result="",l=o=e.position,s=!1;g!==0;){if(g===58){if(r=e.input.charCodeAt(e.position+1),nt(r)||n&&$t(r))break}else if(g===35){if(i=e.input.charCodeAt(e.position-1),nt(i))break}else{if(e.position===e.lineStart&&Mi(e)||n&&$t(g))break;if(wt(g))if(a=e.line,u=e.lineStart,c=e.lineIndent,Ye(e,!1,-1),e.lineIndent>=t){s=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=a,e.lineStart=u,e.lineIndent=c;break}}s&&(Dt(e,l,o,!1),Ir(e,e.line-a),l=o=e.position,s=!1),Xt(g)||(o=e.position+1),g=e.input.charCodeAt(++e.position)}return Dt(e,l,o,!1),e.result?!0:(e.kind=h,e.result=f,!1)}function cp(e,t){var n,i,r;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=r=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Dt(e,i,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)i=e.position,e.position++,r=e.position;else return!0;else wt(n)?(Dt(e,i,r,!0),Ir(e,Ye(e,!1,t)),i=r=e.position):e.position===e.lineStart&&Mi(e)?$(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);$(e,"unexpected end of the stream within a single quoted scalar")}function up(e,t){var n,i,r,l,o,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return Dt(e,n,e.position,!0),e.position++,!0;if(s===92){if(Dt(e,n,e.position,!0),s=e.input.charCodeAt(++e.position),wt(s))Ye(e,!1,t);else if(s<256&&ws[s])e.result+=_s[s],e.position++;else if((o=rp(s))>0){for(r=o,l=0;r>0;r--)s=e.input.charCodeAt(++e.position),(o=ip(s))>=0?l=(l<<4)+o:$(e,"expected hexadecimal character");e.result+=lp(l),e.position++}else $(e,"unknown escape sequence");n=i=e.position}else wt(s)?(Dt(e,n,i,!0),Ir(e,Ye(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Mi(e)?$(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}$(e,"unexpected end of the stream within a double quoted scalar")}function dp(e,t){var n=!0,i,r,l,o=e.tag,s,a=e.anchor,u,c,h,f,g,y=Object.create(null),k,v,_,m;if(m=e.input.charCodeAt(e.position),m===91)c=93,g=!1,s=[];else if(m===123)c=125,g=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),m=e.input.charCodeAt(++e.position);m!==0;){if(Ye(e,!0,t),m=e.input.charCodeAt(e.position),m===c)return e.position++,e.tag=o,e.anchor=a,e.kind=g?"mapping":"sequence",e.result=s,!0;n?m===44&&$(e,"expected the node content, but found ','"):$(e,"missed comma between flow collection entries"),v=k=_=null,h=f=!1,m===63&&(u=e.input.charCodeAt(e.position+1),nt(u)&&(h=f=!0,e.position++,Ye(e,!0,t))),i=e.line,r=e.lineStart,l=e.position,hn(e,t,hi,!1,!0),v=e.tag,k=e.result,Ye(e,!0,t),m=e.input.charCodeAt(e.position),(f||e.line===i)&&m===58&&(h=!0,m=e.input.charCodeAt(++e.position),Ye(e,!0,t),hn(e,t,hi,!1,!0),_=e.result),g?en(e,s,y,v,k,_,i,r,l):h?s.push(en(e,null,y,v,k,_,i,r,l)):s.push(k),Ye(e,!0,t),m=e.input.charCodeAt(e.position),m===44?(n=!0,m=e.input.charCodeAt(++e.position)):n=!1}$(e,"unexpected end of the stream within a flow collection")}function fp(e,t){var n,i,r=qi,l=!1,o=!1,s=t,a=0,u=!1,c,h;if(h=e.input.charCodeAt(e.position),h===124)i=!1;else if(h===62)i=!0;else return!1;for(e.kind="scalar",e.result="";h!==0;)if(h=e.input.charCodeAt(++e.position),h===43||h===45)qi===r?r=h===43?Wo:$0:$(e,"repeat of a chomping mode identifier");else if((c=op(h))>=0)c===0?$(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?$(e,"repeat of an indentation width identifier"):(s=t+c-1,o=!0);else break;if(Xt(h)){do h=e.input.charCodeAt(++e.position);while(Xt(h));if(h===35)do h=e.input.charCodeAt(++e.position);while(!wt(h)&&h!==0)}for(;h!==0;){for(Pr(e),e.lineIndent=0,h=e.input.charCodeAt(e.position);(!o||e.lineIndent<s)&&h===32;)e.lineIndent++,h=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>s&&(s=e.lineIndent),wt(h)){a++;continue}if(e.lineIndent<s){r===Wo?e.result+=Qe.repeat(`
`,l?1+a:a):r===qi&&l&&(e.result+=`
`);break}for(i?Xt(h)?(u=!0,e.result+=Qe.repeat(`
`,l?1+a:a)):u?(u=!1,e.result+=Qe.repeat(`
`,a+1)):a===0?l&&(e.result+=" "):e.result+=Qe.repeat(`
`,a):e.result+=Qe.repeat(`
`,l?1+a:a),l=!0,o=!0,a=0,n=e.position;!wt(h)&&h!==0;)h=e.input.charCodeAt(++e.position);Dt(e,n,e.position,!1)}return!0}function Uo(e,t){var n,i=e.tag,r=e.anchor,l=[],o,s=!1,a;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),a=e.input.charCodeAt(e.position);a!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,$(e,"tab characters must not be used in indentation")),!(a!==45||(o=e.input.charCodeAt(e.position+1),!nt(o))));){if(s=!0,e.position++,Ye(e,!0,-1)&&e.lineIndent<=t){l.push(null),a=e.input.charCodeAt(e.position);continue}if(n=e.line,hn(e,t,ys,!1,!0),l.push(e.result),Ye(e,!0,-1),a=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&a!==0)$(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return s?(e.tag=i,e.anchor=r,e.kind="sequence",e.result=l,!0):!1}function hp(e,t,n){var i,r,l,o,s,a,u=e.tag,c=e.anchor,h={},f=Object.create(null),g=null,y=null,k=null,v=!1,_=!1,m;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=h),m=e.input.charCodeAt(e.position);m!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,$(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),l=e.line,(m===63||m===58)&&nt(i))m===63?(v&&(en(e,h,f,g,y,null,o,s,a),g=y=k=null),_=!0,v=!0,r=!0):v?(v=!1,r=!0):$(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,m=i;else{if(o=e.line,s=e.lineStart,a=e.position,!hn(e,n,ms,!1,!0))break;if(e.line===l){for(m=e.input.charCodeAt(e.position);Xt(m);)m=e.input.charCodeAt(++e.position);if(m===58)m=e.input.charCodeAt(++e.position),nt(m)||$(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(en(e,h,f,g,y,null,o,s,a),g=y=k=null),_=!0,v=!1,r=!1,g=e.tag,y=e.result;else if(_)$(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=c,!0}else if(_)$(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=c,!0}if((e.line===l||e.lineIndent>t)&&(v&&(o=e.line,s=e.lineStart,a=e.position),hn(e,t,gi,!0,r)&&(v?y=e.result:k=e.result),v||(en(e,h,f,g,y,k,o,s,a),g=y=k=null),Ye(e,!0,-1),m=e.input.charCodeAt(e.position)),(e.line===l||e.lineIndent>t)&&m!==0)$(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&en(e,h,f,g,y,null,o,s,a),_&&(e.tag=u,e.anchor=c,e.kind="mapping",e.result=h),_}function gp(e){var t,n=!1,i=!1,r,l,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&$(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(n=!0,o=e.input.charCodeAt(++e.position)):o===33?(i=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",t=e.position,n){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(l=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):$(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!nt(o);)o===33&&(i?$(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),vs.test(r)||$(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);l=e.input.slice(t,e.position),np.test(l)&&$(e,"tag suffix cannot contain flow indicator characters")}l&&!xs.test(l)&&$(e,"tag name cannot contain such characters: "+l);try{l=decodeURIComponent(l)}catch{$(e,"tag name is malformed: "+l)}return n?e.tag=l:Lt.call(e.tagMap,r)?e.tag=e.tagMap[r]+l:r==="!"?e.tag="!"+l:r==="!!"?e.tag="tag:yaml.org,2002:"+l:$(e,'undeclared tag handle "'+r+'"'),!0}function pp(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&$(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!nt(n)&&!$t(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&$(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function mp(e){var t,n,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!nt(i)&&!$t(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&$(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Lt.call(e.anchorMap,n)||$(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Ye(e,!0,-1),!0}function hn(e,t,n,i,r){var l,o,s,a=1,u=!1,c=!1,h,f,g,y,k,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,l=o=s=gi===n||ys===n,i&&Ye(e,!0,-1)&&(u=!0,e.lineIndent>t?a=1:e.lineIndent===t?a=0:e.lineIndent<t&&(a=-1)),a===1)for(;gp(e)||pp(e);)Ye(e,!0,-1)?(u=!0,s=l,e.lineIndent>t?a=1:e.lineIndent===t?a=0:e.lineIndent<t&&(a=-1)):s=!1;if(s&&(s=u||r),(a===1||gi===n)&&(hi===n||ms===n?k=t:k=t+1,v=e.position-e.lineStart,a===1?s&&(Uo(e,v)||hp(e,v,k))||dp(e,k)?c=!0:(o&&fp(e,k)||cp(e,k)||up(e,k)?c=!0:mp(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&$(e,"alias node should not have any properties")):ap(e,k,hi===n)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):a===0&&(c=s&&Uo(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&$(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),h=0,f=e.implicitTypes.length;h<f;h+=1)if(y=e.implicitTypes[h],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Lt.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,g=e.typeMap.multi[e.kind||"fallback"],h=0,f=g.length;h<f;h+=1)if(e.tag.slice(0,g[h].tag.length)===g[h].tag){y=g[h];break}y||$(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&$(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):$(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function yp(e){var t=e.position,n,i,r,l=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Ye(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(l=!0,o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!nt(o);)o=e.input.charCodeAt(++e.position);for(i=e.input.slice(n,e.position),r=[],i.length<1&&$(e,"directive name must not be less than one character in length");o!==0;){for(;Xt(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!wt(o));break}if(wt(o))break;for(n=e.position;o!==0&&!nt(o);)o=e.input.charCodeAt(++e.position);r.push(e.input.slice(n,e.position))}o!==0&&Pr(e),Lt.call(qo,i)?qo[i](e,i,r):pi(e,'unknown document directive "'+i+'"')}if(Ye(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Ye(e,!0,-1)):l&&$(e,"directives end mark is expected"),hn(e,e.lineIndent-1,gi,!1,!0),Ye(e,!0,-1),e.checkLineBreaks&&tp.test(e.input.slice(t,e.position))&&pi(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Mi(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Ye(e,!0,-1));return}if(e.position<e.length-1)$(e,"end of the stream or a document separator is expected");else return}function ks(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new sp(e,t),i=e.indexOf("\0");for(i!==-1&&(n.position=i,$(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)yp(n);return n.documents}function vp(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var i=ks(e,n);if(typeof t!="function")return i;for(var r=0,l=i.length;r<l;r+=1)t(i[r])}function xp(e,t){var n=ks(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new Ct("expected a single document in the stream, but found more")}}var wp=vp,_p=xp,bp={loadAll:wp,load:_p},kp=bp.load;function Ep(e){return new URL("brain.yaml",e).toString()}async function Cp(){const e=Ep(window.location.href);try{const t=await fetch(e);if(t.ok){const n=await t.text();return kp(n)}else throw new Error("Failed to fetch YAML data")}catch(t){throw console.error("Error fetching or parsing YAML data:",t),t}}const Sp=e=>{const t=[];let n=[];const i=(o,s,a,u=0)=>{if(typeof s!="object"||s===null)return;const{name:c,icon:h,description:f,...g}=s;if(c){const y=o;t.push({type:Object.keys(g).length===0?"customNode":"default",id:y,level:u,position:{x:0,y:0},data:{label:h+c,icon:h,description:f||""}}),a&&n.push({id:`${a}-${y}`,type:"simplebezier",source:a,target:y,label:""})}for(const y in g)y!=="relationships"&&i(y,g[y],o,u++)},r=(o,s)=>{if(!(typeof s!="object"||s===null)){s.relationships&&s.relationships.forEach(a=>{const u=o,c=a.end;if(!u||!c){console.warn(`Skipping relationship: ${o} -> ${a.end} (one or both nodes missing)`);return}n.push({id:`${u}-${c}`,type:"default",source:u,target:c,label:a.description})});for(const a in s)r(a,s[a])}},l=()=>{const o={},s=(c,h)=>{o[c]===void 0&&(o[c]=h,n.filter(f=>f.source===c).forEach(f=>s(f.target,h+1)))};t.filter(c=>!n.some(h=>h.target===c.id)).forEach(c=>s(c.id,0));const u={};t.forEach((c,h)=>{const f=o[c.id]||c.level,g=(u[f]||c.level)*300,y=f*100+h*50;c.position={x:g,y},u[f]=(u[f]||0)+1})};return i("root",e,void 0),r("root",e),l(),console.log("temp-edges",t.length,n.length),{nodes:t,edges:n}};var Ap=be("<button>delete</button> <button>copy</button> <button>expand</button>",1),Np=be('<!> <div class="node bg-slate-500 p-4 rounded-md text-white"><div> </div> <!> <!></div>',1);function Mp(e,t){ae(t,!1);let n=p(t,"data",8);console.log("cn-data",n()),ue();var i=Np(),r=Te(i);Og(r,{children:(c,h)=>{var f=Ap();On(4),Q(c,f)},$$slots:{default:!0}});var l=xe(r,2),o=Ee(l),s=Ee(o,!0);we(o);var a=xe(o,2);fn(a,{type:"target",get position(){return oe.Left}});var u=xe(a,2);fn(u,{type:"source",get position(){return oe.Right}}),we(l),pe(()=>gn(s,n().label)),Q(e,i),ce()}var Tp=be("<!> <!> <!>",1),Pp=be('<div class="w-full h-screen"><!></div>');function Ip(e,t){ae(t,!1);let n=ee([]),i=ee([]);const r={customNode:Mp};function l(a){console.log(`nc: ${a.detail.node.data.description}`)}Dn(async()=>{try{const a=await Cp();console.log("data",Object.keys(a));const u=Sp(a);n.update(c=>u.nodes),i.update(c=>u.edges)}catch(a){console.error("Error fetching or parsing YAML data:",a)}}),ue();var o=Pp(),s=Ee(o);rg(s,{nodes:n,edges:i,nodeTypes:r,$$events:{nodeclick:l},children:(a,u)=>{var c=Tp(),h=Te(c);Cg(h,{bgColor:"#ccc",get variant(){return Mt.Dots}});var f=xe(h,2);vg(f,{children:(y,k)=>{kn(y,{$$events:{click:()=>console.log("")},children:(v,_)=>{On();var m=jo("");Q(v,m)},$$slots:{default:!0}})},$$slots:{default:!0}});var g=xe(f,2);Pg(g,{nodeStrokeWidth:3}),Q(a,c)},$$slots:{default:!0}}),we(o),Q(e,o),ce()}var zp=be('<!> <div class="bg-slate-100"><!></div>',1);function qp(e,t){var n=zp(),i=Te(n);Oe(i,()=>wa,o=>{var s=lt(),a=Te(s);je(a,t,"default",{}),Q(o,s)});var r=xe(i,2),l=Ee(r);Ip(l,{}),we(r),Q(e,n)}export{qp as component};
